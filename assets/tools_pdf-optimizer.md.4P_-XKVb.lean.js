const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/call-lusBi33f.B10JLj9t.js","assets/chunks/framework.6Y5hX2by.js","assets/chunks/defu.CMw4_7D2.js"])))=>i.map(i=>d[i]);
import{Z as S,r as y,l as W,y as N,z as I,c as k,m as r,p as i,K as p,w as d,aa as B,G as C,o as g,b as n,n as $,a4 as G,f as x,h as j}from"./chunks/framework.6Y5hX2by.js";import{_ as F}from"./chunks/Button.vue_vue_type_script_setup_true_lang.B59AAZY4.js";/* empty css                                                      */import{_ as M}from"./chunks/PdfViewer.vue_vue_type_style_index_0_lang.C8lifx7Z.js";import{_ as A}from"./chunks/Dropzone.vue_vue_type_script_setup_true_lang.C3-UswHS.js";/* empty css                                                        */import{_ as K,I as Z}from"./chunks/32.DzczksCk.js";import{_ as E}from"./chunks/Heading.vue_vue_type_script_setup_true_lang.HP4vR6J5.js";/* empty css                                                       */import{_ as J}from"./chunks/Caption.vue_vue_type_script_setup_true_lang.TXIAR0cD.js";/* empty css                                                       */import{s as Y,h as q}from"./chunks/index.vrtaAzUc.js";import{_ as H}from"./chunks/Banner.vue_vue_type_script_setup_true_lang.Ck6PxK7M.js";/* empty css                                                      */import{u as O}from"./chunks/use-preview.DNVuedeY.js";import"./chunks/index.DvWHfs5K.js";import"./chunks/SpinnerRinggo.vue_vue_type_script_setup_true_lang.DykR2Iav.js";import"./chunks/index.D7ZYpU3A.js";import"./chunks/use-idle.BmPBDjGc.js";import"./chunks/focus.DWrlVhv-.js";import"./chunks/commonjsHelpers.BosuxZz1.js";import"./chunks/index.DUP7z69l.js";import"./chunks/debounce.CE-8mXQa.js";import"./chunks/isObject.C3e4t58V.js";import"./chunks/baseGetTag.Cu32HCTk.js";import"./chunks/toNumber.Dcxq_36h.js";import"./chunks/isSymbol.BOom9x27.js";import"./chunks/isObjectLike.nLWjQ9zq.js";import"./chunks/toInteger.NZnbAWM7.js";import"./chunks/toString.CQAYsbsy.js";import"./chunks/isArray.Dxzbedgu.js";import"./chunks/noop.DX6rZLP_.js";import"./chunks/20.BzINy7eJ.js";import"./chunks/20.DzlIyFO7.js";import"./chunks/Divider.vue_vue_type_script_setup_true_lang.Cq27IVN2.js";/* empty css                                                       */import"./chunks/Select.vue_vue_type_style_index_0_lang.CeCszFrk.js";import"./chunks/Dropdown.vue_vue_type_script_setup_true_lang.CTUSEio-.js";import"./chunks/Dropdown.vue_vue_type_style_index_0_lang.CWoNl0qr.js";import"./chunks/use-focus.BMEofKAE.js";import"./chunks/floating-ui.dom.Bv9LQ7l_.js";import"./chunks/index.Dj1ejEfO.js";import"./chunks/DropdownHeader.vue_vue_type_style_index_0_lang.K8nrQHeJ.js";import"./chunks/Subheading.vue_vue_type_style_index_0_lang.BvE6qwlU.js";import"./chunks/Input.vue_vue_type_script_setup_true_lang.N6XBwyLz.js";import"./chunks/20.DCfedyZI.js";import"./chunks/accept.6g-OpsWF.js";/* empty css                                                     */import"./chunks/Text.vue_vue_type_style_index_0_lang.CgZqdEJu.js";import"./chunks/Label.vue_vue_type_script_setup_true_lang.KJh4Hbva.js";import"./chunks/Dot.vue_vue_type_script_setup_true_lang.B0k6diqo.js";/* empty css                                                   */import"./chunks/16.C9pgZF1n.js";/* empty css                                                     */import"./chunks/20.DEYQKeYT.js";import"./chunks/20.D7CPUGC_.js";import"./chunks/IconCheckbox.CYGJNJOH.js";import"./chunks/SpinnerRing.vue_vue_type_script_setup_true_lang.CqmrK-4H.js";import"./chunks/value.C5X7htjv.js";import"./chunks/adapter.RMQuLGay.js";import"./chunks/use-loading.5Tduw_mY.js";import"./chunks/defu.CMw4_7D2.js";import"./chunks/isNil.CHIgUVhi.js";import"./chunks/theme.BTm0KAQr.js";import"./chunks/base64.CRVHLH2y.js";import"./chunks/use-singleton.DFe3QzR2.js";import"./chunks/queue.DLTVddtq.js";/* empty css                                                       */import"./chunks/20.D77aUT_8.js";import"./chunks/20.rP__aKsP.js";import"./chunks/create-image.CkAV8b2h.js";import"./chunks/avatar.qWHUbXZ4.js";import"./chunks/color-hash.CY8Op1ql.js";const Q={useWorker:typeof window<"u"&&!!window.Worker};function X(){return Q}function T(l){let e=l;const s=new Set;return{get value(){return e},set value(a){e=a;for(const f of s)f(a)},change(a){return s.add(a),()=>{s.delete(a)}},toBe(a){return new Promise(f=>{const w=this.change(h=>{h===a&&(w(),f())})})}}}const L=T(),z=T(!1);async function ee(){if(z.value&&await z.toBe(!1),!L.value){z.value=!0;try{const{default:l}=await S(async()=>{const{default:e}=await import("./chunks/worker-DSU9kkV3.BInE4CAo.js");return{default:e}},[]);L.value=new l({name:"rpc-worker"})}finally{z.value=!1}}return L.value}async function te(l,e){const s=Date.now(),a=await ee();return await new Promise((f,w)=>{const h=m=>{m.data.id===s&&(b(),m.data.error?w(m.data.error):f(m.data.result))},u=m=>{b(),w(m)},b=()=>{a.removeEventListener("message",h),a.removeEventListener("error",u)};a.addEventListener("message",h),a.addEventListener("error",u),a.postMessage({id:s,name:l,args:e})})}async function oe(l,e){return(await S(async()=>{const{callRPC:s}=await import("./chunks/call-lusBi33f.B10JLj9t.js");return{callRPC:s}},__vite__mapDeps([0,1,2]))).callRPC(l,e)}async function re(l,e){return X().useWorker?te(l,e):oe(l,e)}const se=async(...l)=>await re("optimizePDF",l),ae={class:"flex w-full min-h-screen"},ie={key:0,class:"flex items-center justify-center w-full min-h-screen"},ne={class:"w-1/3 p-6 text-center"},le={class:"mb-4"},ce=r("br",null,null,-1),pe=r("strong",null,"Please take it at your own risk",-1),de=["onClick"],me=r("a",{class:"hover:underline decoration-dashed",href:"https://github.com/privy-open-source/ghoulscript",target:"_blank"},[r("b",null,"Ghoulscript")],-1),ue={class:"w-full border border-default dark:border-dark-default"},fe={class:"flex p-2"},_e={class:"flex-grow"},ve={class:"w-full border dark:border-dark-default"},he={class:"flex p-2"},we={class:"flex-grow"},ye={key:0},Wt=JSON.parse('{"title":"","description":"","frontmatter":{"layout":false},"headers":[],"relativePath":"tools/pdf-optimizer.md","filePath":"tools/pdf-optimizer.md"}'),ke={name:"tools/pdf-optimizer.md"},Nt=Object.assign(ke,{setup(l){const e=y(),s=y(),a=y(),f=y(),w=O(e),h=O(s),u=y(),b=y(),m=W(()=>{if(e.value&&s.value)return Math.round((s.value.size-e.value.size)/e.value.size*100)});N(e,async c=>{if(c)try{Y();const t=performance.now(),o=await se(c,{noTransparency:!1}),_=e.value.name.replace(".pdf",".compressed.pdf");s.value=new File([o],_,{type:"application/pdf"}),b.value=(performance.now()-t)/1e3}finally{q()}}),I(c=>{var _,v;const t=(_=a.value)==null?void 0:_.container,o=(v=f.value)==null?void 0:v.container;if(t&&o){const P=()=>V(t,o),R=()=>V(o,t);t.addEventListener("scroll",P,{passive:!0}),o.addEventListener("scroll",R,{passive:!0}),c(()=>{t.removeEventListener("scroll",P),o.removeEventListener("scroll",R)})}});function V(c,t){t.scrollLeft=c.scrollLeft,t.scrollTop=c.scrollTop}function D(c,t=2,o=1024){if(c===0)return"0 Bytes";const _=[`${c>1?"Bytes":"Byte"}`,"KB","MB","GB","TB","PB","EB","ZB","YB"],v=Math.floor(Math.log(c)/Math.log(o));return`${Number.parseFloat((c/Math.pow(o,v)).toFixed(t))} ${_[v]}`}function U(){e.value=void 0,s.value=void 0}return(c,t)=>(g(),k("div",null,[r("div",ae,[i(s)?(g(),k(C,{key:1},[r("div",ue,[p(M,{scale:i(u),"onUpdate:scale":t[1]||(t[1]=o=>B(u)?u.value=o:null),ref_key:"inputViewer",ref:a,src:i(w),layout:"fit"},{header:d(()=>[r("div",fe,[r("div",_e,[n(" Original Size: "),r("b",null,x(D(i(e).size)),1),n("  ")]),p(F,{size:"xs",onClick:U},{default:d(()=>[n(" Close ")]),_:1})])]),_:1},8,["scale","src"])]),r("div",ve,[p(M,{scale:i(u),"onUpdate:scale":t[2]||(t[2]=o=>B(u)?u.value=o:null),ref_key:"outputViewer",ref:f,src:i(h),layout:"fit"},{header:d(()=>[r("div",he,[r("div",we,[n(" Compressed Size: "),r("b",null,x(D(i(s).size)),1),n("  "),r("span",{class:$(i(m)<0?"text-green-50":"text-red-50")},[i(m)>0?(g(),k("span",ye,"+")):j("",!0),n("("+x(i(m))+"%) ",1)],2),n(" Duration: "+x(i(b).toFixed(2))+"s ",1)]),p(F,{href:i(h),download:i(s).name,color:"info",size:"xs"},{default:d(()=>[n(" Download Compressed ")]),_:1},8,["href","download"])])]),_:1},8,["scale","src"])])],64)):(g(),k("div",ie,[r("div",ne,[r("div",le,[p(E,{element:"h3"},{default:d(()=>[n(" PDF Optimizer ")]),_:1})]),p(A,{modelValue:i(e),"onUpdate:modelValue":t[0]||(t[0]=o=>B(e)?e.value=o:null),accept:"application/pdf"},{default:d(({isDragover:o,isHovered:_,model:v,browse:P})=>[r("div",{class:$(["flex flex-col items-center justify-center w-full p-6 space-y-3 border-2 border-dashed rounded aspect-video",[o?"bg-info dark:bg-dark-info border-info-emphasis dark:border-dark-info-emphasis":"bg-default dark:bg-dark-default border-default dark:border-dark-default"]])},[p(H,{variant:"danger",class:"text-start"},{default:d(()=>[n(" Some content may be lost during compressing."),ce,pe]),_:1}),p(K,{active:o||_},{default:d(()=>[p(Z,{class:"w-20 h-20 my-5 fill-info-emphasis dark:fill-dark-info-emphasis"})]),_:2},1032,["active"]),p(E,{element:"h5"},{default:d(()=>[n(" Upload Document ")]),_:1}),p(E,{element:"h6",class:"line-clamp-1"},{default:d(()=>[v?(g(),k(C,{key:1},[n(x(v.name),1)],64)):(g(),k(C,{key:0},[n(" Drag your document here or click "),r("a",{class:"text-info hover:underline",href:"#",onClick:G(P,["prevent"])},"Browse",8,de)],64))]),_:2},1024)],2)]),_:1},8,["modelValue"]),p(J,{class:"my-4"},{default:d(()=>[n(" Powered by: "),me]),_:1})])]))])]))}});export{Wt as __pageData,Nt as default};
