import{_ as X,o as u,c as C,p as h,d as es,ac as as,r as x,l as N,m as ts,ad as is,ab as ns,q as a,g as B,K as l,w as c,t as Y,T as ls,f as O,a as rs,n as os,Z as hs,aa as f,b as D,F as ds,a8 as J}from"./chunks/framework.AUcs5FuE.js";import{_ as U}from"./chunks/Button.vue_vue_type_script_setup_true_lang.hoS66mrZ.js";import"./chunks/Button.vue_vue_type_style_index_0_lang.w40geAFS.js";import{u as ps}from"./chunks/index.xJmTuMl2.js";import{f as Q}from"./chunks/base64.sP9_YaTt.js";import{u as cs,a as ks,b as us}from"./chunks/index.7BKlIwG_.js";import{a as K}from"./chunks/index.w9jXdyYU.js";import{d as Es}from"./chunks/defu.3rjBFRnm.js";import{v as gs}from"./chunks/index.nZll7C-_.js";import{u as ms}from"./chunks/index.y_Gos51Z.js";import{_ as _s}from"./chunks/Banner.vue_vue_type_script_setup_true_lang.M7NQaia3.js";import"./chunks/Banner.vue_vue_type_style_index_0_lang.w40geAFS.js";import"./chunks/index.hjpy5ZnQ.js";import"./chunks/SpinnerRinggo.vue_vue_type_script_setup_true_lang.0qAYSwsc.js";import"./chunks/use-singleton.1czHLXLF.js";import"./chunks/queue.-V8fDHS_.js";import"./chunks/Input.vue_vue_type_script_setup_true_lang.QQ5zsadJ.js";import"./chunks/20.AIToDeyo.js";import"./chunks/accept._rvVzN4h.js";import"./chunks/Input.vue_vue_type_style_index_0_lang.w40geAFS.js";import"./chunks/FormGroup.vue_vue_type_style_index_0_lang.xMbX48On.js";import"./chunks/20.NTNNhV4T.js";import"./chunks/Caption.vue_vue_type_script_setup_true_lang.cEGPjFxU.js";import"./chunks/Caption.vue_vue_type_style_index_0_lang.w40geAFS.js";import"./chunks/index.ayxZtzvf.js";import"./chunks/index.VjAYmBuc.js";import"./chunks/20.l4GYLcrN.js";import"./chunks/16.dM3YI0iS.js";const ys={},vs={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",class:"persona-icon",viewBox:"0 0 16 16"},fs=h("path",{fill:"currentColor",d:"M5.743 2.44A6 6 0 0 1 14 7.935a.5.5 0 0 0 1-.01A7 7 0 0 0 2.722 3.401V1.5a.5.5 0 1 0-1 0v2.889a.5.5 0 0 0 .5.5h2.89a.5.5 0 1 0 0-1H3.63A6 6 0 0 1 5.743 2.44M9.945 13.676a6 6 0 0 1-7.944-5.755.5.5 0 0 0-1-.013 7 7 0 0 0 12.277 4.69V14.5a.5.5 0 1 0 1 0v-2.889a.5.5 0 0 0-.5-.5h-2.889a.5.5 0 0 0 0 1h1.482a6 6 0 0 1-2.426 1.565"},null,-1),bs=[fs];function As(e,s){return u(),C("svg",vs,bs)}const Cs=X(ys,[["render",As]]),ws={},xs={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",class:"persona-icon",viewBox:"0 0 24 24"},Ts=h("path",{fill:"currentColor","fill-rule":"evenodd",d:"M12 9.171a3.85 3.85 0 0 0-3.846 3.858A3.85 3.85 0 0 0 12 16.886a3.85 3.85 0 0 0 3.846-3.857A3.85 3.85 0 0 0 12 9.17M9.692 13.03A2.31 2.31 0 0 1 12 10.714a2.31 2.31 0 0 1 2.308 2.315A2.31 2.31 0 0 1 12 15.343a2.31 2.31 0 0 1-2.308-2.314","clip-rule":"evenodd"},null,-1),Fs=h("path",{fill:"currentColor","fill-rule":"evenodd",d:"M10.798 3c-.748 0-1.465.298-1.994.829l-2.25 2.257h-.708A3.85 3.85 0 0 0 2 9.943v7.2A3.85 3.85 0 0 0 5.846 21h12.308A3.85 3.85 0 0 0 22 17.143v-7.2a3.85 3.85 0 0 0-3.846-3.857h-.707l-2.251-2.258A2.82 2.82 0 0 0 13.202 3zm-.906 1.92a1.28 1.28 0 0 1 .906-.377h2.404c.34 0 .666.135.906.376l2.476 2.484c.145.144.34.226.544.226h1.026a2.31 2.31 0 0 1 2.308 2.314v7.2a2.31 2.31 0 0 1-2.308 2.314H5.846a2.31 2.31 0 0 1-2.307-2.314v-7.2a2.31 2.31 0 0 1 2.307-2.314h1.026c.204 0 .4-.082.544-.226z","clip-rule":"evenodd"},null,-1),Ps=[Ts,Fs];function Ss(e,s){return u(),C("svg",xs,Ps)}const G=X(ws,[["render",Ss]]),Ds={},qs={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",class:"persona-icon",viewBox:"0 0 24 24"},Is=h("path",{fill:"currentColor",d:"M4.564 2.77a.77.77 0 0 0-1.538 0v4.102a.77.77 0 0 0 .769.769h4.102a.77.77 0 1 0 0-1.538H5.932a8.461 8.461 0 1 1-2.393 5.804.77.77 0 0 0-1.538-.017 10 10 0 1 0 2.563-6.576z"},null,-1),Bs=[Is];function Vs(e,s){return u(),C("svg",qs,Bs)}const Ms=X(Ds,[["render",Vs]]),Rs="/design-system/assets/shutter.HZ1ql8DV.wav";function H(e,s=!1){const t=document.createElement("canvas"),i=t.getContext("2d");return t.width=e.videoWidth,t.height=e.videoHeight,s?(i.save(),i.scale(-1,1),i.drawImage(e,0,0,t.width*-1,t.height),i.restore()):i.drawImage(e,0,0,t.width,t.height),t.toDataURL("image/jpeg")}const $s={meta:{facingMode:"environment"},run({video:e,meta:s,modifier:t}){const i=!!(s.value.mirror&&s.value.mirror!=="preview"),r=H(e.value,i),o=t.value.base64?r:Q(r);return{preview:r,result:o}}},Ns=["data-deviceid"],Os=[".srcObject"],Us=["src"],Hs={key:2,"data-testid":"camera-off",class:"camera__off-info"},Ls={class:"camera__mask-container"},js={key:0,"data-testid":"camera-mask",class:"camera__mask"},Ys={"data-testid":"camera-toast",class:"camera__toast-text"},Qs={class:"camera__controls"},Xs=["src","muted"],v=es({__name:"Camera",props:{modelValue:{type:[globalThis.File,String,Array],default:""},modelModifiers:{type:Object,default:()=>({})},mirror:{type:[Boolean,String],default:void 0},mask:{type:String,default:void 0},adapter:{type:Object,default:$s},facingMode:{type:String,default:void 0},silent:{type:Boolean,default:!1}},emits:["update:modelValue","result","change","start"],setup(e,{expose:s,emit:t}){const i=e,r=t,o=ps(i),p=as(i,"modelModifiers"),E=x(!1),n=x(!1),b=x(""),A=x(""),g=x(),k=x(),_=cs("camera",{controls:!0}),S=x(0),y=N(()=>Es({mirror:i.mirror,mask:i.mask,facingMode:i.facingMode},i.adapter.meta,{autoStart:!1})),{videoInputs:w}=ks({requestPermissions:!1,constraints:{video:{facingMode:y.value.facingMode}}}),q=N(()=>{var d,m;return(m=(d=w.value)==null?void 0:d.at(S.value))==null?void 0:m.deviceId}),V=N(()=>({video:{deviceId:q.value},audio:!1})),{stream:T,start:M,stop:R,enabled:F}=us({constraints:V}),$=N(()=>{const d=[];return y.value.mirror&&d.push("camera--mirror"),y.value.mask?d.push(`camera__mask--${y.value.mask}`):d.push("camera__mask--none"),d});async function I(){var d;_.state.value==="denied"&&await K({title:"Camera Access Blocked",text:"Privy need to access your internal camera to process this journey",confirm:{text:"Ok"},footerAlign:"end"}),_.state.value==="prompt"&&await K({title:"Camera Access Required",text:"Privy need to access your internal camera to process this journey",confirm:{text:"Ok"},footerAlign:"end"}),await M(),typeof((d=k.value)==null?void 0:d.play)=="function"&&await k.value.play()}function z(){S.value=(S.value+1)%w.value.length}function L(d){A.value=d}async function j(){var m;E.value=!0;const d=await i.adapter.run({video:k,toast:L,stream:T,meta:y,modifier:p});b.value=d.preview,o.value=d.result,n.value=!0,E.value=!1,F.value=!1,r("result",d.result),r("change",d.result),typeof((m=g.value)==null?void 0:m.play)=="function"&&g.value.play()}async function W(){F.value=!0,n.value=!1,b.value="",A.value=""}function ss(){r("start",T.value),y.value.autoStart&&j()}return ts(async()=>{_.isSupported&&(await ms(_.state).not.toBeUndefined(),await I())}),is(()=>{R()}),s({take:j,retake:W,toast:L,toggle:z}),(d,m)=>ns((u(),C("div",{class:os(["camera",a($)]),"data-testid":"camera","data-deviceid":a(q)},[a(T)?(u(),C("video",{key:0,ref_key:"video",ref:k,"data-testid":"camera-video",".srcObject":a(T),class:"camera__video",autoplay:"",muted:"",playsinline:"",onPlay:ss},null,40,Os)):B("",!0),a(n)&&!a(T)?(u(),C("img",{key:1,"data-testid":"camera-result",class:"camera__result",src:a(b),alt:"camera-result"},null,8,Us)):B("",!0),!a(F)&&!a(n)?(u(),C("span",Hs," Camera is off ")):B("",!0),h("div",Ls,[a(n)?B("",!0):(u(),C("div",js))]),l(ls,{name:"slide-up"},{default:c(()=>[a(A)?(u(),C("div",{key:a(A),class:"camera__toast"},[h("div",Ys,Y(a(A)),1)])):B("",!0)]),_:1}),h("div",Qs,[a(w).length>1&&!a(n)?(u(),O(U,{key:0,"data-testid":"camera-toggle",color:"danger",size:"sm",icon:"",pill:"",onClick:z},{default:c(()=>[l(Cs)]),_:1})):B("",!0),!a(F)&&!a(n)?(u(),O(U,{key:1,"data-testid":"camera-turn-on",class:"camera__main-control",color:"danger",icon:"",pill:"",onClick:m[0]||(m[0]=Z=>I())},{default:c(()=>[l(G)]),_:1})):a(F)&&!a(n)?(u(),O(U,{key:2,"data-testid":"camera-take",class:"camera__main-control",color:"danger",icon:"",pill:"",disabled:a(E),onClick:m[1]||(m[1]=Z=>j())},{default:c(()=>[l(G)]),_:1},8,["disabled"])):(u(),O(U,{key:3,"data-testid":"camera-retake",class:"camera__main-control",color:"danger",icon:"",pill:"",onClick:m[2]||(m[2]=Z=>W())},{default:c(()=>[l(Ms)]),_:1}))]),h("audio",{ref_key:"shutter",ref:g,src:a(Rs),muted:e.silent},null,8,Xs),rs(d.$slots,"default",{cameras:a(w),preview:a(b),stream:a(T),video:a(k),shutter:a(g),toast:L})],10,Ns)),[[a(gs),4/3,void 0,{fixed:!0}]])}}),zs=40,Ws=15,P=160;function Zs(e,s){const t=e.getContext("2d",{willReadFrequently:!0});return t.drawImage(s,s.videoWidth/2-P,s.videoHeight/2-P,P,P,0,0,P,P),t.getImageData(0,0,e.width,e.height)}function Js(e){const s=e.width/2,t=e.height/2,i=e.width/4,r=e.height/4,o=s-i/2,p=t-r/2,E=new Uint8ClampedArray(i*r),n={centerX:s,centerY:t,width:i,height:r,xPos:o,yPos:p,buffer:E},b=e.data;let A=0;for(let g=n.yPos;g<n.yPos+n.height;g++){let k=g*e.width*4+n.xPos*4+1;for(let _=n.xPos;_<n.xPos+n.width;_++)n.buffer[A++]=b[k],k+=4}return n}function Ks(e,s){let t=0,i=0,r=0;const o=e.width/4,p=e.height/4,E=e.data;for(let y=s.centerY-p;y<=s.centerY+p-s.height;y++)for(let w=s.centerX-o;w<=s.centerX+o-s.width;w++){let q=0,V=0,T=0;for(let R=0;R<s.height;R++){let F=w*4+1+(y+R)*e.width*4;for(let $=0;$<s.width;$++){const I=E[F];q+=s.buffer[T++]*I,V+=I*I,F+=4}}let M=0;V>0&&(M=q*q/V),M>r&&(r=M,t=w,i=y)}const n=t-s.xPos,b=i-s.yPos,A=Math.hypot(n,b),g=o-s.width/2,k=p-s.height/2,_=Math.hypot(g,k);let S=A/_*100;return S>100&&(S=100),S}const Gs={meta:{mask:"round",mirror:!0,facingMode:"user"},async run({video:e,toast:s,meta:t,modifier:i}){return await new Promise(r=>{const o=!!(t.value.mirror&&t.value.mirror!=="preview"),p=H(e.value,o),E=document.createElement("canvas");E.width=P,E.height=P;let n;const b=setInterval(function(){if(e.value){const g=Zs(E,e.value);if(!n)n=Js(g);else if(Ks(g,n)>zs){const k=H(e.value,o),_=i.value.base64?[k,p]:[Q(k),Q(p)];clearInterval(b),s(""),r({preview:k,result:_})}}},1e3/Ws);s("Move your head slowly. Your photo will be taken automatically")})}},se={meta:{mask:"square",facingMode:"environment",autoStart:!0},async run({video:e,toast:s,meta:t}){const i=!!(t.value.mirror&&t.value.mirror!=="preview"),{BrowserQRCodeReader:r}=await hs(()=>import("./chunks/index.5ZgwmU29.js"),__vite__mapDeps([])),p=await new r().decodeOnceFromVideoElement(e.value),E=H(e.value,i),n=p.getText();return s(n),{preview:E,result:n}}},ee=f("",4),ae=f("",3),te=f("",3),ie=f("",3),ne=f("",3),le=f("",3),re=f("",3),oe=f("",3),he=f("",2),de={class:"truncate"},pe=h("h3",{id:"encode-to-base64",tabindex:"-1"},[D("Encode to base64 "),h("a",{class:"header-anchor",href:"#encode-to-base64","aria-label":'Permalink to "Encode to base64"'},"​")],-1),ce=h("p",null,[D("You can add modifier "),h("code",null,"base64"),D(" to your "),h("code",null,"v-model"),D(", it's enforce result to "),h("a",{href:"https://en.wikipedia.org/wiki/Data_URI_scheme",target:"_blank",rel:"noreferrer"},"base64-dataURI"),D(".")],-1),ke=h("b",null,"Note!",-1),ue=h("code",null,"v-model.base64",-1),Ee=f("",2),ge={class:"truncate"},me=f("",7),Xe=JSON.parse(`{"title":"Camera · Components","description":"Take picture from user's camera","frontmatter":{"title":"Camera · Components","description":"Take picture from user's camera"},"headers":[],"relativePath":"components/camera/index.md","filePath":"components/camera/index.md"}`),_e={name:"components/camera/index.md"},ze=Object.assign(_e,{setup(e){const s=x(),t=x();return(i,r)=>{const o=ds("preview");return u(),C("div",null,[ee,l(o,{class:"flex-col"},{default:c(()=>[l(v)]),_:1}),ae,l(o,{class:"flex-col"},{default:c(()=>[l(v,{mirror:""})]),_:1}),te,l(o,{class:"flex-col"},{default:c(()=>[l(v,{mirror:"preview"})]),_:1}),ie,l(o,{class:"flex-col space-y-2"},{default:c(()=>[l(v,{mask:"square"}),l(v,{mask:"round"}),l(v,{mask:"card"})]),_:1}),ne,l(o,{class:"flex-col"},{default:c(()=>[l(v,{silent:""})]),_:1}),le,l(o,{class:"flex-col space-y-2"},{default:c(()=>[l(v,{adapter:a(Gs)},null,8,["adapter"])]),_:1}),re,l(o,{class:"flex-col space-y-2"},{default:c(()=>[l(v,{adapter:a(se)},null,8,["adapter"])]),_:1}),oe,l(o,{class:"flex-col"},{default:c(()=>[l(v,{modelValue:a(s),"onUpdate:modelValue":r[0]||(r[0]=p=>J(s)?s.value=p:null)},null,8,["modelValue"])]),_:1}),he,h("pre",de,[h("code",null,Y(a(s)),1)]),pe,ce,l(_s,{dismissable:!1},{default:c(()=>[ke,D(),ue,D(" on QRCodeAdapter has no effect, the result will always original scanned text. ")]),_:1}),l(o,{class:"flex-col"},{default:c(()=>[l(v,{modelValue:a(t),"onUpdate:modelValue":r[1]||(r[1]=p=>J(t)?t.value=p:null),modelModifiers:{base64:!0}},null,8,["modelValue"])]),_:1}),Ee,h("pre",ge,[h("code",null,Y(a(t)),1)]),me])}}});export{Xe as __pageData,ze as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
