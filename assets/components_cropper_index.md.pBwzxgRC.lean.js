import{_ as X}from"./chunks/Button.vue_vue_type_script_setup_true_lang.qM5y5b4m.js";import"./chunks/Button.vue_vue_type_style_index_0_lang.w40geAFS.js";import{t as x}from"./chunks/index.r0OCB_7d.js";import{u as ls}from"./chunks/index.Hq5ktPeB.js";import{G as os,j as rs,X as ds,a7 as ps,_ as L,o as B,c as S,k as e,g as D,d as hs,h as q,V as Y,D as w,a8 as cs,a1 as I,n as Z,O as G,$ as P,a5 as ks,e as us,I as a,w as g,a as m,r as gs,f as K,t as U,m as c,R as f,a4 as j}from"./chunks/framework.e_h4aueT.js";import{t as J}from"./chunks/throttle.Yy5L90F6.js";import{p as Es}from"./chunks/InputRange.INha3hic.js";import{I as ms,a as ys}from"./chunks/20.wMUfYF6B.js";import{c as vs,u as _s}from"./chunks/index.EAblm_-D.js";import{u as fs}from"./chunks/index.VOHB-FDq.js";import{f as bs}from"./chunks/base64.6dLoFO2g.js";import{p as Cs}from"./chunks/index._wsh0zM_.js";import{a as Fs}from"./chunks/index.L8r16ak4.js";import"./chunks/index.hjpy5ZnQ.js";import"./chunks/SpinnerRinggo.jx16kb8p.js";import"./chunks/index.dnE_v7BF.js";import"./chunks/debounce.fM6nWQov.js";import"./chunks/isObject.mlSoqgao.js";import"./chunks/isObjectLike.OM1Hublo.js";import"./chunks/toNumber.jidAZ9H9.js";import"./chunks/isSymbol.K1VvrVGN.js";import"./chunks/defu.sEzLH6yp.js";import"./chunks/load-image.o1nqrQGg.js";import"./chunks/create-image._im0xJpR.js";import"./chunks/avatar.CzBZbX_M.js";import"./chunks/color-hash.7xxmQZVO.js";function As(s,t){const n=os();rs(async()=>{if(s.value){const{default:o}=await ds(()=>import("./chunks/interact.min.c6jvS83-.js").then(h=>h.i),__vite__mapDeps([0,1])),p=J(t.onmove,1e3/120),l=J(t.onpinch,1e3/120);n.value=o(s.value).styleCursor(!0).gesturable({inertia:!0,onstart:t.onstart,onmove:l,onend:l,modifiers:[o.modifiers.restrict({restriction:"parent",endOnly:!0})]}).draggable({inertia:!0,onstart:t.onstart,onmove:p,onend:p,modifiers:[o.modifiers.restrict({restriction:"parent",endOnly:!0})]})}}),ps(async()=>{var o;(o=n.value)==null||o.unset()})}const ws={},Ts={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",class:"persona-icon",viewBox:"0 0 20 20"},Ds=e("path",{fill:"currentColor","fill-rule":"evenodd",d:"M13.5 15.998a.603.603 0 0 0-.603-.603h-.796V9.002a.603.603 0 0 0-.603-.603H5.105v-.796a.603.603 0 0 0-1.206 0v.796h-.796a.603.603 0 0 0 0 1.206h.796v6.393c0 .333.27.603.603.603h6.393v.796a.603.603 0 0 0 1.206 0v-.796h.796c.333 0 .603-.27.603-.603m-2.605-.603h-5.79v-5.79h5.79v5.79M11.866 2.16a.592.592 0 0 0-.852.045L9.655 3.758a.634.634 0 0 0 0 .83l1.359 1.552a.592.592 0 0 0 .852.046.633.633 0 0 0 .045-.876l-.451-.516h3.172c.917 0 1.66.764 1.66 1.707v3.88c0 .342.27.62.604.62a.612.612 0 0 0 .604-.62V6.5c0-1.628-1.284-2.948-2.868-2.948H11.46l.451-.516a.633.633 0 0 0-.045-.877","clip-rule":"evenodd"},null,-1),qs=[Ds];function Is(s,t){return B(),S("svg",Ts,qs)}const Bs=L(ws,[["render",Is]]),Ss={},Ps={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",class:"persona-icon",viewBox:"0 0 20 20"},xs=e("path",{fill:"currentColor","fill-rule":"evenodd",d:"M6.5 15.998c0-.333.27-.603.603-.603h.796V9.002c0-.333.27-.603.603-.603h6.393v-.796a.603.603 0 0 1 1.206 0v.796h.796a.603.603 0 0 1 0 1.206h-.796v6.393c0 .333-.27.603-.603.603H9.105v.796a.603.603 0 0 1-1.206 0v-.796h-.796a.603.603 0 0 1-.603-.603m2.605-.603h5.79v-5.79h-5.79v5.79M8.134 2.16a.592.592 0 0 1 .852.045l1.359 1.552a.634.634 0 0 1 0 .83L8.986 6.14a.592.592 0 0 1-.852.046.633.633 0 0 1-.045-.876l.451-.516H5.368c-.917 0-1.66.764-1.66 1.707v3.88c0 .342-.27.62-.604.62a.612.612 0 0 1-.604-.62V6.5c0-1.628 1.284-2.948 2.868-2.948H8.54l-.451-.516a.633.633 0 0 1 .045-.877","clip-rule":"evenodd"},null,-1),Vs=[xs];function Rs(s,t){return B(),S("svg",Ps,Vs)}const $s=L(Ss,[["render",Rs]]);function Ns(s){var d;const{width:t,height:n,image:o,scale:p,angle:l,x:h,y:u,rounded:_}=s,k=(d=s.canvas)!=null?d:vs(t,n),i=k.getContext("2d"),E=o.width*p,T=o.height*p;if(k.width=t,k.height=n,i.clearRect(0,0,t,n),i.translate(t/2,n/2),i.rotate(l*Math.PI/180),i.translate(t/-2,n/-2),i.drawImage(o,(t-E)/2+h,(n-T)/2+u,E,T),_){const y=Math.min(t/2,n/2);i.globalCompositeOperation="destination-in",i.beginPath(),i.moveTo(y,0),i.arcTo(t,0,t,n,y),i.arcTo(t,n,0,n,y),i.arcTo(0,n,0,0,y),i.arcTo(0,0,t,0,y),i.closePath(),i.fill()}return k.toDataURL()}function Ms(s,t=1){return D(()=>{var n;return s.width&&s.height?Number.parseFloat(`${s.width}`)/Number.parseFloat(`${s.height}`):(n=s.ratio)!=null?n:t})}function zs(s){return D(()=>{if(s.width)return Number.parseFloat(`${s.width}`);if(s.height&&s.ratio)return Number.parseFloat(`${s.height}`)*s.ratio})}function Os(s){return D(()=>{if(s.height)return Number.parseFloat(`${s.height}`);if(s.width&&s.ratio)return Number.parseFloat(`${s.width}`)/s.ratio})}const Us=hs({directives:{pAspectRatio:Cs},components:{pButton:X,pInputRange:Es,IconRotateLeft:Bs,IconRotateRight:$s,IconZoomIn:ms,IconZoomOut:ys},props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},src:{type:[String,globalThis.File],default:void 0},ratio:{type:Number,default:void 0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},imgWidth:{type:[String,Number],default:512},imgHeight:{type:[String,Number],default:512},imgClass:{type:[String,Array,Object],default:void 0},rounded:{type:Boolean,default:!1},noCrop:{type:Boolean,default:!1},noAutocrop:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue","change","result","load"],setup(s,{emit:t}){const n=fs(s),o=q(0),p=q(0),l=q(0),h=ls(1,.5,2),u=Ms(s),_=zs(s),k=Os(s),i=Y(s,"rounded"),E=Y(s,"src"),T=_s(E),d=x("canvas"),y=x("parent"),v=x("target"),Q=D(()=>{const r=[];return s.noCrop&&r.push("cropper--no-crop"),s.rounded&&r.push("cropper--rounded"),r}),ss=D(()=>({transform:`rotate(${l.value}deg) translate(${o.value}px, ${p.value}px) scale(${h.value})`})),ts=D(()=>({aspectRatio:`${u.value}`,width:_.value?`${_.value}px`:"66.666667%"}));function V(){if(y.value&&v.value){const r=l.value%180===0?v.value.width:v.value.height,C=l.value%180===0?v.value.height:v.value.width;h.value=Math.min(y.value.clientWidth/r,y.value.clientHeight/C)}o.value=0,p.value=0}function W(){h.value+=.1}function H(){h.value-=.1}function es(r){l.value=(Math.trunc(l.value/90)*90+r)%360,V()}function R(r,C){const F=Math.cos(l.value*Math.PI/180),A=Math.sin(l.value*Math.PI/180),N=r*F+C*A,M=C*F-r*A;o.value+=N,p.value+=M}function is(){l.value=0,V()}function $(){var r,C;if(y.value&&v.value&&d.value){const F=y.value.clientWidth*2/3,A=(r=_.value)!=null?r:F,N=(C=k.value)!=null?C:A/u.value,M=F>0&&A>F?A/F:1,z=Ns({canvas:d.value,image:v.value,width:A,height:N,x:o.value,y:p.value,angle:l.value,scale:h.value*M,rounded:s.rounded}),O=s.modelModifiers.base64?z:bs(z);return n.value=O,t("change",O),t("result",O),z}}function as(r){v.value&&v.value.focus(),r.deltaY>0?W():H()}function ns(){t("load"),V(),!s.noCrop&&!s.noAutocrop&&$()}return As(v,{onpinch(r){h.value=r.scale,R(r.dx,r.dy)},onmove(r){R(r.dx,r.dy)}}),Fs([E,_,k,u,i,o,p,h,l],()=>{!s.noCrop&&!s.noAutocrop&&$()},{debounce:500}),{classNames:Q,preview:T,imgStyle:ss,maskStyle:ts,scale:h,angle:l,reset:is,onMouseWheel:as,onImageLoaded:ns,rotate:es,zoomIn:W,zoomOut:H,move:R,crop:$,model:n,aspectRatio:u}}}),js={class:"cropper__preview"},Ls={ref:"canvas","data-testid":"cropper-canvas",class:"cropper__canvas"},Ws=["src","width","height"],Hs={class:"cropper__control"},Ys={class:"cropper__control-bar"};function Zs(s,t,n,o,p,l){const h=w("IconZoomOut"),u=w("p-button"),_=w("p-input-range"),k=w("IconZoomIn"),i=w("IconRotateLeft"),E=w("IconRotateRight"),T=cs("p-aspect-ratio");return B(),S("div",{"data-testid":"cropper",class:Z(["cropper",s.classNames])},[e("div",js,[e("canvas",Ls,null,512),e("div",{ref:"parent","data-testid":"cropper-container",class:"cropper__image-container",onWheel:t[5]||(t[5]=I((...d)=>s.onMouseWheel&&s.onMouseWheel(...d),["prevent"]))},[e("img",{ref:"target","data-testid":"cropper-preview",alt:"cropper-preview",tabindex:"0",class:Z(["cropper__image",s.imgClass]),src:s.preview,style:G(s.imgStyle),width:s.imgWidth,height:s.imgHeight,onLoad:t[0]||(t[0]=(...d)=>s.onImageLoaded&&s.onImageLoaded(...d)),onKeydown:[t[1]||(t[1]=P(I(d=>s.move(0,-1),["prevent"]),["up"])),t[2]||(t[2]=P(I(d=>s.move(0,1),["prevent"]),["down"])),t[3]||(t[3]=P(I(d=>s.move(-1,0),["prevent"]),["left"])),t[4]||(t[4]=P(I(d=>s.move(1,0),["prevent"]),["right"]))]},null,46,Ws)],544),s.noCrop?us("",!0):ks((B(),S("div",{key:0,"data-testid":"cropper-mask",class:"cropper__mask",style:G(s.maskStyle)},null,4)),[[T,s.aspectRatio,void 0,{fixed:!0}]])]),e("div",Hs,[e("div",Ys,[a(u,{"data-testid":"cropper-zoom-out",size:"xs",variant:"link",icon:"",pill:"",onClick:t[6]||(t[6]=d=>s.zoomOut())},{default:g(()=>[a(h)]),_:1}),a(_,{modelValue:s.scale,"onUpdate:modelValue":t[7]||(t[7]=d=>s.scale=d),"data-testid":"cropper-zoom-slider",class:"cropper__slider",min:"0.5",max:"2",step:"0.1"},null,8,["modelValue"]),a(u,{"data-testid":"cropper-zoom-in",size:"xs",variant:"link",icon:"",pill:"",onClick:t[8]||(t[8]=d=>s.zoomIn())},{default:g(()=>[a(k)]),_:1}),a(u,{"data-testid":"cropper-rotate-left",size:"xs",variant:"link",icon:"",pill:"",onClick:t[9]||(t[9]=d=>s.rotate(-90))},{default:g(()=>[a(i)]),_:1}),a(u,{"data-testid":"cropper-rotate-right",size:"xs",variant:"link",icon:"",pill:"",onClick:t[10]||(t[10]=d=>s.rotate(90))},{default:g(()=>[a(E)]),_:1})]),a(u,{"data-testid":"cropper-reset",class:"cropper__control__reset",size:"xs",variant:"link",onClick:t[11]||(t[11]=d=>s.reset())},{default:g(()=>[m(" Reset ")]),_:1}),gs(s.$slots,"control",{scale:s.scale,angle:s.angle,crop:s.crop,zoomIn:s.zoomIn,zoomOut:s.zoomOut,rotate:s.rotate,reset:s.reset})])],2)}const b=L(Us,[["render",Zs]]),Gs=f("",4),Ks=f("",4),Js=f("",2),Xs=f("",3),Qs=f("",3),st=f("",3),tt=f("",2),et={class:"truncate"},it=e("h3",{id:"encode-to-base64",tabindex:"-1"},[m("Encode to base64 "),e("a",{class:"header-anchor",href:"#encode-to-base64","aria-label":'Permalink to "Encode to base64"'},"â€‹")],-1),at=e("p",null,[m("You can add modifier "),e("code",null,"base64"),m(" to your "),e("code",null,"v-model"),m(", it's enforce result to "),e("a",{href:"https://en.wikipedia.org/wiki/Data_URI_scheme",target:"_blank",rel:"noreferrer"},"base64-dataURI"),m(".")],-1),nt=f("",2),lt={class:"truncate"},ot=["src"],rt=e("h3",{id:"disabling-autocrop",tabindex:"-1"},[m("Disabling Autocrop "),e("a",{class:"header-anchor",href:"#disabling-autocrop","aria-label":'Permalink to "Disabling Autocrop"'},"â€‹")],-1),dt=e("p",null,[m("By default, cropping process was ran every movement (drag, zoom, & rotate). It can be exhausting the resource on some device. You can disabled it using prop "),e("code",null,"no-autocrop"),m(". And to trigger the cropping, you can use "),e("code",null,"templateRef"),m(" on "),e("code",null,"<p-cropper>"),m(" component, and call "),e("code",null,".crop()"),m(" function.")],-1),pt={class:"mt-4"},ht=e("p",null,[e("strong",null,"result:")],-1),ct={class:"truncate"},kt=["src"],ut=f("",10),Ut=JSON.parse('{"title":"Cropper Â· Components","description":"Preview and crop image","frontmatter":{"title":"Cropper Â· Components","description":"Preview and crop image"},"headers":[],"relativePath":"components/cropper/index.md","filePath":"components/cropper/index.md"}'),gt={name:"components/cropper/index.md"},jt=Object.assign(gt,{setup(s){const t=K("/assets/images/img-sample-crop.jpg"),n=K("/assets/images/empty-img.png"),o=q(),p=q(),l=q(),h=x("cropper");function u(){h.value&&h.value.crop()}return(_,k)=>{const i=w("preview");return B(),S("div",null,[Gs,a(i,{class:"flex-col"},{default:g(()=>[a(b,{src:c(t)},null,8,["src"])]),_:1}),Ks,a(i,null,{default:g(()=>[a(b,{src:c(t),width:"500",height:"200"},null,8,["src"])]),_:1}),Js,a(i,null,{default:g(()=>[a(b,{src:c(t),ratio:16/9},null,8,["src"])]),_:1}),Xs,a(i,null,{default:g(()=>[a(b,{src:c(t),rounded:""},null,8,["src"])]),_:1}),Qs,a(i,null,{default:g(()=>[a(b,{src:c(t),"no-crop":""},null,8,["src"])]),_:1}),st,a(i,null,{default:g(()=>[a(b,{src:c(t),modelValue:c(o),"onUpdate:modelValue":k[0]||(k[0]=E=>j(o)?o.value=E:null)},null,8,["src","modelValue"])]),_:1}),tt,e("pre",et,[e("code",null,U(c(o)),1)]),it,at,a(i,{class:"flex-col"},{default:g(()=>[a(b,{src:c(t),modelValue:c(p),"onUpdate:modelValue":k[1]||(k[1]=E=>j(p)?p.value=E:null),modelModifiers:{base64:!0}},null,8,["src","modelValue"])]),_:1}),nt,e("pre",lt,[e("code",null,U(c(p)),1)]),e("img",{class:"mt-2 border",src:c(p)||c(n),alt:"Result Image"},null,8,ot),rt,dt,a(i,{class:"flex-col"},{default:g(()=>[a(b,{ref_key:"cropper",ref:h,src:c(t),modelValue:c(l),"onUpdate:modelValue":k[2]||(k[2]=E=>j(l)?l.value=E:null),modelModifiers:{base64:!0},"no-autocrop":""},null,8,["src","modelValue"]),e("div",pt,[a(X,{onClick:u},{default:g(()=>[m("Do Crop")]),_:1})])]),_:1}),ht,e("pre",ct,[e("code",null,U(c(l)),1)]),e("img",{class:"mt-2 border",src:c(l)||c(n),alt:"Result Image"},null,8,kt),ut])}}});export{Ut as __pageData,jt as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/chunks/interact.min.c6jvS83-.js","assets/chunks/commonjsHelpers.4gQjN7DL.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}