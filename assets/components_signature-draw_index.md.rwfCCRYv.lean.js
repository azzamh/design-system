var x=Object.defineProperty;var O=(s,e,a)=>e in s?x(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a;var v=(s,e,a)=>(O(s,typeof e!="symbol"?e+"":e,a),a);import{t as j,j as z,e as G}from"./chunks/index.05tcGkXx.js";import{_ as N}from"./chunks/Button.vue_vue_type_script_setup_true_lang.p-ov4m9-.js";import"./chunks/Button.vue_vue_type_style_index_0_lang.w40geAFS.js";import{u as R}from"./chunks/index.8f0TOZNW.js";import{u as L,d as J,t as P,p as W,a as Q,r as H}from"./chunks/index.KcQuUzYl.js";import{G as K,j as A,X as Z,a7 as ss,d as q,h as b,y as M,_ as T,D as w,o as h,c as g,k as i,b as V,w as d,t as D,a as U,e as S,I as n,g as C,a8 as es,a5 as as,F as ts,n as B,T as ls,O as os,J as ns,f as ps,m as f,R as m,a4 as I}from"./chunks/framework.Fa1wspga.js";import{t as rs}from"./chunks/throttle.Yy5L90F6.js";import{p as cs}from"./chunks/Caption.9JF3xBfr.js";import{f as F}from"./chunks/base64.6dLoFO2g.js";import{l as is}from"./chunks/load-image.o1nqrQGg.js";import{I as ds}from"./chunks/20.9WysZsMm.js";import{p as us}from"./chunks/index.Nf5ap6DT.js";import{c as ys}from"./chunks/create-image._im0xJpR.js";import"./chunks/index.tFUNc-ed.js";import"./chunks/index.hjpy5ZnQ.js";import"./chunks/SpinnerRinggo.oKtUzc-G.js";import"./chunks/index.vY0T8WJB.js";import"./chunks/defu.sEzLH6yp.js";import"./chunks/debounce.fM6nWQov.js";import"./chunks/isObject.mlSoqgao.js";import"./chunks/isObjectLike.OM1Hublo.js";import"./chunks/toNumber.jidAZ9H9.js";import"./chunks/isSymbol.K1VvrVGN.js";import"./chunks/Caption.vue_vue_type_style_index_0_lang.w40geAFS.js";import"./chunks/avatar.CzBZbX_M.js";import"./chunks/color-hash.7xxmQZVO.js";function Es(s,e){const a=K();A(async()=>{if(s.value){const{default:t}=await Z(()=>import("./chunks/interact.min.c6jvS83-.js").then(p=>p.i),__vite__mapDeps([0,1])),l=rs(e.onmove,1e3/60);a.value=t(s.value).styleCursor(!1).draggable({origin:"self",inertia:{enabled:!0,resistance:10},onstart:e.onstart,onmove:l,onend:l})}}),ss(async()=>{var t;(t=a.value)==null||t.unset()})}class hs{constructor(e){v(this,"lastX");v(this,"lastY");v(this,"movingX");v(this,"movingY");v(this,"smoother");this.lastX=0,this.lastY=0,this.movingX=0,this.movingY=0,this.smoother=e*.05+.7}start(e,a){this.lastX=e,this.lastY=a,this.movingX=0,this.movingY=0}move(e,a){const t=this.lastX,l=this.lastY,p=(this.movingX+(t-e)*.1)*this.smoother,o=(this.movingY+(l-a)*.1)*this.smoother,r=t-p,c=l-o;return this.movingX=p,this.movingY=o,this.lastX=r,this.lastY=c,[t,l,r,c]}}function gs(s){return Array.from({length:s}).map((e,a)=>new hs(a/(s*1.25)))}const ms=q({components:{Caption:cs,Button:N},props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(s){const e=R(s),a=L(e,""),t=b(!0),l=j("canvas"),p=gs(15);function o(){Q(l.value),t.value=!0,e.value=""}function r(c){if(!t.value){H(l.value,c);const u=P(l.value),y=s.modelModifiers.base64?u:F(u);e.value=y}}return M(()=>s.color,r),Es(l,{onstart(c){for(const u of p)u.start(c.pageX,c.pageY)},onmove(c){for(const E of p){const k=E.move(c.pageX,c.pageY),X={color:s.color};J(l.value,k,X)}const u=P(l.value),y=s.modelModifiers.base64?u:F(u);t.value=!1,e.value=y}}),A(()=>{e.value&&a.value&&(W(l.value,a.value),t.value=!1)}),{model:e,reset:o,isBlank:t,setColor:r}}}),vs={class:"signature-draw signature-draw--desktop","data-testid":"signature-draw-desktop"},fs=["width","height"],_s={key:1,class:"signature-draw__control"};function ws(s,e,a,t,l,p){const o=w("Caption"),r=w("Button");return h(),g("div",vs,[i("canvas",{ref:"canvas",class:"signature-draw__canvas","data-testid":"signature-draw-canvas",width:s.width,height:s.height},null,8,fs),s.isBlank?(h(),V(o,{key:0,class:"signature-draw__placeholder","data-testid":"signature-draw-placeholder"},{default:d(()=>[U(D(s.placeholder),1)]),_:1})):S("",!0),s.isBlank?S("",!0):(h(),g("div",_s,[n(r,{"data-testid":"signature-draw-reset",variant:"link",size:"xs",class:"signature-draw__reset",pill:"",onClick:e[0]||(e[0]=c=>s.reset())},{default:d(()=>[i("span",null,D(s.resetLabel),1)]),_:1})]))])}const Y=T(ms,[["render",ws]]);async function $(s,e){const a=document.createElement("canvas"),t=a.getContext("2d"),l=await is(s);return a.width=e%180===0?l.width:l.height,a.height=e%180===0?l.height:l.width,t.translate(a.width/2,a.height/2),t.rotate(e*Math.PI/180),t.drawImage(l,l.width/-2,l.height/-2),a.toDataURL()}const bs=q({components:{Button:N,IconEdit:ds,SignatureDrawDesktop:Y},directives:{pAspectRatio:us},props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"},openDrawLabel:{type:String,default:"Click to Draw"},closeDrawLabel:{type:String,default:"Save"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(s){const e=R(s),a=L(e,""),t=b(""),l=b(!1),p=z(),o=C(()=>p.width.value<s.width+32?"rotate":"normal"),r=C(()=>{const E=[];return o.value&&E.push(`signature-draw--${o.value}`),E}),c=C(()=>({width:`${s.width}px`,aspectRatio:`${s.width/s.height}`}));async function u(){const E=a.value&&o.value==="rotate"?await $(a.value,90):a.value;t.value=E,l.value=!0}async function y(){const E=t.value&&o.value==="rotate"?await $(t.value,-90):t.value,k=s.modelModifiers.base64?E:F(E);e.value=k,l.value=!1}return M(l,E=>{E?document.body.style.setProperty("overflow-y","hidden"):document.body.style.removeProperty("overflow-y")}),{classNames:r,style:c,rawModel:t,preview:a,model:e,isOpen:l,mode:o,open:u,close:y}}}),Ds={class:"signature-draw__preview"},Cs=["src"],ks={key:0,class:"signature-draw__modal","data-testid":"signature-draw-modal"};function Ss(s,e,a,t,l,p){const o=w("IconEdit"),r=w("Button"),c=w("SignatureDrawDesktop"),u=es("p-aspect-ratio");return as((h(),g("div",{class:B(["signature-draw signature-draw--mobile",s.classNames]),"data-testid":"signature-draw-mobile",style:os(s.style)},[i("div",Ds,[s.model?(h(),g(ts,{key:0},[i("img",{src:s.preview,alt:"signature-draw-preview","data-testid":"signature-draw-preview",onClick:e[0]||(e[0]=y=>s.open())},null,8,Cs),n(r,{variant:"link",size:"xs",class:"signature-draw__reset","data-testid":"signature-draw-edit",icon:"",onClick:e[1]||(e[1]=y=>s.open())},{default:d(()=>[n(o)]),_:1})],64)):(h(),V(r,{key:1,"data-testid":"signature-draw-open",onClick:e[2]||(e[2]=y=>s.open())},{default:d(()=>[U(D(s.openDrawLabel),1)]),_:1}))]),n(ls,{name:"zoom-in"},{default:d(()=>[s.isOpen?(h(),g("div",ks,[n(c,{modelValue:s.rawModel,"onUpdate:modelValue":e[3]||(e[3]=y=>s.rawModel=y),modelModifiers:{base64:!0},class:B(s.classNames),placeholder:s.placeholder,color:s.color,width:s.mode==="rotate"?s.height:s.width,height:s.mode==="rotate"?s.width:s.height,"reset-label":s.resetLabel},null,8,["modelValue","class","placeholder","color","width","height","reset-label"]),n(r,{class:"signature-draw__close",nganu:"1311","data-testid":"signature-draw-close",onClick:e[4]||(e[4]=y=>s.close())},{default:d(()=>[i("span",null,D(s.closeDrawLabel),1)]),_:1})])):S("",!0)]),_:1})],6)),[[u,s.width/s.height]])}const Fs=T(bs,[["render",Ss]]),As=q({props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"},openDrawLabel:{type:String,default:"Click to Draw"},closeDrawLabel:{type:String,default:"Save"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(){const s=b(!1),e=G("(min-width: 768px)"),a=C(()=>e.value?Y:Fs);return A(()=>{s.value=!0}),{view:a,ready:s,createSpinner:ys}}}),qs={key:1,class:"signature-draw"},Ts=["src"];function Vs(s,e,a,t,l,p){return s.ready?(h(),V(ns(s.view),{key:0,"model-value":s.modelValue,"model-modifiers":s.modelModifiers,width:s.width,height:s.height,color:s.color,placeholder:s.placeholder,"reset-label":s.resetLabel,"open-draw-label":s.openDrawLabel,"close-draw-label":s.closeDrawLabel,"onUpdate:modelValue":e[0]||(e[0]=o=>s.$emit("update:modelValue",o))},null,8,["model-value","model-modifiers","width","height","color","placeholder","reset-label","open-draw-label","close-draw-label"])):(h(),g("div",qs,[i("img",{class:"signature-draw__fallback",src:s.createSpinner(s.width,s.height),alt:"signature-draw"},null,8,Ts)]))}const _=T(As,[["render",Vs]]),Ps=m("",4),Bs=m("",2),Is=m("",2),$s=m("",3),Ns=m("",3),Rs=i("p",null,[i("strong",null,"result")],-1),Ls={class:"truncate"},Ms=m("",3),Us=i("p",null,[i("strong",null,"result")],-1),Ys={class:"truncate"},Xs=["src"],xs=m("",8),ve=JSON.parse('{"title":"Signature Draw · Components","description":"Draw signature like using real pen","frontmatter":{"title":"Signature Draw · Components","description":"Draw signature like using real pen"},"headers":[],"relativePath":"components/signature-draw/index.md","filePath":"components/signature-draw/index.md"}'),Os={name:"components/signature-draw/index.md"},fe=Object.assign(Os,{setup(s){const e=ps("/assets/images/empty-img.png"),a=b(),t=b();return(l,p)=>{const o=w("preview");return h(),g("div",null,[Ps,n(o,null,{default:d(()=>[n(_)]),_:1}),Bs,n(o,{class:"flex-col"},{default:d(()=>[n(_,{width:230})]),_:1}),Is,n(o,{class:"flex-col"},{default:d(()=>[n(_,{placeholder:"Draw signature here"})]),_:1}),$s,n(o,{class:"flex-col space-y-2"},{default:d(()=>[n(_,{color:"#73185E"})]),_:1}),Ns,n(o,{class:"flex-col space-y-2"},{default:d(()=>[n(_,{modelValue:f(a),"onUpdate:modelValue":p[0]||(p[0]=r=>I(a)?a.value=r:null)},null,8,["modelValue"])]),_:1}),Rs,i("pre",Ls,[i("code",null,D(f(a)),1)]),Ms,n(o,{class:"flex-col space-y-2"},{default:d(()=>[n(_,{modelValue:f(t),"onUpdate:modelValue":p[1]||(p[1]=r=>I(t)?t.value=r:null),modelModifiers:{base64:!0}},null,8,["modelValue"])]),_:1}),Us,i("pre",Ys,[i("code",null,D(f(t)||"-"),1)]),i("img",{class:"mt-2 border border-default dark:border-dark-default bg-base-white",src:f(t)||f(e),width:"430",height:"230",alt:"Result Image"},null,8,Xs),xs])}}});export{ve as __pageData,fe as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/chunks/interact.min.c6jvS83-.js","assets/chunks/commonjsHelpers.4gQjN7DL.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}