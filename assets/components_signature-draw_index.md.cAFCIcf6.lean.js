var z=Object.defineProperty;var j=(t,s,e)=>s in t?z(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var _=(t,s,e)=>(j(t,typeof s!="symbol"?s+"":s,e),e);import{I as O,m as q,Z as G,ac as W,d as B,r as f,z as A,o as E,c as v,p,q as n,f as V,w as u,t as F,b as N,g as T,K as r,l as D,aa as J,G as K,a8 as P,n as I,T as Q,R as Z,L as H,j as tt,a9 as b,F as et}from"./chunks/framework.ia1RVXQM.js";import{j as st,c as at}from"./chunks/index.SivMyT-5.js";import{_ as S}from"./chunks/Button.vue_vue_type_script_setup_true_lang.snQyFrYw.js";import"./chunks/Button.vue_vue_type_style_index_0_lang.w40geAFS.js";import{u as $}from"./chunks/index.o_V-6OuU.js";import{u as M,d as it,t as L,p as lt,a as nt,r as U}from"./chunks/use-preview.acFvSia3.js";import{t as rt}from"./chunks/throttle.q_piZQy8.js";import{_ as ot}from"./chunks/Caption.vue_vue_type_script_setup_true_lang.kqsKYrbw.js";import"./chunks/Caption.vue_vue_type_style_index_0_lang.w40geAFS.js";import{f as x}from"./chunks/base64.sP9_YaTt.js";import{l as Y}from"./chunks/load-image.o1nqrQGg.js";import{I as dt}from"./chunks/20.iyq7ZLY4.js";import{v as ht}from"./chunks/index.btrgUHE2.js";import{c as pt}from"./chunks/create-image._im0xJpR.js";import"./chunks/index.UzyhcjX5.js";import"./chunks/index.hjpy5ZnQ.js";import"./chunks/SpinnerRinggo.vue_vue_type_script_setup_true_lang.3Mstv3u5.js";import"./chunks/defu.3rjBFRnm.js";import"./chunks/debounce.pZZBdQwa.js";import"./chunks/isObject.mlSoqgao.js";import"./chunks/baseGetTag.IiKF_g5t.js";import"./chunks/toNumber._iUOfnSi.js";import"./chunks/isSymbol.kHNk0UTq.js";import"./chunks/isObjectLike.cOVh3xPP.js";import"./chunks/avatar.CzBZbX_M.js";import"./chunks/color-hash.7xxmQZVO.js";function ct(t,s){const e=O();q(async()=>{if(t.value){const{default:i}=await G(()=>import("./chunks/interact.min.mMkhHFsV.js").then(l=>l.i),__vite__mapDeps([0,1,2])),a=rt(s.onmove,1e3/60);e.value=i(t.value).styleCursor(!1).draggable({origin:"self",inertia:{enabled:!0,resistance:10},onstart:s.onstart,onmove:a,onend:a})}}),W(async()=>{var i;(i=e.value)==null||i.unset()})}class kt{constructor(s){_(this,"lastX");_(this,"lastY");_(this,"movingX");_(this,"movingY");_(this,"smoother");this.lastX=0,this.lastY=0,this.movingX=0,this.movingY=0,this.smoother=s*.05+.7}start(s,e){this.lastX=s,this.lastY=e,this.movingX=0,this.movingY=0}move(s,e){const i=this.lastX,a=this.lastY,l=(this.movingX+(i-s)*.1)*this.smoother,d=(this.movingY+(a-e)*.1)*this.smoother,h=i-l,y=a-d;return this.movingX=l,this.movingY=d,this.lastX=h,this.lastY=y,[i,a,h,y]}}function ut(t){return Array.from({length:t}).map((s,e)=>new kt(e/(t*1.25)))}const gt={class:"signature-draw signature-draw--desktop","data-testid":"signature-draw-desktop"},Et=["width","height"],mt={key:1,class:"signature-draw__control"},X=B({__name:"SignatureDrawDesktop",props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"}},setup(t){const s=t,e=$(s),i=M(e,""),a=f(!0),l=f(),d=ut(15);function h(){nt(l.value),a.value=!0,e.value=""}function y(g){if(!a.value){U(l.value,g);const c=L(l.value),w=s.modelModifiers.base64?c:x(c);e.value=w}}return A(()=>s.color,y),ct(l,{onstart(g){for(const c of d)c.start(g.pageX,g.pageY)},onmove(g){for(const k of d){const o=k.move(g.pageX,g.pageY),m={color:s.color};it(l.value,o,m)}const c=L(l.value),w=s.modelModifiers.base64?c:x(c);a.value=!1,e.value=w}}),q(()=>{e.value&&i.value&&(lt(l.value,i.value),a.value=!1)}),(g,c)=>(E(),v("div",gt,[p("canvas",{ref_key:"canvas",ref:l,class:"signature-draw__canvas","data-testid":"signature-draw-canvas",width:t.width,height:t.height},null,8,Et),n(a)?(E(),V(ot,{key:0,class:"signature-draw__placeholder","data-testid":"signature-draw-placeholder"},{default:u(()=>[N(F(t.placeholder),1)]),_:1})):T("",!0),n(a)?T("",!0):(E(),v("div",mt,[r(S,{"data-testid":"signature-draw-reset",variant:"link",size:"xs",class:"signature-draw__reset",pill:"",onClick:c[0]||(c[0]=w=>h())},{default:u(()=>[p("span",null,F(t.resetLabel),1)]),_:1})]))]))}});async function R(t,s){const e=document.createElement("canvas"),i=e.getContext("2d"),a=await Y(t);return e.width=s%180===0?a.width:a.height,e.height=s%180===0?a.height:a.width,i.translate(e.width/2,e.height/2),i.rotate(s*Math.PI/180),i.drawImage(a,a.width/-2,a.height/-2),e.toDataURL()}async function yt(t,s){const e=document.createElement("canvas"),i=e.getContext("2d"),a=await Y(t);return e.width=a.width,e.height=a.height,i.drawImage(a,0,0),U(e,s),e.toDataURL()}const vt={class:"signature-draw__preview"},ft=["src"],bt={key:0,class:"signature-draw__modal","data-testid":"signature-draw-modal"},wt=B({__name:"SignatureDrawMobile",props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"},openDrawLabel:{type:String,default:"Click to Draw"},closeDrawLabel:{type:String,default:"Save"}},setup(t){const s=t,e=$(s),i=M(e,""),a=f(""),l=f(!1),d=st(),h=D(()=>d.width.value<s.width+32?"rotate":"normal"),y=D(()=>{const k=[];return h.value&&k.push(`signature-draw--${h.value}`),k}),g=D(()=>({width:`${s.width}px`,aspectRatio:`${s.width/s.height}`}));async function c(){const k=i.value&&h.value==="rotate"?await R(i.value,90):i.value;a.value=k,l.value=!0}async function w(){const k=a.value&&h.value==="rotate"?await R(a.value,-90):a.value,o=s.modelModifiers.base64?k:x(k);e.value=o,l.value=!1}return A(()=>s.color,async k=>{if(!l.value&&i.value){const o=await yt(i.value,k),m=s.modelModifiers.base64?o:x(o);e.value=m,l.value=!1}}),A(l,k=>{k?document.body.style.setProperty("overflow-y","hidden"):document.body.style.removeProperty("overflow-y")}),(k,o)=>J((E(),v("div",{class:I(["signature-draw signature-draw--mobile",n(y)]),"data-testid":"signature-draw-mobile",style:Z(n(g))},[p("div",vt,[n(e)?(E(),v(K,{key:0},[p("img",{src:n(i),alt:"signature-draw-preview","data-testid":"signature-draw-preview",onClick:o[0]||(o[0]=m=>c())},null,8,ft),r(S,{variant:"link",size:"xs",class:"signature-draw__reset","data-testid":"signature-draw-edit",icon:"",onClick:o[1]||(o[1]=m=>c())},{default:u(()=>[r(dt)]),_:1})],64)):(E(),V(S,{key:1,"data-testid":"signature-draw-open",onClick:o[2]||(o[2]=m=>c())},{default:u(()=>[N(F(t.openDrawLabel),1)]),_:1}))]),r(Q,{name:"zoom-in"},{default:u(()=>[n(l)?(E(),v("div",bt,[r(X,{modelValue:n(a),"onUpdate:modelValue":o[3]||(o[3]=m=>P(a)?a.value=m:null),modelModifiers:{base64:!0},class:I(n(y)),placeholder:t.placeholder,color:t.color,width:n(h)==="rotate"?t.height:t.width,height:n(h)==="rotate"?t.width:t.height,"reset-label":t.resetLabel},null,8,["modelValue","class","placeholder","color","width","height","reset-label"]),r(S,{class:"signature-draw__close",nganu:"1311","data-testid":"signature-draw-close",onClick:o[4]||(o[4]=m=>w())},{default:u(()=>[p("span",null,F(t.closeDrawLabel),1)]),_:1})])):T("",!0)]),_:1})],6)),[[n(ht),t.width/t.height]])}}),_t={key:1,class:"signature-draw"},Ct=["src"],C=B({__name:"SignatureDraw",props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"},openDrawLabel:{type:String,default:"Click to Draw"},closeDrawLabel:{type:String,default:"Save"}},emits:["update:modelValue"],setup(t){const s=f(!1),e=at("(min-width: 768px)"),i=D(()=>e.value?X:wt);return q(()=>{s.value=!0}),(a,l)=>n(s)?(E(),V(H(n(i)),{key:0,"model-value":t.modelValue,"model-modifiers":t.modelModifiers,width:t.width,height:t.height,color:t.color,placeholder:t.placeholder,"reset-label":t.resetLabel,"open-draw-label":t.openDrawLabel,"close-draw-label":t.closeDrawLabel,"onUpdate:modelValue":l[0]||(l[0]=d=>a.$emit("update:modelValue",d))},null,8,["model-value","model-modifiers","width","height","color","placeholder","reset-label","open-draw-label","close-draw-label"])):(E(),v("div",_t,[p("img",{class:"signature-draw__fallback",src:n(pt)(t.width,t.height),alt:"signature-draw"},null,8,Ct)]))}}),Ft=b("",4),Dt=b("",2),St=b("",2),xt=b("",3),At=b("",3),Tt=p("p",null,[p("strong",null,"result")],-1),Pt={class:"truncate"},qt=b("",3),Bt=p("p",null,[p("strong",null,"result")],-1),Vt={class:"truncate"},It=["src"],Lt=b("",8),pe=JSON.parse('{"title":"Signature Draw · Components","description":"Draw signature like using real pen","frontmatter":{"title":"Signature Draw · Components","description":"Draw signature like using real pen"},"headers":[],"relativePath":"components/signature-draw/index.md","filePath":"components/signature-draw/index.md"}'),Rt={name:"components/signature-draw/index.md"},ce=Object.assign(Rt,{setup(t){const s=tt("/assets/images/empty-img.png"),e=f(),i=f();return(a,l)=>{const d=et("preview");return E(),v("div",null,[Ft,r(d,null,{default:u(()=>[r(C)]),_:1}),Dt,r(d,{class:"flex-col"},{default:u(()=>[r(C,{width:230})]),_:1}),St,r(d,{class:"flex-col"},{default:u(()=>[r(C,{placeholder:"Draw signature here"})]),_:1}),xt,r(d,{class:"flex-col space-y-2"},{default:u(()=>[r(C,{color:"#73185E"})]),_:1}),At,r(d,{class:"flex-col space-y-2"},{default:u(()=>[r(C,{modelValue:n(e),"onUpdate:modelValue":l[0]||(l[0]=h=>P(e)?e.value=h:null)},null,8,["modelValue"])]),_:1}),Tt,p("pre",Pt,[p("code",null,F(n(e)),1)]),qt,r(d,{class:"flex-col space-y-2"},{default:u(()=>[r(C,{modelValue:n(i),"onUpdate:modelValue":l[1]||(l[1]=h=>P(i)?i.value=h:null),modelModifiers:{base64:!0}},null,8,["modelValue"])]),_:1}),Bt,p("pre",Vt,[p("code",null,F(n(i)||"-"),1)]),p("img",{class:"mt-2 border border-default dark:border-dark-default bg-base-white",src:n(i)||n(s),width:"430",height:"230",alt:"Result Image"},null,8,It),Lt])}}});export{pe as __pageData,ce as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/chunks/interact.min.mMkhHFsV.js","assets/chunks/theme.skJpWUiz.js","assets/chunks/framework.ia1RVXQM.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
