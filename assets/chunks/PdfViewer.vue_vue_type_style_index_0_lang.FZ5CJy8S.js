import{I as b,r as y,aG as re,aE as pe,a0 as q,Z as K,z as S,q as o,aA as me,P as Y,a6 as ge,aH as ye,aI as _e,l as L,ae as we,ax as oe,aJ as xe,A as Pe,_ as be,o as F,c as j,p as m,d as R,K as x,w as O,t as M,a8 as Ee,m as ce,a9 as I,b as Se,aK as $e,aa as le,a as V,af as De,aL as Z,aF as ie,am as Ce,aj as Te,an as ne,ai as X,T as ke,n as Ne}from"./framework.1iuB3FAc.js";import{v as ue}from"./index.Ax46vBtc.js";import{n as H}from"./noop.Uu3q6ZSj.js";import{I as Oe,a as Le}from"./20.UtbVNrzk.js";import{I as Ve}from"./20.vrGNQ8yw.js";import{_ as G}from"./Button.vue_vue_type_script_setup_true_lang.7gHGHFYU.js";import"./Button.vue_vue_type_style_index_0_lang.w40geAFS.js";import{_ as ze}from"./Divider.vue_vue_type_script_setup_true_lang.ZjeaGhI8.js";import"./Divider.vue_vue_type_style_index_0_lang.w40geAFS.js";import{_ as Fe}from"./Select.vue_vue_type_style_index_0_lang.p4eKzsp_.js";import{_ as je}from"./Heading.vue_vue_type_script_setup_true_lang.npdo7WyI.js";import"./Heading.vue_vue_type_style_index_0_lang.w40geAFS.js";import{f as Ie}from"./focus.Mu_mSnXH.js";import{u as J}from"./index.x42eHTML.js";import{d as Me}from"./debounce.fM6nWQov.js";import{r as Be}from"./isObjectLike.OM1Hublo.js";import{t as Re}from"./toInteger.rPRqmf_I.js";import{t as Ae}from"./toNumber.jidAZ9H9.js";import{t as se}from"./toString.MVWRvL-L.js";import{u as We}from"./use-loading.2V0OYePb.js";var He=Be.isFinite,Ge=Math.min;function Je(e){var n=Math[e];return function(i,t){if(i=Ae(i),t=t==null?0:Ge(Re(t),292),t&&He(i)){var a=(se(i)+"e").split("e"),s=n(a[0]+"e"+(+a[1]+t));return a=(se(s)+"e").split("e"),+(a[0]+"e"+(+a[1]-t))}return n(i)}}var Ue=Je("round");const Ze=Ue,Xe=Symbol("DropzoneContext");function qe(e,n){const i=b(!0),t=b(),a=y(),s=y();async function c(){if(_(),e.value){const{default:f}=await K(()=>import("./interact.min.V9qN7HVv.js").then(l=>l.i),__vite__mapDeps([0,1,2]));f.dynamicDrop(!0),t.value=f(n.value,{context:e.value}).dropzone({accept:".pdf-object",overlap:.95,enabled:i.value,checker(l,u,d,v,$,w,g){var P;return d&&(((P=e.value)==null?void 0:P.contains(g))||g.classList.contains("pdf-object--external"))},ondragenter(l){s.value=l.target,l.target.classList.add("hover")},ondragleave(l){l.target.classList.remove("hover")},ondrop(l){s.value=l.target,a.value=l.target,l.target.classList.remove("hover")}})}}function _(){t.value&&t.value.unset()}return re(e,f=>{f.some(u=>u.type==="childList"&&u.target.matches(n.value))&&c()},{subtree:!0,childList:!0}),pe(()=>{_()}),q(Xe,{dropzone:a,hoverzone:s}),i}function Ke(e,n=document.body,i=!1){const t=b();function a(){var s,c;t.value=i?(s=o(n))==null?void 0:s.querySelectorAll(o(e)):(c=o(n))==null?void 0:c.querySelector(o(e))}return S(()=>o(e),()=>{a()}),re(n,s=>{s.some(c=>c.type==="childList")&&a()},{childList:!0,subtree:!0}),me(()=>{a()}),t}const Q=Symbol("PDFObjects"),ta=Symbol("PDFObjects");function Ye(e){var f,l,u,d;const n=L(()=>Ze(e.width/e.height,2)),i=y((f=e.minWidth)!=null?f:e.width*.5),t=y((l=e.maxWidth)!=null?l:e.width*2),a=y((u=e.minHeight)!=null?u:e.height*.5),s=y((d=e.maxHeight)!=null?d:e.height*2),c=J(e.width,i,t),_=J(e.height,a,s);return S(()=>e.minWidth,v=>{Number.isFinite(v)&&(i.value=v)}),S(()=>e.minHeight,v=>{Number.isFinite(v)&&(a.value=v)}),S(()=>e.maxWidth,v=>{Number.isFinite(v)&&(t.value=v)}),S(()=>e.maxHeight,v=>{Number.isFinite(v)&&(s.value=v)}),{ratio:n,width:c,height:_,minWidth:i,maxWidth:t,minHeight:a,maxHeight:s}}function aa(e){var w;const{objects:n,page:i}=Y(Q),t=y((w=e.page)!=null?w:i.value),a=y(e.x),s=y(e.y),c=Symbol("PDFObject"),{width:_,height:f,minWidth:l,maxWidth:u,minHeight:d,maxHeight:v,ratio:$}=Ye(e);return n.set(c,ge({id:c,page:t,x:a,y:s,width:_,height:f})),ye(()=>{Number.isFinite(t.value)||we(i).toBeTruthy().then(()=>{t.value=i.value})}),_e(()=>{n.delete(c)}),{id:c,x:a,y:s,page:t,width:_,height:f,minWidth:l,minHeight:d,maxWidth:u,maxHeight:v,ratio:$}}function oa(e){const{root:n}=Y(Q),i=L(()=>`.page[data-page-number="${o(e)}"]`);return Ke(i,n)}const ia=Me(Ie,100),de=Symbol("PdfViewer");function he(){return Y(de,()=>{const e=y(1),n=y(1),i=y(0);return{page:e,scale:n,totalPage:i,zoomIn:H,zoomOut:H,next:H,prev:H}},!0)}function Qe(e,n={}){const i=y(!1),t=L(()=>{var d;return(d=o(n.offsetTop))!=null?d:0}),a=L(()=>{var d;return(d=o(e))==null?void 0:d.parentElement}),{top:s,height:c}=oe(a),{top:_,width:f,left:l}=oe(e),{height:u}=xe();return Pe(d=>{i.value&&e.value&&(s.value-t.value>=0?(e.value.style.setProperty("height",`${u.value-_.value}px`),e.value.style.setProperty("width","100%")):(a.value.style.setProperty("min-height",`${c.value}px`),e.value.style.setProperty("position","fixed"),e.value.style.setProperty("top",`${t.value}px`),e.value.style.setProperty("left",`${l.value}px`),e.value.style.setProperty("width",`${f.value}px`),e.value.style.setProperty("height",`${u.value-t.value}px`)),d(()=>{a.value.style.removeProperty("min-height"),e.value.style.removeProperty("position"),e.value.style.removeProperty("top"),e.value.style.removeProperty("left"),e.value.style.removeProperty("width"),e.value.style.removeProperty("height")}))}),i}const et={},tt={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",class:"persona-icon",viewBox:"0 0 20 20"},at=m("path",{fill:"currentColor","fill-rule":"evenodd",d:"M4.673 12.83a.575.575 0 0 1 0-.821l4.91-4.839a.595.595 0 0 1 .834 0l4.91 4.839c.23.226.23.594 0 .82a.595.595 0 0 1-.833 0L10 8.403 5.506 12.83a.595.595 0 0 1-.833 0","clip-rule":"evenodd"},null,-1),ot=[at];function it(e,n){return F(),j("svg",tt,ot)}const nt=be(et,[["render",it]]),st={"data-testid":"pdf-navigation",class:"pdf__navigation"},rt={class:"pdf__navigation-container"},ct={class:"pdf__navigation-scale"},lt={"data-testid":"pdf-total",class:"pdf__navigation-total"},ut=R({__name:"PdfNavigation",setup(e){const{page:n,scale:i,totalPage:t,zoomIn:a,zoomOut:s,next:c,prev:_}=he(),f=L(()=>Array.from({length:t.value}).map((l,u)=>({text:`${u+1}`,value:u+1})));return(l,u)=>(F(),j("div",st,[m("div",rt,[x(G,{"data-testid":"pdf-zoom-out",variant:"ghost",size:"xs",icon:"",onClick:o(s)},{default:O(()=>[x(Oe)]),_:1},8,["onClick"]),m("span",ct,M((o(i)*100).toFixed(0))+"% ",1),x(G,{"data-testid":"pdf-zoom-in",variant:"ghost",size:"xs",icon:"",onClick:o(a)},{default:O(()=>[x(Le)]),_:1},8,["onClick"]),x(ze,{vertical:""}),x(Fe,{modelValue:o(n),"onUpdate:modelValue":u[0]||(u[0]=d=>Ee(n)?n.value=d:null),options:o(f),size:"xs"},null,8,["modelValue","options"]),m("span",lt,"of "+M(o(t)),1),x(G,{"data-testid":"pdf-prev",variant:"ghost",size:"xs",icon:"",onClick:o(_)},{default:O(()=>[x(nt)]),_:1},8,["onClick"]),x(G,{"data-testid":"pdf-next",variant:"ghost",size:"xs",icon:"",onClick:o(c)},{default:O(()=>[x(Ve)]),_:1},8,["onClick"])])]))}}),dt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='595'%20height='842'%20aria-labelledby='loading-aria'%20preserveAspectRatio='none'%20role='img'%20viewBox='0%200%20595%20842'%3e%3ctitle%20id='loading-aria'%3eLoading...%3c/title%3e%3crect%20width='100%25'%20height='100%25'%20x='0'%20y='0'%20clip-path='url(%23clip-path)'%20style='fill:url(%23fill)'/%3e%3cdefs%3e%3cclipPath%20id='clip-path'%3e%3crect%20width='191'%20height='14'%20x='44'%20y='64'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='44'%20y='94'%20rx='2.068'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='152'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='182'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='212'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='242'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='272'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='302'%20rx='7'/%3e%3crect%20width='349'%20height='14'%20x='44'%20y='332'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='390'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='420'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='450'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='480'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='510'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='540'%20rx='7'/%3e%3crect%20width='183'%20height='14'%20x='44'%20y='570'%20rx='7'/%3e%3crect%20width='191'%20height='14'%20x='360'%20y='628'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='411'%20y='678'%20rx='2.068'/%3e%3crect%20width='191'%20height='14'%20x='44'%20y='64'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='44'%20y='94'%20rx='2.068'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='152'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='182'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='212'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='242'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='272'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='302'%20rx='7'/%3e%3crect%20width='349'%20height='14'%20x='44'%20y='332'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='390'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='420'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='450'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='480'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='510'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='540'%20rx='7'/%3e%3crect%20width='183'%20height='14'%20x='44'%20y='570'%20rx='7'/%3e%3crect%20width='191'%20height='14'%20x='360'%20y='628'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='411'%20y='678'%20rx='2.068'/%3e%3c/clipPath%3e%3clinearGradient%20id='fill'%3e%3cstop%20offset='.6'%20stop-color='%23E7E7E8'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='-2;%20-2;%201'/%3e%3c/stop%3e%3cstop%20offset='1.6'%20stop-color='%23CFCFD1'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='-1;%20-1;%202'/%3e%3c/stop%3e%3cstop%20offset='2.6'%20stop-color='%23E7E7E8'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='0;%200;%203'/%3e%3c/stop%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",ht={"data-testid":"pdf-loading",class:"pdf__loading"},ft=["src"],vt=R({__name:"PdfLoading",setup(e){return(n,i)=>(F(),j("div",ht,[m("img",{src:o(dt),width:"793",height:"1122"},null,8,ft)]))}});let B,z;async function ee(){if(!B){const e=await K(()=>import("./pdf.msmn0fjY.js").then(n=>n.p),__vite__mapDeps([3,1,2,4]));typeof window<"u"&&"Worker"in window&&(e.GlobalWorkerOptions.workerSrc=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${e.version}/build/pdf.worker.min.js`),B=e}return B}async function te(){return await ee(),z||(z=await K(()=>import("./pdf_viewer.CoFboHyk.js").then(e=>e.p),__vite__mapDeps([5,1,2]))),z}async function pt(...e){return await ee(),B.getDocument(...e)}async function mt(){return`https://cdn.jsdelivr.net/npm/pdfjs-dist@${await fe()}/cmaps/`}async function fe(){return await ee(),B.version}async function gt(){return await te(),new z.EventBus}async function yt(...e){return await te(),new z.PDFViewer(...e)}async function _t(...e){return await te(),new z.PDFLinkService(...e)}const wt={"data-testid":"pdf-error",class:"pdf__error"},xt={class:"mt-7"},Pt=m("dt",null,"URL:",-1),bt={class:"truncate"},Et=["href"],St=m("dt",null," Reason: ",-1),$t=m("dt",null," PDFJS Version: ",-1),Dt=R({__name:"PdfError",props:{url:{type:String,default:""},error:{type:Object,default:()=>({})}},setup(e){const n=y("");return ce(async()=>{n.value=await fe()}),(i,t)=>I((F(),j("div",wt,[x(je,{element:"h3"},{default:O(()=>[Se(" Failed to load PDF ")]),_:1}),m("dl",xt,[Pt,m("dd",bt,[m("a",{href:e.url,target:"_blank"},[m("code",null,M(e.url),1)],8,Et)]),St,m("dd",null,[m("code",null,M(e.error.message),1)]),$t,m("dd",null,[m("code",null,M(o(n)),1)])])])),[[o(ue),1122/793]])}}),Ct=["mousemove","mousedown","touchstart","keydown","scroll"];function Tt(e,n=5e3){const i=y(!1);let t;function a(){i.value=!1,t&&clearTimeout(t),t=setTimeout(()=>{i.value=!0},n)}return $e(e,Ct,a,{passive:!0}),i}const kt=R({__name:"PdfObjects",props:{dropTarget:{type:String,default:".pdfViewer > .page"}},setup(e){const n=e,i=new Map,t=y(),a=he(),s=le(n,"dropTarget");return qe(t,s),q(Q,{...a,objects:i,root:t}),(c,_)=>(F(),j("div",{ref_key:"root",ref:t,class:"pdf-objects","data-testid":"pdf-objects"},[V(c.$slots,"default")],512))}});function Nt(e,n){const i=b(),t=b(),a=b(),s=b(),c=b(),_=L(()=>{var r,h;return(h=(r=i.value)==null?void 0:r.numPages)!=null?h:0}),f=J(1,.1,2),l=J(1,1,_),u=We(),d=b(!1),v=b(),$=Z(),w=Z(),g=Z();async function P(r,h){u.value=!0,v.value=void 0;try{await D(),r&&(s.value=await pt({url:r,password:h,cMapUrl:await mt(),cMapPacked:!0,disableStream:!1}),i.value=await s.value.promise,a.value.setDocument(i.value),c.value.setDocument(i.value),$.trigger(i.value))}catch(E){E instanceof Error&&(v.value=E,w.trigger(E))}finally{u.value=!1}}async function D(){var r,h;s.value&&!s.value.destroyed&&(await s.value.destroy(),i.value=void 0,s.value=void 0,(r=a.value)==null||r.setDocument(null),(h=c.value)==null||h.setDocument(null))}async function U(){if(typeof navigator<"u"&&e.value&&n.value){const r=await gt();r.on("pagesinit",()=>{var A,W;const h=(W=(A=n.value)==null?void 0:A.clientWidth)!=null?W:0,E=h>0&&h<793;a.value.currentScaleValue=E?"page-width":"1",a.value.currentPageNumber=l.value,d.value=!0,g.trigger(a.value)}),r.on("pagechanging",h=>{l.value=h.pageNumber}),r.on("scalechanging",h=>{f.value=h.scale}),t.value=r,c.value=await _t({eventBus:t.value}),a.value=await yt({container:e.value,viewer:n.value,eventBus:t.value,linkService:c.value,removePageBorders:!0,annotationEditorMode:-1}),c.value.setViewer(a.value)}}return S([e,n],async([r,h])=>{a.value?r&&h&&(a.value.container=r,a.value.viewer=h,i.value&&a.value.setDocument(i.value),a.value.update()):await U()}),S(l,r=>{a.value&&r!==a.value.currentPageNumber&&(a.value.currentPageNumber=r)}),S(f,r=>{a.value&&r!==a.value.currentScale&&(a.value.currentScale=r)}),De(async()=>{var r;await D(),(r=a.value)==null||r.cleanup()}),{page:l,scale:f,totalPage:_,loading:u,error:v,ready:d,openDoc:P,closeDoc:D,pdfDoc:i,pdfEventBus:t,pdfViewer:a,pdfLoadingTask:s,pdfLinkService:c,onLoaded:$.on,onError:w.on,onReady:g.on}}const Ot=["data-page","data-scale"],Lt={class:"pdf__header"},Vt={class:"pdf__footer"},na=R({__name:"PdfViewer",props:{src:{type:String,default:""},page:{type:Number,default:1},scale:{type:Number,default:1},password:{type:String,default:void 0},layout:{type:String,default:"fixed"},ratio:{type:[Number,String],default:210/297},offsetTop:{type:[Number,String],default:0}},emits:["ready","loaded","error","error-password","update:page","update:scale"],setup(e,{expose:n,emit:i}){const t=e,a=i,s=y(),c=y(),_=y(),f=Tt(c),l=ie(t,"page"),u=ie(t,"scale"),d=Ce(le(t,"offsetTop"),{nanToZero:!0}),v=Qe(s,{offsetTop:d}),$=L(()=>{const p=[];return t.layout&&p.push(`pdf-viewer--layout-${t.layout}`),p}),{page:w,scale:g,totalPage:P,openDoc:D,closeDoc:U,pdfDoc:r,loading:h,error:E,onLoaded:A,onError:W,onReady:ve}=Nt(c,_);Te(()=>[t.src,t.password],([p,ae])=>{D(p,ae)},{debounce:500}),S(()=>t.layout,p=>{v.value=p==="fit"},{immediate:!0}),ce(async()=>{t.src&&D(t.src,t.password)}),A(p=>{a("loaded",p)}),W(p=>{p.name==="PasswordException"&&a("error-password",p),a("error",p)}),ve(p=>{a("ready",p)});function C(){g.value=Math.round(g.value/.1)*.1+.1}function T(){g.value=Math.round(g.value/.1)*.1-.1}function k(){w.value++}function N(){w.value--}return q(de,{page:w,scale:g,totalPage:P,zoomIn:C,zoomOut:T,next:k,prev:N}),ne(w,l),ne(g,u),n({page:w,scale:g,totalPage:P,zoomIn:C,zoomOut:T,next:k,prev:N,openDoc:D,closeDoc:U}),(p,ae)=>I((F(),j("div",{ref_key:"root",ref:s,"data-testid":"pdf-viewer",class:Ne(["pdf",o($)]),"data-page":o(w),"data-scale":o(g)},[m("div",Lt,[V(p.$slots,"header",{page:o(w),scale:o(g),totalPage:o(P),zoomIn:C,zoomOut:T,next:k,prev:N,doc:o(r)})]),x(kt,{class:"pdf__wrapper"},{default:O(()=>[m("div",{ref_key:"container",ref:c,class:"pdf__container pdfContainer"},[I(x(vt,null,null,512),[[X,o(h)||!e.src]]),I(x(Dt,{url:e.src,error:o(E)},null,8,["url","error"]),[[X,!o(h)&&o(E)]]),m("div",{ref_key:"viewer",ref:_,class:"pdf__viewer pdfViewer"},null,512),V(p.$slots,"default",{page:o(w),scale:o(g),totalPage:o(P),zoomIn:C,zoomOut:T,next:k,prev:N,doc:o(r)})],512),V(p.$slots,"container",{page:o(w),scale:o(g),totalPage:o(P),zoomIn:C,zoomOut:T,next:k,prev:N,doc:o(r)}),x(ke,{name:"slide-up"},{default:O(()=>[I(x(ut,null,null,512),[[X,!o(f)&&!o(h)&&!o(E)]])]),_:1}),V(p.$slots,"body",{page:o(w),scale:o(g),totalPage:o(P),zoomIn:C,zoomOut:T,next:k,prev:N,doc:o(r)})]),_:3}),m("div",Vt,[V(p.$slots,"footer",{page:o(w),scale:o(g),totalPage:o(P),zoomIn:C,zoomOut:T,next:k,prev:N,doc:o(r)})])],10,Ot)),[[o(ue),e.layout==="fixed"?Number(e.ratio):0]])}});export{Xe as D,ta as P,na as _,oa as a,Q as b,ia as f,aa as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/chunks/interact.min.V9qN7HVv.js","assets/chunks/theme.CM5SDijO.js","assets/chunks/framework.1iuB3FAc.js","assets/chunks/pdf.msmn0fjY.js","assets/chunks/vite-browser-external_commonjs-proxy.DVuwXWFB.js","assets/chunks/pdf_viewer.CoFboHyk.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
