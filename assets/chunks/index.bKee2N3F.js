import{d as M,aa as H,l as f,r as g,H as q,m as K,z as R,o as N,f as P,w as j,ai as D,aj as L,a as Q,R as T,K as E}from"./framework.df26sawU.js";const B="--vc-auto-duration",G=`height var(${B}) cubic-bezier(0.33, 1, 0.68, 1)`,p={padding:0},I={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"};function z(l){return l.value?parseFloat(getComputedStyle(l.value).height):0}function _(l){var n;var a;return{height:`${(n=(a=l.value)==null?void 0:a.scrollHeight)!=null?n:0}px`}}function k(l){if(!l.value)return{};const{transition:a}=getComputedStyle(l.value);return a==="all 0s ease 0s"?{transition:G}:{transition:a}}function A(l){if(!l.value)return!0;const{transition:a}=getComputedStyle(l.value);return matchMedia("(prefers-reduced-motion: reduce)").matches||a.includes("none")||a.includes("height 0s")}const O=M({inheritAttrs:!0,__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(l,{emit:a}){const n=l,o=H(n,"when"),i=H(n,"baseHeight"),v=f(()=>({overflow:"hidden",height:`${i.value}px`})),m=f(()=>({...p,...i.value===0?{display:"none"}:v.value})),t=g(null),c=g(o.value?"expanded":"collapsed"),s=e=>c.value=e,h=q({}),u=e=>h.value=e,d=e=>u({...h.value,...e}),x=g(300),w=f(()=>({[B]:`${x.value}ms`}));function y(){u(p),s("expanded"),a("expanded")}function C(){u(m.value),s("collapsed"),a("collapsed")}function F(e){var r;e.target===t.value&&e.propertyName==="height"&&(o.value?((r=t.value)==null?void 0:r.scrollHeight)===z(t)&&y():i.value===z(t)&&C())}return K(()=>{if(!t.value)return;o.value||i.value!==0||u(I);const e=function(S=0){if(S===0)return 0;const $=S/36,b=Math.round(10*(4+15*$**.25+$/5));return Number.isFinite(b)?b:0}(t.value.scrollHeight-i.value);var r;r=e<=0?300:e,x.value=r,u(o.value?p:m.value)}),R(o,e=>{if(e){if(A(t))return y();s("expanding"),a("expand"),u({...p,...v.value,...w.value}),requestAnimationFrame(()=>{d({..._(t),...k(t),willChange:"height"})})}else{if(A(t))return C();s("collapsing"),a("collapse"),d({...w.value,..._(t)}),requestAnimationFrame(()=>{d({...v.value,...k(t),willChange:"height"})})}}),R(i,e=>{o.value||d(e>0?{display:void 0,height:`${e}px`}:{display:"none"})}),(e,r)=>(N(),P(E(n.as),{ref_key:"collapseRef",ref:t,style:T(h.value),onTransitionend:F,"data-collapse":c.value},{default:j(()=>[Q(e.$slots,"default",L(D({state:c.value})))]),_:3},40,["style","data-collapse"]))}});export{O as Q};
