import{Q as l}from"./queue.CxBKXn5n.js";import{H as p,av as d,a7 as m,r as v,aw as u,U as c,p as w}from"./framework.sPKXfJg2.js";let a,r;const i=new l;async function g(e,f){if(a||(a=p(new Map)),!r){const t=document.createElement("div"),s=d({name:"GlobalContainer",render:()=>[...a.value.values()].map(o=>m(o.component,{ref:o.ref}))});document.body.append(t),s.mount(t),t.id="global",r=s}let n=a.value.get(e);return n||(n={component:f,ref:v()},a.value.set(e,n),u(a),await c()),w(n.ref)}async function y(e){a&&r&&(a.value.delete(e),u(a),await c())}async function x(e){return await i.add(()=>g(e,e))}async function I(e){return await i.add(()=>y(e))}export{I as r,x as u};
