import{d as _,a2 as Y,N as Z,g as b,o as s,c as f,r as v,e as A,k,M as ee,m as u,n as N,F as I,E as R,b as m,w as p,a as C,t as y,h as $,y as te,a4 as D,I as x,an as U,a1 as F,P as ae}from"./framework.e_h4aueT.js";import{_ as le}from"./Dropdown.vue_vue_type_script_setup_true_lang.2xGEKwA1.js";import{p as se}from"./Dropdown.vue_vue_type_style_index_0_lang.6fPL861O.js";import{p as ie}from"./DropdownHeader.wW6XUJhf.js";import{p as ne}from"./Input.avtU0igR.js";import{p as oe}from"./Text.JsRyatD5.js";import{I as de}from"./index.hjpy5ZnQ.js";import{p as M}from"./Label.tHT-V29-.js";import{I as re}from"./20.lPxbblgA.js";import{I as ue}from"./20.BZPKkrjT.js";import{I as ce}from"./20.xRrL9iad.js";import{I as pe}from"./IconCheckbox.cnMIBEMQ.js";import{p as fe}from"./SpinnerRing.amwUdINQ.js";import{i as B,v as me}from"./value.Mcqa82Kw.js";import{d as ye,u as ve}from"./adapter.ObXYk3jj.js";import{u as he}from"./use-loading.ijVy5faM.js";import{g as be}from"./index.r0OCB_7d.js";import{i as ge}from"./isNil.-q_uwI5T.js";import{w as Se}from"./index.L8r16ak4.js";const ke={key:0,class:"input__prepend"},Ce=k("input",{class:"input__hidden",type:"text"},null,-1),Ae=["disabled","readonly"],Ve={key:1,class:"input__append"},$e=_({inheritAttrs:!1,__name:"SelectInput",props:{size:{type:String,default:"md"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},containerClass:{type:[String,Array,Object],default:void 0}},setup(e){const l=e,a=Y(),r=Z(de,void 0,!1),g=b(()=>{const i=[];return r!=null&&r.size.value?i.push(`input--${r==null?void 0:r.size.value}`):l.size&&i.push(`input--${l.size}`),l.disabled&&i.push("input--disabled"),l.readonly&&i.push("input--readonly"),l.error&&i.push("input--error","state--error"),a.prepend&&i.push("input--has-prepend"),a.append&&i.push("input--has-append"),i});return(i,h)=>(s(),f("div",{class:N(["input",e.containerClass]),"data-testid":"input-container"},[i.$slots.prepend?(s(),f("span",ke,[v(i.$slots,"prepend")])):A("",!0),Ce,k("div",ee({class:["input__form",u(g)],"data-testid":"input",disabled:e.disabled,readonly:e.readonly,tabindex:1},i.$attrs),[v(i.$slots,"default")],16,Ae),i.$slots.append?(s(),f("span",Ve,[v(i.$slots,"append")])):A("",!0)],2))}}),xe={class:"select__tags"},Be=_({__name:"SelectTags",props:{items:{type:Array,default:()=>[]},displayLimit:{type:Number,default:2},limitText:{type:String,default:"+{n} Other(s)"}},setup(e){const l=e,a=b(()=>l.items.slice(0,l.displayLimit)),r=b(()=>l.limitText.replaceAll("{n}",String(l.items.length-l.displayLimit)));return(g,i)=>(s(),f("div",xe,[(s(!0),f(I,null,R(u(a),(h,T)=>(s(),m(M,{key:T,"data-testid":"select-tag",variant:"light",size:"xs"},{default:p(()=>[C(y(h.text),1)]),_:2},1024))),128)),e.items.length>e.displayLimit?(s(),m(M,{key:0,"data-testid":"select-tag-others",variant:"light",size:"xs"},{default:p(()=>[C(y(u(r)),1)]),_:1})):A("",!0)]))}});function w(e,l){var a;return(a=e.find(r=>B(r.value,l)))!=null?a:{text:"",value:void 0}}function z(e,l){return Array.isArray(l)?e.filter(a=>me(l,a.value)):[]}const Ie=ye({setup({props:e,keyword:l}){const a=ve(e);return b(()=>a.value.filter(g=>g.text.toLowerCase().includes(l.value.toLowerCase())))}}),Te={key:1,"data-testid":"select-placeholder"},Le={class:"input__form__placeholder"},we={key:0,"data-testid":"select-no-data",class:"select__empty"},ze={class:"select__option"},Ne={class:"select__option-text"},_e={class:"select__option-checked"},Oe={key:2,"data-testid":"select-loading",class:"select__loading"},at=_({models:{prop:"modelValue",event:"update:modelValue"},__name:"Select",props:{modelValue:{type:void 0,default:void 0},selected:{type:[Object,Array],default:void 0},options:{type:Array,default:()=>[]},placeholder:{type:String,default:"Â "},emptyText:{type:String,default:"No Data"},loadingText:{type:String,default:"Loading..."},searchText:{type:String,default:"Search..."},adapter:{type:Object,default:()=>Ie},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},clearLabel:{type:String,default:"Clear"},size:{type:String,default:"md"},sectionLabel:{type:String,default:void 0},noCaret:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},displayLimit:{type:Number,default:void 0},limitText:{type:String,default:void 0},searchable:{type:Boolean,default:!0},menuSize:{type:String,default:void 0},menuClass:{type:[String,Array,Object],default:void 0},divider:{type:Boolean,default:!1},noAnimation:{type:Boolean,default:!1},noCloseAfterSelect:{type:Boolean,default:!1}},emits:["change","update:modelValue","update:selected","userInput"],setup(e,{emit:l}){const a=e,r=l,g=$(),i=$(),h=b(()=>{var t;return(t=g.value)==null?void 0:t.input}),T=b(()=>{var t;return(t=i.value)==null?void 0:t.menuBody}),V=$(""),c=$(!1),L=he({elapsed:!1}),G={props:a,keyword:V,isOpen:c,isLoading:L,menuEl:T},S=a.adapter.setup(G),o=$(a.multiple?z(S.value,a.modelValue):w(S.value,a.modelValue)),O=()=>{!a.disabled&&!a.readonly&&(c.value=!c.value)},H=b(()=>{const t=[];return c.value&&t.push("select--open"),a.disabled&&t.push("select--disabled"),a.readonly&&t.push("select--readonly"),a.multiple&&t.push("select--multiple"),t}),q=b(()=>{var t;return a.multiple?Array.isArray(o.value)&&o.value.length>0:!ge((t=o.value)==null?void 0:t.value)}),E=Se(()=>a.modelValue,t=>{o.value=a.multiple?z(S.value,t):w(S.value,t)});te(S,t=>{a.modelValue&&t.length>0&&(o.value=a.multiple?z(t,a.modelValue):w(t,a.modelValue))});function j(t){let d;a.multiple?t?Array.isArray(o.value)&&(d=o.value.some(n=>B(n.value,t.value))?o.value.filter(n=>!B(n.value,t.value)):[...o.value,t]):d=[]:d=t,E.pause(),o.value=d,r("change",d),r("update:selected",d),r("update:modelValue",a.multiple?d.map(n=>n.value):d==null?void 0:d.value),c.value&&r("userInput",d),a.noCloseAfterSelect||(c.value=!1),ae(()=>{E.resume()})}function W(){!a.disabled&&!a.readonly&&(c.value=!0)}function J(){j()}function P(t){return o.value?a.multiple&&Array.isArray(o.value)?o.value.some(d=>B(t.value,d.value)):B(t.value,o.value.value):!1}function K(){var t;(t=h.value)==null||t.focus()}function Q(){V.value=""}return be(()=>{c.value&&h.value&&h.value!==document.activeElement&&(h.value.select(),h.value.focus())}),(t,d)=>(s(),m(le,{ref_key:"dropdown",ref:i,modelValue:u(c),"onUpdate:modelValue":d[1]||(d[1]=n=>D(c)?c.value=n:null),class:N(["select",u(H)]),"data-testid":"select","aria-label":"select",disabled:e.disabled,divider:e.divider,"menu-size":e.menuSize,"menu-class":e.menuClass,"no-animation":e.noAnimation,onShow:K,onHide:Q},{activator:p(()=>[x($e,{"data-testid":"select-activator",class:"select__activator",size:e.size,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,error:e.error,onFocus:W},U({default:p(()=>[u(q)?v(t.$slots,"selected",{key:0,item:u(o),multiple:e.multiple},()=>{var n;return[a.multiple&&Array.isArray(u(o))?(s(),m(Be,{key:0,items:u(o),"display-limit":e.displayLimit,"limit-text":e.limitText},null,8,["items","display-limit","limit-text"])):(s(),f(I,{key:1},[C(y((n=u(o))==null?void 0:n.text),1)],64))]}):(s(),f("div",Te,[v(t.$slots,"placeholder",{},()=>[k("span",Le,y(e.placeholder),1)])]))]),_:2},[e.noCaret?void 0:{name:"append",fn:p(()=>[v(t.$slots,"caret",{isOpen:u(c),toggle:O},()=>[x(re,{class:"select__caret","data-testid":"select-caret-icon",onClick:O})])]),key:"0"}]),1032,["size","placeholder","disabled","readonly","error"])]),prepend:p(()=>[e.searchable?(s(),m(ne,{key:0,ref_key:"input",ref:g,modelValue:u(V),"onUpdate:modelValue":d[0]||(d[0]=n=>D(V)?V.value=n:null),"data-testid":"select-search",class:"select__search no--error",placeholder:e.searchText,clearable:!0},{append:p(()=>[x(ce,{class:"select__search-icon"})]),_:1},8,["modelValue","placeholder"])):A("",!0)]),default:p(()=>[!u(L)&&u(S).length===0?(s(),f("div",we,[v(t.$slots,"empty",{},()=>[C(y(e.emptyText),1)])])):(s(),f(I,{key:1},[e.sectionLabel||e.clearable?(s(),m(ie,{key:0,"data-testid":"select-label"},U({default:p(()=>[C(y(e.sectionLabel),1)]),_:2},[e.clearable?{name:"action",fn:p(()=>[x(oe,{"data-testid":"select-clear",variant:"caption2",href:"javascript:void",onClick:F(J,["prevent"])},{default:p(()=>[C(y(e.clearLabel),1)]),_:1},8,["onClick"])]),key:"0"}:void 0]),1024)):A("",!0),(s(!0),f(I,null,R(u(S),(n,X)=>(s(),m(se,{key:X,"data-testid":"select-item",class:N({selected:P(n)}),disabled:!!n.disabled,onClick:F(Ee=>j(n),["prevent"])},{default:p(()=>[k("div",ze,[k("div",Ne,[v(t.$slots,"option",{isSelected:P(n),item:n},()=>[C(y(n.text),1)])]),k("div",_e,[e.multiple?(s(),m(pe,{key:0})):(s(),m(ue,{key:1}))])])]),_:2},1032,["class","disabled","onClick"]))),128))],64)),u(L)?(s(),f("div",Oe,[x(fe),v(t.$slots,"loading",{},()=>[k("span",null,y(e.loadingText),1)])])):A("",!0)]),_:3},8,["modelValue","disabled","divider","menu-size","menu-class","class","no-animation"]))}});export{at as _};
