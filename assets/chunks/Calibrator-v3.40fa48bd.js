import{p as re}from"./index.bb2e85ab.js";import{j as ve,f as oe,k as me,l as ge,t as R,u as ne}from"./index.d72d8958.js";import{n as B}from"./noop.cb277961.js";import{E as $,h,ad as he,W as G,U as J,M as X,an as _e,g as I,l as U,x as b,y as ye,_ as N,o as C,c as T,k as v,d as M,C as y,H as g,w as D,t as j,j as ie,a6 as le,a2 as V,a as Pe,a4 as de,r as O,a5 as we,a7 as A,T as $e,n as be}from"./framework.4146f201.js";import{I as Se,a as De}from"./20.467b004e.js";import{I as Ie}from"./20.86c829a7.js";import{_ as ze}from"./Button.vue_vue_type_script_setup_true_lang.99aa9448.js";import"./Button.vue_vue_type_style_index_0_lang.4ed993c7.js";import{p as Oe}from"./Divider.1d1d2d22.js";import{p as Ee}from"./Select.ce2399b8.js";import{H as Ne}from"./Heading.f5b63720.js";import{u as Ce}from"./use-selector.73193928.js";import{f as Te}from"./focus.33532f0c.js";import{u as H}from"./index.d9de5124.js";import{d as ke}from"./debounce.b619e377.js";import{m as Le,l as Ve,u as je,o as Z,b as Fe,a as Me,s as ae}from"./index.c7fdaaa0.js";import{r as Be}from"./isObjectLike.53b0037d.js";import{t as Re}from"./toInteger.d4d227f4.js";import{t as He}from"./toNumber.75689a18.js";import{t as se}from"./toString.314d06e3.js";import{u as We}from"./use-loading.e905d360.js";var Ae=Be.isFinite,Ze=Math.min;function Ue(e){var a=Math[e];return function(o,n){if(o=He(o),n=n==null?0:Ze(Re(n),292),n&&Ae(o)){var t=(se(o)+"e").split("e"),r=a(t[0]+"e"+(+t[1]+n));return t=(se(r)+"e").split("e"),+(t[0]+"e"+(+t[1]-n))}return a(o)}}var Ge=Ue("round");const Je=Ge,Xe=Symbol("DropzoneContext");function Ke(e,a){const o=$(!0),n=$(),t=h(),r=h();async function l(){if(u(),e.value){const{default:f}=await J(()=>import("./interact.min.7201a62d.js").then(s=>s.i),["assets/chunks/interact.min.7201a62d.js","assets/chunks/commonjsHelpers.de833af9.js"]);n.value=f(a.value,{context:e.value}).dropzone({accept:".pdf-object",overlap:.95,enabled:o.value,checker(s,p,c,i,P,w,S){var z;return c&&(((z=e.value)==null?void 0:z.contains(S))||S.classList.contains("pdf-object--external"))},ondragenter(s){r.value=s.target,s.target.classList.add("hover")},ondragleave(s){s.target.classList.remove("hover")},ondrop(s){r.value=s.target,t.value=s.target,s.target.classList.remove("hover")}})}}function u(){n.value&&n.value.unset()}return ve(e,f=>{f.some(p=>p.type==="childList"&&p.target.matches(a.value))&&l()},{subtree:!0,childList:!0}),he(()=>{u()}),G(Xe,{dropzone:t,hoverzone:r}),o}const K=Symbol("PDFObjects"),vo=Symbol("PDFObjects");function Ye(e){var f,s,p,c;const a=I(()=>Je(e.width/e.height,2)),o=h((f=e.minWidth)!=null?f:e.width*.5),n=h((s=e.maxWidth)!=null?s:e.width*2),t=h((p=e.minHeight)!=null?p:e.height*.5),r=h((c=e.maxHeight)!=null?c:e.height*2),l=H(e.width,o,n),u=H(e.height,t,r);return b(()=>e.minWidth,i=>{Number.isFinite(i)&&(o.value=i)}),b(()=>e.minHeight,i=>{Number.isFinite(i)&&(t.value=i)}),b(()=>e.maxWidth,i=>{Number.isFinite(i)&&(n.value=i)}),b(()=>e.maxHeight,i=>{Number.isFinite(i)&&(r.value=i)}),{ratio:a,width:l,height:u,minWidth:o,maxWidth:n,minHeight:t,maxHeight:r}}function mo(e){var w;const{objects:a,page:o}=X(K),n=h((w=e.page)!=null?w:o.value),t=h(e.x),r=h(e.y),l=Symbol("PDFObject"),{width:u,height:f,minWidth:s,maxWidth:p,minHeight:c,maxHeight:i,ratio:P}=Ye(e);return a.set(l,_e({id:l,page:n,x:t,y:r,width:u,height:f})),Le(()=>{Number.isFinite(n.value)||je(o).toBeTruthy().then(()=>{n.value=o.value})}),Ve(()=>{a.delete(l)}),{id:l,x:t,y:r,page:n,width:u,height:f,minWidth:s,minHeight:c,maxWidth:p,maxHeight:i,ratio:P}}function go(e){const{root:a}=X(K),o=I(()=>`.page[data-page-number="${U(e)}"]`);return Ce(o,a)}const ho=ke(Te,100),ue=Symbol("PdfViewer");function ce(){return X(ue,()=>{const e=h(1),a=h(1),o=h(0);return{page:e,scale:a,totalPage:o,zoomIn:B,zoomOut:B,next:B,prev:B}},!0)}function qe(e,a={}){const o=h(!1),n=I(()=>{var c;return(c=U(a.offsetTop))!=null?c:0}),t=I(()=>{var c;return(c=U(e))==null?void 0:c.parentElement}),{top:r,height:l}=oe(t),{top:u,width:f,left:s}=oe(e),{height:p}=me();return ye(c=>{o.value&&e.value&&(r.value-n.value>=0?(e.value.style.setProperty("height",`${p.value-u.value}px`),e.value.style.setProperty("width","100%")):(t.value.style.setProperty("min-height",`${l.value}px`),e.value.style.setProperty("position","fixed"),e.value.style.setProperty("top",`${n.value}px`),e.value.style.setProperty("left",`${s.value}px`),e.value.style.setProperty("width",`${f.value}px`),e.value.style.setProperty("height",`${p.value-n.value}px`)),c(()=>{t.value.style.removeProperty("min-height"),e.value.style.removeProperty("position"),e.value.style.removeProperty("top"),e.value.style.removeProperty("left"),e.value.style.removeProperty("width"),e.value.style.removeProperty("height")}))}),o}const Qe={},xe={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",class:"persona-icon",viewBox:"0 0 20 20"},et=v("path",{fill:"currentColor","fill-rule":"evenodd",d:"M4.673 12.83a.575.575 0 0 1 0-.821l4.91-4.839a.595.595 0 0 1 .834 0l4.91 4.839c.23.226.23.594 0 .82a.595.595 0 0 1-.833 0L10 8.403 5.506 12.83a.595.595 0 0 1-.833 0Z","clip-rule":"evenodd"},null,-1),tt=[et];function ot(e,a){return C(),T("svg",xe,tt)}const nt=N(Qe,[["render",ot]]),at=M({components:{IconZoomIn:Se,IconZoomOut:De,IconPrev:nt,IconNext:Ie,pButton:ze,pDivider:Oe,pSelect:Ee},setup(){const{page:e,scale:a,totalPage:o,zoomIn:n,zoomOut:t,next:r,prev:l}=ce(),u=I(()=>Array.from({length:o.value}).map((f,s)=>({text:`${s+1}`,value:s+1})));return{page:e,pages:u,scale:a,totalPage:o,zoomIn:n,zoomOut:t,next:r,prev:l}}});const st={"data-testid":"pdf-navigation",class:"pdf__navigation"},rt={class:"pdf__navigation-container"},it={class:"pdf__navigation-scale"},lt={"data-testid":"pdf-total",class:"flex-shrink-0"};function dt(e,a,o,n,t,r){const l=y("IconZoomOut"),u=y("p-button"),f=y("IconZoomIn"),s=y("p-divider"),p=y("p-select"),c=y("IconPrev"),i=y("IconNext");return C(),T("div",st,[v("div",rt,[g(u,{"data-testid":"pdf-zoom-out",variant:"ghost",size:"xs",icon:"",onClick:e.zoomOut},{default:D(()=>[g(l)]),_:1},8,["onClick"]),v("span",it,j((e.scale*100).toFixed(0))+"% ",1),g(u,{"data-testid":"pdf-zoom-in",variant:"ghost",size:"xs",icon:"",onClick:e.zoomIn},{default:D(()=>[g(f)]),_:1},8,["onClick"]),g(s,{vertical:""}),g(p,{modelValue:e.page,"onUpdate:modelValue":a[0]||(a[0]=P=>e.page=P),options:e.pages,size:"xs"},null,8,["modelValue","options"]),v("span",lt,"of "+j(e.totalPage),1),g(u,{"data-testid":"pdf-prev",variant:"ghost",size:"xs",icon:"",onClick:e.prev},{default:D(()=>[g(c)]),_:1},8,["onClick"]),g(u,{"data-testid":"pdf-next",variant:"ghost",size:"xs",icon:"",onClick:e.next},{default:D(()=>[g(i)]),_:1},8,["onClick"])])])}const ut=N(at,[["render",dt]]),ct="/design-system/assets/pdf-loading.2dcb0a6f.svg",ft=M({setup(){return{PDF_LOADING_IMG:ct}}});const pt={"data-testid":"pdf-loading",class:"pdf__loading"},vt=["src"];function mt(e,a,o,n,t,r){return C(),T("div",pt,[v("img",{src:e.PDF_LOADING_IMG,width:"793",height:"1122"},null,8,vt)])}const gt=N(ft,[["render",mt]]);let F,E;async function Y(){if(!F){const e=await J(()=>import("./pdf.9313f48b.js").then(a=>a.p),["assets/chunks/pdf.9313f48b.js","assets/chunks/commonjsHelpers.de833af9.js","assets/chunks/vite-browser-external_commonjs-proxy.0726eb50.js"]);typeof window<"u"&&"Worker"in window&&(e.GlobalWorkerOptions.workerSrc=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${e.version}/build/pdf.worker.min.js`),F=e}return F}async function q(){return await Y(),E||(E=await J(()=>import("./pdf_viewer.0299ce29.js").then(e=>e.p),["assets/chunks/pdf_viewer.0299ce29.js","assets/chunks/commonjsHelpers.de833af9.js"])),E}async function ht(...e){return await Y(),F.getDocument(...e)}async function _t(){return`https://cdn.jsdelivr.net/npm/pdfjs-dist@${await fe()}/cmaps/`}async function fe(){return await Y(),F.version}async function yt(){return await q(),new E.EventBus}async function Pt(...e){return await q(),new E.PDFViewer(...e)}async function wt(...e){return await q(),new E.PDFLinkService(...e)}const $t=M({directives:{pAspectRatio:re},components:{Heading:Ne},props:{url:{type:String,default:""},error:{type:Object,default:()=>({})}},setup(){const e=h("");return ie(async()=>{e.value=await fe()}),{version:e}}});const bt={"data-testid":"pdf-error",class:"pdf__error"},St={class:"mt-7"},Dt=v("dt",null,"URL:",-1),It={class:"truncate"},zt=["href"],Ot=v("dt",null," Reason: ",-1),Et=v("dt",null," PDFJS Version: ",-1);function Nt(e,a,o,n,t,r){const l=y("Heading"),u=le("p-aspect-ratio");return V((C(),T("div",bt,[g(l,{element:"h3"},{default:D(()=>[Pe(" Failed to load PDF ")]),_:1}),v("dl",St,[Dt,v("dd",It,[v("a",{href:e.url,target:"_blank"},[v("code",null,j(e.url),1)],8,zt)]),Ot,v("dd",null,[v("code",null,j(e.error.message),1)]),Et,v("dd",null,[v("code",null,j(e.version),1)])])])),[[u,1122/793]])}const Ct=N($t,[["render",Nt]]),Tt=["mousemove","mousedown","touchstart","keydown","scroll"];function kt(e,a=5e3){const o=h(!1);let n;function t(){o.value=!1,n&&clearTimeout(n),n=setTimeout(()=>{o.value=!0},a)}return ge(e,Tt,t,{passive:!0}),o}const Lt=M({props:{dropTarget:{type:String,default:".pdfViewer > .page"}},setup(e){const a=new Map,o=R("root"),n=ce(),t=de(e,"dropTarget");return G(K,{...n,objects:a,root:o}),Ke(o,t),{}}}),Vt={ref:"root",class:"pdf-objects","data-testid":"pdf-objects"};function jt(e,a,o,n,t,r){return C(),T("div",Vt,[O(e.$slots,"default")],512)}const Ft=N(Lt,[["render",jt]]);function Mt(e,a){const o=$(),n=$(),t=$(),r=$(),l=$(),u=I(()=>{var d,m;return(m=(d=o.value)==null?void 0:d.numPages)!=null?m:0}),f=H(1,.1,2),s=H(1,1,u),p=We(),c=$(!1),i=$(),P=Z(),w=Z(),S=Z();async function z(d,m){p.value=!0,i.value=void 0;try{await k(),d&&(r.value=await ht({url:d,password:m,cMapUrl:await _t(),cMapPacked:!0,disableStream:!1}),o.value=await r.value.promise,t.value.setDocument(o.value),l.value.setDocument(o.value),P.trigger(o.value))}catch(L){L instanceof Error&&(i.value=L,w.trigger(L))}finally{p.value=!1}}async function k(){var d,m;r.value&&!r.value.destroyed&&(await r.value.destroy(),o.value=void 0,r.value=void 0,(d=t.value)==null||d.setDocument(null),(m=l.value)==null||m.setDocument(null))}async function W(){if(typeof navigator<"u"&&e.value&&a.value){const d=await yt();d.on("pagesinit",()=>{const m=a.value.clientWidth>=793;t.value.currentScaleValue=m?"1":"page-width",t.value.currentPageNumber=s.value,c.value=!0,S.trigger(t.value)}),d.on("pagechanging",m=>{s.value=m.pageNumber}),d.on("scalechanging",m=>{f.value=m.scale}),n.value=d,l.value=await wt({eventBus:n.value}),t.value=await Pt({container:e.value,viewer:a.value,eventBus:n.value,linkService:l.value,removePageBorders:!0}),l.value.setViewer(t.value)}}return b([e,a],async([d,m])=>{t.value?d&&m&&(t.value.container=d,t.value.viewer=m,o.value&&t.value.setDocument(o.value),t.value.update()):await W()}),b(s,d=>{t.value&&d!==t.value.currentPageNumber&&(t.value.currentPageNumber=d)}),b(f,d=>{t.value&&d!==t.value.currentScale&&(t.value.currentScale=d)}),we(async()=>{var d;(d=t.value)==null||d.cleanup(),await k()}),{page:s,scale:f,totalPage:u,loading:p,error:i,ready:c,openDoc:z,closeDoc:k,pdfDoc:o,pdfEventBus:n,pdfViewer:t,pdfLoadingTask:r,pdfLinkService:l,onLoaded:P.on,onError:w.on,onReady:S.on}}const Bt=M({directives:{pAspectRatio:re},components:{PdfObjects:Ft,PdfNavigation:ut,PdfLoading:gt,PdfError:Ct},props:{src:{type:String,default:""},page:{type:Number,default:1},scale:{type:Number,default:1},password:{type:String,default:void 0},layout:{type:String,default:"fixed"},ratio:{type:[Number,String],default:210/297},offsetTop:{type:[Number,String],default:0}},emits:["ready","loaded","error","error-password","update:page","update:scale"],setup(e,{emit:a}){const o=R("root"),n=R("container"),t=R("viewer"),r=kt(n),l=ne(e,"page"),u=ne(e,"scale"),f=Fe(de(e,"offsetTop"),{nanToZero:!0}),s=qe(o,{offsetTop:f}),p=I(()=>{const _=[];return e.layout&&_.push(`pdf-viewer--layout-${e.layout}`),_}),{page:c,scale:i,totalPage:P,openDoc:w,closeDoc:S,pdfDoc:z,loading:k,error:W,onLoaded:d,onError:m,onReady:L}=Mt(n,t);Me(()=>[e.src,e.password],([_,pe])=>{w(_,pe)},{debounce:500}),b(()=>e.layout,_=>{s.value=_==="fit"},{immediate:!0}),ie(async()=>{e.src&&w(e.src,e.password)}),d(_=>{a("loaded",_)}),m(_=>{_.name==="PasswordException"&&a("error-password",_),a("error",_)}),L(_=>{a("ready",_)});function Q(){i.value=Math.round(i.value/.1)*.1+.1}function x(){i.value=Math.round(i.value/.1)*.1-.1}function ee(){c.value++}function te(){c.value--}return G(ue,{page:c,scale:i,totalPage:P,zoomIn:Q,zoomOut:x,next:ee,prev:te}),ae(c,l),ae(i,u),{pdfPage:c,pdfScale:i,classNames:p,totalPage:P,openDoc:w,closeDoc:S,pdfDoc:z,idle:r,loading:k,error:W,zoomIn:Q,zoomOut:x,next:ee,prev:te}}});const Rt=["data-page","data-scale"],Ht={class:"pdf__header"},Wt={ref:"container",class:"pdf__container pdfContainer"},At={ref:"viewer",class:"pdf__viewer pdfViewer"},Zt={class:"pdf__footer"};function Ut(e,a,o,n,t,r){const l=y("PdfLoading"),u=y("PdfError"),f=y("PdfNavigation"),s=y("PdfObjects"),p=le("p-aspect-ratio");return V((C(),T("div",{ref:"root","data-testid":"pdf-viewer",class:be(["pdf",e.classNames]),"data-page":e.pdfPage,"data-scale":e.pdfScale},[v("div",Ht,[O(e.$slots,"header",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,zoomIn:e.zoomIn,zoomOut:e.zoomOut,next:e.next,prev:e.prev,doc:e.pdfDoc})]),g(s,{class:"pdf__wrapper"},{default:D(()=>[v("div",Wt,[V(g(l,null,null,512),[[A,e.loading||!e.src]]),V(g(u,{url:e.src,error:e.error},null,8,["url","error"]),[[A,!e.loading&&e.error]]),v("div",At,null,512),O(e.$slots,"default",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,zoomIn:e.zoomIn,zoomOut:e.zoomOut,next:e.next,prev:e.prev,doc:e.pdfDoc})],512),O(e.$slots,"container",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,zoomIn:e.zoomIn,zoomOut:e.zoomOut,next:e.next,prev:e.prev,doc:e.pdfDoc}),g($e,{name:"slide-up"},{default:D(()=>[V(g(f,null,null,512),[[A,!e.idle&&!e.loading&&!e.error]])]),_:1}),O(e.$slots,"body",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,zoomIn:e.zoomIn,zoomOut:e.zoomOut,next:e.next,prev:e.prev,doc:e.pdfDoc})]),_:3}),v("div",Zt,[O(e.$slots,"footer",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,zoomIn:e.zoomIn,zoomOut:e.zoomOut,next:e.next,prev:e.prev,doc:e.pdfDoc})])],10,Rt)),[[p,e.layout==="fixed"?e.ratio:!1]])}const _o=N(Bt,[["render",Ut]]),yo="/design-system/assets/Calibrator-v3.e869f66c.pdf";export{Xe as D,yo as F,vo as P,K as a,go as b,ho as f,_o as p,mo as u};
