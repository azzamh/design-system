import{p as te}from"./index.bb2e85ab.js";import{j as ce,f as Y,k as de,l as ue,t as B,u as q}from"./index.d72d8958.js";import{E as $,h as _,ad as fe,W as U,U as G,M as J,an as pe,g as E,l as Z,x as b,y as ve,_ as T,o as O,c as k,k as v,d as M,C as y,H as g,w as D,t as F,j as oe,a6 as ae,a2 as j,a as me,a4 as ne,r as C,a5 as ge,a7 as W,T as _e,n as he}from"./framework.4146f201.js";import{I as ye,a as Pe}from"./20.467b004e.js";import{I as we}from"./20.86c829a7.js";import{_ as $e}from"./Button.vue_vue_type_script_setup_true_lang.99aa9448.js";import"./Button.vue_vue_type_style_index_0_lang.4ed993c7.js";import{p as be}from"./Divider.1d1d2d22.js";import{p as Se}from"./Select.f0b35864.js";import{H as De}from"./Heading.f5b63720.js";import{u as Ee}from"./use-selector.73193928.js";import{f as Ne}from"./focus.33532f0c.js";import{u as R}from"./index.d9de5124.js";import{d as Ce}from"./debounce.b619e377.js";import{m as Ie,l as Te,u as Oe,o as A,b as ke,a as Le,s as Q}from"./index.c7fdaaa0.js";import{r as Ve}from"./isObjectLike.53b0037d.js";import{t as je}from"./toInteger.d4d227f4.js";import{t as Fe}from"./toNumber.75689a18.js";import{t as ee}from"./toString.314d06e3.js";import{u as ze}from"./use-loading.e905d360.js";var Me=Ve.isFinite,Be=Math.min;function Re(e){var a=Math[e];return function(o,n){if(o=Fe(o),n=n==null?0:Be(je(n),292),n&&Me(o)){var t=(ee(o)+"e").split("e"),r=a(t[0]+"e"+(+t[1]+n));return t=(ee(r)+"e").split("e"),+(t[0]+"e"+(+t[1]-n))}return a(o)}}var He=Re("round");const We=He,Ae=Symbol("DropzoneContext");function Ze(e,a){const o=$(!0),n=$(),t=_(),r=_();async function i(){if(c(),e.value){const{default:f}=await G(()=>import("./interact.min.7201a62d.js").then(s=>s.i),["assets/chunks/interact.min.7201a62d.js","assets/chunks/commonjsHelpers.de833af9.js"]);n.value=f(a.value,{context:e.value}).dropzone({accept:".pdf-object",overlap:.95,enabled:o.value,checker(s,p,u,d,P,w,S){var N;return u&&(((N=e.value)==null?void 0:N.contains(S))||S.classList.contains("pdf-object--external"))},ondragenter(s){r.value=s.target,s.target.classList.add("hover")},ondragleave(s){s.target.classList.remove("hover")},ondrop(s){r.value=s.target,t.value=s.target,s.target.classList.remove("hover")}})}}function c(){n.value&&n.value.unset()}return ce(e,f=>{f.some(p=>p.type==="childList"&&p.target.matches(a.value))&&i()},{subtree:!0,childList:!0}),fe(()=>{c()}),U(Ae,{dropzone:t,hoverzone:r}),o}const X=Symbol("PDFObjects"),io=Symbol("PDFObjects");function Ue(e){var f,s,p,u;const a=E(()=>We(e.width/e.height,2)),o=_((f=e.minWidth)!=null?f:e.width*.5),n=_((s=e.maxWidth)!=null?s:e.width*2),t=_((p=e.minHeight)!=null?p:e.height*.5),r=_((u=e.maxHeight)!=null?u:e.height*2),i=R(e.width,o,n),c=R(e.height,t,r);return b(()=>e.minWidth,d=>{Number.isFinite(d)&&(o.value=d)}),b(()=>e.minHeight,d=>{Number.isFinite(d)&&(t.value=d)}),b(()=>e.maxWidth,d=>{Number.isFinite(d)&&(n.value=d)}),b(()=>e.maxHeight,d=>{Number.isFinite(d)&&(r.value=d)}),{ratio:a,width:i,height:c,minWidth:o,maxWidth:n,minHeight:t,maxHeight:r}}function lo(e){var w;const{objects:a,page:o}=J(X),n=_((w=e.page)!=null?w:o.value),t=_(e.x),r=_(e.y),i=Symbol("PDFObject"),{width:c,height:f,minWidth:s,maxWidth:p,minHeight:u,maxHeight:d,ratio:P}=Ue(e);return a.set(i,pe({id:i,page:n,x:t,y:r,width:c,height:f})),Ie(()=>{Number.isFinite(n.value)||Oe(o).toBeTruthy().then(()=>{n.value=o.value})}),Te(()=>{a.delete(i)}),{id:i,x:t,y:r,page:n,width:c,height:f,minWidth:s,minHeight:u,maxWidth:p,maxHeight:d,ratio:P}}function co(e){const{root:a}=J(X),o=E(()=>`.page[data-page-number="${Z(e)}"]`);return Ee(o,a)}const uo=Ce(Ne,100),se=Symbol("PdfViewer");function re(){return J(se,()=>{const e=_(1),a=_(1),o=_(0);return{page:e,scale:a,totalPage:o}},!0)}function Ge(e,a={}){const o=_(!1),n=E(()=>{var u;return(u=Z(a.offsetTop))!=null?u:0}),t=E(()=>{var u;return(u=Z(e))==null?void 0:u.parentElement}),{top:r,height:i}=Y(t),{top:c,width:f,left:s}=Y(e),{height:p}=de();return ve(u=>{o.value&&e.value&&(r.value-n.value>=0?(e.value.style.setProperty("height",`${p.value-c.value}px`),e.value.style.setProperty("width","100%")):(t.value.style.setProperty("min-height",`${i.value}px`),e.value.style.setProperty("position","fixed"),e.value.style.setProperty("top",`${n.value}px`),e.value.style.setProperty("left",`${s.value}px`),e.value.style.setProperty("width",`${f.value}px`),e.value.style.setProperty("height",`${p.value-n.value}px`)),u(()=>{t.value.style.removeProperty("min-height"),e.value.style.removeProperty("position"),e.value.style.removeProperty("top"),e.value.style.removeProperty("left"),e.value.style.removeProperty("width"),e.value.style.removeProperty("height")}))}),o}const Je={},Xe={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",class:"persona-icon",viewBox:"0 0 20 20"},xe=v("path",{fill:"currentColor","fill-rule":"evenodd",d:"M4.673 12.83a.575.575 0 0 1 0-.821l4.91-4.839a.595.595 0 0 1 .834 0l4.91 4.839c.23.226.23.594 0 .82a.595.595 0 0 1-.833 0L10 8.403 5.506 12.83a.595.595 0 0 1-.833 0Z","clip-rule":"evenodd"},null,-1),Ke=[xe];function Ye(e,a){return O(),k("svg",Xe,Ke)}const qe=T(Je,[["render",Ye]]),Qe=M({components:{IconZoomIn:ye,IconZoomOut:Pe,IconPrev:qe,IconNext:we,pButton:$e,pDivider:be,pSelect:Se},setup(){const{page:e,scale:a,totalPage:o}=re(),n=E(()=>Array.from({length:o.value}).map((f,s)=>({text:`${s+1}`,value:s+1})));function t(){a.value=Math.round(a.value/.1)*.1+.1}function r(){a.value=Math.round(a.value/.1)*.1-.1}function i(){e.value++}function c(){e.value--}return{page:e,pages:n,scale:a,totalPage:o,zoomIn:t,zoomOut:r,next:i,prev:c}}});const et={"data-testid":"pdf-navigation",class:"pdf__navigation"},tt={class:"pdf__navigation-container"},ot={class:"pdf__navigation-scale"},at={"data-testid":"pdf-total",class:"flex-shrink-0"};function nt(e,a,o,n,t,r){const i=y("IconZoomOut"),c=y("p-button"),f=y("IconZoomIn"),s=y("p-divider"),p=y("p-select"),u=y("IconPrev"),d=y("IconNext");return O(),k("div",et,[v("div",tt,[g(c,{"data-testid":"pdf-zoom-out",variant:"ghost",size:"xs",icon:"",onClick:e.zoomOut},{default:D(()=>[g(i)]),_:1},8,["onClick"]),v("span",ot,F((e.scale*100).toFixed(0))+"% ",1),g(c,{"data-testid":"pdf-zoom-in",variant:"ghost",size:"xs",icon:"",onClick:e.zoomIn},{default:D(()=>[g(f)]),_:1},8,["onClick"]),g(s,{vertical:""}),g(p,{modelValue:e.page,"onUpdate:modelValue":a[0]||(a[0]=P=>e.page=P),options:e.pages,size:"xs"},null,8,["modelValue","options"]),v("span",at,"of "+F(e.totalPage),1),g(c,{"data-testid":"pdf-prev",variant:"ghost",size:"xs",icon:"",onClick:e.prev},{default:D(()=>[g(u)]),_:1},8,["onClick"]),g(c,{"data-testid":"pdf-next",variant:"ghost",size:"xs",icon:"",onClick:e.next},{default:D(()=>[g(d)]),_:1},8,["onClick"])])])}const st=T(Qe,[["render",nt]]),rt="/design-system/assets/pdf-loading.2dcb0a6f.svg",it=M({setup(){return{PDF_LOADING_IMG:rt}}});const lt={"data-testid":"pdf-loading",class:"pdf__loading"},ct=["src"];function dt(e,a,o,n,t,r){return O(),k("div",lt,[v("img",{src:e.PDF_LOADING_IMG,width:"793",height:"1122"},null,8,ct)])}const ut=T(it,[["render",dt]]);let z,I;async function x(){if(!z){const e=await G(()=>import("./pdf.9313f48b.js").then(a=>a.p),["assets/chunks/pdf.9313f48b.js","assets/chunks/commonjsHelpers.de833af9.js","assets/chunks/vite-browser-external_commonjs-proxy.0726eb50.js"]);typeof window<"u"&&"Worker"in window&&(e.GlobalWorkerOptions.workerSrc=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${e.version}/build/pdf.worker.min.js`),z=e}return z}async function K(){return await x(),I||(I=await G(()=>import("./pdf_viewer.0299ce29.js").then(e=>e.p),["assets/chunks/pdf_viewer.0299ce29.js","assets/chunks/commonjsHelpers.de833af9.js"])),I}async function ft(...e){return await x(),z.getDocument(...e)}async function pt(){return`https://cdn.jsdelivr.net/npm/pdfjs-dist@${await ie()}/cmaps/`}async function ie(){return await x(),z.version}async function vt(){return await K(),new I.EventBus}async function mt(...e){return await K(),new I.PDFViewer(...e)}async function gt(...e){return await K(),new I.PDFLinkService(...e)}const _t=M({directives:{pAspectRatio:te},components:{Heading:De},props:{url:{type:String,default:""},error:{type:Object,default:()=>({})}},setup(){const e=_("");return oe(async()=>{e.value=await ie()}),{version:e}}});const ht={"data-testid":"pdf-error",class:"pdf__error"},yt={class:"mt-7"},Pt=v("dt",null,"URL:",-1),wt={class:"truncate"},$t=["href"],bt=v("dt",null," Reason: ",-1),St=v("dt",null," PDFJS Version: ",-1);function Dt(e,a,o,n,t,r){const i=y("Heading"),c=ae("p-aspect-ratio");return j((O(),k("div",ht,[g(i,{element:"h3"},{default:D(()=>[me(" Failed to load PDF ")]),_:1}),v("dl",yt,[Pt,v("dd",wt,[v("a",{href:e.url,target:"_blank"},[v("code",null,F(e.url),1)],8,$t)]),bt,v("dd",null,[v("code",null,F(e.error.message),1)]),St,v("dd",null,[v("code",null,F(e.version),1)])])])),[[c,1122/793]])}const Et=T(_t,[["render",Dt]]),Nt=["mousemove","mousedown","touchstart","keydown","scroll"];function Ct(e,a=5e3){const o=_(!1);let n;function t(){o.value=!1,n&&clearTimeout(n),n=setTimeout(()=>{o.value=!0},a)}return ue(e,Nt,t,{passive:!0}),o}const It=M({props:{dropTarget:{type:String,default:".pdfViewer > .page"}},setup(e){const a=new Map,o=B("root"),n=re(),t=ne(e,"dropTarget");return U(X,{...n,objects:a,root:o}),Ze(o,t),{}}}),Tt={ref:"root",class:"pdf-objects","data-testid":"pdf-objects"};function Ot(e,a,o,n,t,r){return O(),k("div",Tt,[C(e.$slots,"default")],512)}const kt=T(It,[["render",Ot]]);function Lt(e,a){const o=$(),n=$(),t=$(),r=$(),i=$(),c=E(()=>{var l,m;return(m=(l=o.value)==null?void 0:l.numPages)!=null?m:0}),f=R(1,.1,2),s=R(1,1,c),p=ze(),u=$(!1),d=$(),P=A(),w=A(),S=A();async function N(l,m){p.value=!0,d.value=void 0;try{await L(),l&&(r.value=await ft({url:l,password:m,cMapUrl:await pt(),cMapPacked:!0,disableStream:!1}),o.value=await r.value.promise,t.value.setDocument(o.value),i.value.setDocument(o.value),P.trigger(o.value))}catch(V){V instanceof Error&&(d.value=V,w.trigger(V))}finally{p.value=!1}}async function L(){var l,m;r.value&&!r.value.destroyed&&(await r.value.destroy(),o.value=void 0,r.value=void 0,(l=t.value)==null||l.setDocument(null),(m=i.value)==null||m.setDocument(null))}async function H(){if(typeof navigator<"u"&&e.value&&a.value){const l=await vt();l.on("pagesinit",()=>{const m=a.value.clientWidth>=793;t.value.currentScaleValue=m?"1":"page-width",t.value.currentPageNumber=s.value,u.value=!0,S.trigger(t.value)}),l.on("pagechanging",m=>{s.value=m.pageNumber}),l.on("scalechanging",m=>{f.value=m.scale}),n.value=l,i.value=await gt({eventBus:n.value}),t.value=await mt({container:e.value,viewer:a.value,eventBus:n.value,linkService:i.value,removePageBorders:!0}),i.value.setViewer(t.value)}}return b([e,a],async([l,m])=>{t.value?l&&m&&(t.value.container=l,t.value.viewer=m,o.value&&t.value.setDocument(o.value),t.value.update()):await H()}),b(s,l=>{t.value&&l!==t.value.currentPageNumber&&(t.value.currentPageNumber=l)}),b(f,l=>{t.value&&l!==t.value.currentScale&&(t.value.currentScale=l)}),ge(async()=>{var l;(l=t.value)==null||l.cleanup(),await L()}),{page:s,scale:f,totalPage:c,loading:p,error:d,ready:u,openDoc:N,closeDoc:L,pdfDoc:o,pdfEventBus:n,pdfViewer:t,pdfLoadingTask:r,pdfLinkService:i,onLoaded:P.on,onError:w.on,onReady:S.on}}const Vt=M({directives:{pAspectRatio:te},components:{PdfObjects:kt,PdfNavigation:st,PdfLoading:ut,PdfError:Et},props:{src:{type:String,default:""},page:{type:Number,default:1},scale:{type:Number,default:1},password:{type:String,default:void 0},layout:{type:String,default:"fixed"},ratio:{type:[Number,String],default:210/297},offsetTop:{type:[Number,String],default:0}},emits:["ready","loaded","error","error-password","update:page","update:scale"],setup(e,{emit:a}){const o=B("root"),n=B("container"),t=B("viewer"),r=Ct(n),i=q(e,"page"),c=q(e,"scale"),f=ke(ne(e,"offsetTop"),{nanToZero:!0}),s=Ge(o,{offsetTop:f}),p=E(()=>{const h=[];return e.layout&&h.push(`pdf-viewer--layout-${e.layout}`),h}),{page:u,scale:d,totalPage:P,openDoc:w,closeDoc:S,pdfDoc:N,loading:L,error:H,onLoaded:l,onError:m,onReady:V}=Lt(n,t);return Le(()=>[e.src,e.password],([h,le])=>{w(h,le)},{debounce:500}),b(()=>e.layout,h=>{s.value=h==="fit"},{immediate:!0}),oe(async()=>{e.src&&w(e.src,e.password)}),l(h=>{a("loaded",h)}),m(h=>{h.name==="PasswordException"&&a("error-password",h),a("error",h)}),V(h=>{a("ready",h)}),U(se,{page:u,scale:d,totalPage:P}),Q(u,i),Q(d,c),{pdfPage:u,pdfScale:d,classNames:p,totalPage:P,openDoc:w,closeDoc:S,pdfDoc:N,idle:r,loading:L,error:H}}});const jt=["data-page","data-scale"],Ft={class:"pdf__header"},zt={ref:"container",class:"pdf__container pdfContainer"},Mt={ref:"viewer",class:"pdf__viewer pdfViewer"},Bt={class:"pdf__footer"};function Rt(e,a,o,n,t,r){const i=y("PdfLoading"),c=y("PdfError"),f=y("PdfNavigation"),s=y("PdfObjects"),p=ae("p-aspect-ratio");return j((O(),k("div",{ref:"root","data-testid":"pdf-viewer",class:he(["pdf",e.classNames]),"data-page":e.pdfPage,"data-scale":e.pdfScale},[v("div",Ft,[C(e.$slots,"header",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,doc:e.pdfDoc})]),g(s,{class:"pdf__wrapper"},{default:D(()=>[v("div",zt,[j(g(i,null,null,512),[[W,e.loading||!e.src]]),j(g(c,{url:e.src,error:e.error},null,8,["url","error"]),[[W,!e.loading&&e.error]]),v("div",Mt,null,512),C(e.$slots,"default",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,doc:e.pdfDoc})],512),C(e.$slots,"container",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,doc:e.pdfDoc}),g(_e,{name:"slide-up"},{default:D(()=>[j(g(f,null,null,512),[[W,!e.idle&&!e.loading&&!e.error]])]),_:1}),C(e.$slots,"body",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,doc:e.pdfDoc})]),_:3}),v("div",Bt,[C(e.$slots,"footer",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,doc:e.pdfDoc})])],10,jt)),[[p,e.layout==="fixed"?e.ratio:!1]])}const fo=T(Vt,[["render",Rt]]),po="/design-system/assets/Calibrator-v3.e869f66c.pdf";export{Ae as D,po as F,io as P,X as a,co as b,uo as f,fo as p,lo as u};
