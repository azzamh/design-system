import{d as M,a4 as H,g as f,h as g,E as N,j as q,x as R,o as P,b as j,w as D,r as E,aa as I,ab as K,N as L,I as Q}from"./framework.ea844ac6.js";const B="--vc-auto-duration",T=`height var(${B}) cubic-bezier(0.33, 1, 0.68, 1)`,p={padding:0},G={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"};function _(l){return l.value?parseFloat(getComputedStyle(l.value).height):0}function k(l){var n;var a;return{height:`${(n=(a=l.value)==null?void 0:a.scrollHeight)!=null?n:0}px`}}function z(l){if(!l.value)return{};const{transition:a}=getComputedStyle(l.value);return a==="all 0s ease 0s"?{transition:T}:{transition:a}}function A(l){if(!l.value)return!0;const{transition:a}=getComputedStyle(l.value);return matchMedia("(prefers-reduced-motion: reduce)").matches||a.includes("none")||a.includes("height 0s")}const O=M({inheritAttrs:!0,__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(l,{emit:a}){const n=l,o=H(n,"when"),i=H(n,"baseHeight"),v=f(()=>({overflow:"hidden",height:`${i.value}px`})),m=f(()=>({...p,...i.value===0?{display:"none"}:v.value})),t=g(null),c=g(o.value?"expanded":"collapsed"),s=e=>c.value=e,h=N({}),u=e=>h.value=e,d=e=>u({...h.value,...e}),x=g(300),w=f(()=>({[B]:`${x.value}ms`}));function y(){u(p),s("expanded"),a("expanded")}function C(){u(m.value),s("collapsed"),a("collapsed")}function F(e){var r;e.target===t.value&&e.propertyName==="height"&&(o.value?((r=t.value)==null?void 0:r.scrollHeight)===_(t)&&y():i.value===_(t)&&C())}return q(()=>{if(!t.value)return;o.value||i.value!==0||u(G);const e=function(b=0){if(b===0)return 0;const S=b/36,$=Math.round(10*(4+15*S**.25+S/5));return Number.isFinite($)?$:0}(t.value.scrollHeight-i.value);var r;r=e<=0?300:e,x.value=r,u(o.value?p:m.value)}),R(o,e=>{if(e){if(A(t))return y();s("expanding"),a("expand"),u({...p,...v.value,...w.value}),requestAnimationFrame(()=>{d({...k(t),...z(t),willChange:"height"})})}else{if(A(t))return C();s("collapsing"),a("collapse"),d({...w.value,...k(t)}),requestAnimationFrame(()=>{d({...v.value,...z(t),willChange:"height"})})}}),R(i,e=>{o.value||d(e>0?{display:void 0,height:`${e}px`}:{display:"none"})}),(e,r)=>(P(),j(Q(n.as),{ref_key:"collapseRef",ref:t,style:L(h.value),onTransitionend:F,"data-collapse":c.value},{default:D(()=>[E(e.$slots,"default",I(K({state:c.value})))]),_:3},40,["style","data-collapse"]))}});export{O as Q};
