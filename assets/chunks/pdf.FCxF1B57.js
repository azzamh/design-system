var Js=Object.defineProperty;var Qs=(X,e)=>(e=Symbol[X])?e:Symbol.for("Symbol."+X),gs=X=>{throw TypeError(X)};var Zs=(X,e,H)=>e in X?Js(X,e,{enumerable:!0,configurable:!0,writable:!0,value:H}):X[e]=H;var wt=(X,e,H)=>Zs(X,typeof e!="symbol"?e+"":e,H),Me=(X,e,H)=>e.has(X)||gs("Cannot "+H);var t=(X,e,H)=>(Me(X,e,"read from private field"),H?H.call(X):e.get(X)),st=(X,e,H)=>e.has(X)?gs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(X):e.set(X,H),rt=(X,e,H,l)=>(Me(X,e,"write to private field"),l?l.call(X,H):e.set(X,H),H),Y=(X,e,H)=>(Me(X,e,"access private method"),H);var he=(X,e,H,l)=>({set _(p){rt(X,e,p,H)},get _(){return t(X,e,l)}});var tn=function(X,e){this[0]=X,this[1]=e},ms=(X,e,H)=>{var l=(N,V,M,T)=>{try{var d=H[N](V),L=(V=d.value)instanceof tn,m=d.done;Promise.resolve(L?V[0]:V).then(i=>L?l(N==="return"?N:"next",V[1]?{done:i.done,value:i.value}:i,M,T):M({value:i,done:m})).catch(i=>l("throw",i,M,T))}catch(i){T(i)}},p=N=>P[N]=V=>new Promise((M,T)=>l(N,V,M,T)),P={};return H=H.apply(X,e),P[Qs("asyncIterator")]=()=>P,p("next"),p("throw"),p("return"),P};import{g as getDefaultExportFromCjs}from"./commonjsHelpers.BosuxZz1.js";import{r as requireProxy}from"./proxy.9Y56YfJ2.js";import{r as require$$0}from"./vite-browser-external_commonjs-proxy.Da-Vy3Nl.js";function _mergeNamespaces(X,e){for(var H=0;H<e.length;H++){const l=e[H];if(typeof l!="string"&&!Array.isArray(l)){for(const p in l)if(p!=="default"&&!(p in X)){const P=Object.getOwnPropertyDescriptor(l,p);P&&Object.defineProperty(X,p,P.get?P:{enumerable:!0,get:()=>l[p]})}}}return Object.freeze(Object.defineProperty(X,Symbol.toStringTag,{value:"Module"}))}function commonjsRequire(X){throw new Error('Could not dynamically require "'+X+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$2={exports:{}},fs={exports:{}},_classes={},hasRequired_classes;function require_classes(){if(hasRequired_classes)return _classes;hasRequired_classes=1,Object.defineProperty(_classes,"__esModule",{value:!0}),_classes.WriteStream=_classes.StatsFs=_classes.Stats=_classes.ReadStream=_classes.FileWriteStream=_classes.FileReadStream=_classes.Dirent=_classes.Dir=void 0;var X=e(requireProxy());function e(H){return H&&H.__esModule?H:{default:H}}return _classes.Dir=X.default.__createMock__("fs.Dir"),_classes.Dirent=X.default.__createMock__("fs.Dirent"),_classes.Stats=X.default.__createMock__("fs.Stats"),_classes.ReadStream=X.default.__createMock__("fs.ReadStream"),_classes.WriteStream=X.default.__createMock__("fs.WriteStream"),_classes.FileReadStream=X.default.__createMock__("fs.FileReadStream"),_classes.FileWriteStream=X.default.__createMock__("fs.FileWriteStream"),_classes.StatsFs=X.default.__createMock__("fs.StatsFs"),_classes}var _constants={},hasRequired_constants;function require_constants(){return hasRequired_constants||(hasRequired_constants=1,Object.defineProperty(_constants,"__esModule",{value:!0}),_constants.constants=_constants.X_OK=_constants.W_OK=_constants.R_OK=_constants.F_OK=void 0,_constants.F_OK=0,_constants.R_OK=4,_constants.W_OK=2,_constants.X_OK=1,_constants.constants=Object.create({UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,UV_FS_O_FILEMAP:0,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DSYNC:4096,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4})),_constants}var _fs={},utils={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1,Object.defineProperty(utils,"__esModule",{value:!0}),utils.createNotImplementedError=H,utils.mergeFns=e,utils.notImplemented=l,utils.notImplementedClass=p,utils.rawHeaders=X;function X(P){const N=[];for(const V in P)if(Array.isArray(P[V]))for(const M of P[V])N.push(V,M);else N.push(V,P[V]);return N}function e(...P){return function(...N){for(const V of P)V(...N)}}function H(P){throw new Error(`[unenv] ${P} is not implemented yet!`)}function l(P){return Object.assign(()=>{throw H(P)},{__unenv__:!0})}function p(P){return class{constructor(){wt(this,"__unenv__",!0);throw new Error(`[unenv] ${P} is not implemented yet!`)}}}return utils}var _promises={exports:{}},hasRequired_promises;function require_promises(){return hasRequired_promises||(hasRequired_promises=1,function(X,e){Object.defineProperty(e,"__esModule",{value:!0}),e.chown=e.chmod=e.appendFile=e.access=void 0,Object.defineProperty(e,"constants",{enumerable:!0,get:function(){return l.constants}}),e.writeFile=e.watch=e.utimes=e.unlink=e.truncate=e.symlink=e.statfs=e.stat=e.rmdir=e.rm=e.rename=e.realpath=e.readlink=e.readdir=e.readFile=e.opendir=e.open=e.mkdtemp=e.mkdir=e.lutimes=e.lstat=e.link=e.lchown=e.lchmod=e.default=e.cp=e.copyFile=void 0;var H=requireUtils(),l=require_constants();e.access=(0,H.notImplemented)("fs.access"),e.copyFile=(0,H.notImplemented)("fs.copyFile"),e.cp=(0,H.notImplemented)("fs.cp"),e.open=(0,H.notImplemented)("fs.open"),e.opendir=(0,H.notImplemented)("fs.opendir"),e.rename=(0,H.notImplemented)("fs.rename"),e.truncate=(0,H.notImplemented)("fs.truncate"),e.rm=(0,H.notImplemented)("fs.rm"),e.rmdir=(0,H.notImplemented)("fs.rmdir"),e.mkdir=(0,H.notImplemented)("fs.mkdir"),e.readdir=(0,H.notImplemented)("fs.readdir"),e.readlink=(0,H.notImplemented)("fs.readlink"),e.symlink=(0,H.notImplemented)("fs.symlink"),e.lstat=(0,H.notImplemented)("fs.lstat"),e.stat=(0,H.notImplemented)("fs.stat"),e.link=(0,H.notImplemented)("fs.link"),e.unlink=(0,H.notImplemented)("fs.unlink"),e.chmod=(0,H.notImplemented)("fs.chmod"),e.lchmod=(0,H.notImplemented)("fs.lchmod"),e.lchown=(0,H.notImplemented)("fs.lchown"),e.chown=(0,H.notImplemented)("fs.chown"),e.utimes=(0,H.notImplemented)("fs.utimes"),e.lutimes=(0,H.notImplemented)("fs.lutimes"),e.realpath=(0,H.notImplemented)("fs.realpath"),e.mkdtemp=(0,H.notImplemented)("fs.mkdtemp"),e.writeFile=(0,H.notImplemented)("fs.writeFile"),e.appendFile=(0,H.notImplemented)("fs.appendFile"),e.readFile=(0,H.notImplemented)("fs.readFile"),e.watch=(0,H.notImplemented)("fs.watch"),e.statfs=(0,H.notImplemented)("fs.statfs"),X.exports={}}(_promises,_promises.exports)),_promises.exports}var hasRequired_fs;function require_fs(){if(hasRequired_fs)return _fs;hasRequired_fs=1,Object.defineProperty(_fs,"__esModule",{value:!0}),_fs.writevSync=_fs.writev=_fs.writeSync=_fs.writeFileSync=_fs.writeFile=_fs.write=_fs.watchFile=_fs.watch=_fs.utimesSync=_fs.utimes=_fs.unwatchFile=_fs.unlinkSync=_fs.unlink=_fs.truncateSync=_fs.truncate=_fs.symlinkSync=_fs.symlink=_fs.statfsSync=_fs.statfs=_fs.statSync=_fs.stat=_fs.rmdirSync=_fs.rmdir=_fs.rmSync=_fs.rm=_fs.renameSync=_fs.rename=_fs.realpathSync=_fs.realpath=_fs.readvSync=_fs.readv=_fs.readlinkSync=_fs.readlink=_fs.readdirSync=_fs.readdir=_fs.readSync=_fs.readFileSync=_fs.readFile=_fs.read=_fs.opendirSync=_fs.opendir=_fs.openSync=_fs.openAsBlob=_fs.open=_fs.mkdtempSync=_fs.mkdtemp=_fs.mkdirSync=_fs.mkdir=_fs.lutimesSync=_fs.lutimes=_fs.lstatSync=_fs.lstat=_fs.linkSync=_fs.link=_fs.lchownSync=_fs.lchown=_fs.lchmodSync=_fs.lchmod=_fs.futimesSync=_fs.futimes=_fs.ftruncateSync=_fs.ftruncate=_fs.fsyncSync=_fs.fsync=_fs.fstatSync=_fs.fstat=_fs.fdatasyncSync=_fs.fdatasync=_fs.fchownSync=_fs.fchown=_fs.fchmodSync=_fs.fchmod=_fs.existsSync=_fs.exists=_fs.createWriteStream=_fs.createReadStream=_fs.cpSync=_fs.cp=_fs.copyFileSync=_fs.copyFile=_fs.closeSync=_fs.close=_fs.chownSync=_fs.chown=_fs.chmodSync=_fs.chmod=_fs.appendFileSync=_fs.appendFile=_fs.accessSync=_fs.access=_fs._toUnixTimestamp=void 0;var X=requireUtils(),e=l(require_promises());function H(V){if(typeof WeakMap!="function")return null;var M=new WeakMap,T=new WeakMap;return(H=function(d){return d?T:M})(V)}function l(V,M){if(!M&&V&&V.__esModule)return V;if(V===null||typeof V!="object"&&typeof V!="function")return{default:V};var T=H(M);if(T&&T.has(V))return T.get(V);var d={__proto__:null},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in V)if(m!=="default"&&{}.hasOwnProperty.call(V,m)){var i=L?Object.getOwnPropertyDescriptor(V,m):null;i&&(i.get||i.set)?Object.defineProperty(d,m,i):d[m]=V[m]}return d.default=V,T&&T.set(V,d),d}function p(V){const M=(0,X.notImplemented)(V);return M.__promisify__=()=>(0,X.notImplemented)(V+".__promisify__"),M.native=M,M}function P(V){const M=function(...T){const d=T.pop();V().catch(L=>d(L)).then(L=>d(void 0,L))};return M.__promisify__=V,M.native=M,M}_fs.access=P(e.access),_fs.appendFile=P(e.appendFile),_fs.chown=P(e.chown),_fs.chmod=P(e.chmod),_fs.copyFile=P(e.copyFile),_fs.cp=P(e.cp),_fs.lchown=P(e.lchown),_fs.lchmod=P(e.lchmod),_fs.link=P(e.link),_fs.lstat=P(e.lstat),_fs.lutimes=P(e.lutimes),_fs.mkdir=P(e.mkdir),_fs.mkdtemp=P(e.mkdtemp),_fs.realpath=P(e.realpath),_fs.open=P(e.open),_fs.opendir=P(e.opendir),_fs.readdir=P(e.readdir),_fs.readFile=P(e.readFile),_fs.readlink=P(e.readlink),_fs.rename=P(e.rename),_fs.rm=P(e.rm),_fs.rmdir=P(e.rmdir),_fs.stat=P(e.stat),_fs.symlink=P(e.symlink),_fs.truncate=P(e.truncate),_fs.unlink=P(e.unlink),_fs.utimes=P(e.utimes),_fs.writeFile=P(e.writeFile),_fs.statfs=P(e.statfs),_fs.close=p("fs.close"),_fs.createReadStream=p("fs.createReadStream"),_fs.createWriteStream=p("fs.createWriteStream"),_fs.exists=p("fs.exists"),_fs.fchown=p("fs.fchown"),_fs.fchmod=p("fs.fchmod"),_fs.fdatasync=p("fs.fdatasync"),_fs.fstat=p("fs.fstat"),_fs.fsync=p("fs.fsync"),_fs.ftruncate=p("fs.ftruncate"),_fs.futimes=p("fs.futimes"),_fs.lstatSync=p("fs.lstatSync"),_fs.read=p("fs.read"),_fs.readv=p("fs.readv"),_fs.realpathSync=p("fs.realpathSync"),_fs.statSync=p("fs.statSync"),_fs.unwatchFile=p("fs.unwatchFile"),_fs.watch=p("fs.watch"),_fs.watchFile=p("fs.watchFile"),_fs.write=p("fs.write"),_fs.writev=p("fs.writev"),_fs._toUnixTimestamp=p("fs._toUnixTimestamp"),_fs.openAsBlob=p("fs.openAsBlob"),_fs.appendFileSync=(0,X.notImplemented)("fs.appendFileSync"),_fs.accessSync=(0,X.notImplemented)("fs.accessSync"),_fs.chownSync=(0,X.notImplemented)("fs.chownSync"),_fs.chmodSync=(0,X.notImplemented)("fs.chmodSync"),_fs.closeSync=(0,X.notImplemented)("fs.closeSync"),_fs.copyFileSync=(0,X.notImplemented)("fs.copyFileSync"),_fs.cpSync=(0,X.notImplemented)("fs.cpSync");const N=()=>!1;return _fs.existsSync=N,_fs.fchownSync=(0,X.notImplemented)("fs.fchownSync"),_fs.fchmodSync=(0,X.notImplemented)("fs.fchmodSync"),_fs.fdatasyncSync=(0,X.notImplemented)("fs.fdatasyncSync"),_fs.fstatSync=(0,X.notImplemented)("fs.fstatSync"),_fs.fsyncSync=(0,X.notImplemented)("fs.fsyncSync"),_fs.ftruncateSync=(0,X.notImplemented)("fs.ftruncateSync"),_fs.futimesSync=(0,X.notImplemented)("fs.futimesSync"),_fs.lchownSync=(0,X.notImplemented)("fs.lchownSync"),_fs.lchmodSync=(0,X.notImplemented)("fs.lchmodSync"),_fs.linkSync=(0,X.notImplemented)("fs.linkSync"),_fs.lutimesSync=(0,X.notImplemented)("fs.lutimesSync"),_fs.mkdirSync=(0,X.notImplemented)("fs.mkdirSync"),_fs.mkdtempSync=(0,X.notImplemented)("fs.mkdtempSync"),_fs.openSync=(0,X.notImplemented)("fs.openSync"),_fs.opendirSync=(0,X.notImplemented)("fs.opendirSync"),_fs.readdirSync=(0,X.notImplemented)("fs.readdirSync"),_fs.readSync=(0,X.notImplemented)("fs.readSync"),_fs.readvSync=(0,X.notImplemented)("fs.readvSync"),_fs.readFileSync=(0,X.notImplemented)("fs.readFileSync"),_fs.readlinkSync=(0,X.notImplemented)("fs.readlinkSync"),_fs.renameSync=(0,X.notImplemented)("fs.renameSync"),_fs.rmSync=(0,X.notImplemented)("fs.rmSync"),_fs.rmdirSync=(0,X.notImplemented)("fs.rmdirSync"),_fs.symlinkSync=(0,X.notImplemented)("fs.symlinkSync"),_fs.truncateSync=(0,X.notImplemented)("fs.truncateSync"),_fs.unlinkSync=(0,X.notImplemented)("fs.unlinkSync"),_fs.utimesSync=(0,X.notImplemented)("fs.utimesSync"),_fs.writeFileSync=(0,X.notImplemented)("fs.writeFileSync"),_fs.writeSync=(0,X.notImplemented)("fs.writeSync"),_fs.writevSync=(0,X.notImplemented)("fs.writevSync"),_fs.statfsSync=(0,X.notImplemented)("fs.statfsSync"),_fs}var hasRequiredFs;function requireFs(){return hasRequiredFs||(hasRequiredFs=1,function(X,e){Object.defineProperty(e,"__esModule",{value:!0});var H={promises:!0};e.promises=e.default=void 0;var l=M(require_classes());Object.keys(l).forEach(function(d){d==="default"||d==="__esModule"||Object.prototype.hasOwnProperty.call(H,d)||d in e&&e[d]===l[d]||Object.defineProperty(e,d,{enumerable:!0,get:function(){return l[d]}})});var p=M(require_constants());Object.keys(p).forEach(function(d){d==="default"||d==="__esModule"||Object.prototype.hasOwnProperty.call(H,d)||d in e&&e[d]===p[d]||Object.defineProperty(e,d,{enumerable:!0,get:function(){return p[d]}})});var P=M(require_fs());Object.keys(P).forEach(function(d){d==="default"||d==="__esModule"||Object.prototype.hasOwnProperty.call(H,d)||d in e&&e[d]===P[d]||Object.defineProperty(e,d,{enumerable:!0,get:function(){return P[d]}})});var N=M(require_promises());function V(d){if(typeof WeakMap!="function")return null;var L=new WeakMap,m=new WeakMap;return(V=function(i){return i?m:L})(d)}function M(d,L){if(!L&&d&&d.__esModule)return d;if(d===null||typeof d!="object"&&typeof d!="function")return{default:d};var m=V(L);if(m&&m.has(d))return m.get(d);var i={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in d)if(v!=="default"&&{}.hasOwnProperty.call(d,v)){var _=f?Object.getOwnPropertyDescriptor(d,v):null;_&&(_.get||_.set)?Object.defineProperty(i,v,_):i[v]=d[v]}return i.default=d,m&&m.set(d,i),i}const T=e.promises=N;X.exports={...l,...p,...P,promises:T}}(fs,fs.exports)),fs.exports}var url={exports:{}},hasRequiredUrl;function requireUrl(){return hasRequiredUrl||(hasRequiredUrl=1,function(X,e){Object.defineProperty(e,"__esModule",{value:!0}),e.urlToHttpOptions=e.resolve=e.pathToFileURL=e.parse=e.format=e.fileURLToPath=e.domainToUnicode=e.domainToASCII=e.default=e.URLSearchParams=e.URL=void 0;const H=e.URL=globalThis.URL,l=e.URLSearchParams=globalThis.URLSearchParams,p=function(m,i,f){const v=new H(m);if(!i&&!f)return v;throw new Error("parseQueryString and slashesDenoteHost are unsupported")};e.parse=p;const P=function(m,i){const f=new H(i,new H(m,"resolve://"));if(f.protocol==="resolve:"){const{pathname:v,search:_,hash:g}=f;return v+_+g}return f.toString()};e.resolve=P;const N=function(m){return{protocol:m.protocol,hostname:m.hostname,hash:m.hash,search:m.search,pathname:m.pathname,path:m.pathname+m.search||"",href:m.href,port:m.port,auth:m.username&&m.username+m.password?":"+m.password:""}};e.urlToHttpOptions=N;const V=function(m,i){let f;if(typeof m=="string")f=new H(m);else if(m instanceof H)f=m;else throw new TypeError("format urlObject is not supported");return i&&(i.auth===!1&&(f.username="",f.password=""),i.fragment===!1&&(f.hash=""),i.search===!1&&(f.search="")),f.toString()};e.format=V;const M=function(m){return m};e.domainToASCII=M;const T=function(m){return m};e.domainToUnicode=T;const d=function(m){return new H(m)};e.pathToFileURL=d;const L=function(m){return typeof m=="string"&&(m=new H(m)),m.pathname};e.fileURLToPath=L,X.exports={URL:H,URLSearchParams:l,domainToASCII:M,domainToUnicode:T,fileURLToPath:L,format:V,parse:p,pathToFileURL:d,resolve:P,urlToHttpOptions:N}}(url,url.exports)),url.exports}var http={exports:{}},_consts={},hasRequired_consts;function require_consts(){return hasRequired_consts||(hasRequired_consts=1,Object.defineProperty(_consts,"__esModule",{value:!0}),_consts.maxHeaderSize=_consts.STATUS_CODES=_consts.METHODS=void 0,_consts.METHODS=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PRI","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],_consts.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a Teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},_consts.maxHeaderSize=16384),_consts}var _request={},socket={},duplex={},readable={},events={exports:{}},_events={},hasRequired_events;function require_events(){if(hasRequired_events)return _events;hasRequired_events=1,Object.defineProperty(_events,"__esModule",{value:!0}),_events.EventEmitter=void 0,_events.once=H;let X=10;class e{constructor(){wt(this,"__unenv__",!0);wt(this,"_events",Object.create(null));wt(this,"_maxListeners")}static get defaultMaxListeners(){return X}static set defaultMaxListeners(i){if(typeof i!="number"||i<0||Number.isNaN(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");X=i}setMaxListeners(i){if(typeof i!="number"||i<0||Number.isNaN(i))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+i+".");return this._maxListeners=i,this}getMaxListeners(){return V(this)}emit(i,...f){if(!this._events[i]||this._events[i].length===0)return!1;if(i==="error"){let v;if(f.length>0&&(v=f[0]),v instanceof Error)throw v;const _=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw _.context=v,_}for(const v of this._events[i])(v.listener||v).apply(this,f);return!0}addListener(i,f){return l(this,i,f,!1)}on(i,f){return l(this,i,f,!1)}prependListener(i,f){return l(this,i,f,!0)}once(i,f){return this.on(i,N(this,i,f))}prependOnceListener(i,f){return this.prependListener(i,N(this,i,f))}removeListener(i,f){return p(this,i,f)}off(i,f){return this.removeListener(i,f)}removeAllListeners(i){return P(this,i)}listeners(i){return M(this,i,!0)}rawListeners(i){return M(this,i,!1)}listenerCount(i){return this.rawListeners(i).length}eventNames(){return Object.keys(this._events)}}_events.EventEmitter=e;function H(m,i){return new Promise(function(f,v){function _(y){m.removeListener(i,g),v(y)}function g(){typeof m.removeListener=="function"&&m.removeListener("error",_),f(Array.prototype.slice.call(arguments))}L(m,i,g,{once:!0}),i!=="error"&&d(m,_,{once:!0})})}function l(m,i,f,v){var g;T(f),m._events.newListener!==void 0&&m.emit("newListener",i,f.listener||f),m._events[i]||(m._events[i]=[]),v?m._events[i].unshift(f):m._events[i].push(f);const _=V(m);if(_>0&&m._events[i].length>_&&!m._events[i].warned){m._events[i].warned=!0;const y=new Error(`[unenv] Possible EventEmitter memory leak detected. ${m._events[i].length} ${i} listeners added. Use emitter.setMaxListeners() to increase limit`);y.name="MaxListenersExceededWarning",y.emitter=m,y.type=i,y.count=(g=m._events[i])==null?void 0:g.length,console.warn(y)}return m}function p(m,i,f){if(T(f),!m._events[i]||m._events[i].length===0)return m;const v=m._events[i].length;return m._events[i]=m._events[i].filter(_=>_!==f),v===m._events[i].length||(m._events.removeListener&&m.emit("removeListener",i,f.listener||f),m._events[i].length===0&&delete m._events[i]),m}function P(m,i){if(!m._events[i]||m._events[i].length===0)return m;if(m._events.removeListener)for(const f of m._events[i])m.emit("removeListener",i,f.listener||f);return delete m._events[i],m}function N(m,i,f){let v=!1;const _=(...g)=>{if(!v)return m.removeListener(i,_),v=!0,g.length===0?f.call(m):f.apply(m,g)};return _.listener=f,_}function V(m){var i;return(i=m._maxListeners)!=null?i:e.defaultMaxListeners}function M(m,i,f){let v=m._events[i];return typeof v=="function"&&(v=[v]),f?v.map(_=>_.listener||_):v}function T(m){if(typeof m!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof m)}function d(m,i,f){typeof m.on=="function"&&L(m,"error",i,f)}function L(m,i,f,v){if(typeof m.on=="function")v.once?m.once(i,f):m.on(i,f);else if(typeof m.addEventListener=="function")m.addEventListener(i,f);else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof m)}return _events}var hasRequiredEvents;function requireEvents(){return hasRequiredEvents||(hasRequiredEvents=1,function(X,e){Object.defineProperty(e,"__esModule",{value:!0}),e.once=e.default=e.EventEmitter=void 0;var H=require_events();const l=e.EventEmitter=globalThis.EventEmitter||H.EventEmitter,p=e.once=H.once;X.exports={EventEmitter:l,once:p}}(events,events.exports)),events.exports}var hasRequiredReadable;function requireReadable(){if(hasRequiredReadable)return readable;hasRequiredReadable=1,Object.defineProperty(readable,"__esModule",{value:!0}),readable._Readable=readable.Readable=void 0;var X=requireUtils(),e=requireEvents();class H extends e.EventEmitter{constructor(P){super();wt(this,"__unenv__",!0);wt(this,"readableEncoding",null);wt(this,"readableEnded",!0);wt(this,"readableFlowing",!1);wt(this,"readableHighWaterMark",0);wt(this,"readableLength",0);wt(this,"readableObjectMode",!1);wt(this,"readableAborted",!1);wt(this,"readableDidRead",!1);wt(this,"closed",!1);wt(this,"errored",null);wt(this,"readable",!1);wt(this,"destroyed",!1)}static from(P,N){return new H(N)}_read(P){}read(P){}setEncoding(P){return this}pause(){return this}resume(){return this}isPaused(){return!0}unpipe(P){return this}unshift(P,N){}wrap(P){return this}push(P,N){return!1}_destroy(P,N){this.removeAllListeners()}destroy(P){return this.destroyed=!0,this._destroy(P),this}pipe(P,N){return{}}compose(P,N){throw new Error("[unenv] Method not implemented.")}[Symbol.asyncDispose](){return this.destroy(),Promise.resolve()}[Symbol.asyncIterator](){return ms(this,null,function*(){throw(0,X.createNotImplementedError)("Readable.asyncIterator")})}iterator(P){throw(0,X.createNotImplementedError)("Readable.iterator")}map(P,N){throw(0,X.createNotImplementedError)("Readable.map")}filter(P,N){throw(0,X.createNotImplementedError)("Readable.filter")}forEach(P,N){throw(0,X.createNotImplementedError)("Readable.forEach")}reduce(P,N,V){throw(0,X.createNotImplementedError)("Readable.reduce")}find(P,N){throw(0,X.createNotImplementedError)("Readable.find")}findIndex(P,N){throw(0,X.createNotImplementedError)("Readable.findIndex")}some(P,N){throw(0,X.createNotImplementedError)("Readable.some")}toArray(P){throw(0,X.createNotImplementedError)("Readable.toArray")}every(P,N){throw(0,X.createNotImplementedError)("Readable.every")}flatMap(P,N){throw(0,X.createNotImplementedError)("Readable.flatMap")}drop(P,N){throw(0,X.createNotImplementedError)("Readable.drop")}take(P,N){throw(0,X.createNotImplementedError)("Readable.take")}asIndexedPairs(P){throw(0,X.createNotImplementedError)("Readable.asIndexedPairs")}}return readable._Readable=H,readable.Readable=globalThis.Readable||H,readable}var writable={},hasRequiredWritable;function requireWritable(){if(hasRequiredWritable)return writable;hasRequiredWritable=1,Object.defineProperty(writable,"__esModule",{value:!0}),writable.Writable=void 0;var X=requireEvents();class e extends X.EventEmitter{constructor(p){super();wt(this,"__unenv__",!0);wt(this,"writable",!0);wt(this,"writableEnded",!1);wt(this,"writableFinished",!1);wt(this,"writableHighWaterMark",0);wt(this,"writableLength",0);wt(this,"writableObjectMode",!1);wt(this,"writableCorked",0);wt(this,"closed",!1);wt(this,"errored",null);wt(this,"writableNeedDrain",!1);wt(this,"destroyed",!1);wt(this,"_data");wt(this,"_encoding","utf-8")}pipe(p,P){return{}}_write(p,P,N){if(this.writableEnded){N&&N();return}if(this._data===void 0)this._data=p;else{const V=typeof this._data=="string"?Buffer.from(this._data,this._encoding||P||"utf8"):this._data,M=typeof p=="string"?Buffer.from(p,P||this._encoding||"utf8"):p;this._data=Buffer.concat([V,M])}this._encoding=P,N&&N()}_writev(p,P){}_destroy(p,P){}_final(p){}write(p,P,N){const V=typeof P=="string"?this._encoding:"utf-8",M=typeof P=="function"?P:typeof N=="function"?N:void 0;return this._write(p,V,M),!0}setDefaultEncoding(p){return this}end(p,P,N){const V=typeof p=="function"?p:typeof P=="function"?P:typeof N=="function"?N:void 0;if(this.writableEnded)return V&&V(),this;const M=p===V?void 0:p;if(M){const T=P===V?void 0:P;this.write(M,T,V)}return this.writableEnded=!0,this.writableFinished=!0,this.emit("close"),this.emit("finish"),this}cork(){}uncork(){}destroy(p){return this.destroyed=!0,delete this._data,this.removeAllListeners(),this}compose(p,P){throw new Error("[h3] Method not implemented.")}}return writable.Writable=globalThis.Writable||e,writable}var hasRequiredDuplex;function requireDuplex(){if(hasRequiredDuplex)return duplex;hasRequiredDuplex=1,Object.defineProperty(duplex,"__esModule",{value:!0}),duplex._Duplex=duplex.Duplex=void 0;var X=requireUtils(),e=requireReadable(),H=requireWritable();const l=class{constructor(N=new e.Readable,V=new H.Writable){wt(this,"allowHalfOpen",!0);wt(this,"_destroy");Object.assign(this,N),Object.assign(this,V),this._destroy=(0,X.mergeFns)(N._destroy,V._destroy)}};function p(){return Object.assign(l.prototype,e.Readable.prototype),Object.assign(l.prototype,H.Writable.prototype),l}const P=duplex._Duplex=p();return duplex.Duplex=globalThis.Duplex||P,duplex}var hasRequiredSocket;function requireSocket(){if(hasRequiredSocket)return socket;hasRequiredSocket=1,Object.defineProperty(socket,"__esModule",{value:!0}),socket.SocketAddress=socket.Socket=void 0;var X=requireDuplex();class e extends X.Duplex{constructor(P){super();wt(this,"__unenv__",!0);wt(this,"bufferSize",0);wt(this,"bytesRead",0);wt(this,"bytesWritten",0);wt(this,"connecting",!1);wt(this,"destroyed",!1);wt(this,"pending",!1);wt(this,"localAddress","");wt(this,"localPort",0);wt(this,"remoteAddress","");wt(this,"remoteFamily","");wt(this,"remotePort",0);wt(this,"autoSelectFamilyAttemptedAddresses",[]);wt(this,"readyState","readOnly")}write(P,N,V){return!1}connect(P,N,V){return this}end(P,N,V){return this}setEncoding(P){return this}pause(){return this}resume(){return this}setTimeout(P,N){return this}setNoDelay(P){return this}setKeepAlive(P,N){return this}address(){return{}}unref(){return this}ref(){return this}destroySoon(){this.destroy()}resetAndDestroy(){const P=new Error("ERR_SOCKET_CLOSED");return P.code="ERR_SOCKET_CLOSED",this.destroy(P),this}}socket.Socket=e;class H{constructor(p){wt(this,"__unenv__",!0);wt(this,"address");wt(this,"family");wt(this,"port");wt(this,"flowlabel");this.address=p.address,this.family=p.family,this.port=p.port,this.flowlabel=p.flowlabel}}return socket.SocketAddress=H,socket}var hasRequired_request;function require_request(){if(hasRequired_request)return _request;hasRequired_request=1,Object.defineProperty(_request,"__esModule",{value:!0}),_request.IncomingMessage=void 0;var X=requireSocket(),e=requireReadable(),H=requireUtils();class l extends e.Readable{constructor(V){super();wt(this,"__unenv__",{});wt(this,"aborted",!1);wt(this,"httpVersion","1.1");wt(this,"httpVersionMajor",1);wt(this,"httpVersionMinor",1);wt(this,"complete",!0);wt(this,"connection");wt(this,"socket");wt(this,"headers",{});wt(this,"trailers",{});wt(this,"method","GET");wt(this,"url","/");wt(this,"statusCode",200);wt(this,"statusMessage","");wt(this,"closed",!1);wt(this,"errored",null);wt(this,"readable",!1);this.socket=this.connection=V||new X.Socket}get rawHeaders(){return(0,H.rawHeaders)(this.headers)}get rawTrailers(){return[]}setTimeout(V,M){return this}get headersDistinct(){return p(this.headers)}get trailersDistinct(){return p(this.trailers)}}_request.IncomingMessage=l;function p(P){const N={};for(const[V,M]of Object.entries(P))V&&(N[V]=(Array.isArray(M)?M:[M]).filter(Boolean));return N}return _request}var _response={},hasRequired_response;function require_response(){if(hasRequired_response)return _response;hasRequired_response=1,Object.defineProperty(_response,"__esModule",{value:!0}),_response.ServerResponse=void 0;var X=requireWritable();class e extends X.Writable{constructor(p){super();wt(this,"__unenv__",!0);wt(this,"statusCode",200);wt(this,"statusMessage","");wt(this,"upgrading",!1);wt(this,"chunkedEncoding",!1);wt(this,"shouldKeepAlive",!1);wt(this,"useChunkedEncodingByDefault",!1);wt(this,"sendDate",!1);wt(this,"finished",!1);wt(this,"headersSent",!1);wt(this,"strictContentLength",!1);wt(this,"connection",null);wt(this,"socket",null);wt(this,"req");wt(this,"_headers",{});this.req=p}assignSocket(p){p._httpMessage=this,this.socket=p,this.connection=p,this.emit("socket",p),this._flush()}_flush(){this.flushHeaders()}detachSocket(p){}writeContinue(p){}writeHead(p,P,N){p&&(this.statusCode=p),typeof P=="string"&&(this.statusMessage=P,P=void 0);const V=N||P;if(V&&!Array.isArray(V))for(const M in V)this.setHeader(M,V[M]);return this.headersSent=!0,this}writeProcessing(){}setTimeout(p,P){return this}appendHeader(p,P){p=p.toLowerCase();const N=this._headers[p],V=[...Array.isArray(N)?N:[N],...Array.isArray(P)?P:[P]].filter(Boolean);return this._headers[p]=V.length>1?V:V[0],this}setHeader(p,P){return this._headers[p.toLowerCase()]=P,this}getHeader(p){return this._headers[p.toLowerCase()]}getHeaders(){return this._headers}getHeaderNames(){return Object.keys(this._headers)}hasHeader(p){return p.toLowerCase()in this._headers}removeHeader(p){delete this._headers[p.toLowerCase()]}addTrailers(p){}flushHeaders(){}writeEarlyHints(p,P){typeof P=="function"&&P()}}return _response.ServerResponse=e,_response}var hasRequiredHttp;function requireHttp(){return hasRequiredHttp||(hasRequiredHttp=1,function(X,e){Object.defineProperty(e,"__esModule",{value:!0});var H={createServer:!0,request:!0,get:!0,Server:!0,OutgoingMessage:!0,ClientRequest:!0,Agent:!0,globalAgent:!0,validateHeaderName:!0,validateHeaderValue:!0,setMaxIdleHTTPParsers:!0};e.validateHeaderValue=e.validateHeaderName=e.setMaxIdleHTTPParsers=e.request=e.globalAgent=e.get=e.default=e.createServer=e.Server=e.OutgoingMessage=e.ClientRequest=e.Agent=void 0;var l=requireUtils(),p=d(requireProxy()),P=T(require_consts());Object.keys(P).forEach(function(o){o==="default"||o==="__esModule"||Object.prototype.hasOwnProperty.call(H,o)||o in e&&e[o]===P[o]||Object.defineProperty(e,o,{enumerable:!0,get:function(){return P[o]}})});var N=require_request();Object.keys(N).forEach(function(o){o==="default"||o==="__esModule"||Object.prototype.hasOwnProperty.call(H,o)||o in e&&e[o]===N[o]||Object.defineProperty(e,o,{enumerable:!0,get:function(){return N[o]}})});var V=require_response();Object.keys(V).forEach(function(o){o==="default"||o==="__esModule"||Object.prototype.hasOwnProperty.call(H,o)||o in e&&e[o]===V[o]||Object.defineProperty(e,o,{enumerable:!0,get:function(){return V[o]}})});function M(o){if(typeof WeakMap!="function")return null;var r=new WeakMap,h=new WeakMap;return(M=function(u){return u?h:r})(o)}function T(o,r){if(!r&&o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var h=M(r);if(h&&h.has(o))return h.get(o);var u={__proto__:null},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in o)if(a!=="default"&&{}.hasOwnProperty.call(o,a)){var S=j?Object.getOwnPropertyDescriptor(o,a):null;S&&(S.get||S.set)?Object.defineProperty(u,a,S):u[a]=o[a]}return u.default=o,h&&h.set(o,u),u}function d(o){return o&&o.__esModule?o:{default:o}}const L=e.createServer=(0,l.notImplemented)("http.createServer"),m=e.request=(0,l.notImplemented)("http.request"),i=e.get=(0,l.notImplemented)("http.get"),f=e.Server=p.default.__createMock__("http.Server"),v=e.OutgoingMessage=p.default.__createMock__("http.OutgoingMessage"),_=e.ClientRequest=p.default.__createMock__("http.ClientRequest"),g=e.Agent=p.default.__createMock__("http.Agent"),y=e.globalAgent=new g,U=e.validateHeaderName=(0,l.notImplemented)("http.validateHeaderName"),E=e.validateHeaderValue=(0,l.notImplemented)("http.validateHeaderValue"),c=e.setMaxIdleHTTPParsers=(0,l.notImplemented)("http.setMaxIdleHTTPParsers");X.exports={...P,IncomingMessage:N.IncomingMessage,ServerResponse:V.ServerResponse,createServer:L,request:m,get:i,Server:f,OutgoingMessage:v,ClientRequest:_,Agent:g,globalAgent:y,validateHeaderName:U,validateHeaderValue:E,setMaxIdleHTTPParsers:c}}(http,http.exports)),http.exports}(function(module,exports){(function(e,H){module.exports=e.pdfjsLib=H()})(globalThis,()=>(()=>{var __webpack_modules__=[,(X,e)=>{var Vt;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=k,e.bytesToString=ut,e.createValidAbsoluteUrl=Z,e.getModificationDate=Ct,e.getUuid=Ut,e.getVerbosityLevel=G,e.info=Q,e.isArrayBuffer=J,e.isArrayEqual=Pt,e.isNodeJS=void 0,e.normalizeUnicode=Mt,e.objectFromMap=vt,e.objectSize=At,e.setVerbosityLevel=at,e.shadow=C,e.string32=mt,e.stringToBytes=ft,e.stringToPDFString=pt,e.stringToUTF8String=St,e.unreachable=ct,e.utf8StringToString=yt,e.warn=q;const H=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=H;const l=[1,0,0,1,0,0];e.IDENTITY_MATRIX=l;const p=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=p;const P=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=P;const N=1.35;e.LINE_FACTOR=N;const V=.35;e.LINE_DESCENT_FACTOR=V;const M=V/N;e.BASELINE_FACTOR=M;const T={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=T;const d={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=d;const L="pdfjs_internal_editor_";e.AnnotationEditorPrefix=L;const m={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=m;const i={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=i;const f={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=f;const v={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=v;const _={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=_;const g={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=g;const y={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=y;const U={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=U;const E={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=E;const c={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=c;const o={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=o;const r={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=r;const h={O:"PageOpen",C:"PageClose"};e.PageActionEventType=h;const u={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=u;const j={NONE:0,BINARY:1};e.CMapCompressionType=j;const a={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=a;const S={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=S;let D=u.WARNINGS;function at(bt){Number.isInteger(bt)&&(D=bt)}function G(){return D}function Q(bt){D>=u.INFOS&&console.log(`Info: ${bt}`)}function q(bt){D>=u.WARNINGS&&console.log(`Warning: ${bt}`)}function ct(bt){throw new Error(bt)}function k(bt,it){bt||ct(it)}function W(bt){switch(bt==null?void 0:bt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Z(bt,it=null,lt=null){if(!bt)return null;try{if(lt&&typeof bt=="string"){if(lt.addDefaultProtocol&&bt.startsWith("www.")){const Xt=bt.match(/\./g);(Xt==null?void 0:Xt.length)>=2&&(bt=`http://${bt}`)}if(lt.tryConvertEncoding)try{bt=St(bt)}catch(Xt){}}const xt=it?new URL(bt,it):new URL(bt);if(W(xt))return xt}catch(xt){}return null}function C(bt,it,lt,xt=!1){return Object.defineProperty(bt,it,{value:lt,enumerable:!xt,configurable:!0,writable:!1}),lt}const s=function(){function it(lt,xt){this.constructor===it&&ct("Cannot initialize BaseException."),this.message=lt,this.name=xt}return it.prototype=new Error,it.constructor=it,it}();e.BaseException=s;class n extends s{constructor(it,lt){super(it,"PasswordException"),this.code=lt}}e.PasswordException=n;class b extends s{constructor(it,lt){super(it,"UnknownErrorException"),this.details=lt}}e.UnknownErrorException=b;class x extends s{constructor(it){super(it,"InvalidPDFException")}}e.InvalidPDFException=x;class F extends s{constructor(it){super(it,"MissingPDFException")}}e.MissingPDFException=F;class I extends s{constructor(it,lt){super(it,"UnexpectedResponseException"),this.status=lt}}e.UnexpectedResponseException=I;class $ extends s{constructor(it){super(it,"FormatError")}}e.FormatError=$;class ot extends s{constructor(it){super(it,"AbortException")}}e.AbortException=ot;function ut(bt){(typeof bt!="object"||(bt==null?void 0:bt.length)===void 0)&&ct("Invalid argument for bytesToString");const it=bt.length,lt=8192;if(it<lt)return String.fromCharCode.apply(null,bt);const xt=[];for(let Xt=0;Xt<it;Xt+=lt){const zt=Math.min(Xt+lt,it),B=bt.subarray(Xt,zt);xt.push(String.fromCharCode.apply(null,B))}return xt.join("")}function ft(bt){typeof bt!="string"&&ct("Invalid argument for stringToBytes");const it=bt.length,lt=new Uint8Array(it);for(let xt=0;xt<it;++xt)lt[xt]=bt.charCodeAt(xt)&255;return lt}function mt(bt){return String.fromCharCode(bt>>24&255,bt>>16&255,bt>>8&255,bt&255)}function At(bt){return Object.keys(bt).length}function vt(bt){const it=Object.create(null);for(const[lt,xt]of bt)it[lt]=xt;return it}function tt(){const bt=new Uint8Array(4);return bt[0]=1,new Uint32Array(bt.buffer,0,1)[0]===1}function nt(){try{return new Function(""),!0}catch(bt){return!1}}class A{static get isLittleEndian(){return C(this,"isLittleEndian",tt())}static get isEvalSupported(){return C(this,"isEvalSupported",nt())}static get isOffscreenCanvasSupported(){return C(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?C(this,"platform",{isWin:!1,isMac:!1}):C(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var it,lt;return C(this,"isCSSRoundSupported",(lt=(it=globalThis.CSS)==null?void 0:it.supports)==null?void 0:lt.call(it,"width: round(1.5px, 1px)"))}}e.FeatureTest=A;const O=[...Array(256).keys()].map(bt=>bt.toString(16).padStart(2,"0"));class K{static makeHexColor(it,lt,xt){return`#${O[it]}${O[lt]}${O[xt]}`}static scaleMinMax(it,lt){let xt;it[0]?(it[0]<0&&(xt=lt[0],lt[0]=lt[1],lt[1]=xt),lt[0]*=it[0],lt[1]*=it[0],it[3]<0&&(xt=lt[2],lt[2]=lt[3],lt[3]=xt),lt[2]*=it[3],lt[3]*=it[3]):(xt=lt[0],lt[0]=lt[2],lt[2]=xt,xt=lt[1],lt[1]=lt[3],lt[3]=xt,it[1]<0&&(xt=lt[2],lt[2]=lt[3],lt[3]=xt),lt[2]*=it[1],lt[3]*=it[1],it[2]<0&&(xt=lt[0],lt[0]=lt[1],lt[1]=xt),lt[0]*=it[2],lt[1]*=it[2]),lt[0]+=it[4],lt[1]+=it[4],lt[2]+=it[5],lt[3]+=it[5]}static transform(it,lt){return[it[0]*lt[0]+it[2]*lt[1],it[1]*lt[0]+it[3]*lt[1],it[0]*lt[2]+it[2]*lt[3],it[1]*lt[2]+it[3]*lt[3],it[0]*lt[4]+it[2]*lt[5]+it[4],it[1]*lt[4]+it[3]*lt[5]+it[5]]}static applyTransform(it,lt){const xt=it[0]*lt[0]+it[1]*lt[2]+lt[4],Xt=it[0]*lt[1]+it[1]*lt[3]+lt[5];return[xt,Xt]}static applyInverseTransform(it,lt){const xt=lt[0]*lt[3]-lt[1]*lt[2],Xt=(it[0]*lt[3]-it[1]*lt[2]+lt[2]*lt[5]-lt[4]*lt[3])/xt,zt=(-it[0]*lt[1]+it[1]*lt[0]+lt[4]*lt[1]-lt[5]*lt[0])/xt;return[Xt,zt]}static getAxialAlignedBoundingBox(it,lt){const xt=this.applyTransform(it,lt),Xt=this.applyTransform(it.slice(2,4),lt),zt=this.applyTransform([it[0],it[3]],lt),B=this.applyTransform([it[2],it[1]],lt);return[Math.min(xt[0],Xt[0],zt[0],B[0]),Math.min(xt[1],Xt[1],zt[1],B[1]),Math.max(xt[0],Xt[0],zt[0],B[0]),Math.max(xt[1],Xt[1],zt[1],B[1])]}static inverseTransform(it){const lt=it[0]*it[3]-it[1]*it[2];return[it[3]/lt,-it[1]/lt,-it[2]/lt,it[0]/lt,(it[2]*it[5]-it[4]*it[3])/lt,(it[4]*it[1]-it[5]*it[0])/lt]}static singularValueDecompose2dScale(it){const lt=[it[0],it[2],it[1],it[3]],xt=it[0]*lt[0]+it[1]*lt[2],Xt=it[0]*lt[1]+it[1]*lt[3],zt=it[2]*lt[0]+it[3]*lt[2],B=it[2]*lt[1]+it[3]*lt[3],gt=(xt+B)/2,Tt=Math.sqrt((xt+B)**2-4*(xt*B-zt*Xt))/2,Dt=gt+Tt||1,Nt=gt-Tt||1;return[Math.sqrt(Dt),Math.sqrt(Nt)]}static normalizeRect(it){const lt=it.slice(0);return it[0]>it[2]&&(lt[0]=it[2],lt[2]=it[0]),it[1]>it[3]&&(lt[1]=it[3],lt[3]=it[1]),lt}static intersect(it,lt){const xt=Math.max(Math.min(it[0],it[2]),Math.min(lt[0],lt[2])),Xt=Math.min(Math.max(it[0],it[2]),Math.max(lt[0],lt[2]));if(xt>Xt)return null;const zt=Math.max(Math.min(it[1],it[3]),Math.min(lt[1],lt[3])),B=Math.min(Math.max(it[1],it[3]),Math.max(lt[1],lt[3]));return zt>B?null:[xt,zt,Xt,B]}static bezierBoundingBox(it,lt,xt,Xt,zt,B,gt,Tt){const Dt=[],Nt=[[],[]];let kt,R,w,z,ht,dt,_t,Et;for(let Wt=0;Wt<2;++Wt){if(Wt===0?(R=6*it-12*xt+6*zt,kt=-3*it+9*xt-9*zt+3*gt,w=3*xt-3*it):(R=6*lt-12*Xt+6*B,kt=-3*lt+9*Xt-9*B+3*Tt,w=3*Xt-3*lt),Math.abs(kt)<1e-12){if(Math.abs(R)<1e-12)continue;z=-w/R,0<z&&z<1&&Dt.push(z);continue}_t=R*R-4*w*kt,Et=Math.sqrt(_t),!(_t<0)&&(ht=(-R+Et)/(2*kt),0<ht&&ht<1&&Dt.push(ht),dt=(-R-Et)/(2*kt),0<dt&&dt<1&&Dt.push(dt))}let Ot=Dt.length,Ft;const Rt=Ot;for(;Ot--;)z=Dt[Ot],Ft=1-z,Nt[0][Ot]=Ft*Ft*Ft*it+3*Ft*Ft*z*xt+3*Ft*z*z*zt+z*z*z*gt,Nt[1][Ot]=Ft*Ft*Ft*lt+3*Ft*Ft*z*Xt+3*Ft*z*z*B+z*z*z*Tt;return Nt[0][Rt]=it,Nt[1][Rt]=lt,Nt[0][Rt+1]=gt,Nt[1][Rt+1]=Tt,Nt[0].length=Nt[1].length=Rt+2,[Math.min(...Nt[0]),Math.min(...Nt[1]),Math.max(...Nt[0]),Math.max(...Nt[1])]}}e.Util=K;const et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function pt(bt){if(bt[0]>="ï"){let lt;if(bt[0]==="þ"&&bt[1]==="ÿ"?lt="utf-16be":bt[0]==="ÿ"&&bt[1]==="þ"?lt="utf-16le":bt[0]==="ï"&&bt[1]==="»"&&bt[2]==="¿"&&(lt="utf-8"),lt)try{const xt=new TextDecoder(lt,{fatal:!0}),Xt=ft(bt);return xt.decode(Xt)}catch(xt){q(`stringToPDFString: "${xt}".`)}}const it=[];for(let lt=0,xt=bt.length;lt<xt;lt++){const Xt=et[bt.charCodeAt(lt)];it.push(Xt?String.fromCharCode(Xt):bt.charAt(lt))}return it.join("")}function St(bt){return decodeURIComponent(escape(bt))}function yt(bt){return unescape(encodeURIComponent(bt))}function J(bt){return typeof bt=="object"&&(bt==null?void 0:bt.byteLength)!==void 0}function Pt(bt,it){if(bt.length!==it.length)return!1;for(let lt=0,xt=bt.length;lt<xt;lt++)if(bt[lt]!==it[lt])return!1;return!0}function Ct(bt=new Date){return[bt.getUTCFullYear().toString(),(bt.getUTCMonth()+1).toString().padStart(2,"0"),bt.getUTCDate().toString().padStart(2,"0"),bt.getUTCHours().toString().padStart(2,"0"),bt.getUTCMinutes().toString().padStart(2,"0"),bt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ht{constructor(){st(this,Vt,!1);this.promise=new Promise((it,lt)=>{this.resolve=xt=>{rt(this,Vt,!0),it(xt)},this.reject=xt=>{rt(this,Vt,!0),lt(xt)}})}get settled(){return t(this,Vt)}}Vt=new WeakMap,e.PromiseCapability=Ht;let Bt=null,$t=null;function Mt(bt){return Bt||(Bt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,$t=new Map([["ﬅ","ſt"]])),bt.replaceAll(Bt,(it,lt,xt)=>lt?lt.normalize("NFKC"):$t.get(xt))}function Ut(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const bt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(bt);else for(let it=0;it<32;it++)bt[it]=Math.floor(Math.random()*255);return ut(bt)}const qt="pdfjs_internal_id_";e.AnnotationPrefix=qt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var X,H,l,p,re,be,V,M,T,d,L,m,i,f,v,Ae,g,y,Ie,E,c;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(r){var Ct,Ht;if(typeof r=="string"||r instanceof URL?r={url:r}:(0,_util.isArrayBuffer)(r)&&(r={data:r}),typeof r!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!r.url&&!r.data&&!r.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const h=new PDFDocumentLoadingTask,{docId:u}=h,j=r.url?getUrlProp(r.url):null,a=r.data?getDataProp(r.data):null,S=r.httpHeaders||null,D=r.withCredentials===!0,at=(Ct=r.password)!=null?Ct:null,G=r.range instanceof PDFDataRangeTransport?r.range:null,Q=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let q=r.worker instanceof PDFWorker?r.worker:null;const ct=r.verbosity,k=typeof r.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(r.docBaseUrl)?r.docBaseUrl:null,W=typeof r.cMapUrl=="string"?r.cMapUrl:null,Z=r.cMapPacked!==!1,C=r.CMapReaderFactory||DefaultCMapReaderFactory,s=typeof r.standardFontDataUrl=="string"?r.standardFontDataUrl:null,n=r.StandardFontDataFactory||DefaultStandardFontDataFactory,b=r.stopAtErrors!==!0,x=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,F=r.isEvalSupported!==!1,I=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!_util.isNodeJS,$=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,ot=typeof r.disableFontFace=="boolean"?r.disableFontFace:_util.isNodeJS,ut=r.fontExtraProperties===!0,ft=r.enableXfa===!0,mt=r.ownerDocument||globalThis.document,At=r.disableRange===!0,vt=r.disableStream===!0,tt=r.disableAutoFetch===!0,nt=r.pdfBug===!0,A=G?G.length:(Ht=r.length)!=null?Ht:NaN,O=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!_util.isNodeJS&&!ot,K=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:C===_display_utils.DOMCMapReaderFactory&&n===_display_utils.DOMStandardFontDataFactory&&W&&s&&(0,_display_utils.isValidFetchUrl)(W,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(s,document.baseURI),et=r.canvasFactory||new DefaultCanvasFactory({ownerDocument:mt}),pt=r.filterFactory||new DefaultFilterFactory({docId:u,ownerDocument:mt}),St=null;(0,_util.setVerbosityLevel)(ct);const yt={canvasFactory:et,filterFactory:pt};if(K||(yt.cMapReaderFactory=new C({baseUrl:W,isCompressed:Z}),yt.standardFontDataFactory=new n({baseUrl:s})),!q){const Bt={verbosity:ct,port:_worker_options.GlobalWorkerOptions.workerPort};q=Bt.port?PDFWorker.fromPort(Bt):new PDFWorker(Bt),h._worker=q}const J={docId:u,apiVersion:"3.11.174",data:a,password:at,disableAutoFetch:tt,rangeChunkSize:Q,length:A,docBaseUrl:k,enableXfa:ft,evaluatorOptions:{maxImageSize:x,disableFontFace:ot,ignoreErrors:b,isEvalSupported:F,isOffscreenCanvasSupported:I,canvasMaxAreaInBytes:$,fontExtraProperties:ut,useSystemFonts:O,cMapUrl:K?W:null,standardFontDataUrl:K?s:null}},Pt={ignoreErrors:b,isEvalSupported:F,disableFontFace:ot,fontExtraProperties:ut,enableXfa:ft,ownerDocument:mt,disableAutoFetch:tt,pdfBug:nt,styleElement:St};return q.promise.then(function(){if(h.destroyed)throw new Error("Loading aborted");const Bt=_fetchDocument(q,J),$t=new Promise(function(Mt){let Ut;G?Ut=new _transport_stream.PDFDataTransportStream({length:A,initialData:G.initialData,progressiveDone:G.progressiveDone,contentDispositionFilename:G.contentDispositionFilename,disableRange:At,disableStream:vt},G):a||(Ut=(Vt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Vt):(0,_display_utils.isValidFetchUrl)(Vt.url)?new _displayFetch_stream.PDFFetchStream(Vt):new _displayNetwork.PDFNetworkStream(Vt))({url:j,length:A,httpHeaders:S,withCredentials:D,rangeChunkSize:Q,disableRange:At,disableStream:vt})),Mt(Ut)});return Promise.all([Bt,$t]).then(function([Mt,Ut]){if(h.destroyed)throw new Error("Loading aborted");const qt=new _message_handler.MessageHandler(u,Mt,q.port),Vt=new WorkerTransport(qt,h,Ut,Pt,yt);h._transport=Vt,qt.send("Ready",null)})}).catch(h._capability.reject),h}async function _fetchDocument(r,h){if(r.destroyed)throw new Error("Worker was destroyed");const u=await r.messageHandler.sendWithPromise("GetDocRequest",h,h.data?[h.data.buffer]:null);if(r.destroyed)throw new Error("Worker was destroyed");return u}function getUrlProp(r){if(r instanceof URL)return r.href;try{return new URL(r,window.location).href}catch(h){if(_util.isNodeJS&&typeof r=="string")return r}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(r){if(_util.isNodeJS&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return(0,_util.stringToBytes)(r);if(typeof r=="object"&&!isNaN(r==null?void 0:r.length)||(0,_util.isArrayBuffer)(r))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${he(e,X)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var h,u,j;this.destroyed=!0;try{(h=this._worker)!=null&&h.port&&(this._worker._pendingDestroy=!0),await((u=this._transport)==null?void 0:u.destroy())}catch(a){throw(j=this._worker)!=null&&j.port&&delete this._worker._pendingDestroy,a}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};X=new WeakMap,st(e,X,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(h,u,j=!1,a=null){this.length=h,this.initialData=u,this.progressiveDone=j,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(h){this._rangeListeners.push(h)}addProgressListener(h){this._progressListeners.push(h)}addProgressiveReadListener(h){this._progressiveReadListeners.push(h)}addProgressiveDoneListener(h){this._progressiveDoneListeners.push(h)}onDataRange(h,u){for(const j of this._rangeListeners)j(h,u)}onDataProgress(h,u){this._readyCapability.promise.then(()=>{for(const j of this._progressListeners)j(h,u)})}onDataProgressiveRead(h){this._readyCapability.promise.then(()=>{for(const u of this._progressiveReadListeners)u(h)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const h of this._progressiveDoneListeners)h()})}transportReady(){this._readyCapability.resolve()}requestDataRange(h,u){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(h,u){this._pdfInfo=h,this._transport=u,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(j=>{if(!j)return j;const a=[];for(const S in j)a.push(...j[S]);return a}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(h){return this._transport.getPage(h)}getPageIndex(h){return this._transport.getPageIndex(h)}getDestinations(){return this._transport.getDestinations()}getDestination(h){return this._transport.getDestination(h)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(h=!1){return this._transport.startCleanup(h||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(h,u,j,a=!1){st(this,p);st(this,H,null);st(this,l,!1);this._pageIndex=h,this._pageInfo=u,this._transport=j,this._stats=a?new _display_utils.StatTimer:null,this._pdfBug=a,this.commonObjs=j.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:h,rotation:u=this.rotate,offsetX:j=0,offsetY:a=0,dontFlip:S=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:h,rotation:u,offsetX:j,offsetY:a,dontFlip:S})}getAnnotations({intent:h="display"}={}){const u=this._transport.getRenderingIntent(h);return this._transport.getAnnotations(this._pageIndex,u.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var h;return((h=this._transport._htmlForXfa)==null?void 0:h.children[this._pageIndex])||null}render({canvasContext:h,viewport:u,intent:j="display",annotationMode:a=_util.AnnotationMode.ENABLE,transform:S=null,background:D=null,optionalContentConfigPromise:at=null,annotationCanvasMap:G=null,pageColors:Q=null,printAnnotationStorage:q=null}){var n,b;(n=this._stats)==null||n.time("Overall");const ct=this._transport.getRenderingIntent(j,a,q);rt(this,l,!1),Y(this,p,be).call(this),at||(at=this._transport.getOptionalContentConfig());let k=this._intentStates.get(ct.cacheKey);k||(k=Object.create(null),this._intentStates.set(ct.cacheKey,k)),k.streamReaderCancelTimeout&&(clearTimeout(k.streamReaderCancelTimeout),k.streamReaderCancelTimeout=null);const W=!!(ct.renderingIntent&_util.RenderingIntentFlag.PRINT);k.displayReadyCapability||(k.displayReadyCapability=new _util.PromiseCapability,k.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(b=this._stats)==null||b.time("Page Request"),this._pumpOperatorList(ct));const Z=x=>{var F,I;k.renderTasks.delete(C),(this._maybeCleanupAfterRender||W)&&rt(this,l,!0),Y(this,p,re).call(this,!W),x?(C.capability.reject(x),this._abortOperatorList({intentState:k,reason:x instanceof Error?x:new Error(x)})):C.capability.resolve(),(F=this._stats)==null||F.timeEnd("Rendering"),(I=this._stats)==null||I.timeEnd("Overall")},C=new InternalRenderTask({callback:Z,params:{canvasContext:h,viewport:u,transform:S,background:D},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:G,operatorList:k.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!W,pdfBug:this._pdfBug,pageColors:Q});(k.renderTasks||(k.renderTasks=new Set)).add(C);const s=C.task;return Promise.all([k.displayReadyCapability.promise,at]).then(([x,F])=>{var I;if(this.destroyed){Z();return}(I=this._stats)==null||I.time("Rendering"),C.initializeGraphics({transparency:x,optionalContentConfig:F}),C.operatorListChanged()}).catch(Z),s}getOperatorList({intent:h="display",annotationMode:u=_util.AnnotationMode.ENABLE,printAnnotationStorage:j=null}={}){var G;function a(){D.operatorList.lastChunk&&(D.opListReadCapability.resolve(D.operatorList),D.renderTasks.delete(at))}const S=this._transport.getRenderingIntent(h,u,j,!0);let D=this._intentStates.get(S.cacheKey);D||(D=Object.create(null),this._intentStates.set(S.cacheKey,D));let at;return D.opListReadCapability||(at=Object.create(null),at.operatorListChanged=a,D.opListReadCapability=new _util.PromiseCapability,(D.renderTasks||(D.renderTasks=new Set)).add(at),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(G=this._stats)==null||G.time("Page Request"),this._pumpOperatorList(S)),D.opListReadCapability.promise}streamTextContent({includeMarkedContent:h=!1,disableNormalization:u=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:h===!0,disableNormalization:u===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(h={}){if(this._transport._htmlForXfa)return this.getXfa().then(j=>_xfa_text.XfaText.textContent(j));const u=this.streamTextContent(h);return new Promise(function(j,a){function S(){D.read().then(function({value:G,done:Q}){if(Q){j(at);return}Object.assign(at.styles,G.styles),at.items.push(...G.items),S()},a)}const D=u.getReader(),at={items:[],styles:Object.create(null)};S()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const h=[];for(const u of this._intentStates.values())if(this._abortOperatorList({intentState:u,reason:new Error("Page was destroyed."),force:!0}),!u.opListReadCapability)for(const j of u.renderTasks)h.push(j.completed),j.cancel();return this.objs.clear(),rt(this,l,!1),Y(this,p,be).call(this),Promise.all(h)}cleanup(h=!1){rt(this,l,!0);const u=Y(this,p,re).call(this,!1);return h&&u&&this._stats&&(this._stats=new _display_utils.StatTimer),u}_startRenderPage(h,u){var a,S;const j=this._intentStates.get(u);j&&((a=this._stats)==null||a.timeEnd("Page Request"),(S=j.displayReadyCapability)==null||S.resolve(h))}_renderPageChunk(h,u){for(let j=0,a=h.length;j<a;j++)u.operatorList.fnArray.push(h.fnArray[j]),u.operatorList.argsArray.push(h.argsArray[j]);u.operatorList.lastChunk=h.lastChunk,u.operatorList.separateAnnots=h.separateAnnots;for(const j of u.renderTasks)j.operatorListChanged();h.lastChunk&&Y(this,p,re).call(this,!0)}_pumpOperatorList({renderingIntent:h,cacheKey:u,annotationStorageSerializable:j}){const{map:a,transfers:S}=j,at=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:h,cacheKey:u,annotationStorage:a},S).getReader(),G=this._intentStates.get(u);G.streamReader=at;const Q=()=>{at.read().then(({value:q,done:ct})=>{if(ct){G.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(q,G),Q())},q=>{if(G.streamReader=null,!this._transport.destroyed){if(G.operatorList){G.operatorList.lastChunk=!0;for(const ct of G.renderTasks)ct.operatorListChanged();Y(this,p,re).call(this,!0)}if(G.displayReadyCapability)G.displayReadyCapability.reject(q);else if(G.opListReadCapability)G.opListReadCapability.reject(q);else throw q}})};Q()}_abortOperatorList({intentState:h,reason:u,force:j=!1}){if(h.streamReader){if(h.streamReaderCancelTimeout&&(clearTimeout(h.streamReaderCancelTimeout),h.streamReaderCancelTimeout=null),!j){if(h.renderTasks.size>0)return;if(u instanceof _display_utils.RenderingCancelledException){let a=RENDERING_CANCELLED_TIMEOUT;u.extraDelay>0&&u.extraDelay<1e3&&(a+=u.extraDelay),h.streamReaderCancelTimeout=setTimeout(()=>{h.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:h,reason:u,force:!0})},a);return}}if(h.streamReader.cancel(new _util.AbortException(u.message)).catch(()=>{}),h.streamReader=null,!this._transport.destroyed){for(const[a,S]of this._intentStates)if(S===h){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}H=new WeakMap,l=new WeakMap,p=new WeakSet,re=function(h=!1){if(Y(this,p,be).call(this),!t(this,l)||this.destroyed)return!1;if(h)return rt(this,H,setTimeout(()=>{rt(this,H,null),Y(this,p,re).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:u,operatorList:j}of this._intentStates.values())if(u.size>0||!j.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),rt(this,l,!1),!0},be=function(){t(this,H)&&(clearTimeout(t(this,H)),rt(this,H,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){st(this,V,new Set);st(this,M,Promise.resolve())}postMessage(h,u){const j={data:structuredClone(h,u?{transfer:u}:null)};t(this,M).then(()=>{for(const a of t(this,V))a.call(this,j)})}addEventListener(h,u){t(this,V).add(u)}removeEventListener(h,u){t(this,V).delete(u)}terminate(){t(this,V).clear()}}V=new WeakMap,M=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const r=(T=document==null?void 0:document.currentScript)==null?void 0:T.src;r&&(PDFWorkerUtil.fallbackWorkerSrc=r.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(r,h){let u;try{if(u=new URL(r),!u.origin||u.origin==="null")return!1}catch(a){return!1}const j=new URL(h,u);return u.origin===j.origin},PDFWorkerUtil.createCDNWrapper=function(r){const h=`importScripts("${r}");`;return URL.createObjectURL(new Blob([h]))}}const _PDFWorker=class _PDFWorker{constructor({name:r=null,port:h=null,verbosity:u=(0,_util.getVerbosityLevel)()}={}){var j;if(this.name=r,this.destroyed=!1,this.verbosity=u,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,h){if((j=t(_PDFWorker,d))!=null&&j.has(h))throw new Error("Cannot use more than one PDFWorker per port.");(t(_PDFWorker,d)||rt(_PDFWorker,d,new WeakMap)).set(h,this),this._initializeFromPort(h);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(r){this._port=r,this._messageHandler=new _message_handler.MessageHandler("main","worker",r),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:r}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,r)||(r=PDFWorkerUtil.createCDNWrapper(new URL(r,window.location).href));const h=new Worker(r),u=new _message_handler.MessageHandler("main","worker",h),j=()=>{h.removeEventListener("error",a),u.destroy(),h.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=()=>{this._webWorker||j()};h.addEventListener("error",a),u.on("test",D=>{if(h.removeEventListener("error",a),this.destroyed){j();return}D?(this._messageHandler=u,this._port=h,this._webWorker=h,this._readyCapability.resolve(),u.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),u.destroy(),h.terminate())}),u.on("ready",D=>{if(h.removeEventListener("error",a),this.destroyed){j();return}try{S()}catch(at){this._setupFakeWorker()}});const S=()=>{const D=new Uint8Array;u.send("test",D,[D.buffer])};S();return}catch(h){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(r=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const h=new LoopbackPort;this._port=h;const u=`fake${PDFWorkerUtil.fakeWorkerId++}`,j=new _message_handler.MessageHandler(u+"_worker",u,h);r.setup(j,h);const a=new _message_handler.MessageHandler(u,u+"_worker",h);this._messageHandler=a,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})}).catch(r=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${r.message}".`))})}destroy(){var r;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(r=t(_PDFWorker,d))==null||r.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(r){var u;if(!(r!=null&&r.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const h=(u=t(this,d))==null?void 0:u.get(r.port);if(h){if(h._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return h}return new _PDFWorker(r)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var r;try{return((r=globalThis.pdfjsWorker)==null?void 0:r.WorkerMessageHandler)||null}catch(h){return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};d=new WeakMap,st(_PDFWorker,d);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(h,u,j,a,S){st(this,v);st(this,L,new Map);st(this,m,new Map);st(this,i,new Map);st(this,f,null);this.messageHandler=h,this.loadingTask=u,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this._params=a,this.canvasFactory=S.canvasFactory,this.filterFactory=S.filterFactory,this.cMapReaderFactory=S.cMapReaderFactory,this.standardFontDataFactory=S.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=j,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(h,u=_util.AnnotationMode.ENABLE,j=null,a=!1){let S=_util.RenderingIntentFlag.DISPLAY,D=_annotation_storage.SerializableEmpty;switch(h){case"any":S=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":S=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${h}`)}switch(u){case _util.AnnotationMode.DISABLE:S+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:S+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:S+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,D=(S&_util.RenderingIntentFlag.PRINT&&j instanceof _annotation_storage.PrintAnnotationStorage?j:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${u}`)}return a&&(S+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:S,cacheKey:`${S}_${D.hash}`,annotationStorageSerializable:D}}destroy(){var j;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(j=t(this,f))==null||j.reject(new Error("Worker was destroyed during onPassword callback"));const h=[];for(const a of t(this,m).values())h.push(a._destroy());t(this,m).clear(),t(this,i).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const u=this.messageHandler.sendWithPromise("Terminate",null);return h.push(u),Promise.all(h).then(()=>{var a;this.commonObjs.clear(),this.fontLoader.clear(),t(this,L).clear(),this.filterFactory.destroy(),(a=this._networkStream)==null||a.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:h,loadingTask:u}=this;h.on("GetReader",(j,a)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=S=>{this._lastProgress={loaded:S.loaded,total:S.total}},a.onPull=()=>{this._fullReader.read().then(function({value:S,done:D}){if(D){a.close();return}(0,_util.assert)(S instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(S),1,[S])}).catch(S=>{a.error(S)})},a.onCancel=S=>{this._fullReader.cancel(S),a.ready.catch(D=>{if(!this.destroyed)throw D})}}),h.on("ReaderHeadersReady",j=>{const a=new _util.PromiseCapability,S=this._fullReader;return S.headersReady.then(()=>{var D;(!S.isStreamingSupported||!S.isRangeSupported)&&(this._lastProgress&&((D=u.onProgress)==null||D.call(u,this._lastProgress)),S.onProgress=at=>{var G;(G=u.onProgress)==null||G.call(u,{loaded:at.loaded,total:at.total})}),a.resolve({isStreamingSupported:S.isStreamingSupported,isRangeSupported:S.isRangeSupported,contentLength:S.contentLength})},a.reject),a.promise}),h.on("GetRangeReader",(j,a)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const S=this._networkStream.getRangeReader(j.begin,j.end);if(!S){a.close();return}a.onPull=()=>{S.read().then(function({value:D,done:at}){if(at){a.close();return}(0,_util.assert)(D instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(D),1,[D])}).catch(D=>{a.error(D)})},a.onCancel=D=>{S.cancel(D),a.ready.catch(at=>{if(!this.destroyed)throw at})}}),h.on("GetDoc",({pdfInfo:j})=>{this._numPages=j.numPages,this._htmlForXfa=j.htmlForXfa,delete j.htmlForXfa,u._capability.resolve(new PDFDocumentProxy(j,this))}),h.on("DocException",function(j){let a;switch(j.name){case"PasswordException":a=new _util.PasswordException(j.message,j.code);break;case"InvalidPDFException":a=new _util.InvalidPDFException(j.message);break;case"MissingPDFException":a=new _util.MissingPDFException(j.message);break;case"UnexpectedResponseException":a=new _util.UnexpectedResponseException(j.message,j.status);break;case"UnknownErrorException":a=new _util.UnknownErrorException(j.message,j.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}u._capability.reject(a)}),h.on("PasswordRequest",j=>{if(rt(this,f,new _util.PromiseCapability),u.onPassword){const a=S=>{S instanceof Error?t(this,f).reject(S):t(this,f).resolve({password:S})};try{u.onPassword(a,j.code)}catch(S){t(this,f).reject(S)}}else t(this,f).reject(new _util.PasswordException(j.message,j.code));return t(this,f).promise}),h.on("DataLoaded",j=>{var a;(a=u.onProgress)==null||a.call(u,{loaded:j.length,total:j.length}),this.downloadInfoCapability.resolve(j)}),h.on("StartRenderPage",j=>{if(this.destroyed)return;t(this,m).get(j.pageIndex)._startRenderPage(j.transparency,j.cacheKey)}),h.on("commonobj",([j,a,S])=>{var D;if(!this.destroyed&&!this.commonObjs.has(j))switch(a){case"Font":const at=this._params;if("error"in S){const q=S.error;(0,_util.warn)(`Error during font loading: ${q}`),this.commonObjs.resolve(j,q);break}const G=at.pdfBug&&((D=globalThis.FontInspector)!=null&&D.enabled)?(q,ct)=>globalThis.FontInspector.fontAdded(q,ct):null,Q=new _font_loader.FontFaceObject(S,{isEvalSupported:at.isEvalSupported,disableFontFace:at.disableFontFace,ignoreErrors:at.ignoreErrors,inspectFont:G});this.fontLoader.bind(Q).catch(q=>h.sendWithPromise("FontFallback",{id:j})).finally(()=>{!at.fontExtraProperties&&Q.data&&(Q.data=null),this.commonObjs.resolve(j,Q)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(j,S);break;default:throw new Error(`Got unknown common object type ${a}`)}}),h.on("obj",([j,a,S,D])=>{var G;if(this.destroyed)return;const at=t(this,m).get(a);if(!at.objs.has(j))switch(S){case"Image":if(at.objs.resolve(j,D),D){let Q;if(D.bitmap){const{width:q,height:ct}=D;Q=q*ct*4}else Q=((G=D.data)==null?void 0:G.length)||0;Q>_util.MAX_IMAGE_SIZE_TO_CACHE&&(at._maybeCleanupAfterRender=!0)}break;case"Pattern":at.objs.resolve(j,D);break;default:throw new Error(`Got unknown object type ${S}`)}}),h.on("DocProgress",j=>{var a;this.destroyed||(a=u.onProgress)==null||a.call(u,{loaded:j.loaded,total:j.total})}),h.on("FetchBuiltInCMap",j=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(j):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),h.on("FetchStandardFontData",j=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(j):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var j,a;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:h,transfers:u}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:h,filename:(a=(j=this._fullReader)==null?void 0:j.filename)!=null?a:null},u).finally(()=>{this.annotationStorage.resetModified()})}getPage(h){if(!Number.isInteger(h)||h<=0||h>this._numPages)return Promise.reject(new Error("Invalid page request."));const u=h-1,j=t(this,i).get(u);if(j)return j;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:u}).then(S=>{if(this.destroyed)throw new Error("Transport destroyed");const D=new PDFPageProxy(u,S,this,this._params.pdfBug);return t(this,m).set(u,D),D});return t(this,i).set(u,a),a}getPageIndex(h){return typeof h!="object"||h===null||!Number.isInteger(h.num)||h.num<0||!Number.isInteger(h.gen)||h.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:h.num,gen:h.gen})}getAnnotations(h,u){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:h,intent:u})}getFieldObjects(){return Y(this,v,Ae).call(this,"GetFieldObjects")}hasJSActions(){return Y(this,v,Ae).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(h){return typeof h!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:h})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Y(this,v,Ae).call(this,"GetDocJSActions")}getPageJSActions(h){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:h})}getStructTree(h){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:h})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(h=>new _optional_content_config.OptionalContentConfig(h))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const h="GetMetadata",u=t(this,L).get(h);if(u)return u;const j=this.messageHandler.sendWithPromise(h,null).then(a=>{var S,D,at,G;return{info:a[0],metadata:a[1]?new _metadata.Metadata(a[1]):null,contentDispositionFilename:(D=(S=this._fullReader)==null?void 0:S.filename)!=null?D:null,contentLength:(G=(at=this._fullReader)==null?void 0:at.contentLength)!=null?G:null}});return t(this,L).set(h,j),j}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(h=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const u of t(this,m).values())if(!u.cleanup())throw new Error(`startCleanup: Page ${u.pageNumber} is currently rendering.`);this.commonObjs.clear(),h||this.fontLoader.clear(),t(this,L).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:h,enableXfa:u}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:h,enableXfa:u})}}L=new WeakMap,m=new WeakMap,i=new WeakMap,f=new WeakMap,v=new WeakSet,Ae=function(h,u=null){const j=t(this,L).get(h);if(j)return j;const a=this.messageHandler.sendWithPromise(h,u);return t(this,L).set(h,a),a};class PDFObjects{constructor(){st(this,y);st(this,g,Object.create(null))}get(h,u=null){if(u){const a=Y(this,y,Ie).call(this,h);return a.capability.promise.then(()=>u(a.data)),null}const j=t(this,g)[h];if(!(j!=null&&j.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${h}.`);return j.data}has(h){const u=t(this,g)[h];return(u==null?void 0:u.capability.settled)||!1}resolve(h,u=null){const j=Y(this,y,Ie).call(this,h);j.data=u,j.capability.resolve()}clear(){var h;for(const u in t(this,g)){const{data:j}=t(this,g)[u];(h=j==null?void 0:j.bitmap)==null||h.close()}rt(this,g,Object.create(null))}}g=new WeakMap,y=new WeakSet,Ie=function(h){var u;return(u=t(this,g))[h]||(u[h]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(h){st(this,E,null);rt(this,E,h),this.onContinue=null}get promise(){return t(this,E).capability.promise}cancel(h=0){t(this,E).cancel(null,h)}get separateAnnots(){const{separateAnnots:h}=t(this,E).operatorList;if(!h)return!1;const{annotationCanvasMap:u}=t(this,E);return h.form||h.canvas&&(u==null?void 0:u.size)>0}}E=new WeakMap,exports.RenderTask=RenderTask;const o=class o{constructor({callback:h,params:u,objs:j,commonObjs:a,annotationCanvasMap:S,operatorList:D,pageIndex:at,canvasFactory:G,filterFactory:Q,useRequestAnimationFrame:q=!1,pdfBug:ct=!1,pageColors:k=null}){this.callback=h,this.params=u,this.objs=j,this.commonObjs=a,this.annotationCanvasMap=S,this.operatorListIdx=null,this.operatorList=D,this._pageIndex=at,this.canvasFactory=G,this.filterFactory=Q,this._pdfBug=ct,this.pageColors=k,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=q===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=u.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:h=!1,optionalContentConfig:u}){var at,G;if(this.cancelled)return;if(this._canvas){if(t(o,c).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(o,c).add(this._canvas)}this._pdfBug&&((at=globalThis.StepperManager)!=null&&at.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:j,viewport:a,transform:S,background:D}=this.params;this.gfx=new _canvas.CanvasGraphics(j,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:u},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:S,viewport:a,transparency:h,background:D}),this.operatorListIdx=0,this.graphicsReady=!0,(G=this.graphicsReadyCallback)==null||G.call(this)}cancel(h=null,u=0){var j;this.running=!1,this.cancelled=!0,(j=this.gfx)==null||j.endDrawing(),t(o,c).delete(this._canvas),this.callback(h||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,u))}operatorListChanged(){var h;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(h=this.stepper)==null||h.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(o,c).delete(this._canvas),this.callback())))}};c=new WeakMap,st(o,c,new WeakSet);let InternalRenderTask=o;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(X,e,H)=>{var T,d,L,_s,i;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var l=H(1),p=H(4),P=H(8);const N=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=N;class V{constructor(){st(this,L);st(this,T,!1);st(this,d,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(v,_){const g=t(this,d).get(v);return g===void 0?_:Object.assign(_,g)}getRawValue(v){return t(this,d).get(v)}remove(v){if(t(this,d).delete(v),t(this,d).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const _ of t(this,d).values())if(_ instanceof p.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(v,_){const g=t(this,d).get(v);let y=!1;if(g!==void 0)for(const[U,E]of Object.entries(_))g[U]!==E&&(y=!0,g[U]=E);else y=!0,t(this,d).set(v,_);y&&Y(this,L,_s).call(this),_ instanceof p.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(_.constructor._type)}has(v){return t(this,d).has(v)}getAll(){return t(this,d).size>0?(0,l.objectFromMap)(t(this,d)):null}setAll(v){for(const[_,g]of Object.entries(v))this.setValue(_,g)}get size(){return t(this,d).size}resetModified(){t(this,T)&&(rt(this,T,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new M(this)}get serializable(){if(t(this,d).size===0)return N;const v=new Map,_=new P.MurmurHash3_64,g=[],y=Object.create(null);let U=!1;for(const[E,c]of t(this,d)){const o=c instanceof p.AnnotationEditor?c.serialize(!1,y):c;o&&(v.set(E,o),_.update(`${E}:${JSON.stringify(o)}`),U||(U=!!o.bitmap))}if(U)for(const E of v.values())E.bitmap&&g.push(E.bitmap);return v.size>0?{map:v,hash:_.hexdigest(),transfers:g}:N}}T=new WeakMap,d=new WeakMap,L=new WeakSet,_s=function(){t(this,T)||(rt(this,T,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=V;class M extends V{constructor(_){super();st(this,i);const{map:g,hash:y,transfers:U}=_.serializable,E=structuredClone(g,U?{transfer:U}:null);rt(this,i,{map:E,hash:y,transfers:U})}get print(){(0,l.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,i)}}i=new WeakMap,e.PrintAnnotationStorage=M},(X,e,H)=>{var M,T,d,L,m,i,f,v,_,g,y,U,E,c,o,De,Oe,u,Le,Ne,bs,As,ys,Ue,vs;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var l=H(5),p=H(1),P=H(6);const q=class q{constructor(k){st(this,o);st(this,M,"");st(this,T,!1);st(this,d,null);st(this,L,null);st(this,m,null);st(this,i,!1);st(this,f,null);st(this,v,this.focusin.bind(this));st(this,_,this.focusout.bind(this));st(this,g,!1);st(this,y,!1);st(this,U,!1);wt(this,"_initialOptions",Object.create(null));wt(this,"_uiManager",null);wt(this,"_focusEventsAllowed",!0);wt(this,"_l10nPromise",null);st(this,E,!1);st(this,c,q._zIndex++);this.constructor===q&&(0,p.unreachable)("Cannot initialize AnnotationEditor."),this.parent=k.parent,this.id=k.id,this.width=this.height=null,this.pageIndex=k.parent.pageIndex,this.name=k.name,this.div=null,this._uiManager=k.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=k.isCentered,this._structTreeParentId=null;const{rotation:W,rawDims:{pageWidth:Z,pageHeight:C,pageX:s,pageY:n}}=this.parent.viewport;this.rotation=W,this.pageRotation=(360+W-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Z,C],this.pageTranslation=[s,n];const[b,x]=this.parentDimensions;this.x=k.x/b,this.y=k.y/x,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,p.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(k){const W=new V({id:k.parent.getNextId(),parent:k.parent,uiManager:k._uiManager});W.annotationElementId=k.annotationElementId,W.deleted=!0,W._uiManager.addToAnnotationStorage(W)}static initialize(k,W=null){if(q._l10nPromise||(q._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(C=>[C,k.get(C)]))),W!=null&&W.strings)for(const C of W.strings)q._l10nPromise.set(C,k.get(C));if(q._borderLineWidth!==-1)return;const Z=getComputedStyle(document.documentElement);q._borderLineWidth=parseFloat(Z.getPropertyValue("--outline-width"))||0}static updateDefaultParams(k,W){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(k){return!1}static paste(k,W){(0,p.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,E)}set _isDraggable(k){var W;rt(this,E,k),(W=this.div)==null||W.classList.toggle("draggable",k)}center(){const[k,W]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*W/(k*2),this.y+=this.width*k/(W*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*W/(k*2),this.y-=this.width*k/(W*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(k){this._uiManager.addCommands(k)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,c)}setParent(k){k!==null&&(this.pageIndex=k.pageIndex,this.pageDimensions=k.pageDimensions),this.parent=k}focusin(k){this._focusEventsAllowed&&(t(this,g)?rt(this,g,!1):this.parent.setSelected(this))}focusout(k){var Z;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const W=k.relatedTarget;W!=null&&W.closest(`#${this.id}`)||(k.preventDefault(),(Z=this.parent)!=null&&Z.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(k,W,Z,C){const[s,n]=this.parentDimensions;[Z,C]=this.screenToPageTranslation(Z,C),this.x=(k+Z)/s,this.y=(W+C)/n,this.fixAndSetPosition()}translate(k,W){Y(this,o,De).call(this,this.parentDimensions,k,W)}translateInPage(k,W){Y(this,o,De).call(this,this.pageDimensions,k,W),this.div.scrollIntoView({block:"nearest"})}drag(k,W){const[Z,C]=this.parentDimensions;if(this.x+=k/Z,this.y+=W/C,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:F,y:I}=this.div.getBoundingClientRect();this.parent.findNewParent(this,F,I)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:n}=this;const[b,x]=Y(this,o,Oe).call(this);s+=b,n+=x,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*n).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[k,W]=this.pageDimensions;let{x:Z,y:C,width:s,height:n}=this;switch(s*=k,n*=W,Z*=k,C*=W,this.rotation){case 0:Z=Math.max(0,Math.min(k-s,Z)),C=Math.max(0,Math.min(W-n,C));break;case 90:Z=Math.max(0,Math.min(k-n,Z)),C=Math.min(W,Math.max(s,C));break;case 180:Z=Math.min(k,Math.max(s,Z)),C=Math.min(W,Math.max(n,C));break;case 270:Z=Math.min(k,Math.max(n,Z)),C=Math.max(0,Math.min(W-s,C));break}this.x=Z/=k,this.y=C/=W;const[b,x]=Y(this,o,Oe).call(this);Z+=b,C+=x;const{style:F}=this.div;F.left=`${(100*Z).toFixed(2)}%`,F.top=`${(100*C).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(k,W){var Z;return Y(Z=q,u,Le).call(Z,k,W,this.parentRotation)}pageTranslationToScreen(k,W){var Z;return Y(Z=q,u,Le).call(Z,k,W,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:k,pageDimensions:[W,Z]}=this,C=W*k,s=Z*k;return p.FeatureTest.isCSSRoundSupported?[Math.round(C),Math.round(s)]:[C,s]}setDims(k,W){var s;const[Z,C]=this.parentDimensions;this.div.style.width=`${(100*k/Z).toFixed(2)}%`,t(this,i)||(this.div.style.height=`${(100*W/C).toFixed(2)}%`),(s=t(this,d))==null||s.classList.toggle("small",k<q.SMALL_EDITOR_SIZE||W<q.SMALL_EDITOR_SIZE)}fixDims(){const{style:k}=this.div,{height:W,width:Z}=k,C=Z.endsWith("%"),s=!t(this,i)&&W.endsWith("%");if(C&&s)return;const[n,b]=this.parentDimensions;C||(k.width=`${(100*parseFloat(Z)/n).toFixed(2)}%`),!t(this,i)&&!s&&(k.height=`${(100*parseFloat(W)/b).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(t(this,d))return;const k=rt(this,d,document.createElement("button"));k.className="altText";const W=await q._l10nPromise.get("editor_alt_text_button_label");k.textContent=W,k.setAttribute("aria-label",W),k.tabIndex="0",k.addEventListener("contextmenu",P.noContextMenu),k.addEventListener("pointerdown",Z=>Z.stopPropagation()),k.addEventListener("click",Z=>{Z.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),k.addEventListener("keydown",Z=>{Z.target===k&&Z.key==="Enter"&&(Z.preventDefault(),this._uiManager.editAltText(this))}),Y(this,o,Ue).call(this),this.div.append(k),q.SMALL_EDITOR_SIZE||(q.SMALL_EDITOR_SIZE=Math.min(128,Math.round(k.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:t(this,M),decorative:t(this,T)}}set altTextData({altText:k,decorative:W}){t(this,M)===k&&t(this,T)===W||(rt(this,M,k),rt(this,T,W),Y(this,o,Ue).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,v)),this.div.addEventListener("focusout",t(this,_));const[k,W]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*W/k).toFixed(2)}%`,this.div.style.maxHeight=`${(100*k/W).toFixed(2)}%`);const[Z,C]=this.getInitialTranslation();return this.translate(Z,C),(0,l.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(k){const{isMac:W}=p.FeatureTest.platform;if(k.button!==0||k.ctrlKey&&W){k.preventDefault();return}rt(this,g,!0),Y(this,o,vs).call(this,k)}moveInDOM(){var k;(k=this.parent)==null||k.moveEditorInDOM(this)}_setParentAndPosition(k,W,Z){k.changeParent(this),this.x=W,this.y=Z,this.fixAndSetPosition()}getRect(k,W){const Z=this.parentScale,[C,s]=this.pageDimensions,[n,b]=this.pageTranslation,x=k/Z,F=W/Z,I=this.x*C,$=this.y*s,ot=this.width*C,ut=this.height*s;switch(this.rotation){case 0:return[I+x+n,s-$-F-ut+b,I+x+ot+n,s-$-F+b];case 90:return[I+F+n,s-$+x+b,I+F+ut+n,s-$+x+ot+b];case 180:return[I-x-ot+n,s-$+F+b,I-x+n,s-$+F+ut+b];case 270:return[I-F-ut+n,s-$-x-ot+b,I-F+n,s-$-x+b];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(k,W){const[Z,C,s,n]=k,b=s-Z,x=n-C;switch(this.rotation){case 0:return[Z,W-n,b,x];case 90:return[Z,W-C,x,b];case 180:return[s,W-C,b,x];case 270:return[s,W-n,x,b];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){rt(this,U,!0)}disableEditMode(){rt(this,U,!1)}isInEditMode(){return t(this,U)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var k,W;(k=this.div)==null||k.addEventListener("focusin",t(this,v)),(W=this.div)==null||W.addEventListener("focusout",t(this,_))}serialize(k=!1,W=null){(0,p.unreachable)("An editor must be serializable")}static deserialize(k,W,Z){const C=new this.prototype.constructor({parent:W,id:W.getNextId(),uiManager:Z});C.rotation=k.rotation;const[s,n]=C.pageDimensions,[b,x,F,I]=C.getRectInCurrentCoords(k.rect,n);return C.x=b/s,C.y=x/n,C.width=F/s,C.height=I/n,C}remove(){var k;this.div.removeEventListener("focusin",t(this,v)),this.div.removeEventListener("focusout",t(this,_)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(k=t(this,d))==null||k.remove(),rt(this,d,null),rt(this,L,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Y(this,o,bs).call(this),t(this,f).classList.remove("hidden"))}select(){var k;this.makeResizable(),(k=this.div)==null||k.classList.add("selectedEditor")}unselect(){var k,W,Z;(k=t(this,f))==null||k.classList.add("hidden"),(W=this.div)==null||W.classList.remove("selectedEditor"),(Z=this.div)!=null&&Z.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(k,W){}disableEditing(){t(this,d)&&(t(this,d).hidden=!0)}enableEditing(){t(this,d)&&(t(this,d).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return t(this,y)}set isEditing(k){rt(this,y,k),this.parent&&(k?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(k,W){rt(this,i,!0);const Z=k/W,{style:C}=this.div;C.aspectRatio=Z,C.height="auto"}static get MIN_SIZE(){return 16}};M=new WeakMap,T=new WeakMap,d=new WeakMap,L=new WeakMap,m=new WeakMap,i=new WeakMap,f=new WeakMap,v=new WeakMap,_=new WeakMap,g=new WeakMap,y=new WeakMap,U=new WeakMap,E=new WeakMap,c=new WeakMap,o=new WeakSet,De=function([k,W],Z,C){[Z,C]=this.screenToPageTranslation(Z,C),this.x+=Z/k,this.y+=C/W,this.fixAndSetPosition()},Oe=function(){const[k,W]=this.parentDimensions,{_borderLineWidth:Z}=q,C=Z/k,s=Z/W;switch(this.rotation){case 90:return[-C,s];case 180:return[C,s];case 270:return[C,-s];default:return[-C,-s]}},u=new WeakSet,Le=function(k,W,Z){switch(Z){case 90:return[W,-k];case 180:return[-k,-W];case 270:return[-W,k];default:return[k,W]}},Ne=function(k){switch(k){case 90:{const[W,Z]=this.pageDimensions;return[0,-W/Z,Z/W,0]}case 180:return[-1,0,0,-1];case 270:{const[W,Z]=this.pageDimensions;return[0,W/Z,-Z/W,0]}default:return[1,0,0,1]}},bs=function(){if(t(this,f))return;rt(this,f,document.createElement("div")),t(this,f).classList.add("resizers");const k=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||k.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const W of k){const Z=document.createElement("div");t(this,f).append(Z),Z.classList.add("resizer",W),Z.addEventListener("pointerdown",Y(this,o,As).bind(this,W)),Z.addEventListener("contextmenu",P.noContextMenu)}this.div.prepend(t(this,f))},As=function(k,W){W.preventDefault();const{isMac:Z}=p.FeatureTest.platform;if(W.button!==0||W.ctrlKey&&Z)return;const C=Y(this,o,ys).bind(this,k),s=this._isDraggable;this._isDraggable=!1;const n={passive:!0,capture:!0};window.addEventListener("pointermove",C,n);const b=this.x,x=this.y,F=this.width,I=this.height,$=this.parent.div.style.cursor,ot=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(W.target).cursor;const ut=()=>{this._isDraggable=s,window.removeEventListener("pointerup",ut),window.removeEventListener("blur",ut),window.removeEventListener("pointermove",C,n),this.parent.div.style.cursor=$,this.div.style.cursor=ot;const ft=this.x,mt=this.y,At=this.width,vt=this.height;ft===b&&mt===x&&At===F&&vt===I||this.addCommands({cmd:()=>{this.width=At,this.height=vt,this.x=ft,this.y=mt;const[tt,nt]=this.parentDimensions;this.setDims(tt*At,nt*vt),this.fixAndSetPosition()},undo:()=>{this.width=F,this.height=I,this.x=b,this.y=x;const[tt,nt]=this.parentDimensions;this.setDims(tt*F,nt*I),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",ut),window.addEventListener("blur",ut)},ys=function(k,W){const[Z,C]=this.parentDimensions,s=this.x,n=this.y,b=this.width,x=this.height,F=q.MIN_SIZE/Z,I=q.MIN_SIZE/C,$=Mt=>Math.round(Mt*1e4)/1e4,ot=Y(this,o,Ne).call(this,this.rotation),ut=(Mt,Ut)=>[ot[0]*Mt+ot[2]*Ut,ot[1]*Mt+ot[3]*Ut],ft=Y(this,o,Ne).call(this,360-this.rotation),mt=(Mt,Ut)=>[ft[0]*Mt+ft[2]*Ut,ft[1]*Mt+ft[3]*Ut];let At,vt,tt=!1,nt=!1;switch(k){case"topLeft":tt=!0,At=(Mt,Ut)=>[0,0],vt=(Mt,Ut)=>[Mt,Ut];break;case"topMiddle":At=(Mt,Ut)=>[Mt/2,0],vt=(Mt,Ut)=>[Mt/2,Ut];break;case"topRight":tt=!0,At=(Mt,Ut)=>[Mt,0],vt=(Mt,Ut)=>[0,Ut];break;case"middleRight":nt=!0,At=(Mt,Ut)=>[Mt,Ut/2],vt=(Mt,Ut)=>[0,Ut/2];break;case"bottomRight":tt=!0,At=(Mt,Ut)=>[Mt,Ut],vt=(Mt,Ut)=>[0,0];break;case"bottomMiddle":At=(Mt,Ut)=>[Mt/2,Ut],vt=(Mt,Ut)=>[Mt/2,0];break;case"bottomLeft":tt=!0,At=(Mt,Ut)=>[0,Ut],vt=(Mt,Ut)=>[Mt,0];break;case"middleLeft":nt=!0,At=(Mt,Ut)=>[0,Ut/2],vt=(Mt,Ut)=>[Mt,Ut/2];break}const A=At(b,x),O=vt(b,x);let K=ut(...O);const et=$(s+K[0]),pt=$(n+K[1]);let St=1,yt=1,[J,Pt]=this.screenToPageTranslation(W.movementX,W.movementY);if([J,Pt]=mt(J/Z,Pt/C),tt){const Mt=Math.hypot(b,x);St=yt=Math.max(Math.min(Math.hypot(O[0]-A[0]-J,O[1]-A[1]-Pt)/Mt,1/b,1/x),F/b,I/x)}else nt?St=Math.max(F,Math.min(1,Math.abs(O[0]-A[0]-J)))/b:yt=Math.max(I,Math.min(1,Math.abs(O[1]-A[1]-Pt)))/x;const Ct=$(b*St),Ht=$(x*yt);K=ut(...vt(Ct,Ht));const Bt=et-K[0],$t=pt-K[1];this.width=Ct,this.height=Ht,this.x=Bt,this.y=$t,this.setDims(Z*Ct,C*Ht),this.fixAndSetPosition()},Ue=async function(){var Z;const k=t(this,d);if(!k)return;if(!t(this,M)&&!t(this,T)){k.classList.remove("done"),(Z=t(this,L))==null||Z.remove();return}q._l10nPromise.get("editor_alt_text_edit_button_label").then(C=>{k.setAttribute("aria-label",C)});let W=t(this,L);if(!W){rt(this,L,W=document.createElement("span")),W.className="tooltip",W.setAttribute("role","tooltip");const C=W.id=`alt-text-tooltip-${this.id}`;k.setAttribute("aria-describedby",C);const s=100;k.addEventListener("mouseenter",()=>{rt(this,m,setTimeout(()=>{rt(this,m,null),t(this,L).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},s))}),k.addEventListener("mouseleave",()=>{var n;clearTimeout(t(this,m)),rt(this,m,null),(n=t(this,L))==null||n.classList.remove("show")})}k.classList.add("done"),W.innerText=t(this,T)?await q._l10nPromise.get("editor_alt_text_decorative_tooltip"):t(this,M),W.parentNode||k.append(W)},vs=function(k){if(!this._isDraggable)return;const W=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let Z,C;W&&(Z={passive:!0,capture:!0},C=n=>{const[b,x]=this.screenToPageTranslation(n.movementX,n.movementY);this._uiManager.dragSelectedEditors(b,x)},window.addEventListener("pointermove",C,Z));const s=()=>{if(window.removeEventListener("pointerup",s),window.removeEventListener("blur",s),W&&window.removeEventListener("pointermove",C,Z),rt(this,g,!1),!this._uiManager.endDragSession()){const{isMac:n}=p.FeatureTest.platform;k.ctrlKey&&!n||k.shiftKey||k.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",s),window.addEventListener("blur",s)},st(q,u),wt(q,"_borderLineWidth",-1),wt(q,"_colorManager",new l.ColorManager),wt(q,"_zIndex",1),wt(q,"SMALL_EDITOR_SIZE",0);let N=q;e.AnnotationEditor=N;class V extends N{constructor(k){super(k),this.annotationElementId=k.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(X,e,H)=>{var i,f,v,_,g,Be,E,c,o,r,h,Ss,a,S,D,at,G,Q,q,ct,k,W,Z,C,s,n,b,x,F,I,$,ot,ut,ft,mt,At,vt,tt,nt,A,O,K,et,pt,St,yt,J,Es,je,He,ye,We,qe,Zt,de,ws,Cs,Ge,ue,ze;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=P,e.opacityToHex=N;var l=H(1),p=H(6);function P(zt,B,gt){for(const Tt of gt)B.addEventListener(Tt,zt[Tt].bind(zt))}function N(zt){return Math.round(Math.min(255,Math.max(1,255*zt))).toString(16).padStart(2,"0")}class V{constructor(){st(this,i,0)}getId(){return`${l.AnnotationEditorPrefix}${he(this,i)._++}`}}i=new WeakMap;const U=class U{constructor(){st(this,g);st(this,f,(0,l.getUuid)());st(this,v,0);st(this,_,null)}static get _isSVGFittingCanvas(){const B='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Tt=new OffscreenCanvas(1,3).getContext("2d"),Dt=new Image;Dt.src=B;const Nt=Dt.decode().then(()=>(Tt.drawImage(Dt,0,0,1,1,0,0,1,3),new Uint32Array(Tt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,l.shadow)(this,"_isSVGFittingCanvas",Nt)}async getFromFile(B){const{lastModified:gt,name:Tt,size:Dt,type:Nt}=B;return Y(this,g,Be).call(this,`${gt}_${Tt}_${Dt}_${Nt}`,B)}async getFromUrl(B){return Y(this,g,Be).call(this,B,B)}async getFromId(B){t(this,_)||rt(this,_,new Map);const gt=t(this,_).get(B);return gt?gt.bitmap?(gt.refCounter+=1,gt):gt.file?this.getFromFile(gt.file):this.getFromUrl(gt.url):null}getSvgUrl(B){const gt=t(this,_).get(B);return gt!=null&&gt.isSvg?gt.svgUrl:null}deleteId(B){t(this,_)||rt(this,_,new Map);const gt=t(this,_).get(B);gt&&(gt.refCounter-=1,gt.refCounter===0&&(gt.bitmap=null))}isValidId(B){return B.startsWith(`image_${t(this,f)}_`)}};f=new WeakMap,v=new WeakMap,_=new WeakMap,g=new WeakSet,Be=async function(B,gt){t(this,_)||rt(this,_,new Map);let Tt=t(this,_).get(B);if(Tt===null)return null;if(Tt!=null&&Tt.bitmap)return Tt.refCounter+=1,Tt;try{Tt||(Tt={bitmap:null,id:`image_${t(this,f)}_${he(this,v)._++}`,refCounter:0,isSvg:!1});let Dt;if(typeof gt=="string"){Tt.url=gt;const Nt=await fetch(gt);if(!Nt.ok)throw new Error(Nt.statusText);Dt=await Nt.blob()}else Dt=Tt.file=gt;if(Dt.type==="image/svg+xml"){const Nt=U._isSVGFittingCanvas,kt=new FileReader,R=new Image,w=new Promise((z,ht)=>{R.onload=()=>{Tt.bitmap=R,Tt.isSvg=!0,z()},kt.onload=async()=>{const dt=Tt.svgUrl=kt.result;R.src=await Nt?`${dt}#svgView(preserveAspectRatio(none))`:dt},R.onerror=kt.onerror=ht});kt.readAsDataURL(Dt),await w}else Tt.bitmap=await createImageBitmap(Dt);Tt.refCounter=1}catch(Dt){console.error(Dt),Tt=null}return t(this,_).set(B,Tt),Tt&&t(this,_).set(Tt.id,Tt),Tt};let M=U;class T{constructor(B=128){st(this,E,[]);st(this,c,!1);st(this,o);st(this,r,-1);rt(this,o,B)}add({cmd:B,undo:gt,mustExec:Tt,type:Dt=NaN,overwriteIfSameType:Nt=!1,keepUndo:kt=!1}){if(Tt&&B(),t(this,c))return;const R={cmd:B,undo:gt,type:Dt};if(t(this,r)===-1){t(this,E).length>0&&(t(this,E).length=0),rt(this,r,0),t(this,E).push(R);return}if(Nt&&t(this,E)[t(this,r)].type===Dt){kt&&(R.undo=t(this,E)[t(this,r)].undo),t(this,E)[t(this,r)]=R;return}const w=t(this,r)+1;w===t(this,o)?t(this,E).splice(0,1):(rt(this,r,w),w<t(this,E).length&&t(this,E).splice(w)),t(this,E).push(R)}undo(){t(this,r)!==-1&&(rt(this,c,!0),t(this,E)[t(this,r)].undo(),rt(this,c,!1),rt(this,r,t(this,r)-1))}redo(){t(this,r)<t(this,E).length-1&&(rt(this,r,t(this,r)+1),rt(this,c,!0),t(this,E)[t(this,r)].cmd(),rt(this,c,!1))}hasSomethingToUndo(){return t(this,r)!==-1}hasSomethingToRedo(){return t(this,r)<t(this,E).length-1}destroy(){rt(this,E,null)}}E=new WeakMap,c=new WeakMap,o=new WeakMap,r=new WeakMap,e.CommandManager=T;class d{constructor(B){st(this,h);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:gt}=l.FeatureTest.platform;for(const[Tt,Dt,Nt={}]of B)for(const kt of Tt){const R=kt.startsWith("mac+");gt&&R?(this.callbacks.set(kt.slice(4),{callback:Dt,options:Nt}),this.allKeys.add(kt.split("+").at(-1))):!gt&&!R&&(this.callbacks.set(kt,{callback:Dt,options:Nt}),this.allKeys.add(kt.split("+").at(-1)))}}exec(B,gt){if(!this.allKeys.has(gt.key))return;const Tt=this.callbacks.get(Y(this,h,Ss).call(this,gt));if(!Tt)return;const{callback:Dt,options:{bubbles:Nt=!1,args:kt=[],checker:R=null}}=Tt;R&&!R(B,gt)||(Dt.bind(B,...kt)(),Nt||(gt.stopPropagation(),gt.preventDefault()))}}h=new WeakSet,Ss=function(B){B.altKey&&this.buffer.push("alt"),B.ctrlKey&&this.buffer.push("ctrl"),B.metaKey&&this.buffer.push("meta"),B.shiftKey&&this.buffer.push("shift"),this.buffer.push(B.key);const gt=this.buffer.join("+");return this.buffer.length=0,gt},e.KeyboardManager=d;const j=class j{get _colors(){const B=new Map([["CanvasText",null],["Canvas",null]]);return(0,p.getColorValues)(B),(0,l.shadow)(this,"_colors",B)}convert(B){const gt=(0,p.getRGB)(B);if(!window.matchMedia("(forced-colors: active)").matches)return gt;for(const[Tt,Dt]of this._colors)if(Dt.every((Nt,kt)=>Nt===gt[kt]))return j._colorsMapping.get(Tt);return gt}getHexCode(B){const gt=this._colors.get(B);return gt?l.Util.makeHexColor(...gt):B}};wt(j,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let L=j;e.ColorManager=L;const Xt=class Xt{constructor(B,gt,Tt,Dt,Nt,kt){st(this,J);st(this,a,null);st(this,S,new Map);st(this,D,new Map);st(this,at,null);st(this,G,null);st(this,Q,new T);st(this,q,0);st(this,ct,new Set);st(this,k,null);st(this,W,null);st(this,Z,new Set);st(this,C,null);st(this,s,new V);st(this,n,!1);st(this,b,!1);st(this,x,null);st(this,F,l.AnnotationEditorType.NONE);st(this,I,new Set);st(this,$,null);st(this,ot,this.blur.bind(this));st(this,ut,this.focus.bind(this));st(this,ft,this.copy.bind(this));st(this,mt,this.cut.bind(this));st(this,At,this.paste.bind(this));st(this,vt,this.keydown.bind(this));st(this,tt,this.onEditingAction.bind(this));st(this,nt,this.onPageChanging.bind(this));st(this,A,this.onScaleChanging.bind(this));st(this,O,this.onRotationChanging.bind(this));st(this,K,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});st(this,et,[0,0]);st(this,pt,null);st(this,St,null);st(this,yt,null);rt(this,St,B),rt(this,yt,gt),rt(this,at,Tt),this._eventBus=Dt,this._eventBus._on("editingaction",t(this,tt)),this._eventBus._on("pagechanging",t(this,nt)),this._eventBus._on("scalechanging",t(this,A)),this._eventBus._on("rotationchanging",t(this,O)),rt(this,G,Nt.annotationStorage),rt(this,C,Nt.filterFactory),rt(this,$,kt),this.viewParameters={realScale:p.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const B=Xt.prototype,gt=Nt=>{const{activeElement:kt}=document;return kt&&t(Nt,St).contains(kt)&&Nt.hasSomethingToControl()},Tt=this.TRANSLATE_SMALL,Dt=this.TRANSLATE_BIG;return(0,l.shadow)(this,"_keyboardManager",new d([[["ctrl+a","mac+meta+a"],B.selectAll],[["ctrl+z","mac+meta+z"],B.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],B.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],B.delete],[["Escape","mac+Escape"],B.unselectAll],[["ArrowLeft","mac+ArrowLeft"],B.translateSelectedEditors,{args:[-Tt,0],checker:gt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],B.translateSelectedEditors,{args:[-Dt,0],checker:gt}],[["ArrowRight","mac+ArrowRight"],B.translateSelectedEditors,{args:[Tt,0],checker:gt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],B.translateSelectedEditors,{args:[Dt,0],checker:gt}],[["ArrowUp","mac+ArrowUp"],B.translateSelectedEditors,{args:[0,-Tt],checker:gt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],B.translateSelectedEditors,{args:[0,-Dt],checker:gt}],[["ArrowDown","mac+ArrowDown"],B.translateSelectedEditors,{args:[0,Tt],checker:gt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],B.translateSelectedEditors,{args:[0,Dt],checker:gt}]]))}destroy(){Y(this,J,ye).call(this),Y(this,J,je).call(this),this._eventBus._off("editingaction",t(this,tt)),this._eventBus._off("pagechanging",t(this,nt)),this._eventBus._off("scalechanging",t(this,A)),this._eventBus._off("rotationchanging",t(this,O));for(const B of t(this,D).values())B.destroy();t(this,D).clear(),t(this,S).clear(),t(this,Z).clear(),rt(this,a,null),t(this,I).clear(),t(this,Q).destroy(),t(this,at).destroy()}get hcmFilter(){return(0,l.shadow)(this,"hcmFilter",t(this,$)?t(this,C).addHCMFilter(t(this,$).foreground,t(this,$).background):"none")}get direction(){return(0,l.shadow)(this,"direction",getComputedStyle(t(this,St)).direction)}editAltText(B){var gt;(gt=t(this,at))==null||gt.editAltText(this,B)}onPageChanging({pageNumber:B}){rt(this,q,B-1)}focusMainContainer(){t(this,St).focus()}findParent(B,gt){for(const Tt of t(this,D).values()){const{x:Dt,y:Nt,width:kt,height:R}=Tt.div.getBoundingClientRect();if(B>=Dt&&B<=Dt+kt&&gt>=Nt&&gt<=Nt+R)return Tt}return null}disableUserSelect(B=!1){t(this,yt).classList.toggle("noUserSelect",B)}addShouldRescale(B){t(this,Z).add(B)}removeShouldRescale(B){t(this,Z).delete(B)}onScaleChanging({scale:B}){this.commitOrRemove(),this.viewParameters.realScale=B*p.PixelsPerInch.PDF_TO_CSS_UNITS;for(const gt of t(this,Z))gt.onScaleChanging()}onRotationChanging({pagesRotation:B}){this.commitOrRemove(),this.viewParameters.rotation=B}addToAnnotationStorage(B){!B.isEmpty()&&t(this,G)&&!t(this,G).has(B.id)&&t(this,G).setValue(B.id,B)}blur(){if(!this.hasSelection)return;const{activeElement:B}=document;for(const gt of t(this,I))if(gt.div.contains(B)){rt(this,x,[gt,B]),gt._focusEventsAllowed=!1;break}}focus(){if(!t(this,x))return;const[B,gt]=t(this,x);rt(this,x,null),gt.addEventListener("focusin",()=>{B._focusEventsAllowed=!0},{once:!0}),gt.focus()}addEditListeners(){Y(this,J,He).call(this),Y(this,J,We).call(this)}removeEditListeners(){Y(this,J,ye).call(this),Y(this,J,qe).call(this)}copy(B){var Tt;if(B.preventDefault(),(Tt=t(this,a))==null||Tt.commitOrRemove(),!this.hasSelection)return;const gt=[];for(const Dt of t(this,I)){const Nt=Dt.serialize(!0);Nt&&gt.push(Nt)}gt.length!==0&&B.clipboardData.setData("application/pdfjs",JSON.stringify(gt))}cut(B){this.copy(B),this.delete()}paste(B){B.preventDefault();const{clipboardData:gt}=B;for(const Nt of gt.items)for(const kt of t(this,W))if(kt.isHandlingMimeForPasting(Nt.type)){kt.paste(Nt,this.currentLayer);return}let Tt=gt.getData("application/pdfjs");if(!Tt)return;try{Tt=JSON.parse(Tt)}catch(Nt){(0,l.warn)(`paste: "${Nt.message}".`);return}if(!Array.isArray(Tt))return;this.unselectAll();const Dt=this.currentLayer;try{const Nt=[];for(const w of Tt){const z=Dt.deserialize(w);if(!z)return;Nt.push(z)}const kt=()=>{for(const w of Nt)Y(this,J,Ge).call(this,w);Y(this,J,ze).call(this,Nt)},R=()=>{for(const w of Nt)w.remove()};this.addCommands({cmd:kt,undo:R,mustExec:!0})}catch(Nt){(0,l.warn)(`paste: "${Nt.message}".`)}}keydown(B){var gt;(gt=this.getActive())!=null&&gt.shouldGetKeyboardEvents()||Xt._keyboardManager.exec(this,B)}onEditingAction(B){["undo","redo","delete","selectAll"].includes(B.name)&&this[B.name]()}setEditingState(B){B?(Y(this,J,Es).call(this),Y(this,J,He).call(this),Y(this,J,We).call(this),Y(this,J,Zt).call(this,{isEditing:t(this,F)!==l.AnnotationEditorType.NONE,isEmpty:Y(this,J,ue).call(this),hasSomethingToUndo:t(this,Q).hasSomethingToUndo(),hasSomethingToRedo:t(this,Q).hasSomethingToRedo(),hasSelectedEditor:!1})):(Y(this,J,je).call(this),Y(this,J,ye).call(this),Y(this,J,qe).call(this),Y(this,J,Zt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(B){if(!t(this,W)){rt(this,W,B);for(const gt of t(this,W))Y(this,J,de).call(this,gt.defaultPropertiesToUpdate)}}getId(){return t(this,s).getId()}get currentLayer(){return t(this,D).get(t(this,q))}getLayer(B){return t(this,D).get(B)}get currentPageIndex(){return t(this,q)}addLayer(B){t(this,D).set(B.pageIndex,B),t(this,n)?B.enable():B.disable()}removeLayer(B){t(this,D).delete(B.pageIndex)}updateMode(B,gt=null){if(t(this,F)!==B){if(rt(this,F,B),B===l.AnnotationEditorType.NONE){this.setEditingState(!1),Y(this,J,Cs).call(this);return}this.setEditingState(!0),Y(this,J,ws).call(this),this.unselectAll();for(const Tt of t(this,D).values())Tt.updateMode(B);if(gt){for(const Tt of t(this,S).values())if(Tt.annotationElementId===gt){this.setSelected(Tt),Tt.enterInEditMode();break}}}}updateToolbar(B){B!==t(this,F)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:B})}updateParams(B,gt){if(t(this,W)){if(B===l.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(B);return}for(const Tt of t(this,I))Tt.updateParams(B,gt);for(const Tt of t(this,W))Tt.updateDefaultParams(B,gt)}}enableWaiting(B=!1){if(t(this,b)!==B){rt(this,b,B);for(const gt of t(this,D).values())B?gt.disableClick():gt.enableClick(),gt.div.classList.toggle("waiting",B)}}getEditors(B){const gt=[];for(const Tt of t(this,S).values())Tt.pageIndex===B&&gt.push(Tt);return gt}getEditor(B){return t(this,S).get(B)}addEditor(B){t(this,S).set(B.id,B)}removeEditor(B){var gt;t(this,S).delete(B.id),this.unselect(B),(!B.annotationElementId||!t(this,ct).has(B.annotationElementId))&&((gt=t(this,G))==null||gt.remove(B.id))}addDeletedAnnotationElement(B){t(this,ct).add(B.annotationElementId),B.deleted=!0}isDeletedAnnotationElement(B){return t(this,ct).has(B)}removeDeletedAnnotationElement(B){t(this,ct).delete(B.annotationElementId),B.deleted=!1}setActiveEditor(B){t(this,a)!==B&&(rt(this,a,B),B&&Y(this,J,de).call(this,B.propertiesToUpdate))}toggleSelected(B){if(t(this,I).has(B)){t(this,I).delete(B),B.unselect(),Y(this,J,Zt).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,I).add(B),B.select(),Y(this,J,de).call(this,B.propertiesToUpdate),Y(this,J,Zt).call(this,{hasSelectedEditor:!0})}setSelected(B){for(const gt of t(this,I))gt!==B&&gt.unselect();t(this,I).clear(),t(this,I).add(B),B.select(),Y(this,J,de).call(this,B.propertiesToUpdate),Y(this,J,Zt).call(this,{hasSelectedEditor:!0})}isSelected(B){return t(this,I).has(B)}unselect(B){B.unselect(),t(this,I).delete(B),Y(this,J,Zt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,I).size!==0}undo(){t(this,Q).undo(),Y(this,J,Zt).call(this,{hasSomethingToUndo:t(this,Q).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Y(this,J,ue).call(this)})}redo(){t(this,Q).redo(),Y(this,J,Zt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,Q).hasSomethingToRedo(),isEmpty:Y(this,J,ue).call(this)})}addCommands(B){t(this,Q).add(B),Y(this,J,Zt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Y(this,J,ue).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const B=[...t(this,I)],gt=()=>{for(const Dt of B)Dt.remove()},Tt=()=>{for(const Dt of B)Y(this,J,Ge).call(this,Dt)};this.addCommands({cmd:gt,undo:Tt,mustExec:!0})}commitOrRemove(){var B;(B=t(this,a))==null||B.commitOrRemove()}hasSomethingToControl(){return t(this,a)||this.hasSelection}selectAll(){for(const B of t(this,I))B.commit();Y(this,J,ze).call(this,t(this,S).values())}unselectAll(){if(t(this,a)){t(this,a).commitOrRemove();return}if(this.hasSelection){for(const B of t(this,I))B.unselect();t(this,I).clear(),Y(this,J,Zt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(B,gt,Tt=!1){if(Tt||this.commitOrRemove(),!this.hasSelection)return;t(this,et)[0]+=B,t(this,et)[1]+=gt;const[Dt,Nt]=t(this,et),kt=[...t(this,I)],R=1e3;t(this,pt)&&clearTimeout(t(this,pt)),rt(this,pt,setTimeout(()=>{rt(this,pt,null),t(this,et)[0]=t(this,et)[1]=0,this.addCommands({cmd:()=>{for(const w of kt)t(this,S).has(w.id)&&w.translateInPage(Dt,Nt)},undo:()=>{for(const w of kt)t(this,S).has(w.id)&&w.translateInPage(-Dt,-Nt)},mustExec:!1})},R));for(const w of kt)w.translateInPage(B,gt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),rt(this,k,new Map);for(const B of t(this,I))t(this,k).set(B,{savedX:B.x,savedY:B.y,savedPageIndex:B.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,k))return!1;this.disableUserSelect(!1);const B=t(this,k);rt(this,k,null);let gt=!1;for(const[{x:Dt,y:Nt,pageIndex:kt},R]of B)R.newX=Dt,R.newY=Nt,R.newPageIndex=kt,gt||(gt=Dt!==R.savedX||Nt!==R.savedY||kt!==R.savedPageIndex);if(!gt)return!1;const Tt=(Dt,Nt,kt,R)=>{if(t(this,S).has(Dt.id)){const w=t(this,D).get(R);w?Dt._setParentAndPosition(w,Nt,kt):(Dt.pageIndex=R,Dt.x=Nt,Dt.y=kt)}};return this.addCommands({cmd:()=>{for(const[Dt,{newX:Nt,newY:kt,newPageIndex:R}]of B)Tt(Dt,Nt,kt,R)},undo:()=>{for(const[Dt,{savedX:Nt,savedY:kt,savedPageIndex:R}]of B)Tt(Dt,Nt,kt,R)},mustExec:!0}),!0}dragSelectedEditors(B,gt){if(t(this,k))for(const Tt of t(this,k).keys())Tt.drag(B,gt)}rebuild(B){if(B.parent===null){const gt=this.getLayer(B.pageIndex);gt?(gt.changeParent(B),gt.addOrRebuild(B)):(this.addEditor(B),this.addToAnnotationStorage(B),B.rebuild())}else B.parent.addOrRebuild(B)}isActive(B){return t(this,a)===B}getActive(){return t(this,a)}getMode(){return t(this,F)}get imageManager(){return(0,l.shadow)(this,"imageManager",new M)}};a=new WeakMap,S=new WeakMap,D=new WeakMap,at=new WeakMap,G=new WeakMap,Q=new WeakMap,q=new WeakMap,ct=new WeakMap,k=new WeakMap,W=new WeakMap,Z=new WeakMap,C=new WeakMap,s=new WeakMap,n=new WeakMap,b=new WeakMap,x=new WeakMap,F=new WeakMap,I=new WeakMap,$=new WeakMap,ot=new WeakMap,ut=new WeakMap,ft=new WeakMap,mt=new WeakMap,At=new WeakMap,vt=new WeakMap,tt=new WeakMap,nt=new WeakMap,A=new WeakMap,O=new WeakMap,K=new WeakMap,et=new WeakMap,pt=new WeakMap,St=new WeakMap,yt=new WeakMap,J=new WeakSet,Es=function(){window.addEventListener("focus",t(this,ut)),window.addEventListener("blur",t(this,ot))},je=function(){window.removeEventListener("focus",t(this,ut)),window.removeEventListener("blur",t(this,ot))},He=function(){window.addEventListener("keydown",t(this,vt),{capture:!0})},ye=function(){window.removeEventListener("keydown",t(this,vt),{capture:!0})},We=function(){document.addEventListener("copy",t(this,ft)),document.addEventListener("cut",t(this,mt)),document.addEventListener("paste",t(this,At))},qe=function(){document.removeEventListener("copy",t(this,ft)),document.removeEventListener("cut",t(this,mt)),document.removeEventListener("paste",t(this,At))},Zt=function(B){Object.entries(B).some(([Tt,Dt])=>t(this,K)[Tt]!==Dt)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,K),B)})},de=function(B){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:B})},ws=function(){if(!t(this,n)){rt(this,n,!0);for(const B of t(this,D).values())B.enable()}},Cs=function(){if(this.unselectAll(),t(this,n)){rt(this,n,!1);for(const B of t(this,D).values())B.disable()}},Ge=function(B){const gt=t(this,D).get(B.pageIndex);gt?gt.addOrRebuild(B):this.addEditor(B)},ue=function(){if(t(this,S).size===0)return!0;if(t(this,S).size===1)for(const B of t(this,S).values())return B.isEmpty();return!1},ze=function(B){t(this,I).clear();for(const gt of B)gt.isEmpty()||(t(this,I).add(gt),gt.select());Y(this,J,Zt).call(this,{hasSelectedEditor:!0})},wt(Xt,"TRANSLATE_SMALL",1),wt(Xt,"TRANSLATE_BIG",10);let m=Xt;e.AnnotationEditorUIManager=m},(X,e,H)=>{var q,ct,k,W,Z,C,s,n,b,x,F,I,ae,oe,Xe,ve,Se,fe,pe;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=r,e.getColorValues=S,e.getCurrentTransform=D,e.getCurrentTransformInverse=at,e.getFilenameFromUrl=g,e.getPdfFilenameFromUrl=y,e.getRGB=a,e.getXfaPageViewport=j,e.isDataScheme=v,e.isPdfFile=_,e.isValidFetchUrl=E,e.loadScript=o,e.noContextMenu=c,e.setLayerDimensions=G;var l=H(7),p=H(1);const P="http://www.w3.org/2000/svg",Q=class Q{};wt(Q,"CSS",96),wt(Q,"PDF",72),wt(Q,"PDF_TO_CSS_UNITS",Q.CSS/Q.PDF);let N=Q;e.PixelsPerInch=N;class V extends l.BaseFilterFactory{constructor({docId:A,ownerDocument:O=globalThis.document}={}){super();st(this,I);st(this,q);st(this,ct);st(this,k);st(this,W);st(this,Z);st(this,C);st(this,s);st(this,n);st(this,b);st(this,x);st(this,F,0);rt(this,k,A),rt(this,W,O)}addFilter(A){if(!A)return"none";let O=t(this,I,ae).get(A);if(O)return O;let K,et,pt,St;if(A.length===1){const Ct=A[0],Ht=new Array(256);for(let Bt=0;Bt<256;Bt++)Ht[Bt]=Ct[Bt]/255;St=K=et=pt=Ht.join(",")}else{const[Ct,Ht,Bt]=A,$t=new Array(256),Mt=new Array(256),Ut=new Array(256);for(let qt=0;qt<256;qt++)$t[qt]=Ct[qt]/255,Mt[qt]=Ht[qt]/255,Ut[qt]=Bt[qt]/255;K=$t.join(","),et=Mt.join(","),pt=Ut.join(","),St=`${K}${et}${pt}`}if(O=t(this,I,ae).get(St),O)return t(this,I,ae).set(A,O),O;const yt=`g_${t(this,k)}_transfer_map_${he(this,F)._++}`,J=`url(#${yt})`;t(this,I,ae).set(A,J),t(this,I,ae).set(St,J);const Pt=Y(this,I,ve).call(this,yt);return Y(this,I,fe).call(this,K,et,pt,Pt),J}addHCMFilter(A,O){var Ht;const K=`${A}-${O}`;if(t(this,C)===K)return t(this,s);if(rt(this,C,K),rt(this,s,"none"),(Ht=t(this,Z))==null||Ht.remove(),!A||!O)return t(this,s);const et=Y(this,I,pe).call(this,A);A=p.Util.makeHexColor(...et);const pt=Y(this,I,pe).call(this,O);if(O=p.Util.makeHexColor(...pt),t(this,I,oe).style.color="",A==="#000000"&&O==="#ffffff"||A===O)return t(this,s);const St=new Array(256);for(let Bt=0;Bt<=255;Bt++){const $t=Bt/255;St[Bt]=$t<=.03928?$t/12.92:(($t+.055)/1.055)**2.4}const yt=St.join(","),J=`g_${t(this,k)}_hcm_filter`,Pt=rt(this,n,Y(this,I,ve).call(this,J));Y(this,I,fe).call(this,yt,yt,yt,Pt),Y(this,I,Xe).call(this,Pt);const Ct=(Bt,$t)=>{const Mt=et[Bt]/255,Ut=pt[Bt]/255,qt=new Array($t+1);for(let Vt=0;Vt<=$t;Vt++)qt[Vt]=Mt+Vt/$t*(Ut-Mt);return qt.join(",")};return Y(this,I,fe).call(this,Ct(0,5),Ct(1,5),Ct(2,5),Pt),rt(this,s,`url(#${J})`),t(this,s)}addHighlightHCMFilter(A,O,K,et){var Ut;const pt=`${A}-${O}-${K}-${et}`;if(t(this,b)===pt)return t(this,x);if(rt(this,b,pt),rt(this,x,"none"),(Ut=t(this,n))==null||Ut.remove(),!A||!O)return t(this,x);const[St,yt]=[A,O].map(Y(this,I,pe).bind(this));let J=Math.round(.2126*St[0]+.7152*St[1]+.0722*St[2]),Pt=Math.round(.2126*yt[0]+.7152*yt[1]+.0722*yt[2]),[Ct,Ht]=[K,et].map(Y(this,I,pe).bind(this));Pt<J&&([J,Pt,Ct,Ht]=[Pt,J,Ht,Ct]),t(this,I,oe).style.color="";const Bt=(qt,Vt,bt)=>{const it=new Array(256),lt=(Pt-J)/bt,xt=qt/255,Xt=(Vt-qt)/(255*bt);let zt=0;for(let B=0;B<=bt;B++){const gt=Math.round(J+B*lt),Tt=xt+B*Xt;for(let Dt=zt;Dt<=gt;Dt++)it[Dt]=Tt;zt=gt+1}for(let B=zt;B<256;B++)it[B]=it[zt-1];return it.join(",")},$t=`g_${t(this,k)}_hcm_highlight_filter`,Mt=rt(this,n,Y(this,I,ve).call(this,$t));return Y(this,I,Xe).call(this,Mt),Y(this,I,fe).call(this,Bt(Ct[0],Ht[0],5),Bt(Ct[1],Ht[1],5),Bt(Ct[2],Ht[2],5),Mt),rt(this,x,`url(#${$t})`),t(this,x)}destroy(A=!1){A&&(t(this,s)||t(this,x))||(t(this,ct)&&(t(this,ct).parentNode.parentNode.remove(),rt(this,ct,null)),t(this,q)&&(t(this,q).clear(),rt(this,q,null)),rt(this,F,0))}}q=new WeakMap,ct=new WeakMap,k=new WeakMap,W=new WeakMap,Z=new WeakMap,C=new WeakMap,s=new WeakMap,n=new WeakMap,b=new WeakMap,x=new WeakMap,F=new WeakMap,I=new WeakSet,ae=function(){return t(this,q)||rt(this,q,new Map)},oe=function(){if(!t(this,ct)){const A=t(this,W).createElement("div"),{style:O}=A;O.visibility="hidden",O.contain="strict",O.width=O.height=0,O.position="absolute",O.top=O.left=0,O.zIndex=-1;const K=t(this,W).createElementNS(P,"svg");K.setAttribute("width",0),K.setAttribute("height",0),rt(this,ct,t(this,W).createElementNS(P,"defs")),A.append(K),K.append(t(this,ct)),t(this,W).body.append(A)}return t(this,ct)},Xe=function(A){const O=t(this,W).createElementNS(P,"feColorMatrix");O.setAttribute("type","matrix"),O.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),A.append(O)},ve=function(A){const O=t(this,W).createElementNS(P,"filter");return O.setAttribute("color-interpolation-filters","sRGB"),O.setAttribute("id",A),t(this,I,oe).append(O),O},Se=function(A,O,K){const et=t(this,W).createElementNS(P,O);et.setAttribute("type","discrete"),et.setAttribute("tableValues",K),A.append(et)},fe=function(A,O,K,et){const pt=t(this,W).createElementNS(P,"feComponentTransfer");et.append(pt),Y(this,I,Se).call(this,pt,"feFuncR",A),Y(this,I,Se).call(this,pt,"feFuncG",O),Y(this,I,Se).call(this,pt,"feFuncB",K)},pe=function(A){return t(this,I,oe).style.color=A,a(getComputedStyle(t(this,I,oe)).getPropertyValue("color"))},e.DOMFilterFactory=V;class M extends l.BaseCanvasFactory{constructor({ownerDocument:nt=globalThis.document}={}){super(),this._document=nt}_createCanvas(nt,A){const O=this._document.createElement("canvas");return O.width=nt,O.height=A,O}}e.DOMCanvasFactory=M;async function T(tt,nt=!1){if(E(tt,document.baseURI)){const A=await fetch(tt);if(!A.ok)throw new Error(A.statusText);return nt?new Uint8Array(await A.arrayBuffer()):(0,p.stringToBytes)(await A.text())}return new Promise((A,O)=>{const K=new XMLHttpRequest;K.open("GET",tt,!0),nt&&(K.responseType="arraybuffer"),K.onreadystatechange=()=>{if(K.readyState===XMLHttpRequest.DONE){if(K.status===200||K.status===0){let et;if(nt&&K.response?et=new Uint8Array(K.response):!nt&&K.responseText&&(et=(0,p.stringToBytes)(K.responseText)),et){A(et);return}}O(new Error(K.statusText))}},K.send(null)})}class d extends l.BaseCMapReaderFactory{_fetchData(nt,A){return T(nt,this.isCompressed).then(O=>({cMapData:O,compressionType:A}))}}e.DOMCMapReaderFactory=d;class L extends l.BaseStandardFontDataFactory{_fetchData(nt){return T(nt,!0)}}e.DOMStandardFontDataFactory=L;class m extends l.BaseSVGFactory{_createSVG(nt){return document.createElementNS(P,nt)}}e.DOMSVGFactory=m;class i{constructor({viewBox:nt,scale:A,rotation:O,offsetX:K=0,offsetY:et=0,dontFlip:pt=!1}){this.viewBox=nt,this.scale=A,this.rotation=O,this.offsetX=K,this.offsetY=et;const St=(nt[2]+nt[0])/2,yt=(nt[3]+nt[1])/2;let J,Pt,Ct,Ht;switch(O%=360,O<0&&(O+=360),O){case 180:J=-1,Pt=0,Ct=0,Ht=1;break;case 90:J=0,Pt=1,Ct=1,Ht=0;break;case 270:J=0,Pt=-1,Ct=-1,Ht=0;break;case 0:J=1,Pt=0,Ct=0,Ht=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}pt&&(Ct=-Ct,Ht=-Ht);let Bt,$t,Mt,Ut;J===0?(Bt=Math.abs(yt-nt[1])*A+K,$t=Math.abs(St-nt[0])*A+et,Mt=(nt[3]-nt[1])*A,Ut=(nt[2]-nt[0])*A):(Bt=Math.abs(St-nt[0])*A+K,$t=Math.abs(yt-nt[1])*A+et,Mt=(nt[2]-nt[0])*A,Ut=(nt[3]-nt[1])*A),this.transform=[J*A,Pt*A,Ct*A,Ht*A,Bt-J*A*St-Ct*A*yt,$t-Pt*A*St-Ht*A*yt],this.width=Mt,this.height=Ut}get rawDims(){const{viewBox:nt}=this;return(0,p.shadow)(this,"rawDims",{pageWidth:nt[2]-nt[0],pageHeight:nt[3]-nt[1],pageX:nt[0],pageY:nt[1]})}clone({scale:nt=this.scale,rotation:A=this.rotation,offsetX:O=this.offsetX,offsetY:K=this.offsetY,dontFlip:et=!1}={}){return new i({viewBox:this.viewBox.slice(),scale:nt,rotation:A,offsetX:O,offsetY:K,dontFlip:et})}convertToViewportPoint(nt,A){return p.Util.applyTransform([nt,A],this.transform)}convertToViewportRectangle(nt){const A=p.Util.applyTransform([nt[0],nt[1]],this.transform),O=p.Util.applyTransform([nt[2],nt[3]],this.transform);return[A[0],A[1],O[0],O[1]]}convertToPdfPoint(nt,A){return p.Util.applyInverseTransform([nt,A],this.transform)}}e.PageViewport=i;class f extends p.BaseException{constructor(nt,A=0){super(nt,"RenderingCancelledException"),this.extraDelay=A}}e.RenderingCancelledException=f;function v(tt){const nt=tt.length;let A=0;for(;A<nt&&tt[A].trim()==="";)A++;return tt.substring(A,A+5).toLowerCase()==="data:"}function _(tt){return typeof tt=="string"&&/\.pdf$/i.test(tt)}function g(tt,nt=!1){return nt||([tt]=tt.split(/[#?]/,1)),tt.substring(tt.lastIndexOf("/")+1)}function y(tt,nt="document.pdf"){if(typeof tt!="string")return nt;if(v(tt))return(0,p.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),nt;const A=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,O=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,K=A.exec(tt);let et=O.exec(K[1])||O.exec(K[2])||O.exec(K[3]);if(et&&(et=et[0],et.includes("%")))try{et=O.exec(decodeURIComponent(et))[0]}catch(pt){}return et||nt}class U{constructor(){wt(this,"started",Object.create(null));wt(this,"times",[])}time(nt){nt in this.started&&(0,p.warn)(`Timer is already running for ${nt}`),this.started[nt]=Date.now()}timeEnd(nt){nt in this.started||(0,p.warn)(`Timer has not been started for ${nt}`),this.times.push({name:nt,start:this.started[nt],end:Date.now()}),delete this.started[nt]}toString(){const nt=[];let A=0;for(const{name:O}of this.times)A=Math.max(O.length,A);for(const{name:O,start:K,end:et}of this.times)nt.push(`${O.padEnd(A)} ${et-K}ms
`);return nt.join("")}}e.StatTimer=U;function E(tt,nt){try{const{protocol:A}=nt?new URL(tt,nt):new URL(tt);return A==="http:"||A==="https:"}catch(A){return!1}}function c(tt){tt.preventDefault()}function o(tt,nt=!1){return new Promise((A,O)=>{const K=document.createElement("script");K.src=tt,K.onload=function(et){nt&&K.remove(),A(et)},K.onerror=function(){O(new Error(`Cannot load script at: ${K.src}`))},(document.head||document.documentElement).append(K)})}function r(tt){console.log("Deprecated API usage: "+tt)}let h;class u{static toDateObject(nt){if(!nt||typeof nt!="string")return null;h||(h=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const A=h.exec(nt);if(!A)return null;const O=parseInt(A[1],10);let K=parseInt(A[2],10);K=K>=1&&K<=12?K-1:0;let et=parseInt(A[3],10);et=et>=1&&et<=31?et:1;let pt=parseInt(A[4],10);pt=pt>=0&&pt<=23?pt:0;let St=parseInt(A[5],10);St=St>=0&&St<=59?St:0;let yt=parseInt(A[6],10);yt=yt>=0&&yt<=59?yt:0;const J=A[7]||"Z";let Pt=parseInt(A[8],10);Pt=Pt>=0&&Pt<=23?Pt:0;let Ct=parseInt(A[9],10)||0;return Ct=Ct>=0&&Ct<=59?Ct:0,J==="-"?(pt+=Pt,St+=Ct):J==="+"&&(pt-=Pt,St-=Ct),new Date(Date.UTC(O,K,et,pt,St,yt))}}e.PDFDateString=u;function j(tt,{scale:nt=1,rotation:A=0}){const{width:O,height:K}=tt.attributes.style,et=[0,0,parseInt(O),parseInt(K)];return new i({viewBox:et,scale:nt,rotation:A})}function a(tt){if(tt.startsWith("#")){const nt=parseInt(tt.slice(1),16);return[(nt&16711680)>>16,(nt&65280)>>8,nt&255]}return tt.startsWith("rgb(")?tt.slice(4,-1).split(",").map(nt=>parseInt(nt)):tt.startsWith("rgba(")?tt.slice(5,-1).split(",").map(nt=>parseInt(nt)).slice(0,3):((0,p.warn)(`Not a valid color format: "${tt}"`),[0,0,0])}function S(tt){const nt=document.createElement("span");nt.style.visibility="hidden",document.body.append(nt);for(const A of tt.keys()){nt.style.color=A;const O=window.getComputedStyle(nt).color;tt.set(A,a(O))}nt.remove()}function D(tt){const{a:nt,b:A,c:O,d:K,e:et,f:pt}=tt.getTransform();return[nt,A,O,K,et,pt]}function at(tt){const{a:nt,b:A,c:O,d:K,e:et,f:pt}=tt.getTransform().invertSelf();return[nt,A,O,K,et,pt]}function G(tt,nt,A=!1,O=!0){if(nt instanceof i){const{pageWidth:K,pageHeight:et}=nt.rawDims,{style:pt}=tt,St=p.FeatureTest.isCSSRoundSupported,yt=`var(--scale-factor) * ${K}px`,J=`var(--scale-factor) * ${et}px`,Pt=St?`round(${yt}, 1px)`:`calc(${yt})`,Ct=St?`round(${J}, 1px)`:`calc(${J})`;!A||nt.rotation%180===0?(pt.width=Pt,pt.height=Ct):(pt.width=Ct,pt.height=Pt)}O&&tt.setAttribute("data-main-rotation",nt.rotation)}},(X,e,H)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var l=H(1);class p{constructor(){this.constructor===p&&(0,l.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(d){return"none"}addHCMFilter(d,L){return"none"}addHighlightHCMFilter(d,L,m,i){return"none"}destroy(d=!1){}}e.BaseFilterFactory=p;class P{constructor(){this.constructor===P&&(0,l.unreachable)("Cannot initialize BaseCanvasFactory.")}create(d,L){if(d<=0||L<=0)throw new Error("Invalid canvas size");const m=this._createCanvas(d,L);return{canvas:m,context:m.getContext("2d")}}reset(d,L,m){if(!d.canvas)throw new Error("Canvas is not specified");if(L<=0||m<=0)throw new Error("Invalid canvas size");d.canvas.width=L,d.canvas.height=m}destroy(d){if(!d.canvas)throw new Error("Canvas is not specified");d.canvas.width=0,d.canvas.height=0,d.canvas=null,d.context=null}_createCanvas(d,L){(0,l.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=P;class N{constructor({baseUrl:d=null,isCompressed:L=!0}){this.constructor===N&&(0,l.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=d,this.isCompressed=L}async fetch({name:d}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!d)throw new Error("CMap name must be specified.");const L=this.baseUrl+d+(this.isCompressed?".bcmap":""),m=this.isCompressed?l.CMapCompressionType.BINARY:l.CMapCompressionType.NONE;return this._fetchData(L,m).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${L}`)})}_fetchData(d,L){(0,l.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=N;class V{constructor({baseUrl:d=null}){this.constructor===V&&(0,l.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=d}async fetch({filename:d}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!d)throw new Error("Font filename must be specified.");const L=`${this.baseUrl}${d}`;return this._fetchData(L).catch(m=>{throw new Error(`Unable to load font data at: ${L}`)})}_fetchData(d){(0,l.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=V;class M{constructor(){this.constructor===M&&(0,l.unreachable)("Cannot initialize BaseSVGFactory.")}create(d,L,m=!1){if(d<=0||L<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),m||(i.setAttribute("width",`${d}px`),i.setAttribute("height",`${L}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${d} ${L}`),i}createElement(d){if(typeof d!="string")throw new Error("Invalid SVG element type");return this._createSVG(d)}_createSVG(d){(0,l.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=M},(X,e,H)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var l=H(1);const p=3285377520,P=4294901760,N=65535;class V{constructor(T){this.h1=T?T&4294967295:p,this.h2=T?T&4294967295:p}update(T){let d,L;if(typeof T=="string"){d=new Uint8Array(T.length*2),L=0;for(let r=0,h=T.length;r<h;r++){const u=T.charCodeAt(r);u<=255?d[L++]=u:(d[L++]=u>>>8,d[L++]=u&255)}}else if((0,l.isArrayBuffer)(T))d=T.slice(),L=d.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const m=L>>2,i=L-m*4,f=new Uint32Array(d.buffer,0,m);let v=0,_=0,g=this.h1,y=this.h2;const U=3432918353,E=461845907,c=U&N,o=E&N;for(let r=0;r<m;r++)r&1?(v=f[r],v=v*U&P|v*c&N,v=v<<15|v>>>17,v=v*E&P|v*o&N,g^=v,g=g<<13|g>>>19,g=g*5+3864292196):(_=f[r],_=_*U&P|_*c&N,_=_<<15|_>>>17,_=_*E&P|_*o&N,y^=_,y=y<<13|y>>>19,y=y*5+3864292196);switch(v=0,i){case 3:v^=d[m*4+2]<<16;case 2:v^=d[m*4+1]<<8;case 1:v^=d[m*4],v=v*U&P|v*c&N,v=v<<15|v>>>17,v=v*E&P|v*o&N,m&1?g^=v:y^=v}this.h1=g,this.h2=y}hexdigest(){let T=this.h1,d=this.h2;return T^=d>>>1,T=T*3981806797&P|T*36045&N,d=d*4283543511&P|((d<<16|T>>>16)*2950163797&P)>>>16,T^=d>>>1,T=T*444984403&P|T*60499&N,d=d*3301882366&P|((d<<16|T>>>16)*3120437893&P)>>>16,T^=d>>>1,(T>>>0).toString(16).padStart(8,"0")+(d>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=V},(X,e,H)=>{var N;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var l=H(1);class p{constructor({ownerDocument:M=globalThis.document,styleElement:T=null}){st(this,N,new Set);this._document=M,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(M){this.nativeFontFaces.add(M),this._document.fonts.add(M)}removeNativeFontFace(M){this.nativeFontFaces.delete(M),this._document.fonts.delete(M)}insertRule(M){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const T=this.styleElement.sheet;T.insertRule(M,T.cssRules.length)}clear(){for(const M of this.nativeFontFaces)this._document.fonts.delete(M);this.nativeFontFaces.clear(),t(this,N).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(M){if(!(!M||t(this,N).has(M.loadedName))){if((0,l.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:T,src:d,style:L}=M,m=new FontFace(T,d,L);this.addNativeFontFace(m);try{await m.load(),t(this,N).add(T)}catch(i){(0,l.warn)(`Cannot load system font: ${M.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(m)}return}(0,l.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(M){if(M.attached||M.missingFile&&!M.systemFontInfo)return;if(M.attached=!0,M.systemFontInfo){await this.loadSystemFont(M.systemFontInfo);return}if(this.isFontLoadingAPISupported){const d=M.createNativeFontFace();if(d){this.addNativeFontFace(d);try{await d.loaded}catch(L){throw(0,l.warn)(`Failed to load font '${d.family}': '${L}'.`),M.disableFontFace=!0,L}}return}const T=M.createFontFaceRule();if(T){if(this.insertRule(T),this.isSyncFontLoadingSupported)return;await new Promise(d=>{const L=this._queueLoadingCallback(d);this._prepareFontLoadEvent(M,L)})}}get isFontLoadingAPISupported(){var T;const M=!!((T=this._document)!=null&&T.fonts);return(0,l.shadow)(this,"isFontLoadingAPISupported",M)}get isSyncFontLoadingSupported(){let M=!1;return(l.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(M=!0),(0,l.shadow)(this,"isSyncFontLoadingSupported",M)}_queueLoadingCallback(M){function T(){for((0,l.assert)(!L.done,"completeRequest() cannot be called twice."),L.done=!0;d.length>0&&d[0].done;){const m=d.shift();setTimeout(m.callback,0)}}const{loadingRequests:d}=this,L={done:!1,complete:T,callback:M};return d.push(L),L}get _loadTestFont(){const M=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,l.shadow)(this,"_loadTestFont",M)}_prepareFontLoadEvent(M,T){function d(a,S){return a.charCodeAt(S)<<24|a.charCodeAt(S+1)<<16|a.charCodeAt(S+2)<<8|a.charCodeAt(S+3)&255}function L(a,S,D,at){const G=a.substring(0,S),Q=a.substring(S+D);return G+at+Q}let m,i;const f=this._document.createElement("canvas");f.width=1,f.height=1;const v=f.getContext("2d");let _=0;function g(a,S){if(++_>30){(0,l.warn)("Load test font never loaded."),S();return}if(v.font="30px "+a,v.fillText(".",0,20),v.getImageData(0,0,1,1).data[3]>0){S();return}setTimeout(g.bind(null,a,S))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let U=this._loadTestFont;U=L(U,976,y.length,y);const c=16,o=1482184792;let r=d(U,c);for(m=0,i=y.length-3;m<i;m+=4)r=r-o+d(y,m)|0;m<y.length&&(r=r-o+d(y+"XXX",m)|0),U=L(U,c,4,(0,l.string32)(r));const h=`url(data:font/opentype;base64,${btoa(U)});`,u=`@font-face {font-family:"${y}";src:${h}}`;this.insertRule(u);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const a of[M.loadedName,y]){const S=this._document.createElement("span");S.textContent="Hi",S.style.fontFamily=a,j.append(S)}this._document.body.append(j),g(y,()=>{j.remove(),T.complete()})}}N=new WeakMap,e.FontLoader=p;class P{constructor(M,{isEvalSupported:T=!0,disableFontFace:d=!1,ignoreErrors:L=!1,inspectFont:m=null}){this.compiledGlyphs=Object.create(null);for(const i in M)this[i]=M[i];this.isEvalSupported=T!==!1,this.disableFontFace=d===!0,this.ignoreErrors=L===!0,this._inspectFont=m}createNativeFontFace(){var T;if(!this.data||this.disableFontFace)return null;let M;if(!this.cssFontInfo)M=new FontFace(this.loadedName,this.data,{});else{const d={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(d.style=`oblique ${this.cssFontInfo.italicAngle}deg`),M=new FontFace(this.cssFontInfo.fontFamily,this.data,d)}return(T=this._inspectFont)==null||T.call(this,this),M}createFontFaceRule(){var L;if(!this.data||this.disableFontFace)return null;const M=(0,l.bytesToString)(this.data),T=`url(data:${this.mimetype};base64,${btoa(M)});`;let d;if(!this.cssFontInfo)d=`@font-face {font-family:"${this.loadedName}";src:${T}}`;else{let m=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(m+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),d=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${m}src:${T}}`}return(L=this._inspectFont)==null||L.call(this,this,T),d}getPathGenerator(M,T){if(this.compiledGlyphs[T]!==void 0)return this.compiledGlyphs[T];let d;try{d=M.get(this.loadedName+"_path_"+T)}catch(L){if(!this.ignoreErrors)throw L;return(0,l.warn)(`getPathGenerator - ignoring character: "${L}".`),this.compiledGlyphs[T]=function(m,i){}}if(this.isEvalSupported&&l.FeatureTest.isEvalSupported){const L=[];for(const m of d){const i=m.args!==void 0?m.args.join(","):"";L.push("c.",m.cmd,"(",i,`);
`)}return this.compiledGlyphs[T]=new Function("c","size",L.join(""))}return this.compiledGlyphs[T]=function(L,m){for(const i of d)i.cmd==="scale"&&(i.args=[m,-m]),L[i.cmd].apply(L,i.args)}}}e.FontFaceObject=P},(X,e,H)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var l=H(7);H(1);const p=function(T){return new Promise((d,L)=>{requireFs().readFile(T,(i,f)=>{if(i||!f){L(new Error(i));return}d(new Uint8Array(f))})})};class P extends l.BaseFilterFactory{}e.NodeFilterFactory=P;class N extends l.BaseCanvasFactory{_createCanvas(d,L){return require$$0.createCanvas(d,L)}}e.NodeCanvasFactory=N;class V extends l.BaseCMapReaderFactory{_fetchData(d,L){return p(d).then(m=>({cMapData:m,compressionType:L}))}}e.NodeCMapReaderFactory=V;class M extends l.BaseStandardFontDataFactory{_fetchData(d){return p(d)}}e.NodeStandardFontDataFactory=M},(X,e,H)=>{var ct,Ve,$e;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var l=H(1),p=H(6),P=H(12),N=H(13);const V=16,M=100,T=4096,d=15,L=10,m=1e3,i=16;function f(C,s){if(C._removeMirroring)throw new Error("Context is already forwarding operations.");C.__originalSave=C.save,C.__originalRestore=C.restore,C.__originalRotate=C.rotate,C.__originalScale=C.scale,C.__originalTranslate=C.translate,C.__originalTransform=C.transform,C.__originalSetTransform=C.setTransform,C.__originalResetTransform=C.resetTransform,C.__originalClip=C.clip,C.__originalMoveTo=C.moveTo,C.__originalLineTo=C.lineTo,C.__originalBezierCurveTo=C.bezierCurveTo,C.__originalRect=C.rect,C.__originalClosePath=C.closePath,C.__originalBeginPath=C.beginPath,C._removeMirroring=()=>{C.save=C.__originalSave,C.restore=C.__originalRestore,C.rotate=C.__originalRotate,C.scale=C.__originalScale,C.translate=C.__originalTranslate,C.transform=C.__originalTransform,C.setTransform=C.__originalSetTransform,C.resetTransform=C.__originalResetTransform,C.clip=C.__originalClip,C.moveTo=C.__originalMoveTo,C.lineTo=C.__originalLineTo,C.bezierCurveTo=C.__originalBezierCurveTo,C.rect=C.__originalRect,C.closePath=C.__originalClosePath,C.beginPath=C.__originalBeginPath,delete C._removeMirroring},C.save=function(){s.save(),this.__originalSave()},C.restore=function(){s.restore(),this.__originalRestore()},C.translate=function(b,x){s.translate(b,x),this.__originalTranslate(b,x)},C.scale=function(b,x){s.scale(b,x),this.__originalScale(b,x)},C.transform=function(b,x,F,I,$,ot){s.transform(b,x,F,I,$,ot),this.__originalTransform(b,x,F,I,$,ot)},C.setTransform=function(b,x,F,I,$,ot){s.setTransform(b,x,F,I,$,ot),this.__originalSetTransform(b,x,F,I,$,ot)},C.resetTransform=function(){s.resetTransform(),this.__originalResetTransform()},C.rotate=function(b){s.rotate(b),this.__originalRotate(b)},C.clip=function(b){s.clip(b),this.__originalClip(b)},C.moveTo=function(n,b){s.moveTo(n,b),this.__originalMoveTo(n,b)},C.lineTo=function(n,b){s.lineTo(n,b),this.__originalLineTo(n,b)},C.bezierCurveTo=function(n,b,x,F,I,$){s.bezierCurveTo(n,b,x,F,I,$),this.__originalBezierCurveTo(n,b,x,F,I,$)},C.rect=function(n,b,x,F){s.rect(n,b,x,F),this.__originalRect(n,b,x,F)},C.closePath=function(){s.closePath(),this.__originalClosePath()},C.beginPath=function(){s.beginPath(),this.__originalBeginPath()}}class v{constructor(s){this.canvasFactory=s,this.cache=Object.create(null)}getCanvas(s,n,b){let x;return this.cache[s]!==void 0?(x=this.cache[s],this.canvasFactory.reset(x,n,b)):(x=this.canvasFactory.create(n,b),this.cache[s]=x),x}delete(s){delete this.cache[s]}clear(){for(const s in this.cache){const n=this.cache[s];this.canvasFactory.destroy(n),delete this.cache[s]}}}function _(C,s,n,b,x,F,I,$,ot,ut){const[ft,mt,At,vt,tt,nt]=(0,p.getCurrentTransform)(C);if(mt===0&&At===0){const K=I*ft+tt,et=Math.round(K),pt=$*vt+nt,St=Math.round(pt),yt=(I+ot)*ft+tt,J=Math.abs(Math.round(yt)-et)||1,Pt=($+ut)*vt+nt,Ct=Math.abs(Math.round(Pt)-St)||1;return C.setTransform(Math.sign(ft),0,0,Math.sign(vt),et,St),C.drawImage(s,n,b,x,F,0,0,J,Ct),C.setTransform(ft,mt,At,vt,tt,nt),[J,Ct]}if(ft===0&&vt===0){const K=$*At+tt,et=Math.round(K),pt=I*mt+nt,St=Math.round(pt),yt=($+ut)*At+tt,J=Math.abs(Math.round(yt)-et)||1,Pt=(I+ot)*mt+nt,Ct=Math.abs(Math.round(Pt)-St)||1;return C.setTransform(0,Math.sign(mt),Math.sign(At),0,et,St),C.drawImage(s,n,b,x,F,0,0,Ct,J),C.setTransform(ft,mt,At,vt,tt,nt),[Ct,J]}C.drawImage(s,n,b,x,F,I,$,ot,ut);const A=Math.hypot(ft,mt),O=Math.hypot(At,vt);return[A*ot,O*ut]}function g(C){const{width:s,height:n}=C;if(s>m||n>m)return null;const b=1e3,x=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),F=s+1;let I=new Uint8Array(F*(n+1)),$,ot,ut;const ft=s+7&-8;let mt=new Uint8Array(ft*n),At=0;for(const O of C.data){let K=128;for(;K>0;)mt[At++]=O&K?0:255,K>>=1}let vt=0;for(At=0,mt[At]!==0&&(I[0]=1,++vt),ot=1;ot<s;ot++)mt[At]!==mt[At+1]&&(I[ot]=mt[At]?2:1,++vt),At++;for(mt[At]!==0&&(I[ot]=2,++vt),$=1;$<n;$++){At=$*ft,ut=$*F,mt[At-ft]!==mt[At]&&(I[ut]=mt[At]?1:8,++vt);let O=(mt[At]?4:0)+(mt[At-ft]?8:0);for(ot=1;ot<s;ot++)O=(O>>2)+(mt[At+1]?4:0)+(mt[At-ft+1]?8:0),x[O]&&(I[ut+ot]=x[O],++vt),At++;if(mt[At-ft]!==mt[At]&&(I[ut+ot]=mt[At]?2:4,++vt),vt>b)return null}for(At=ft*(n-1),ut=$*F,mt[At]!==0&&(I[ut]=8,++vt),ot=1;ot<s;ot++)mt[At]!==mt[At+1]&&(I[ut+ot]=mt[At]?4:8,++vt),At++;if(mt[At]!==0&&(I[ut+ot]=4,++vt),vt>b)return null;const tt=new Int32Array([0,F,-1,0,-F,0,0,0,1]),nt=new Path2D;for($=0;vt&&$<=n;$++){let O=$*F;const K=O+s;for(;O<K&&!I[O];)O++;if(O===K)continue;nt.moveTo(O%F,$);const et=O;let pt=I[O];do{const St=tt[pt];do O+=St;while(!I[O]);const yt=I[O];yt!==5&&yt!==10?(pt=yt,I[O]=0):(pt=yt&51*pt>>4,I[O]&=pt>>2|pt<<2),nt.lineTo(O%F,O/F|0),I[O]||--vt}while(et!==O);--$}return mt=null,I=null,function(O){O.save(),O.scale(1/s,-1/n),O.translate(0,-n),O.fill(nt),O.beginPath(),O.restore()}}class y{constructor(s,n){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=l.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=l.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=l.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,s,n])}clone(){const s=Object.create(this);return s.clipBox=this.clipBox.slice(),s}setCurrentPoint(s,n){this.x=s,this.y=n}updatePathMinMax(s,n,b){[n,b]=l.Util.applyTransform([n,b],s),this.minX=Math.min(this.minX,n),this.minY=Math.min(this.minY,b),this.maxX=Math.max(this.maxX,n),this.maxY=Math.max(this.maxY,b)}updateRectMinMax(s,n){const b=l.Util.applyTransform(n,s),x=l.Util.applyTransform(n.slice(2),s);this.minX=Math.min(this.minX,b[0],x[0]),this.minY=Math.min(this.minY,b[1],x[1]),this.maxX=Math.max(this.maxX,b[0],x[0]),this.maxY=Math.max(this.maxY,b[1],x[1])}updateScalingPathMinMax(s,n){l.Util.scaleMinMax(s,n),this.minX=Math.min(this.minX,n[0]),this.maxX=Math.max(this.maxX,n[1]),this.minY=Math.min(this.minY,n[2]),this.maxY=Math.max(this.maxY,n[3])}updateCurvePathMinMax(s,n,b,x,F,I,$,ot,ut,ft){const mt=l.Util.bezierBoundingBox(n,b,x,F,I,$,ot,ut);if(ft){ft[0]=Math.min(ft[0],mt[0],mt[2]),ft[1]=Math.max(ft[1],mt[0],mt[2]),ft[2]=Math.min(ft[2],mt[1],mt[3]),ft[3]=Math.max(ft[3],mt[1],mt[3]);return}this.updateRectMinMax(s,mt)}getPathBoundingBox(s=P.PathType.FILL,n=null){const b=[this.minX,this.minY,this.maxX,this.maxY];if(s===P.PathType.STROKE){n||(0,l.unreachable)("Stroke bounding box must include transform.");const x=l.Util.singularValueDecompose2dScale(n),F=x[0]*this.lineWidth/2,I=x[1]*this.lineWidth/2;b[0]-=F,b[1]-=I,b[2]+=F,b[3]+=I}return b}updateClipFromPath(){const s=l.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(s||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(s){this.clipBox=s,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(s=P.PathType.FILL,n=null){return l.Util.intersect(this.clipBox,this.getPathBoundingBox(s,n))}}function U(C,s){if(typeof ImageData<"u"&&s instanceof ImageData){C.putImageData(s,0,0);return}const n=s.height,b=s.width,x=n%i,F=(n-x)/i,I=x===0?F:F+1,$=C.createImageData(b,i);let ot=0,ut;const ft=s.data,mt=$.data;let At,vt,tt,nt;if(s.kind===l.ImageKind.GRAYSCALE_1BPP){const A=ft.byteLength,O=new Uint32Array(mt.buffer,0,mt.byteLength>>2),K=O.length,et=b+7>>3,pt=4294967295,St=l.FeatureTest.isLittleEndian?4278190080:255;for(At=0;At<I;At++){for(tt=At<F?i:x,ut=0,vt=0;vt<tt;vt++){const yt=A-ot;let J=0;const Pt=yt>et?b:yt*8-7,Ct=Pt&-8;let Ht=0,Bt=0;for(;J<Ct;J+=8)Bt=ft[ot++],O[ut++]=Bt&128?pt:St,O[ut++]=Bt&64?pt:St,O[ut++]=Bt&32?pt:St,O[ut++]=Bt&16?pt:St,O[ut++]=Bt&8?pt:St,O[ut++]=Bt&4?pt:St,O[ut++]=Bt&2?pt:St,O[ut++]=Bt&1?pt:St;for(;J<Pt;J++)Ht===0&&(Bt=ft[ot++],Ht=128),O[ut++]=Bt&Ht?pt:St,Ht>>=1}for(;ut<K;)O[ut++]=0;C.putImageData($,0,At*i)}}else if(s.kind===l.ImageKind.RGBA_32BPP){for(vt=0,nt=b*i*4,At=0;At<F;At++)mt.set(ft.subarray(ot,ot+nt)),ot+=nt,C.putImageData($,0,vt),vt+=i;At<I&&(nt=b*x*4,mt.set(ft.subarray(ot,ot+nt)),C.putImageData($,0,vt))}else if(s.kind===l.ImageKind.RGB_24BPP)for(tt=i,nt=b*tt,At=0;At<I;At++){for(At>=F&&(tt=x,nt=b*tt),ut=0,vt=nt;vt--;)mt[ut++]=ft[ot++],mt[ut++]=ft[ot++],mt[ut++]=ft[ot++],mt[ut++]=255;C.putImageData($,0,At*i)}else throw new Error(`bad image kind: ${s.kind}`)}function E(C,s){if(s.bitmap){C.drawImage(s.bitmap,0,0);return}const n=s.height,b=s.width,x=n%i,F=(n-x)/i,I=x===0?F:F+1,$=C.createImageData(b,i);let ot=0;const ut=s.data,ft=$.data;for(let mt=0;mt<I;mt++){const At=mt<F?i:x;({srcPos:ot}=(0,N.convertBlackAndWhiteToRGBA)({src:ut,srcPos:ot,dest:ft,width:b,height:At,nonBlackColor:0})),C.putImageData($,0,mt*i)}}function c(C,s){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const b of n)C[b]!==void 0&&(s[b]=C[b]);C.setLineDash!==void 0&&(s.setLineDash(C.getLineDash()),s.lineDashOffset=C.lineDashOffset)}function o(C){if(C.strokeStyle=C.fillStyle="#000000",C.fillRule="nonzero",C.globalAlpha=1,C.lineWidth=1,C.lineCap="butt",C.lineJoin="miter",C.miterLimit=10,C.globalCompositeOperation="source-over",C.font="10px sans-serif",C.setLineDash!==void 0&&(C.setLineDash([]),C.lineDashOffset=0),!l.isNodeJS){const{filter:s}=C;s!=="none"&&s!==""&&(C.filter="none")}}function r(C,s,n,b){const x=C.length;for(let F=3;F<x;F+=4){const I=C[F];if(I===0)C[F-3]=s,C[F-2]=n,C[F-1]=b;else if(I<255){const $=255-I;C[F-3]=C[F-3]*I+s*$>>8,C[F-2]=C[F-2]*I+n*$>>8,C[F-1]=C[F-1]*I+b*$>>8}}}function h(C,s,n){const b=C.length,x=1/255;for(let F=3;F<b;F+=4){const I=n?n[C[F]]:C[F];s[F]=s[F]*I*x|0}}function u(C,s,n){const b=C.length;for(let x=3;x<b;x+=4){const F=C[x-3]*77+C[x-2]*152+C[x-1]*28;s[x]=n?s[x]*n[F>>8]>>8:s[x]*F>>16}}function j(C,s,n,b,x,F,I,$,ot,ut,ft){const mt=!!F,At=mt?F[0]:0,vt=mt?F[1]:0,tt=mt?F[2]:0,nt=x==="Luminosity"?u:h,O=Math.min(b,Math.ceil(1048576/n));for(let K=0;K<b;K+=O){const et=Math.min(O,b-K),pt=C.getImageData($-ut,K+(ot-ft),n,et),St=s.getImageData($,K+ot,n,et);mt&&r(pt.data,At,vt,tt),nt(pt.data,St.data,I),s.putImageData(St,$,K+ot)}}function a(C,s,n,b){const x=b[0],F=b[1],I=b[2]-x,$=b[3]-F;I===0||$===0||(j(s.context,n,I,$,s.subtype,s.backdrop,s.transferMap,x,F,s.offsetX,s.offsetY),C.save(),C.globalAlpha=1,C.globalCompositeOperation="source-over",C.setTransform(1,0,0,1,0,0),C.drawImage(n.canvas,0,0),C.restore())}function S(C,s){const n=l.Util.singularValueDecompose2dScale(C);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const b=Math.fround((globalThis.devicePixelRatio||1)*p.PixelsPerInch.PDF_TO_CSS_UNITS);return s!==void 0?s:n[0]<=b||n[1]<=b}const D=["butt","round","square"],at=["miter","round","bevel"],G={},Q={},Z=class Z{constructor(s,n,b,x,F,{optionalContentConfig:I,markedContentStack:$=null},ot,ut){st(this,ct);this.ctx=s,this.current=new y(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=b,this.canvasFactory=x,this.filterFactory=F,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=$||[],this.optionalContentConfig=I,this.cachedCanvases=new v(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ot,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=ut,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(s,n=null){return typeof s=="string"?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):n}beginDrawing({transform:s,viewport:n,transparency:b=!1,background:x=null}){const F=this.ctx.canvas.width,I=this.ctx.canvas.height,$=this.ctx.fillStyle;if(this.ctx.fillStyle=x||"#ffffff",this.ctx.fillRect(0,0,F,I),this.ctx.fillStyle=$,b){const ot=this.cachedCanvases.getCanvas("transparent",F,I);this.compositeCtx=this.ctx,this.transparentCanvas=ot.canvas,this.ctx=ot.context,this.ctx.save(),this.ctx.transform(...(0,p.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),o(this.ctx),s&&(this.ctx.transform(...s),this.outputScaleX=s[0],this.outputScaleY=s[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=(0,p.getCurrentTransform)(this.ctx)}executeOperatorList(s,n,b,x){const F=s.argsArray,I=s.fnArray;let $=n||0;const ot=F.length;if(ot===$)return $;const ut=ot-$>L&&typeof b=="function",ft=ut?Date.now()+d:0;let mt=0;const At=this.commonObjs,vt=this.objs;let tt;for(;;){if(x!==void 0&&$===x.nextBreakPoint)return x.breakIt($,b),$;if(tt=I[$],tt!==l.OPS.dependency)this[tt].apply(this,F[$]);else for(const nt of F[$]){const A=nt.startsWith("g_")?At:vt;if(!A.has(nt))return A.get(nt,b),$}if($++,$===ot)return $;if(ut&&++mt>L){if(Date.now()>ft)return b(),$;mt=0}}}endDrawing(){Y(this,ct,Ve).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const s of this._cachedBitmapsMap.values()){for(const n of s.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);s.clear()}this._cachedBitmapsMap.clear(),Y(this,ct,$e).call(this)}_scaleImage(s,n){const b=s.width,x=s.height;let F=Math.max(Math.hypot(n[0],n[1]),1),I=Math.max(Math.hypot(n[2],n[3]),1),$=b,ot=x,ut="prescale1",ft,mt;for(;F>2&&$>1||I>2&&ot>1;){let At=$,vt=ot;F>2&&$>1&&(At=$>=16384?Math.floor($/2)-1||1:Math.ceil($/2),F/=$/At),I>2&&ot>1&&(vt=ot>=16384?Math.floor(ot/2)-1||1:Math.ceil(ot)/2,I/=ot/vt),ft=this.cachedCanvases.getCanvas(ut,At,vt),mt=ft.context,mt.clearRect(0,0,At,vt),mt.drawImage(s,0,0,$,ot,0,0,At,vt),s=ft.canvas,$=At,ot=vt,ut=ut==="prescale1"?"prescale2":"prescale1"}return{img:s,paintWidth:$,paintHeight:ot}}_createMaskCanvas(s){const n=this.ctx,{width:b,height:x}=s,F=this.current.fillColor,I=this.current.patternFill,$=(0,p.getCurrentTransform)(n);let ot,ut,ft,mt;if((s.bitmap||s.data)&&s.count>1){const J=s.bitmap||s.data.buffer;ut=JSON.stringify(I?$:[$.slice(0,4),F]),ot=this._cachedBitmapsMap.get(J),ot||(ot=new Map,this._cachedBitmapsMap.set(J,ot));const Pt=ot.get(ut);if(Pt&&!I){const Ct=Math.round(Math.min($[0],$[2])+$[4]),Ht=Math.round(Math.min($[1],$[3])+$[5]);return{canvas:Pt,offsetX:Ct,offsetY:Ht}}ft=Pt}ft||(mt=this.cachedCanvases.getCanvas("maskCanvas",b,x),E(mt.context,s));let At=l.Util.transform($,[1/b,0,0,-1/x,0,0]);At=l.Util.transform(At,[1,0,0,1,0,-x]);const vt=l.Util.applyTransform([0,0],At),tt=l.Util.applyTransform([b,x],At),nt=l.Util.normalizeRect([vt[0],vt[1],tt[0],tt[1]]),A=Math.round(nt[2]-nt[0])||1,O=Math.round(nt[3]-nt[1])||1,K=this.cachedCanvases.getCanvas("fillCanvas",A,O),et=K.context,pt=Math.min(vt[0],tt[0]),St=Math.min(vt[1],tt[1]);et.translate(-pt,-St),et.transform(...At),ft||(ft=this._scaleImage(mt.canvas,(0,p.getCurrentTransformInverse)(et)),ft=ft.img,ot&&I&&ot.set(ut,ft)),et.imageSmoothingEnabled=S((0,p.getCurrentTransform)(et),s.interpolate),_(et,ft,0,0,ft.width,ft.height,0,0,b,x),et.globalCompositeOperation="source-in";const yt=l.Util.transform((0,p.getCurrentTransformInverse)(et),[1,0,0,1,-pt,-St]);return et.fillStyle=I?F.getPattern(n,this,yt,P.PathType.FILL):F,et.fillRect(0,0,b,x),ot&&!I&&(this.cachedCanvases.delete("fillCanvas"),ot.set(ut,K.canvas)),{canvas:K.canvas,offsetX:Math.round(pt),offsetY:Math.round(St)}}setLineWidth(s){s!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=s,this.ctx.lineWidth=s}setLineCap(s){this.ctx.lineCap=D[s]}setLineJoin(s){this.ctx.lineJoin=at[s]}setMiterLimit(s){this.ctx.miterLimit=s}setDash(s,n){const b=this.ctx;b.setLineDash!==void 0&&(b.setLineDash(s),b.lineDashOffset=n)}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[n,b]of s)switch(n){case"LW":this.setLineWidth(b);break;case"LC":this.setLineCap(b);break;case"LJ":this.setLineJoin(b);break;case"ML":this.setMiterLimit(b);break;case"D":this.setDash(b[0],b[1]);break;case"RI":this.setRenderingIntent(b);break;case"FL":this.setFlatness(b);break;case"Font":this.setFont(b[0],b[1]);break;case"CA":this.current.strokeAlpha=b;break;case"ca":this.current.fillAlpha=b,this.ctx.globalAlpha=b;break;case"BM":this.ctx.globalCompositeOperation=b;break;case"SMask":this.current.activeSMask=b?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(b);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const s=this.inSMaskMode;this.current.activeSMask&&!s?this.beginSMaskMode():!this.current.activeSMask&&s&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const s=this.ctx.canvas.width,n=this.ctx.canvas.height,b="smaskGroupAt"+this.groupLevel,x=this.cachedCanvases.getCanvas(b,s,n);this.suspendedCtx=this.ctx,this.ctx=x.context;const F=this.ctx;F.setTransform(...(0,p.getCurrentTransform)(this.suspendedCtx)),c(this.suspendedCtx,F),f(F,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),c(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(s){if(!this.current.activeSMask)return;s?(s[0]=Math.floor(s[0]),s[1]=Math.floor(s[1]),s[2]=Math.ceil(s[2]),s[3]=Math.ceil(s[3])):s=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,b=this.suspendedCtx;a(b,n,this.ctx,s),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(c(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const s=this.current;this.stateStack.push(s),this.current=s.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),c(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(s,n,b,x,F,I){this.ctx.transform(s,n,b,x,F,I),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(s,n,b){const x=this.ctx,F=this.current;let I=F.x,$=F.y,ot,ut;const ft=(0,p.getCurrentTransform)(x),mt=ft[0]===0&&ft[3]===0||ft[1]===0&&ft[2]===0,At=mt?b.slice(0):null;for(let vt=0,tt=0,nt=s.length;vt<nt;vt++)switch(s[vt]|0){case l.OPS.rectangle:I=n[tt++],$=n[tt++];const A=n[tt++],O=n[tt++],K=I+A,et=$+O;x.moveTo(I,$),A===0||O===0?x.lineTo(K,et):(x.lineTo(K,$),x.lineTo(K,et),x.lineTo(I,et)),mt||F.updateRectMinMax(ft,[I,$,K,et]),x.closePath();break;case l.OPS.moveTo:I=n[tt++],$=n[tt++],x.moveTo(I,$),mt||F.updatePathMinMax(ft,I,$);break;case l.OPS.lineTo:I=n[tt++],$=n[tt++],x.lineTo(I,$),mt||F.updatePathMinMax(ft,I,$);break;case l.OPS.curveTo:ot=I,ut=$,I=n[tt+4],$=n[tt+5],x.bezierCurveTo(n[tt],n[tt+1],n[tt+2],n[tt+3],I,$),F.updateCurvePathMinMax(ft,ot,ut,n[tt],n[tt+1],n[tt+2],n[tt+3],I,$,At),tt+=6;break;case l.OPS.curveTo2:ot=I,ut=$,x.bezierCurveTo(I,$,n[tt],n[tt+1],n[tt+2],n[tt+3]),F.updateCurvePathMinMax(ft,ot,ut,I,$,n[tt],n[tt+1],n[tt+2],n[tt+3],At),I=n[tt+2],$=n[tt+3],tt+=4;break;case l.OPS.curveTo3:ot=I,ut=$,I=n[tt+2],$=n[tt+3],x.bezierCurveTo(n[tt],n[tt+1],I,$,I,$),F.updateCurvePathMinMax(ft,ot,ut,n[tt],n[tt+1],I,$,I,$,At),tt+=4;break;case l.OPS.closePath:x.closePath();break}mt&&F.updateScalingPathMinMax(ft,At),F.setCurrentPoint(I,$)}closePath(){this.ctx.closePath()}stroke(s=!0){const n=this.ctx,b=this.current.strokeColor;n.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof b=="object"&&(b!=null&&b.getPattern)?(n.save(),n.strokeStyle=b.getPattern(n,this,(0,p.getCurrentTransformInverse)(n),P.PathType.STROKE),this.rescaleAndStroke(!1),n.restore()):this.rescaleAndStroke(!0)),s&&this.consumePath(this.current.getClippedPathBoundingBox()),n.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(s=!0){const n=this.ctx,b=this.current.fillColor,x=this.current.patternFill;let F=!1;x&&(n.save(),n.fillStyle=b.getPattern(n,this,(0,p.getCurrentTransformInverse)(n),P.PathType.FILL),F=!0);const I=this.current.getClippedPathBoundingBox();this.contentVisible&&I!==null&&(this.pendingEOFill?(n.fill("evenodd"),this.pendingEOFill=!1):n.fill()),F&&n.restore(),s&&this.consumePath(I)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=G}eoClip(){this.pendingClip=Q}beginText(){this.current.textMatrix=l.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const s=this.pendingTextPaths,n=this.ctx;if(s===void 0){n.beginPath();return}n.save(),n.beginPath();for(const b of s)n.setTransform(...b.transform),n.translate(b.x,b.y),b.addToPath(n,b.fontSize);n.restore(),n.clip(),n.beginPath(),delete this.pendingTextPaths}setCharSpacing(s){this.current.charSpacing=s}setWordSpacing(s){this.current.wordSpacing=s}setHScale(s){this.current.textHScale=s/100}setLeading(s){this.current.leading=-s}setFont(s,n){var ft;const b=this.commonObjs.get(s),x=this.current;if(!b)throw new Error(`Can't find font for ${s}`);if(x.fontMatrix=b.fontMatrix||l.FONT_IDENTITY_MATRIX,(x.fontMatrix[0]===0||x.fontMatrix[3]===0)&&(0,l.warn)("Invalid font matrix for font "+s),n<0?(n=-n,x.fontDirection=-1):x.fontDirection=1,this.current.font=b,this.current.fontSize=n,b.isType3Font)return;const F=b.loadedName||"sans-serif",I=((ft=b.systemFontInfo)==null?void 0:ft.css)||`"${F}", ${b.fallbackName}`;let $="normal";b.black?$="900":b.bold&&($="bold");const ot=b.italic?"italic":"normal";let ut=n;n<V?ut=V:n>M&&(ut=M),this.current.fontSizeScale=n/ut,this.ctx.font=`${ot} ${$} ${ut}px ${I}`}setTextRenderingMode(s){this.current.textRenderingMode=s}setTextRise(s){this.current.textRise=s}moveText(s,n){this.current.x=this.current.lineX+=s,this.current.y=this.current.lineY+=n}setLeadingMoveText(s,n){this.setLeading(-n),this.moveText(s,n)}setTextMatrix(s,n,b,x,F,I){this.current.textMatrix=[s,n,b,x,F,I],this.current.textMatrixScale=Math.hypot(s,n),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(s,n,b,x){const F=this.ctx,I=this.current,$=I.font,ot=I.textRenderingMode,ut=I.fontSize/I.fontSizeScale,ft=ot&l.TextRenderingMode.FILL_STROKE_MASK,mt=!!(ot&l.TextRenderingMode.ADD_TO_PATH_FLAG),At=I.patternFill&&!$.missingFile;let vt;($.disableFontFace||mt||At)&&(vt=$.getPathGenerator(this.commonObjs,s)),$.disableFontFace||At?(F.save(),F.translate(n,b),F.beginPath(),vt(F,ut),x&&F.setTransform(...x),(ft===l.TextRenderingMode.FILL||ft===l.TextRenderingMode.FILL_STROKE)&&F.fill(),(ft===l.TextRenderingMode.STROKE||ft===l.TextRenderingMode.FILL_STROKE)&&F.stroke(),F.restore()):((ft===l.TextRenderingMode.FILL||ft===l.TextRenderingMode.FILL_STROKE)&&F.fillText(s,n,b),(ft===l.TextRenderingMode.STROKE||ft===l.TextRenderingMode.FILL_STROKE)&&F.strokeText(s,n,b)),mt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,p.getCurrentTransform)(F),x:n,y:b,fontSize:ut,addToPath:vt})}get isFontSubpixelAAEnabled(){const{context:s}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);s.scale(1.5,1),s.fillText("I",0,10);const n=s.getImageData(0,0,10,10).data;let b=!1;for(let x=3;x<n.length;x+=4)if(n[x]>0&&n[x]<255){b=!0;break}return(0,l.shadow)(this,"isFontSubpixelAAEnabled",b)}showText(s){const n=this.current,b=n.font;if(b.isType3Font)return this.showType3Text(s);const x=n.fontSize;if(x===0)return;const F=this.ctx,I=n.fontSizeScale,$=n.charSpacing,ot=n.wordSpacing,ut=n.fontDirection,ft=n.textHScale*ut,mt=s.length,At=b.vertical,vt=At?1:-1,tt=b.defaultVMetrics,nt=x*n.fontMatrix[0],A=n.textRenderingMode===l.TextRenderingMode.FILL&&!b.disableFontFace&&!n.patternFill;F.save(),F.transform(...n.textMatrix),F.translate(n.x,n.y+n.textRise),ut>0?F.scale(ft,-1):F.scale(ft,1);let O;if(n.patternFill){F.save();const yt=n.fillColor.getPattern(F,this,(0,p.getCurrentTransformInverse)(F),P.PathType.FILL);O=(0,p.getCurrentTransform)(F),F.restore(),F.fillStyle=yt}let K=n.lineWidth;const et=n.textMatrixScale;if(et===0||K===0){const yt=n.textRenderingMode&l.TextRenderingMode.FILL_STROKE_MASK;(yt===l.TextRenderingMode.STROKE||yt===l.TextRenderingMode.FILL_STROKE)&&(K=this.getSinglePixelWidth())}else K/=et;if(I!==1&&(F.scale(I,I),K/=I),F.lineWidth=K,b.isInvalidPDFjsFont){const yt=[];let J=0;for(const Pt of s)yt.push(Pt.unicode),J+=Pt.width;F.fillText(yt.join(""),0,0),n.x+=J*nt*ft,F.restore(),this.compose();return}let pt=0,St;for(St=0;St<mt;++St){const yt=s[St];if(typeof yt=="number"){pt+=vt*yt*x/1e3;continue}let J=!1;const Pt=(yt.isSpace?ot:0)+$,Ct=yt.fontChar,Ht=yt.accent;let Bt,$t,Mt=yt.width;if(At){const qt=yt.vmetric||tt,Vt=-(yt.vmetric?qt[1]:Mt*.5)*nt,bt=qt[2]*nt;Mt=qt?-qt[0]:Mt,Bt=Vt/I,$t=(pt+bt)/I}else Bt=pt/I,$t=0;if(b.remeasure&&Mt>0){const qt=F.measureText(Ct).width*1e3/x*I;if(Mt<qt&&this.isFontSubpixelAAEnabled){const Vt=Mt/qt;J=!0,F.save(),F.scale(Vt,1),Bt/=Vt}else Mt!==qt&&(Bt+=(Mt-qt)/2e3*x/I)}if(this.contentVisible&&(yt.isInFont||b.missingFile)){if(A&&!Ht)F.fillText(Ct,Bt,$t);else if(this.paintChar(Ct,Bt,$t,O),Ht){const qt=Bt+x*Ht.offset.x/I,Vt=$t-x*Ht.offset.y/I;this.paintChar(Ht.fontChar,qt,Vt,O)}}const Ut=At?Mt*nt-Pt*ut:Mt*nt+Pt*ut;pt+=Ut,J&&F.restore()}At?n.y-=pt:n.x+=pt*ft,F.restore(),this.compose()}showType3Text(s){const n=this.ctx,b=this.current,x=b.font,F=b.fontSize,I=b.fontDirection,$=x.vertical?1:-1,ot=b.charSpacing,ut=b.wordSpacing,ft=b.textHScale*I,mt=b.fontMatrix||l.FONT_IDENTITY_MATRIX,At=s.length,vt=b.textRenderingMode===l.TextRenderingMode.INVISIBLE;let tt,nt,A,O;if(!(vt||F===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),n.transform(...b.textMatrix),n.translate(b.x,b.y),n.scale(ft,I),tt=0;tt<At;++tt){if(nt=s[tt],typeof nt=="number"){O=$*nt*F/1e3,this.ctx.translate(O,0),b.x+=O*ft;continue}const K=(nt.isSpace?ut:0)+ot,et=x.charProcOperatorList[nt.operatorListId];if(!et){(0,l.warn)(`Type3 character "${nt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=nt,this.save(),n.scale(F,F),n.transform(...mt),this.executeOperatorList(et),this.restore()),A=l.Util.applyTransform([nt.width,0],mt)[0]*F+K,n.translate(A,0),b.x+=A*ft}n.restore(),this.processingType3=null}}setCharWidth(s,n){}setCharWidthAndBounds(s,n,b,x,F,I){this.ctx.rect(b,x,F-b,I-x),this.ctx.clip(),this.endPath()}getColorN_Pattern(s){let n;if(s[0]==="TilingPattern"){const b=s[1],x=this.baseTransform||(0,p.getCurrentTransform)(this.ctx),F={createCanvasGraphics:I=>new Z(I,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};n=new P.TilingPattern(s,b,this.ctx,F,x)}else n=this._getPattern(s[1],s[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(s,n,b){const x=l.Util.makeHexColor(s,n,b);this.ctx.strokeStyle=x,this.current.strokeColor=x}setFillRGBColor(s,n,b){const x=l.Util.makeHexColor(s,n,b);this.ctx.fillStyle=x,this.current.fillColor=x,this.current.patternFill=!1}_getPattern(s,n=null){let b;return this.cachedPatterns.has(s)?b=this.cachedPatterns.get(s):(b=(0,P.getShadingPattern)(this.getObject(s)),this.cachedPatterns.set(s,b)),n&&(b.matrix=n),b}shadingFill(s){if(!this.contentVisible)return;const n=this.ctx;this.save();const b=this._getPattern(s);n.fillStyle=b.getPattern(n,this,(0,p.getCurrentTransformInverse)(n),P.PathType.SHADING);const x=(0,p.getCurrentTransformInverse)(n);if(x){const{width:F,height:I}=n.canvas,[$,ot,ut,ft]=l.Util.getAxialAlignedBoundingBox([0,0,F,I],x);this.ctx.fillRect($,ot,ut-$,ft-ot)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,l.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,l.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(s,n){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(s)&&s.length===6&&this.transform(...s),this.baseTransform=(0,p.getCurrentTransform)(this.ctx),n)){const b=n[2]-n[0],x=n[3]-n[1];this.ctx.rect(n[0],n[1],b,x),this.current.updateRectMinMax((0,p.getCurrentTransform)(this.ctx),n),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(s){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;s.isolated||(0,l.info)("TODO: Support non-isolated groups."),s.knockout&&(0,l.warn)("Knockout groups not supported.");const b=(0,p.getCurrentTransform)(n);if(s.matrix&&n.transform(...s.matrix),!s.bbox)throw new Error("Bounding box is required.");let x=l.Util.getAxialAlignedBoundingBox(s.bbox,(0,p.getCurrentTransform)(n));const F=[0,0,n.canvas.width,n.canvas.height];x=l.Util.intersect(x,F)||[0,0,0,0];const I=Math.floor(x[0]),$=Math.floor(x[1]);let ot=Math.max(Math.ceil(x[2])-I,1),ut=Math.max(Math.ceil(x[3])-$,1),ft=1,mt=1;ot>T&&(ft=ot/T,ot=T),ut>T&&(mt=ut/T,ut=T),this.current.startNewPathAndClipBox([0,0,ot,ut]);let At="groupAt"+this.groupLevel;s.smask&&(At+="_smask_"+this.smaskCounter++%2);const vt=this.cachedCanvases.getCanvas(At,ot,ut),tt=vt.context;tt.scale(1/ft,1/mt),tt.translate(-I,-$),tt.transform(...b),s.smask?this.smaskStack.push({canvas:vt.canvas,context:tt,offsetX:I,offsetY:$,scaleX:ft,scaleY:mt,subtype:s.smask.subtype,backdrop:s.smask.backdrop,transferMap:s.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(I,$),n.scale(ft,mt),n.save()),c(n,tt),this.ctx=tt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(s){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,b=this.groupStack.pop();if(this.ctx=b,this.ctx.imageSmoothingEnabled=!1,s.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const x=(0,p.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...x);const F=l.Util.getAxialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],x);this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(F)}}beginAnnotation(s,n,b,x,F){if(Y(this,ct,Ve).call(this),o(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(n)&&n.length===4){const I=n[2]-n[0],$=n[3]-n[1];if(F&&this.annotationCanvasMap){b=b.slice(),b[4]-=n[0],b[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=I,n[3]=$;const[ot,ut]=l.Util.singularValueDecompose2dScale((0,p.getCurrentTransform)(this.ctx)),{viewportScale:ft}=this,mt=Math.ceil(I*this.outputScaleX*ft),At=Math.ceil($*this.outputScaleY*ft);this.annotationCanvas=this.canvasFactory.create(mt,At);const{canvas:vt,context:tt}=this.annotationCanvas;this.annotationCanvasMap.set(s,vt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=tt,this.ctx.save(),this.ctx.setTransform(ot,0,0,-ut,0,$*ut),o(this.ctx)}else o(this.ctx),this.ctx.rect(n[0],n[1],I,$),this.ctx.clip(),this.endPath()}this.current=new y(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...b),this.transform(...x)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Y(this,ct,$e).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(s){if(!this.contentVisible)return;const n=s.count;s=this.getObject(s.data,s),s.count=n;const b=this.ctx,x=this.processingType3;if(x&&(x.compiled===void 0&&(x.compiled=g(s)),x.compiled)){x.compiled(b);return}const F=this._createMaskCanvas(s),I=F.canvas;b.save(),b.setTransform(1,0,0,1,0,0),b.drawImage(I,F.offsetX,F.offsetY),b.restore(),this.compose()}paintImageMaskXObjectRepeat(s,n,b=0,x=0,F,I){if(!this.contentVisible)return;s=this.getObject(s.data,s);const $=this.ctx;$.save();const ot=(0,p.getCurrentTransform)($);$.transform(n,b,x,F,0,0);const ut=this._createMaskCanvas(s);$.setTransform(1,0,0,1,ut.offsetX-ot[4],ut.offsetY-ot[5]);for(let ft=0,mt=I.length;ft<mt;ft+=2){const At=l.Util.transform(ot,[n,b,x,F,I[ft],I[ft+1]]),[vt,tt]=l.Util.applyTransform([0,0],At);$.drawImage(ut.canvas,vt,tt)}$.restore(),this.compose()}paintImageMaskXObjectGroup(s){if(!this.contentVisible)return;const n=this.ctx,b=this.current.fillColor,x=this.current.patternFill;for(const F of s){const{data:I,width:$,height:ot,transform:ut}=F,ft=this.cachedCanvases.getCanvas("maskCanvas",$,ot),mt=ft.context;mt.save();const At=this.getObject(I,F);E(mt,At),mt.globalCompositeOperation="source-in",mt.fillStyle=x?b.getPattern(mt,this,(0,p.getCurrentTransformInverse)(n),P.PathType.FILL):b,mt.fillRect(0,0,$,ot),mt.restore(),n.save(),n.transform(...ut),n.scale(1,-1),_(n,ft.canvas,0,0,$,ot,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(s){if(!this.contentVisible)return;const n=this.getObject(s);if(!n){(0,l.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(n)}paintImageXObjectRepeat(s,n,b,x){if(!this.contentVisible)return;const F=this.getObject(s);if(!F){(0,l.warn)("Dependent image isn't ready yet");return}const I=F.width,$=F.height,ot=[];for(let ut=0,ft=x.length;ut<ft;ut+=2)ot.push({transform:[n,0,0,b,x[ut],x[ut+1]],x:0,y:0,w:I,h:$});this.paintInlineImageXObjectGroup(F,ot)}applyTransferMapsToCanvas(s){return this.current.transferMaps!=="none"&&(s.filter=this.current.transferMaps,s.drawImage(s.canvas,0,0),s.filter="none"),s.canvas}applyTransferMapsToBitmap(s){if(this.current.transferMaps==="none")return s.bitmap;const{bitmap:n,width:b,height:x}=s,F=this.cachedCanvases.getCanvas("inlineImage",b,x),I=F.context;return I.filter=this.current.transferMaps,I.drawImage(n,0,0),I.filter="none",F.canvas}paintInlineImageXObject(s){if(!this.contentVisible)return;const n=s.width,b=s.height,x=this.ctx;if(this.save(),!l.isNodeJS){const{filter:$}=x;$!=="none"&&$!==""&&(x.filter="none")}x.scale(1/n,-1/b);let F;if(s.bitmap)F=this.applyTransferMapsToBitmap(s);else if(typeof HTMLElement=="function"&&s instanceof HTMLElement||!s.data)F=s;else{const ot=this.cachedCanvases.getCanvas("inlineImage",n,b).context;U(ot,s),F=this.applyTransferMapsToCanvas(ot)}const I=this._scaleImage(F,(0,p.getCurrentTransformInverse)(x));x.imageSmoothingEnabled=S((0,p.getCurrentTransform)(x),s.interpolate),_(x,I.img,0,0,I.paintWidth,I.paintHeight,0,-b,n,b),this.compose(),this.restore()}paintInlineImageXObjectGroup(s,n){if(!this.contentVisible)return;const b=this.ctx;let x;if(s.bitmap)x=s.bitmap;else{const F=s.width,I=s.height,ot=this.cachedCanvases.getCanvas("inlineImage",F,I).context;U(ot,s),x=this.applyTransferMapsToCanvas(ot)}for(const F of n)b.save(),b.transform(...F.transform),b.scale(1,-1),_(b,x,F.x,F.y,F.w,F.h,0,-1,1,1),b.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(s){}markPointProps(s,n){}beginMarkedContent(s){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(s,n){s==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(s){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const b=this.ctx;this.pendingClip&&(n||(this.pendingClip===Q?b.clip("evenodd"):b.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),b.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const s=(0,p.getCurrentTransform)(this.ctx);if(s[1]===0&&s[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(s[0]),Math.abs(s[3]));else{const n=Math.abs(s[0]*s[3]-s[2]*s[1]),b=Math.hypot(s[0],s[2]),x=Math.hypot(s[1],s[3]);this._cachedGetSinglePixelWidth=Math.max(b,x)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:s}=this.current,{a:n,b,c:x,d:F}=this.ctx.getTransform();let I,$;if(b===0&&x===0){const ot=Math.abs(n),ut=Math.abs(F);if(ot===ut)if(s===0)I=$=1/ot;else{const ft=ot*s;I=$=ft<1?1/ft:1}else if(s===0)I=1/ot,$=1/ut;else{const ft=ot*s,mt=ut*s;I=ft<1?1/ft:1,$=mt<1?1/mt:1}}else{const ot=Math.abs(n*F-b*x),ut=Math.hypot(n,b),ft=Math.hypot(x,F);if(s===0)I=ft/ot,$=ut/ot;else{const mt=s*ot;I=ft>mt?ft/mt:1,$=ut>mt?ut/mt:1}}this._cachedScaleForStroking[0]=I,this._cachedScaleForStroking[1]=$}return this._cachedScaleForStroking}rescaleAndStroke(s){const{ctx:n}=this,{lineWidth:b}=this.current,[x,F]=this.getScaleForStroking();if(n.lineWidth=b||1,x===1&&F===1){n.stroke();return}const I=n.getLineDash();if(s&&n.save(),n.scale(x,F),I.length>0){const $=Math.max(x,F);n.setLineDash(I.map(ot=>ot/$)),n.lineDashOffset/=$}n.stroke(),s&&n.restore()}isContentVisible(){for(let s=this.markedContentStack.length-1;s>=0;s--)if(!this.markedContentStack[s].visible)return!1;return!0}};ct=new WeakSet,Ve=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},$e=function(){if(this.pageColors){const s=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(s!=="none"){const n=this.ctx.filter;this.ctx.filter=s,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}};let q=Z;e.CanvasGraphics=q;for(const C in l.OPS)q.prototype[C]!==void 0&&(q.prototype[l.OPS[C]]=q.prototype[C])},(X,e,H)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=i;var l=H(1),p=H(6);const P={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=P;function N(g,y){if(!y)return;const U=y[2]-y[0],E=y[3]-y[1],c=new Path2D;c.rect(y[0],y[1],U,E),g.clip(c)}class V{constructor(){this.constructor===V&&(0,l.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,l.unreachable)("Abstract method `getPattern` called.")}}class M extends V{constructor(y){super(),this._type=y[1],this._bbox=y[2],this._colorStops=y[3],this._p0=y[4],this._p1=y[5],this._r0=y[6],this._r1=y[7],this.matrix=null}_createGradient(y){let U;this._type==="axial"?U=y.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(U=y.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const E of this._colorStops)U.addColorStop(E[0],E[1]);return U}getPattern(y,U,E,c){let o;if(c===P.STROKE||c===P.FILL){const r=U.current.getClippedPathBoundingBox(c,(0,p.getCurrentTransform)(y))||[0,0,0,0],h=Math.ceil(r[2]-r[0])||1,u=Math.ceil(r[3]-r[1])||1,j=U.cachedCanvases.getCanvas("pattern",h,u,!0),a=j.context;a.clearRect(0,0,a.canvas.width,a.canvas.height),a.beginPath(),a.rect(0,0,a.canvas.width,a.canvas.height),a.translate(-r[0],-r[1]),E=l.Util.transform(E,[1,0,0,1,r[0],r[1]]),a.transform(...U.baseTransform),this.matrix&&a.transform(...this.matrix),N(a,this._bbox),a.fillStyle=this._createGradient(a),a.fill(),o=y.createPattern(j.canvas,"no-repeat");const S=new DOMMatrix(E);o.setTransform(S)}else N(y,this._bbox),o=this._createGradient(y);return o}}function T(g,y,U,E,c,o,r,h){const u=y.coords,j=y.colors,a=g.data,S=g.width*4;let D;u[U+1]>u[E+1]&&(D=U,U=E,E=D,D=o,o=r,r=D),u[E+1]>u[c+1]&&(D=E,E=c,c=D,D=r,r=h,h=D),u[U+1]>u[E+1]&&(D=U,U=E,E=D,D=o,o=r,r=D);const at=(u[U]+y.offsetX)*y.scaleX,G=(u[U+1]+y.offsetY)*y.scaleY,Q=(u[E]+y.offsetX)*y.scaleX,q=(u[E+1]+y.offsetY)*y.scaleY,ct=(u[c]+y.offsetX)*y.scaleX,k=(u[c+1]+y.offsetY)*y.scaleY;if(G>=k)return;const W=j[o],Z=j[o+1],C=j[o+2],s=j[r],n=j[r+1],b=j[r+2],x=j[h],F=j[h+1],I=j[h+2],$=Math.round(G),ot=Math.round(k);let ut,ft,mt,At,vt,tt,nt,A;for(let O=$;O<=ot;O++){if(O<q){const yt=O<G?0:(G-O)/(G-q);ut=at-(at-Q)*yt,ft=W-(W-s)*yt,mt=Z-(Z-n)*yt,At=C-(C-b)*yt}else{let yt;O>k?yt=1:q===k?yt=0:yt=(q-O)/(q-k),ut=Q-(Q-ct)*yt,ft=s-(s-x)*yt,mt=n-(n-F)*yt,At=b-(b-I)*yt}let K;O<G?K=0:O>k?K=1:K=(G-O)/(G-k),vt=at-(at-ct)*K,tt=W-(W-x)*K,nt=Z-(Z-F)*K,A=C-(C-I)*K;const et=Math.round(Math.min(ut,vt)),pt=Math.round(Math.max(ut,vt));let St=S*O+et*4;for(let yt=et;yt<=pt;yt++)K=(ut-yt)/(ut-vt),K<0?K=0:K>1&&(K=1),a[St++]=ft-(ft-tt)*K|0,a[St++]=mt-(mt-nt)*K|0,a[St++]=At-(At-A)*K|0,a[St++]=255}}function d(g,y,U){const E=y.coords,c=y.colors;let o,r;switch(y.type){case"lattice":const h=y.verticesPerRow,u=Math.floor(E.length/h)-1,j=h-1;for(o=0;o<u;o++){let a=o*h;for(let S=0;S<j;S++,a++)T(g,U,E[a],E[a+1],E[a+h],c[a],c[a+1],c[a+h]),T(g,U,E[a+h+1],E[a+1],E[a+h],c[a+h+1],c[a+1],c[a+h])}break;case"triangles":for(o=0,r=E.length;o<r;o+=3)T(g,U,E[o],E[o+1],E[o+2],c[o],c[o+1],c[o+2]);break;default:throw new Error("illegal figure")}}class L extends V{constructor(y){super(),this._coords=y[2],this._colors=y[3],this._figures=y[4],this._bounds=y[5],this._bbox=y[7],this._background=y[8],this.matrix=null}_createMeshCanvas(y,U,E){const h=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),j=Math.ceil(this._bounds[2])-h,a=Math.ceil(this._bounds[3])-u,S=Math.min(Math.ceil(Math.abs(j*y[0]*1.1)),3e3),D=Math.min(Math.ceil(Math.abs(a*y[1]*1.1)),3e3),at=j/S,G=a/D,Q={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-u,scaleX:1/at,scaleY:1/G},q=S+2*2,ct=D+2*2,k=E.getCanvas("mesh",q,ct,!1),W=k.context,Z=W.createImageData(S,D);if(U){const s=Z.data;for(let n=0,b=s.length;n<b;n+=4)s[n]=U[0],s[n+1]=U[1],s[n+2]=U[2],s[n+3]=255}for(const s of this._figures)d(Z,s,Q);return W.putImageData(Z,2,2),{canvas:k.canvas,offsetX:h-2*at,offsetY:u-2*G,scaleX:at,scaleY:G}}getPattern(y,U,E,c){N(y,this._bbox);let o;if(c===P.SHADING)o=l.Util.singularValueDecompose2dScale((0,p.getCurrentTransform)(y));else if(o=l.Util.singularValueDecompose2dScale(U.baseTransform),this.matrix){const h=l.Util.singularValueDecompose2dScale(this.matrix);o=[o[0]*h[0],o[1]*h[1]]}const r=this._createMeshCanvas(o,c===P.SHADING?null:this._background,U.cachedCanvases);return c!==P.SHADING&&(y.setTransform(...U.baseTransform),this.matrix&&y.transform(...this.matrix)),y.translate(r.offsetX,r.offsetY),y.scale(r.scaleX,r.scaleY),y.createPattern(r.canvas,"no-repeat")}}class m extends V{getPattern(){return"hotpink"}}function i(g){switch(g[0]){case"RadialAxial":return new M(g);case"Mesh":return new L(g);case"Dummy":return new m}throw new Error(`Unknown IR type: ${g[0]}`)}const f={COLORED:1,UNCOLORED:2},_=class _{constructor(y,U,E,c,o){this.operatorList=y[2],this.matrix=y[3]||[1,0,0,1,0,0],this.bbox=y[4],this.xstep=y[5],this.ystep=y[6],this.paintType=y[7],this.tilingType=y[8],this.color=U,this.ctx=E,this.canvasGraphicsFactory=c,this.baseTransform=o}createPatternCanvas(y){const U=this.operatorList,E=this.bbox,c=this.xstep,o=this.ystep,r=this.paintType,h=this.tilingType,u=this.color,j=this.canvasGraphicsFactory;(0,l.info)("TilingType: "+h);const a=E[0],S=E[1],D=E[2],at=E[3],G=l.Util.singularValueDecompose2dScale(this.matrix),Q=l.Util.singularValueDecompose2dScale(this.baseTransform),q=[G[0]*Q[0],G[1]*Q[1]],ct=this.getSizeAndScale(c,this.ctx.canvas.width,q[0]),k=this.getSizeAndScale(o,this.ctx.canvas.height,q[1]),W=y.cachedCanvases.getCanvas("pattern",ct.size,k.size,!0),Z=W.context,C=j.createCanvasGraphics(Z);C.groupLevel=y.groupLevel,this.setFillAndStrokeStyleToContext(C,r,u);let s=a,n=S,b=D,x=at;return a<0&&(s=0,b+=Math.abs(a)),S<0&&(n=0,x+=Math.abs(S)),Z.translate(-(ct.scale*s),-(k.scale*n)),C.transform(ct.scale,0,0,k.scale,0,0),Z.save(),this.clipBbox(C,s,n,b,x),C.baseTransform=(0,p.getCurrentTransform)(C.ctx),C.executeOperatorList(U),C.endDrawing(),{canvas:W.canvas,scaleX:ct.scale,scaleY:k.scale,offsetX:s,offsetY:n}}getSizeAndScale(y,U,E){y=Math.abs(y);const c=Math.max(_.MAX_PATTERN_SIZE,U);let o=Math.ceil(y*E);return o>=c?o=c:E=o/y,{scale:E,size:o}}clipBbox(y,U,E,c,o){const r=c-U,h=o-E;y.ctx.rect(U,E,r,h),y.current.updateRectMinMax((0,p.getCurrentTransform)(y.ctx),[U,E,c,o]),y.clip(),y.endPath()}setFillAndStrokeStyleToContext(y,U,E){const c=y.ctx,o=y.current;switch(U){case f.COLORED:const r=this.ctx;c.fillStyle=r.fillStyle,c.strokeStyle=r.strokeStyle,o.fillColor=r.fillStyle,o.strokeColor=r.strokeStyle;break;case f.UNCOLORED:const h=l.Util.makeHexColor(E[0],E[1],E[2]);c.fillStyle=h,c.strokeStyle=h,o.fillColor=h,o.strokeColor=h;break;default:throw new l.FormatError(`Unsupported paint type: ${U}`)}}getPattern(y,U,E,c){let o=E;c!==P.SHADING&&(o=l.Util.transform(o,U.baseTransform),this.matrix&&(o=l.Util.transform(o,this.matrix)));const r=this.createPatternCanvas(U);let h=new DOMMatrix(o);h=h.translate(r.offsetX,r.offsetY),h=h.scale(1/r.scaleX,1/r.scaleY);const u=y.createPattern(r.canvas,"repeat");return u.setTransform(h),u}};wt(_,"MAX_PATTERN_SIZE",3e3);let v=_;e.TilingPattern=v},(X,e,H)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=P,e.convertToRGBA=p,e.grayToRGBA=V;var l=H(1);function p(M){switch(M.kind){case l.ImageKind.GRAYSCALE_1BPP:return P(M);case l.ImageKind.RGB_24BPP:return N(M)}return null}function P({src:M,srcPos:T=0,dest:d,width:L,height:m,nonBlackColor:i=4294967295,inverseDecode:f=!1}){const v=l.FeatureTest.isLittleEndian?4278190080:255,[_,g]=f?[i,v]:[v,i],y=L>>3,U=L&7,E=M.length;d=new Uint32Array(d.buffer);let c=0;for(let o=0;o<m;o++){for(const h=T+y;T<h;T++){const u=T<E?M[T]:255;d[c++]=u&128?g:_,d[c++]=u&64?g:_,d[c++]=u&32?g:_,d[c++]=u&16?g:_,d[c++]=u&8?g:_,d[c++]=u&4?g:_,d[c++]=u&2?g:_,d[c++]=u&1?g:_}if(U===0)continue;const r=T<E?M[T++]:255;for(let h=0;h<U;h++)d[c++]=r&1<<7-h?g:_}return{srcPos:T,destPos:c}}function N({src:M,srcPos:T=0,dest:d,destPos:L=0,width:m,height:i}){let f=0;const v=M.length>>2,_=new Uint32Array(M.buffer,T,v);if(l.FeatureTest.isLittleEndian){for(;f<v-2;f+=3,L+=4){const g=_[f],y=_[f+1],U=_[f+2];d[L]=g|4278190080,d[L+1]=g>>>24|y<<8|4278190080,d[L+2]=y>>>16|U<<16|4278190080,d[L+3]=U>>>8|4278190080}for(let g=f*4,y=M.length;g<y;g+=3)d[L++]=M[g]|M[g+1]<<8|M[g+2]<<16|4278190080}else{for(;f<v-2;f+=3,L+=4){const g=_[f],y=_[f+1],U=_[f+2];d[L]=g|255,d[L+1]=g<<24|y>>>8|255,d[L+2]=y<<16|U>>>16|255,d[L+3]=U<<8|255}for(let g=f*4,y=M.length;g<y;g+=3)d[L++]=M[g]<<24|M[g+1]<<16|M[g+2]<<8|255}return{srcPos:T,destPos:L}}function V(M,T){if(l.FeatureTest.isLittleEndian)for(let d=0,L=M.length;d<L;d++)T[d]=M[d]*65793|4278190080;else for(let d=0,L=M.length;d<L;d++)T[d]=M[d]*16843008|255}},(X,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const H=Object.create(null);e.GlobalWorkerOptions=H,H.workerPort=null,H.workerSrc=""},(X,e,H)=>{var M,Ts,Ps,Ee;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var l=H(1);const p={UNKNOWN:0,DATA:1,ERROR:2},P={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function N(m){switch(m instanceof Error||typeof m=="object"&&m!==null||(0,l.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),m.name){case"AbortException":return new l.AbortException(m.message);case"MissingPDFException":return new l.MissingPDFException(m.message);case"PasswordException":return new l.PasswordException(m.message,m.code);case"UnexpectedResponseException":return new l.UnexpectedResponseException(m.message,m.status);case"UnknownErrorException":return new l.UnknownErrorException(m.message,m.details);default:return new l.UnknownErrorException(m.message,m.toString())}}class V{constructor(i,f,v){st(this,M);this.sourceName=i,this.targetName=f,this.comObj=v,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=_=>{const g=_.data;if(g.targetName!==this.sourceName)return;if(g.stream){Y(this,M,Ps).call(this,g);return}if(g.callback){const U=g.callbackId,E=this.callbackCapabilities[U];if(!E)throw new Error(`Cannot resolve callback ${U}`);if(delete this.callbackCapabilities[U],g.callback===p.DATA)E.resolve(g.data);else if(g.callback===p.ERROR)E.reject(N(g.reason));else throw new Error("Unexpected callback case");return}const y=this.actionHandler[g.action];if(!y)throw new Error(`Unknown action from worker: ${g.action}`);if(g.callbackId){const U=this.sourceName,E=g.sourceName;new Promise(function(c){c(y(g.data))}).then(function(c){v.postMessage({sourceName:U,targetName:E,callback:p.DATA,callbackId:g.callbackId,data:c})},function(c){v.postMessage({sourceName:U,targetName:E,callback:p.ERROR,callbackId:g.callbackId,reason:N(c)})});return}if(g.streamId){Y(this,M,Ts).call(this,g);return}y(g.data)},v.addEventListener("message",this._onComObjOnMessage)}on(i,f){const v=this.actionHandler;if(v[i])throw new Error(`There is already an actionName called "${i}"`);v[i]=f}send(i,f,v){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:i,data:f},v)}sendWithPromise(i,f,v){const _=this.callbackId++,g=new l.PromiseCapability;this.callbackCapabilities[_]=g;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:i,callbackId:_,data:f},v)}catch(y){g.reject(y)}return g.promise}sendWithStream(i,f,v,_){const g=this.streamId++,y=this.sourceName,U=this.targetName,E=this.comObj;return new ReadableStream({start:c=>{const o=new l.PromiseCapability;return this.streamControllers[g]={controller:c,startCall:o,pullCall:null,cancelCall:null,isClosed:!1},E.postMessage({sourceName:y,targetName:U,action:i,streamId:g,data:f,desiredSize:c.desiredSize},_),o.promise},pull:c=>{const o=new l.PromiseCapability;return this.streamControllers[g].pullCall=o,E.postMessage({sourceName:y,targetName:U,stream:P.PULL,streamId:g,desiredSize:c.desiredSize}),o.promise},cancel:c=>{(0,l.assert)(c instanceof Error,"cancel must have a valid reason");const o=new l.PromiseCapability;return this.streamControllers[g].cancelCall=o,this.streamControllers[g].isClosed=!0,E.postMessage({sourceName:y,targetName:U,stream:P.CANCEL,streamId:g,reason:N(c)}),o.promise}},v)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}M=new WeakSet,Ts=function(i){const f=i.streamId,v=this.sourceName,_=i.sourceName,g=this.comObj,y=this,U=this.actionHandler[i.action],E={enqueue(c,o=1,r){if(this.isCancelled)return;const h=this.desiredSize;this.desiredSize-=o,h>0&&this.desiredSize<=0&&(this.sinkCapability=new l.PromiseCapability,this.ready=this.sinkCapability.promise),g.postMessage({sourceName:v,targetName:_,stream:P.ENQUEUE,streamId:f,chunk:c},r)},close(){this.isCancelled||(this.isCancelled=!0,g.postMessage({sourceName:v,targetName:_,stream:P.CLOSE,streamId:f}),delete y.streamSinks[f])},error(c){(0,l.assert)(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,g.postMessage({sourceName:v,targetName:_,stream:P.ERROR,streamId:f,reason:N(c)}))},sinkCapability:new l.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:i.desiredSize,ready:null};E.sinkCapability.resolve(),E.ready=E.sinkCapability.promise,this.streamSinks[f]=E,new Promise(function(c){c(U(i.data,E))}).then(function(){g.postMessage({sourceName:v,targetName:_,stream:P.START_COMPLETE,streamId:f,success:!0})},function(c){g.postMessage({sourceName:v,targetName:_,stream:P.START_COMPLETE,streamId:f,reason:N(c)})})},Ps=function(i){const f=i.streamId,v=this.sourceName,_=i.sourceName,g=this.comObj,y=this.streamControllers[f],U=this.streamSinks[f];switch(i.stream){case P.START_COMPLETE:i.success?y.startCall.resolve():y.startCall.reject(N(i.reason));break;case P.PULL_COMPLETE:i.success?y.pullCall.resolve():y.pullCall.reject(N(i.reason));break;case P.PULL:if(!U){g.postMessage({sourceName:v,targetName:_,stream:P.PULL_COMPLETE,streamId:f,success:!0});break}U.desiredSize<=0&&i.desiredSize>0&&U.sinkCapability.resolve(),U.desiredSize=i.desiredSize,new Promise(function(E){var c;E((c=U.onPull)==null?void 0:c.call(U))}).then(function(){g.postMessage({sourceName:v,targetName:_,stream:P.PULL_COMPLETE,streamId:f,success:!0})},function(E){g.postMessage({sourceName:v,targetName:_,stream:P.PULL_COMPLETE,streamId:f,reason:N(E)})});break;case P.ENQUEUE:if((0,l.assert)(y,"enqueue should have stream controller"),y.isClosed)break;y.controller.enqueue(i.chunk);break;case P.CLOSE:if((0,l.assert)(y,"close should have stream controller"),y.isClosed)break;y.isClosed=!0,y.controller.close(),Y(this,M,Ee).call(this,y,f);break;case P.ERROR:(0,l.assert)(y,"error should have stream controller"),y.controller.error(N(i.reason)),Y(this,M,Ee).call(this,y,f);break;case P.CANCEL_COMPLETE:i.success?y.cancelCall.resolve():y.cancelCall.reject(N(i.reason)),Y(this,M,Ee).call(this,y,f);break;case P.CANCEL:if(!U)break;new Promise(function(E){var c;E((c=U.onCancel)==null?void 0:c.call(U,N(i.reason)))}).then(function(){g.postMessage({sourceName:v,targetName:_,stream:P.CANCEL_COMPLETE,streamId:f,success:!0})},function(E){g.postMessage({sourceName:v,targetName:_,stream:P.CANCEL_COMPLETE,streamId:f,reason:N(E)})}),U.sinkCapability.reject(N(i.reason)),U.isCancelled=!0,delete this.streamSinks[f];break;default:throw new Error("Unexpected stream case")}},Ee=async function(i,f){var v,_,g;await Promise.allSettled([(v=i.startCall)==null?void 0:v.promise,(_=i.pullCall)==null?void 0:_.promise,(g=i.cancelCall)==null?void 0:g.promise]),delete this.streamControllers[f]},e.MessageHandler=V},(X,e,H)=>{var P,N;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var l=H(1);class p{constructor({parsedData:M,rawData:T}){st(this,P);st(this,N);rt(this,P,M),rt(this,N,T)}getRaw(){return t(this,N)}get(M){var T;return(T=t(this,P).get(M))!=null?T:null}getAll(){return(0,l.objectFromMap)(t(this,P))}has(M){return t(this,P).has(M)}}P=new WeakMap,N=new WeakMap,e.Metadata=p},(X,e,H)=>{var M,T,d,L,m,i,Ye;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var l=H(1),p=H(8);const P=Symbol("INTERNAL");class N{constructor(_,g){st(this,M,!0);this.name=_,this.intent=g}get visible(){return t(this,M)}_setVisible(_,g){_!==P&&(0,l.unreachable)("Internal method `_setVisible` called."),rt(this,M,g)}}M=new WeakMap;class V{constructor(_){st(this,i);st(this,T,null);st(this,d,new Map);st(this,L,null);st(this,m,null);if(this.name=null,this.creator=null,_!==null){this.name=_.name,this.creator=_.creator,rt(this,m,_.order);for(const g of _.groups)t(this,d).set(g.id,new N(g.name,g.intent));if(_.baseState==="OFF")for(const g of t(this,d).values())g._setVisible(P,!1);for(const g of _.on)t(this,d).get(g)._setVisible(P,!0);for(const g of _.off)t(this,d).get(g)._setVisible(P,!1);rt(this,L,this.getHash())}}isVisible(_){if(t(this,d).size===0)return!0;if(!_)return(0,l.warn)("Optional content group not defined."),!0;if(_.type==="OCG")return t(this,d).has(_.id)?t(this,d).get(_.id).visible:((0,l.warn)(`Optional content group not found: ${_.id}`),!0);if(_.type==="OCMD"){if(_.expression)return Y(this,i,Ye).call(this,_.expression);if(!_.policy||_.policy==="AnyOn"){for(const g of _.ids){if(!t(this,d).has(g))return(0,l.warn)(`Optional content group not found: ${g}`),!0;if(t(this,d).get(g).visible)return!0}return!1}else if(_.policy==="AllOn"){for(const g of _.ids){if(!t(this,d).has(g))return(0,l.warn)(`Optional content group not found: ${g}`),!0;if(!t(this,d).get(g).visible)return!1}return!0}else if(_.policy==="AnyOff"){for(const g of _.ids){if(!t(this,d).has(g))return(0,l.warn)(`Optional content group not found: ${g}`),!0;if(!t(this,d).get(g).visible)return!0}return!1}else if(_.policy==="AllOff"){for(const g of _.ids){if(!t(this,d).has(g))return(0,l.warn)(`Optional content group not found: ${g}`),!0;if(t(this,d).get(g).visible)return!1}return!0}return(0,l.warn)(`Unknown optional content policy ${_.policy}.`),!0}return(0,l.warn)(`Unknown group type ${_.type}.`),!0}setVisibility(_,g=!0){if(!t(this,d).has(_)){(0,l.warn)(`Optional content group not found: ${_}`);return}t(this,d).get(_)._setVisible(P,!!g),rt(this,T,null)}get hasInitialVisibility(){return t(this,L)===null||this.getHash()===t(this,L)}getOrder(){return t(this,d).size?t(this,m)?t(this,m).slice():[...t(this,d).keys()]:null}getGroups(){return t(this,d).size>0?(0,l.objectFromMap)(t(this,d)):null}getGroup(_){return t(this,d).get(_)||null}getHash(){if(t(this,T)!==null)return t(this,T);const _=new p.MurmurHash3_64;for(const[g,y]of t(this,d))_.update(`${g}:${y.visible}`);return rt(this,T,_.hexdigest())}}T=new WeakMap,d=new WeakMap,L=new WeakMap,m=new WeakMap,i=new WeakSet,Ye=function(_){const g=_.length;if(g<2)return!0;const y=_[0];for(let U=1;U<g;U++){const E=_[U];let c;if(Array.isArray(E))c=Y(this,i,Ye).call(this,E);else if(t(this,d).has(E))c=t(this,d).get(E).visible;else return(0,l.warn)(`Optional content group not found: ${E}`),!0;switch(y){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return y==="And"},e.OptionalContentConfig=V},(X,e,H)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var l=H(1),p=H(6);class P{constructor({length:T,initialData:d,progressiveDone:L=!1,contentDispositionFilename:m=null,disableRange:i=!1,disableStream:f=!1},v){if((0,l.assert)(v,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=L,this._contentDispositionFilename=m,(d==null?void 0:d.length)>0){const _=d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer;this._queuedChunks.push(_)}this._pdfDataRangeTransport=v,this._isStreamingSupported=!f,this._isRangeSupported=!i,this._contentLength=T,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((_,g)=>{this._onReceiveData({begin:_,chunk:g})}),this._pdfDataRangeTransport.addProgressListener((_,g)=>{this._onProgress({loaded:_,total:g})}),this._pdfDataRangeTransport.addProgressiveReadListener(_=>{this._onReceiveData({chunk:_})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:T,chunk:d}){const L=d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer;if(T===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(L):this._queuedChunks.push(L);else{const m=this._rangeReaders.some(function(i){return i._begin!==T?!1:(i._enqueue(L),!0)});(0,l.assert)(m,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var T,d;return(d=(T=this._fullRequestReader)==null?void 0:T._loaded)!=null?d:0}_onProgress(T){var d,L,m,i;T.total===void 0?(L=(d=this._rangeReaders[0])==null?void 0:d.onProgress)==null||L.call(d,{loaded:T.loaded}):(i=(m=this._fullRequestReader)==null?void 0:m.onProgress)==null||i.call(m,{loaded:T.loaded,total:T.total})}_onProgressiveDone(){var T;(T=this._fullRequestReader)==null||T.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(T){const d=this._rangeReaders.indexOf(T);d>=0&&this._rangeReaders.splice(d,1)}getFullReader(){(0,l.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const T=this._queuedChunks;return this._queuedChunks=null,new N(this,T,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(T,d){if(d<=this._progressiveDataLength)return null;const L=new V(this,T,d);return this._pdfDataRangeTransport.requestDataRange(T,d),this._rangeReaders.push(L),L}cancelAllRequests(T){var d;(d=this._fullRequestReader)==null||d.cancel(T);for(const L of this._rangeReaders.slice(0))L.cancel(T);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=P;class N{constructor(T,d,L=!1,m=null){this._stream=T,this._done=L||!1,this._filename=(0,p.isPdfFile)(m)?m:null,this._queuedChunks=d||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),T._fullRequestReader=this,this.onProgress=null}_enqueue(T){this._done||(this._requests.length>0?this._requests.shift().resolve({value:T,done:!1}):this._queuedChunks.push(T),this._loaded+=T.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const T=new l.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class V{constructor(T,d,L){this._stream=T,this._begin=d,this._end=L,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(T){if(!this._done){if(this._requests.length===0)this._queuedChunk=T;else{this._requests.shift().resolve({value:T,done:!1});for(const L of this._requests)L.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const d=this._queuedChunk;return this._queuedChunk=null,{value:d,done:!1}}if(this._done)return{value:void 0,done:!0};const T=new l.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(X,e,H)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var l=H(1),p=H(20);function P(L,m,i){return{method:"GET",headers:L,signal:i.signal,mode:"cors",credentials:m?"include":"same-origin",redirect:"follow"}}function N(L){const m=new Headers;for(const i in L){const f=L[i];f!==void 0&&m.append(i,f)}return m}function V(L){return L instanceof Uint8Array?L.buffer:L instanceof ArrayBuffer?L:((0,l.warn)(`getArrayBuffer - unexpected data format: ${L}`),new Uint8Array(L).buffer)}class M{constructor(m){this.source=m,this.isHttp=/^https?:/i.test(m.url),this.httpHeaders=this.isHttp&&m.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var m,i;return(i=(m=this._fullRequestReader)==null?void 0:m._loaded)!=null?i:0}getFullReader(){return(0,l.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new T(this),this._fullRequestReader}getRangeReader(m,i){if(i<=this._progressiveDataLength)return null;const f=new d(this,m,i);return this._rangeRequestReaders.push(f),f}cancelAllRequests(m){var i;(i=this._fullRequestReader)==null||i.cancel(m);for(const f of this._rangeRequestReaders.slice(0))f.cancel(m)}}e.PDFFetchStream=M;class T{constructor(m){this._stream=m,this._reader=null,this._loaded=0,this._filename=null;const i=m.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=new l.PromiseCapability,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._headers=N(this._stream.httpHeaders);const f=i.url;fetch(f,P(this._headers,this._withCredentials,this._abortController)).then(v=>{if(!(0,p.validateResponseStatus)(v.status))throw(0,p.createResponseStatusError)(v.status,f);this._reader=v.body.getReader(),this._headersCapability.resolve();const _=U=>v.headers.get(U),{allowRangeRequests:g,suggestedLength:y}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=g,this._contentLength=y||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(_),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new l.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var f;await this._headersCapability.promise;const{value:m,done:i}=await this._reader.read();return i?{value:m,done:i}:(this._loaded+=m.byteLength,(f=this.onProgress)==null||f.call(this,{loaded:this._loaded,total:this._contentLength}),{value:V(m),done:!1})}cancel(m){var i;(i=this._reader)==null||i.cancel(m),this._abortController.abort()}}class d{constructor(m,i,f){this._stream=m,this._reader=null,this._loaded=0;const v=m.source;this._withCredentials=v.withCredentials||!1,this._readCapability=new l.PromiseCapability,this._isStreamingSupported=!v.disableStream,this._abortController=new AbortController,this._headers=N(this._stream.httpHeaders),this._headers.append("Range",`bytes=${i}-${f-1}`);const _=v.url;fetch(_,P(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,p.validateResponseStatus)(g.status))throw(0,p.createResponseStatusError)(g.status,_);this._readCapability.resolve(),this._reader=g.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var f;await this._readCapability.promise;const{value:m,done:i}=await this._reader.read();return i?{value:m,done:i}:(this._loaded+=m.byteLength,(f=this.onProgress)==null||f.call(this,{loaded:this._loaded}),{value:V(m),done:!1})}cancel(m){var i;(i=this._reader)==null||i.cancel(m),this._abortController.abort()}}},(X,e,H)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=M,e.extractFilenameFromHeader=V,e.validateRangeRequestCapabilities=N,e.validateResponseStatus=T;var l=H(1),p=H(21),P=H(6);function N({getResponseHeader:d,isHttp:L,rangeChunkSize:m,disableRange:i}){const f={allowRangeRequests:!1,suggestedLength:void 0},v=parseInt(d("Content-Length"),10);return!Number.isInteger(v)||(f.suggestedLength=v,v<=2*m)||i||!L||d("Accept-Ranges")!=="bytes"||(d("Content-Encoding")||"identity")!=="identity"||(f.allowRangeRequests=!0),f}function V(d){const L=d("Content-Disposition");if(L){let m=(0,p.getFilenameFromContentDispositionHeader)(L);if(m.includes("%"))try{m=decodeURIComponent(m)}catch(i){}if((0,P.isPdfFile)(m))return m}return null}function M(d,L){return d===404||d===0&&L.startsWith("file:")?new l.MissingPDFException('Missing PDF "'+L+'".'):new l.UnexpectedResponseException(`Unexpected server response (${d}) while retrieving PDF "${L}".`,d)}function T(d){return d===200||d===206}},(X,e,H)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=p;var l=H(1);function p(P){let N=!0,V=M("filename\\*","i").exec(P);if(V){V=V[1];let v=m(V);return v=unescape(v),v=i(v),v=f(v),d(v)}if(V=L(P),V){const v=f(V);return d(v)}if(V=M("filename","i").exec(P),V){V=V[1];let v=m(V);return v=f(v),d(v)}function M(v,_){return new RegExp("(?:^|;)\\s*"+v+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',_)}function T(v,_){if(v){if(!/^[\x00-\xFF]+$/.test(_))return _;try{const g=new TextDecoder(v,{fatal:!0}),y=(0,l.stringToBytes)(_);_=g.decode(y),N=!1}catch(g){}}return _}function d(v){return N&&/[\x80-\xff]/.test(v)&&(v=T("utf-8",v),N&&(v=T("iso-8859-1",v))),v}function L(v){const _=[];let g;const y=M("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=y.exec(v))!==null;){let[,E,c,o]=g;if(E=parseInt(E,10),E in _){if(E===0)break;continue}_[E]=[c,o]}const U=[];for(let E=0;E<_.length&&E in _;++E){let[c,o]=_[E];o=m(o),c&&(o=unescape(o),E===0&&(o=i(o))),U.push(o)}return U.join("")}function m(v){if(v.startsWith('"')){const _=v.slice(1).split('\\"');for(let g=0;g<_.length;++g){const y=_[g].indexOf('"');y!==-1&&(_[g]=_[g].slice(0,y),_.length=g+1),_[g]=_[g].replaceAll(/\\(.)/g,"$1")}v=_.join('"')}return v}function i(v){const _=v.indexOf("'");if(_===-1)return v;const g=v.slice(0,_),U=v.slice(_+1).replace(/^[^']*'/,"");return T(g,U)}function f(v){return!v.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(v)?v:v.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(_,g,y,U){if(y==="q"||y==="Q")return U=U.replaceAll("_"," "),U=U.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,c){return String.fromCharCode(parseInt(c,16))}),T(g,U);try{U=atob(U)}catch(E){}return T(g,U)})}return""}},(X,e,H)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var l=H(1),p=H(20);const P=200,N=206;function V(m){const i=m.response;return typeof i!="string"?i:(0,l.stringToBytes)(i).buffer}class M{constructor(i,f={}){this.url=i,this.isHttp=/^https?:/i.test(i),this.httpHeaders=this.isHttp&&f.httpHeaders||Object.create(null),this.withCredentials=f.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(i,f,v){const _={begin:i,end:f};for(const g in v)_[g]=v[g];return this.request(_)}requestFull(i){return this.request(i)}request(i){const f=new XMLHttpRequest,v=this.currXhrId++,_=this.pendingRequests[v]={xhr:f};f.open("GET",this.url),f.withCredentials=this.withCredentials;for(const g in this.httpHeaders){const y=this.httpHeaders[g];y!==void 0&&f.setRequestHeader(g,y)}return this.isHttp&&"begin"in i&&"end"in i?(f.setRequestHeader("Range",`bytes=${i.begin}-${i.end-1}`),_.expectedStatus=N):_.expectedStatus=P,f.responseType="arraybuffer",i.onError&&(f.onerror=function(g){i.onError(f.status)}),f.onreadystatechange=this.onStateChange.bind(this,v),f.onprogress=this.onProgress.bind(this,v),_.onHeadersReceived=i.onHeadersReceived,_.onDone=i.onDone,_.onError=i.onError,_.onProgress=i.onProgress,f.send(null),v}onProgress(i,f){var _;const v=this.pendingRequests[i];v&&((_=v.onProgress)==null||_.call(v,f))}onStateChange(i,f){var E,c,o;const v=this.pendingRequests[i];if(!v)return;const _=v.xhr;if(_.readyState>=2&&v.onHeadersReceived&&(v.onHeadersReceived(),delete v.onHeadersReceived),_.readyState!==4||!(i in this.pendingRequests))return;if(delete this.pendingRequests[i],_.status===0&&this.isHttp){(E=v.onError)==null||E.call(v,_.status);return}const g=_.status||P;if(!(g===P&&v.expectedStatus===N)&&g!==v.expectedStatus){(c=v.onError)==null||c.call(v,_.status);return}const U=V(_);if(g===N){const r=_.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(r);v.onDone({begin:parseInt(h[1],10),chunk:U})}else U?v.onDone({begin:0,chunk:U}):(o=v.onError)==null||o.call(v,_.status)}getRequestXhr(i){return this.pendingRequests[i].xhr}isPendingRequest(i){return i in this.pendingRequests}abortRequest(i){const f=this.pendingRequests[i].xhr;delete this.pendingRequests[i],f.abort()}}class T{constructor(i){this._source=i,this._manager=new M(i.url,{httpHeaders:i.httpHeaders,withCredentials:i.withCredentials}),this._rangeChunkSize=i.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(i){const f=this._rangeRequestReaders.indexOf(i);f>=0&&this._rangeRequestReaders.splice(f,1)}getFullReader(){return(0,l.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new d(this._manager,this._source),this._fullRequestReader}getRangeReader(i,f){const v=new L(this._manager,i,f);return v.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(v),v}cancelAllRequests(i){var f;(f=this._fullRequestReader)==null||f.cancel(i);for(const v of this._rangeRequestReaders.slice(0))v.cancel(i)}}e.PDFNetworkStream=T;class d{constructor(i,f){this._manager=i;const v={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=f.url,this._fullRequestId=i.requestFull(v),this._headersReceivedCapability=new l.PromiseCapability,this._disableRange=f.disableRange||!1,this._contentLength=f.length,this._rangeChunkSize=f.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const i=this._fullRequestId,f=this._manager.getRequestXhr(i),v=y=>f.getResponseHeader(y),{allowRangeRequests:_,suggestedLength:g}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});_&&(this._isRangeSupported=!0),this._contentLength=g||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(v),this._isRangeSupported&&this._manager.abortRequest(i),this._headersReceivedCapability.resolve()}_onDone(i){if(i&&(this._requests.length>0?this._requests.shift().resolve({value:i.chunk,done:!1}):this._cachedChunks.push(i.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(i){this._storedError=(0,p.createResponseStatusError)(i,this._url),this._headersReceivedCapability.reject(this._storedError);for(const f of this._requests)f.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(i){var f;(f=this.onProgress)==null||f.call(this,{loaded:i.loaded,total:i.lengthComputable?i.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const i=new l.PromiseCapability;return this._requests.push(i),i.promise}cancel(i){this._done=!0,this._headersReceivedCapability.reject(i);for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class L{constructor(i,f,v){this._manager=i;const _={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=i.url,this._requestId=i.requestRange(f,v,_),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var i;(i=this.onClosed)==null||i.call(this,this)}_onDone(i){const f=i.chunk;this._requests.length>0?this._requests.shift().resolve({value:f,done:!1}):this._queuedChunk=f,this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(i){this._storedError=(0,p.createResponseStatusError)(i,this._url);for(const f of this._requests)f.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(i){var f;this.isStreamingSupported||(f=this.onProgress)==null||f.call(this,{loaded:i.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const i=new l.PromiseCapability;return this._requests.push(i),i.promise}cancel(i){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(X,e,H)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var l=H(1),p=H(20);const P=/^file:\/\/\/[a-zA-Z]:\//;function N(v){const _=requireUrl(),g=_.parse(v);return g.protocol==="file:"||g.host?g:/^[a-z]:[/\\]/i.test(v)?_.parse(`file:///${v}`):(g.host||(g.protocol="file:"),g)}class V{constructor(_){this.source=_,this.url=N(_.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&_.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var _,g;return(g=(_=this._fullRequestReader)==null?void 0:_._loaded)!=null?g:0}getFullReader(){return(0,l.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new i(this):new L(this),this._fullRequestReader}getRangeReader(_,g){if(g<=this._progressiveDataLength)return null;const y=this.isFsUrl?new f(this,_,g):new m(this,_,g);return this._rangeRequestReaders.push(y),y}cancelAllRequests(_){var g;(g=this._fullRequestReader)==null||g.cancel(_);for(const y of this._rangeRequestReaders.slice(0))y.cancel(_)}}e.PDFNodeStream=V;class M{constructor(_){this._url=_.url,this._done=!1,this._storedError=null,this.onProgress=null;const g=_.source;this._contentLength=g.length,this._loaded=0,this._filename=null,this._disableRange=g.disableRange||!1,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!g.disableStream,this._isRangeSupported=!g.disableRange,this._readableStream=null,this._readCapability=new l.PromiseCapability,this._headersCapability=new l.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var y;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const _=this._readableStream.read();return _===null?(this._readCapability=new l.PromiseCapability,this.read()):(this._loaded+=_.length,(y=this.onProgress)==null||y.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(_).buffer,done:!1})}cancel(_){if(!this._readableStream){this._error(_);return}this._readableStream.destroy(_)}_error(_){this._storedError=_,this._readCapability.resolve()}_setReadableStream(_){this._readableStream=_,_.on("readable",()=>{this._readCapability.resolve()}),_.on("end",()=>{_.destroy(),this._done=!0,this._readCapability.resolve()}),_.on("error",g=>{this._error(g)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new l.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class T{constructor(_){this._url=_.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new l.PromiseCapability;const g=_.source;this._isStreamingSupported=!g.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var y;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const _=this._readableStream.read();return _===null?(this._readCapability=new l.PromiseCapability,this.read()):(this._loaded+=_.length,(y=this.onProgress)==null||y.call(this,{loaded:this._loaded}),{value:new Uint8Array(_).buffer,done:!1})}cancel(_){if(!this._readableStream){this._error(_);return}this._readableStream.destroy(_)}_error(_){this._storedError=_,this._readCapability.resolve()}_setReadableStream(_){this._readableStream=_,_.on("readable",()=>{this._readCapability.resolve()}),_.on("end",()=>{_.destroy(),this._done=!0,this._readCapability.resolve()}),_.on("error",g=>{this._error(g)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function d(v,_){return{protocol:v.protocol,auth:v.auth,host:v.hostname,port:v.port,path:v.path,method:"GET",headers:_}}class L extends M{constructor(_){super(_);const g=y=>{if(y.statusCode===404){const o=new l.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=o,this._headersCapability.reject(o);return}this._headersCapability.resolve(),this._setReadableStream(y);const U=o=>this._readableStream.headers[o.toLowerCase()],{allowRangeRequests:E,suggestedLength:c}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:U,isHttp:_.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=E,this._contentLength=c||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(U)};if(this._request=null,this._url.protocol==="http:"){const y=requireHttp();this._request=y.request(d(this._url,_.httpHeaders),g)}else{const y=requireProxy();this._request=y.request(d(this._url,_.httpHeaders),g)}this._request.on("error",y=>{this._storedError=y,this._headersCapability.reject(y)}),this._request.end()}}class m extends T{constructor(_,g,y){super(_),this._httpHeaders={};for(const E in _.httpHeaders){const c=_.httpHeaders[E];c!==void 0&&(this._httpHeaders[E]=c)}this._httpHeaders.Range=`bytes=${g}-${y-1}`;const U=E=>{if(E.statusCode===404){const c=new l.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=c;return}this._setReadableStream(E)};if(this._request=null,this._url.protocol==="http:"){const E=requireHttp();this._request=E.request(d(this._url,this._httpHeaders),U)}else{const E=requireProxy();this._request=E.request(d(this._url,this._httpHeaders),U)}this._request.on("error",E=>{this._storedError=E}),this._request.end()}}class i extends M{constructor(_){super(_);let g=decodeURIComponent(this._url.path);P.test(this._url.href)&&(g=g.replace(/^\//,""));const y=requireFs();y.lstat(g,(U,E)=>{if(U){U.code==="ENOENT"&&(U=new l.MissingPDFException(`Missing PDF "${g}".`)),this._storedError=U,this._headersCapability.reject(U);return}this._contentLength=E.size,this._setReadableStream(y.createReadStream(g)),this._headersCapability.resolve()})}}class f extends T{constructor(_,g,y){super(_);let U=decodeURIComponent(this._url.path);P.test(this._url.href)&&(U=U.replace(/^\//,""));const E=requireFs();this._setReadableStream(E.createReadStream(U,{start:g,end:y-1}))}}},(X,e,H)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var l=H(6),p=H(1);const P={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},N="http://www.w3.org/XML/1998/namespace",V="http://www.w3.org/1999/xlink",M=["butt","round","square"],T=["miter","round","bevel"],d=function(E,c="",o=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!o)return URL.createObjectURL(new Blob([E],{type:c}));const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let h=`data:${c};base64,`;for(let u=0,j=E.length;u<j;u+=3){const a=E[u]&255,S=E[u+1]&255,D=E[u+2]&255,at=a>>2,G=(a&3)<<4|S>>4,Q=u+1<j?(S&15)<<2|D>>6:64,q=u+2<j?D&63:64;h+=r[at]+r[G]+r[Q]+r[q]}return h},L=function(){const E=new Uint8Array([137,80,78,71,13,10,26,10]),c=12,o=new Int32Array(256);for(let D=0;D<256;D++){let at=D;for(let G=0;G<8;G++)at=at&1?3988292384^at>>1&2147483647:at>>1&2147483647;o[D]=at}function r(D,at,G){let Q=-1;for(let q=at;q<G;q++){const ct=(Q^D[q])&255,k=o[ct];Q=Q>>>8^k}return Q^-1}function h(D,at,G,Q){let q=Q;const ct=at.length;G[q]=ct>>24&255,G[q+1]=ct>>16&255,G[q+2]=ct>>8&255,G[q+3]=ct&255,q+=4,G[q]=D.charCodeAt(0)&255,G[q+1]=D.charCodeAt(1)&255,G[q+2]=D.charCodeAt(2)&255,G[q+3]=D.charCodeAt(3)&255,q+=4,G.set(at,q),q+=at.length;const k=r(G,Q+4,q);G[q]=k>>24&255,G[q+1]=k>>16&255,G[q+2]=k>>8&255,G[q+3]=k&255}function u(D,at,G){let Q=1,q=0;for(let ct=at;ct<G;++ct)Q=(Q+(D[ct]&255))%65521,q=(q+Q)%65521;return q<<16|Q}function j(D){if(!p.isNodeJS)return a(D);try{const at=parseInt(process.versions.node)>=8?D:Buffer.from(D),G=requireProxy().deflateSync(at,{level:9});return G instanceof Uint8Array?G:new Uint8Array(G)}catch(at){(0,p.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+at)}return a(D)}function a(D){let at=D.length;const G=65535,Q=Math.ceil(at/G),q=new Uint8Array(2+at+Q*5+4);let ct=0;q[ct++]=120,q[ct++]=156;let k=0;for(;at>G;)q[ct++]=0,q[ct++]=255,q[ct++]=255,q[ct++]=0,q[ct++]=0,q.set(D.subarray(k,k+G),ct),ct+=G,k+=G,at-=G;q[ct++]=1,q[ct++]=at&255,q[ct++]=at>>8&255,q[ct++]=~at&65535&255,q[ct++]=(~at&65535)>>8&255,q.set(D.subarray(k),ct),ct+=D.length-k;const W=u(D,0,D.length);return q[ct++]=W>>24&255,q[ct++]=W>>16&255,q[ct++]=W>>8&255,q[ct++]=W&255,q}function S(D,at,G,Q){const q=D.width,ct=D.height;let k,W,Z;const C=D.data;switch(at){case p.ImageKind.GRAYSCALE_1BPP:W=0,k=1,Z=q+7>>3;break;case p.ImageKind.RGB_24BPP:W=2,k=8,Z=q*3;break;case p.ImageKind.RGBA_32BPP:W=6,k=8,Z=q*4;break;default:throw new Error("invalid format")}const s=new Uint8Array((1+Z)*ct);let n=0,b=0;for(let ut=0;ut<ct;++ut)s[n++]=0,s.set(C.subarray(b,b+Z),n),b+=Z,n+=Z;if(at===p.ImageKind.GRAYSCALE_1BPP&&Q){n=0;for(let ut=0;ut<ct;ut++){n++;for(let ft=0;ft<Z;ft++)s[n++]^=255}}const x=new Uint8Array([q>>24&255,q>>16&255,q>>8&255,q&255,ct>>24&255,ct>>16&255,ct>>8&255,ct&255,k,W,0,0,0]),F=j(s),I=E.length+c*3+x.length+F.length,$=new Uint8Array(I);let ot=0;return $.set(E,ot),ot+=E.length,h("IHDR",x,$,ot),ot+=c+x.length,h("IDATA",F,$,ot),ot+=c+F.length,h("IEND",new Uint8Array(0),$,ot),d($,"image/png",G)}return function(at,G,Q){const q=at.kind===void 0?p.ImageKind.GRAYSCALE_1BPP:at.kind;return S(at,q,G,Q)}}();class m{constructor(){this.fontSizeScale=1,this.fontWeight=P.fontWeight,this.fontSize=0,this.textMatrix=p.IDENTITY_MATRIX,this.fontMatrix=p.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=p.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=P.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(c,o){this.x=c,this.y=o}}function i(E){let c=[];const o=[];for(const r of E){if(r.fn==="save"){c.push({fnId:92,fn:"group",items:[]}),o.push(c),c=c.at(-1).items;continue}r.fn==="restore"?c=o.pop():c.push(r)}return c}function f(E){if(Number.isInteger(E))return E.toString();const c=E.toFixed(10);let o=c.length-1;if(c[o]!=="0")return c;do o--;while(c[o]==="0");return c.substring(0,c[o]==="."?o:o+1)}function v(E){if(E[4]===0&&E[5]===0){if(E[1]===0&&E[2]===0)return E[0]===1&&E[3]===1?"":`scale(${f(E[0])} ${f(E[3])})`;if(E[0]===E[3]&&E[1]===-E[2]){const c=Math.acos(E[0])*180/Math.PI;return`rotate(${f(c)})`}}else if(E[0]===1&&E[1]===0&&E[2]===0&&E[3]===1)return`translate(${f(E[4])} ${f(E[5])})`;return`matrix(${f(E[0])} ${f(E[1])} ${f(E[2])} ${f(E[3])} ${f(E[4])} ${f(E[5])})`}let _=0,g=0,y=0;class U{constructor(c,o,r=!1){(0,l.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new l.DOMSVGFactory,this.current=new m,this.transformMatrix=p.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=c,this.objs=o,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!r,this._operatorIdMapping=[];for(const h in p.OPS)this._operatorIdMapping[p.OPS[h]]=h}getObject(c,o=null){return typeof c=="string"?c.startsWith("g_")?this.commonObjs.get(c):this.objs.get(c):o}save(){this.transformStack.push(this.transformMatrix);const c=this.current;this.extraStack.push(c),this.current=c.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(c){this.save(),this.executeOpTree(c),this.restore()}loadDependencies(c){const o=c.fnArray,r=c.argsArray;for(let h=0,u=o.length;h<u;h++)if(o[h]===p.OPS.dependency)for(const j of r[h]){const a=j.startsWith("g_")?this.commonObjs:this.objs,S=new Promise(D=>{a.get(j,D)});this.current.dependencies.push(S)}return Promise.all(this.current.dependencies)}transform(c,o,r,h,u,j){const a=[c,o,r,h,u,j];this.transformMatrix=p.Util.transform(this.transformMatrix,a),this.tgrp=null}getSVG(c,o){this.viewport=o;const r=this._initialize(o);return this.loadDependencies(c).then(()=>(this.transformMatrix=p.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(c)),r))}convertOpList(c){const o=this._operatorIdMapping,r=c.argsArray,h=c.fnArray,u=[];for(let j=0,a=h.length;j<a;j++){const S=h[j];u.push({fnId:S,fn:o[S],args:r[j]})}return i(u)}executeOpTree(c){for(const o of c){const r=o.fn,h=o.fnId,u=o.args;switch(h|0){case p.OPS.beginText:this.beginText();break;case p.OPS.dependency:break;case p.OPS.setLeading:this.setLeading(u);break;case p.OPS.setLeadingMoveText:this.setLeadingMoveText(u[0],u[1]);break;case p.OPS.setFont:this.setFont(u);break;case p.OPS.showText:this.showText(u[0]);break;case p.OPS.showSpacedText:this.showText(u[0]);break;case p.OPS.endText:this.endText();break;case p.OPS.moveText:this.moveText(u[0],u[1]);break;case p.OPS.setCharSpacing:this.setCharSpacing(u[0]);break;case p.OPS.setWordSpacing:this.setWordSpacing(u[0]);break;case p.OPS.setHScale:this.setHScale(u[0]);break;case p.OPS.setTextMatrix:this.setTextMatrix(u[0],u[1],u[2],u[3],u[4],u[5]);break;case p.OPS.setTextRise:this.setTextRise(u[0]);break;case p.OPS.setTextRenderingMode:this.setTextRenderingMode(u[0]);break;case p.OPS.setLineWidth:this.setLineWidth(u[0]);break;case p.OPS.setLineJoin:this.setLineJoin(u[0]);break;case p.OPS.setLineCap:this.setLineCap(u[0]);break;case p.OPS.setMiterLimit:this.setMiterLimit(u[0]);break;case p.OPS.setFillRGBColor:this.setFillRGBColor(u[0],u[1],u[2]);break;case p.OPS.setStrokeRGBColor:this.setStrokeRGBColor(u[0],u[1],u[2]);break;case p.OPS.setStrokeColorN:this.setStrokeColorN(u);break;case p.OPS.setFillColorN:this.setFillColorN(u);break;case p.OPS.shadingFill:this.shadingFill(u[0]);break;case p.OPS.setDash:this.setDash(u[0],u[1]);break;case p.OPS.setRenderingIntent:this.setRenderingIntent(u[0]);break;case p.OPS.setFlatness:this.setFlatness(u[0]);break;case p.OPS.setGState:this.setGState(u[0]);break;case p.OPS.fill:this.fill();break;case p.OPS.eoFill:this.eoFill();break;case p.OPS.stroke:this.stroke();break;case p.OPS.fillStroke:this.fillStroke();break;case p.OPS.eoFillStroke:this.eoFillStroke();break;case p.OPS.clip:this.clip("nonzero");break;case p.OPS.eoClip:this.clip("evenodd");break;case p.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case p.OPS.paintImageXObject:this.paintImageXObject(u[0]);break;case p.OPS.paintInlineImageXObject:this.paintInlineImageXObject(u[0]);break;case p.OPS.paintImageMaskXObject:this.paintImageMaskXObject(u[0]);break;case p.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(u[0],u[1]);break;case p.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case p.OPS.closePath:this.closePath();break;case p.OPS.closeStroke:this.closeStroke();break;case p.OPS.closeFillStroke:this.closeFillStroke();break;case p.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case p.OPS.nextLine:this.nextLine();break;case p.OPS.transform:this.transform(u[0],u[1],u[2],u[3],u[4],u[5]);break;case p.OPS.constructPath:this.constructPath(u[0],u[1]);break;case p.OPS.endPath:this.endPath();break;case 92:this.group(o.items);break;default:(0,p.warn)(`Unimplemented operator ${r}`);break}}}setWordSpacing(c){this.current.wordSpacing=c}setCharSpacing(c){this.current.charSpacing=c}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(c,o,r,h,u,j){const a=this.current;a.textMatrix=a.lineMatrix=[c,o,r,h,u,j],a.textMatrixScale=Math.hypot(c,o),a.x=a.lineX=0,a.y=a.lineY=0,a.xcoords=[],a.ycoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${f(a.fontSize)}px`),a.tspan.setAttributeNS(null,"y",f(-a.y)),a.txtElement=this.svgFactory.createElement("svg:text"),a.txtElement.append(a.tspan)}beginText(){const c=this.current;c.x=c.lineX=0,c.y=c.lineY=0,c.textMatrix=p.IDENTITY_MATRIX,c.lineMatrix=p.IDENTITY_MATRIX,c.textMatrixScale=1,c.tspan=this.svgFactory.createElement("svg:tspan"),c.txtElement=this.svgFactory.createElement("svg:text"),c.txtgrp=this.svgFactory.createElement("svg:g"),c.xcoords=[],c.ycoords=[]}moveText(c,o){const r=this.current;r.x=r.lineX+=c,r.y=r.lineY+=o,r.xcoords=[],r.ycoords=[],r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size",`${f(r.fontSize)}px`),r.tspan.setAttributeNS(null,"y",f(-r.y))}showText(c){const o=this.current,r=o.font,h=o.fontSize;if(h===0)return;const u=o.fontSizeScale,j=o.charSpacing,a=o.wordSpacing,S=o.fontDirection,D=o.textHScale*S,at=r.vertical,G=at?1:-1,Q=r.defaultVMetrics,q=h*o.fontMatrix[0];let ct=0;for(const Z of c){if(Z===null){ct+=S*a;continue}else if(typeof Z=="number"){ct+=G*Z*h/1e3;continue}const C=(Z.isSpace?a:0)+j,s=Z.fontChar;let n,b,x=Z.width;if(at){let I;const $=Z.vmetric||Q;I=Z.vmetric?$[1]:x*.5,I=-I*q;const ot=$[2]*q;x=$?-$[0]:x,n=I/u,b=(ct+ot)/u}else n=ct/u,b=0;(Z.isInFont||r.missingFile)&&(o.xcoords.push(o.x+n),at&&o.ycoords.push(-o.y+b),o.tspan.textContent+=s);const F=at?x*q-C*S:x*q+C*S;ct+=F}o.tspan.setAttributeNS(null,"x",o.xcoords.map(f).join(" ")),at?o.tspan.setAttributeNS(null,"y",o.ycoords.map(f).join(" ")):o.tspan.setAttributeNS(null,"y",f(-o.y)),at?o.y-=ct:o.x+=ct*D,o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${f(o.fontSize)}px`),o.fontStyle!==P.fontStyle&&o.tspan.setAttributeNS(null,"font-style",o.fontStyle),o.fontWeight!==P.fontWeight&&o.tspan.setAttributeNS(null,"font-weight",o.fontWeight);const k=o.textRenderingMode&p.TextRenderingMode.FILL_STROKE_MASK;if(k===p.TextRenderingMode.FILL||k===p.TextRenderingMode.FILL_STROKE?(o.fillColor!==P.fillColor&&o.tspan.setAttributeNS(null,"fill",o.fillColor),o.fillAlpha<1&&o.tspan.setAttributeNS(null,"fill-opacity",o.fillAlpha)):o.textRenderingMode===p.TextRenderingMode.ADD_TO_PATH?o.tspan.setAttributeNS(null,"fill","transparent"):o.tspan.setAttributeNS(null,"fill","none"),k===p.TextRenderingMode.STROKE||k===p.TextRenderingMode.FILL_STROKE){const Z=1/(o.textMatrixScale||1);this._setStrokeAttributes(o.tspan,Z)}let W=o.textMatrix;o.textRise!==0&&(W=W.slice(),W[5]+=o.textRise),o.txtElement.setAttributeNS(null,"transform",`${v(W)} scale(${f(D)}, -1)`),o.txtElement.setAttributeNS(N,"xml:space","preserve"),o.txtElement.append(o.tspan),o.txtgrp.append(o.txtElement),this._ensureTransformGroup().append(o.txtElement)}setLeadingMoveText(c,o){this.setLeading(-o),this.moveText(c,o)}addFontStyle(c){if(!c.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const o=d(c.data,c.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${c.loadedName}"; src: url(${o}); }
`}setFont(c){const o=this.current,r=this.commonObjs.get(c[0]);let h=c[1];o.font=r,this.embedFonts&&!r.missingFile&&!this.embeddedFonts[r.loadedName]&&(this.addFontStyle(r),this.embeddedFonts[r.loadedName]=r),o.fontMatrix=r.fontMatrix||p.FONT_IDENTITY_MATRIX;let u="normal";r.black?u="900":r.bold&&(u="bold");const j=r.italic?"italic":"normal";h<0?(h=-h,o.fontDirection=-1):o.fontDirection=1,o.fontSize=h,o.fontFamily=r.loadedName,o.fontWeight=u,o.fontStyle=j,o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"y",f(-o.y)),o.xcoords=[],o.ycoords=[]}endText(){var o;const c=this.current;c.textRenderingMode&p.TextRenderingMode.ADD_TO_PATH_FLAG&&((o=c.txtElement)!=null&&o.hasChildNodes())&&(c.element=c.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(c){c>0&&(this.current.lineWidth=c)}setLineCap(c){this.current.lineCap=M[c]}setLineJoin(c){this.current.lineJoin=T[c]}setMiterLimit(c){this.current.miterLimit=c}setStrokeAlpha(c){this.current.strokeAlpha=c}setStrokeRGBColor(c,o,r){this.current.strokeColor=p.Util.makeHexColor(c,o,r)}setFillAlpha(c){this.current.fillAlpha=c}setFillRGBColor(c,o,r){this.current.fillColor=p.Util.makeHexColor(c,o,r),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(c){this.current.strokeColor=this._makeColorN_Pattern(c)}setFillColorN(c){this.current.fillColor=this._makeColorN_Pattern(c)}shadingFill(c){const{width:o,height:r}=this.viewport,h=p.Util.inverseTransform(this.transformMatrix),[u,j,a,S]=p.Util.getAxialAlignedBoundingBox([0,0,o,r],h),D=this.svgFactory.createElement("svg:rect");D.setAttributeNS(null,"x",u),D.setAttributeNS(null,"y",j),D.setAttributeNS(null,"width",a-u),D.setAttributeNS(null,"height",S-j),D.setAttributeNS(null,"fill",this._makeShadingPattern(c)),this.current.fillAlpha<1&&D.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(D)}_makeColorN_Pattern(c){return c[0]==="TilingPattern"?this._makeTilingPattern(c):this._makeShadingPattern(c)}_makeTilingPattern(c){const o=c[1],r=c[2],h=c[3]||p.IDENTITY_MATRIX,[u,j,a,S]=c[4],D=c[5],at=c[6],G=c[7],Q=`shading${y++}`,[q,ct,k,W]=p.Util.normalizeRect([...p.Util.applyTransform([u,j],h),...p.Util.applyTransform([a,S],h)]),[Z,C]=p.Util.singularValueDecompose2dScale(h),s=D*Z,n=at*C,b=this.svgFactory.createElement("svg:pattern");b.setAttributeNS(null,"id",Q),b.setAttributeNS(null,"patternUnits","userSpaceOnUse"),b.setAttributeNS(null,"width",s),b.setAttributeNS(null,"height",n),b.setAttributeNS(null,"x",`${q}`),b.setAttributeNS(null,"y",`${ct}`);const x=this.svg,F=this.transformMatrix,I=this.current.fillColor,$=this.current.strokeColor,ot=this.svgFactory.create(k-q,W-ct);if(this.svg=ot,this.transformMatrix=h,G===2){const ut=p.Util.makeHexColor(...o);this.current.fillColor=ut,this.current.strokeColor=ut}return this.executeOpTree(this.convertOpList(r)),this.svg=x,this.transformMatrix=F,this.current.fillColor=I,this.current.strokeColor=$,b.append(ot.childNodes[0]),this.defs.append(b),`url(#${Q})`}_makeShadingPattern(c){switch(typeof c=="string"&&(c=this.objs.get(c)),c[0]){case"RadialAxial":const o=`shading${y++}`,r=c[3];let h;switch(c[1]){case"axial":const u=c[4],j=c[5];h=this.svgFactory.createElement("svg:linearGradient"),h.setAttributeNS(null,"id",o),h.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),h.setAttributeNS(null,"x1",u[0]),h.setAttributeNS(null,"y1",u[1]),h.setAttributeNS(null,"x2",j[0]),h.setAttributeNS(null,"y2",j[1]);break;case"radial":const a=c[4],S=c[5],D=c[6],at=c[7];h=this.svgFactory.createElement("svg:radialGradient"),h.setAttributeNS(null,"id",o),h.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),h.setAttributeNS(null,"cx",S[0]),h.setAttributeNS(null,"cy",S[1]),h.setAttributeNS(null,"r",at),h.setAttributeNS(null,"fx",a[0]),h.setAttributeNS(null,"fy",a[1]),h.setAttributeNS(null,"fr",D);break;default:throw new Error(`Unknown RadialAxial type: ${c[1]}`)}for(const u of r){const j=this.svgFactory.createElement("svg:stop");j.setAttributeNS(null,"offset",u[0]),j.setAttributeNS(null,"stop-color",u[1]),h.append(j)}return this.defs.append(h),`url(#${o})`;case"Mesh":return(0,p.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${c[0]}`)}}setDash(c,o){this.current.dashArray=c,this.current.dashPhase=o}constructPath(c,o){const r=this.current;let h=r.x,u=r.y,j=[],a=0;for(const S of c)switch(S|0){case p.OPS.rectangle:h=o[a++],u=o[a++];const D=o[a++],at=o[a++],G=h+D,Q=u+at;j.push("M",f(h),f(u),"L",f(G),f(u),"L",f(G),f(Q),"L",f(h),f(Q),"Z");break;case p.OPS.moveTo:h=o[a++],u=o[a++],j.push("M",f(h),f(u));break;case p.OPS.lineTo:h=o[a++],u=o[a++],j.push("L",f(h),f(u));break;case p.OPS.curveTo:h=o[a+4],u=o[a+5],j.push("C",f(o[a]),f(o[a+1]),f(o[a+2]),f(o[a+3]),f(h),f(u)),a+=6;break;case p.OPS.curveTo2:j.push("C",f(h),f(u),f(o[a]),f(o[a+1]),f(o[a+2]),f(o[a+3])),h=o[a+2],u=o[a+3],a+=4;break;case p.OPS.curveTo3:h=o[a+2],u=o[a+3],j.push("C",f(o[a]),f(o[a+1]),f(h),f(u),f(h),f(u)),a+=4;break;case p.OPS.closePath:j.push("Z");break}j=j.join(" "),r.path&&c.length>0&&c[0]!==p.OPS.rectangle&&c[0]!==p.OPS.moveTo?j=r.path.getAttributeNS(null,"d")+j:(r.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(r.path)),r.path.setAttributeNS(null,"d",j),r.path.setAttributeNS(null,"fill","none"),r.element=r.path,r.setCurrentPoint(h,u)}endPath(){const c=this.current;if(c.path=null,!this.pendingClip)return;if(!c.element){this.pendingClip=null;return}const o=`clippath${_++}`,r=this.svgFactory.createElement("svg:clipPath");r.setAttributeNS(null,"id",o),r.setAttributeNS(null,"transform",v(this.transformMatrix));const h=c.element.cloneNode(!0);if(this.pendingClip==="evenodd"?h.setAttributeNS(null,"clip-rule","evenodd"):h.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,r.append(h),this.defs.append(r),c.activeClipUrl){c.clipGroup=null;for(const u of this.extraStack)u.clipGroup=null;r.setAttributeNS(null,"clip-path",c.activeClipUrl)}c.activeClipUrl=`url(#${o})`,this.tgrp=null}clip(c){this.pendingClip=c}closePath(){const c=this.current;if(c.path){const o=`${c.path.getAttributeNS(null,"d")}Z`;c.path.setAttributeNS(null,"d",o)}}setLeading(c){this.current.leading=-c}setTextRise(c){this.current.textRise=c}setTextRenderingMode(c){this.current.textRenderingMode=c}setHScale(c){this.current.textHScale=c/100}setRenderingIntent(c){}setFlatness(c){}setGState(c){for(const[o,r]of c)switch(o){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r);break;case"CA":this.setStrokeAlpha(r);break;case"ca":this.setFillAlpha(r);break;default:(0,p.warn)(`Unimplemented graphic state operator ${o}`);break}}fill(){const c=this.current;c.element&&(c.element.setAttributeNS(null,"fill",c.fillColor),c.element.setAttributeNS(null,"fill-opacity",c.fillAlpha),this.endPath())}stroke(){const c=this.current;c.element&&(this._setStrokeAttributes(c.element),c.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(c,o=1){const r=this.current;let h=r.dashArray;o!==1&&h.length>0&&(h=h.map(function(u){return o*u})),c.setAttributeNS(null,"stroke",r.strokeColor),c.setAttributeNS(null,"stroke-opacity",r.strokeAlpha),c.setAttributeNS(null,"stroke-miterlimit",f(r.miterLimit)),c.setAttributeNS(null,"stroke-linecap",r.lineCap),c.setAttributeNS(null,"stroke-linejoin",r.lineJoin),c.setAttributeNS(null,"stroke-width",f(o*r.lineWidth)+"px"),c.setAttributeNS(null,"stroke-dasharray",h.map(f).join(" ")),c.setAttributeNS(null,"stroke-dashoffset",f(o*r.dashPhase)+"px")}eoFill(){var c;(c=this.current.element)==null||c.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var c;(c=this.current.element)==null||c.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y","0"),c.setAttributeNS(null,"width","1px"),c.setAttributeNS(null,"height","1px"),c.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(c)}paintImageXObject(c){const o=this.getObject(c);if(!o){(0,p.warn)(`Dependent image with object ID ${c} is not ready yet`);return}this.paintInlineImageXObject(o)}paintInlineImageXObject(c,o){const r=c.width,h=c.height,u=L(c,this.forceDataSchema,!!o),j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x","0"),j.setAttributeNS(null,"y","0"),j.setAttributeNS(null,"width",f(r)),j.setAttributeNS(null,"height",f(h)),this.current.element=j,this.clip("nonzero");const a=this.svgFactory.createElement("svg:image");a.setAttributeNS(V,"xlink:href",u),a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y",f(-h)),a.setAttributeNS(null,"width",f(r)+"px"),a.setAttributeNS(null,"height",f(h)+"px"),a.setAttributeNS(null,"transform",`scale(${f(1/r)} ${f(-1/h)})`),o?o.append(a):this._ensureTransformGroup().append(a)}paintImageMaskXObject(c){const o=this.getObject(c.data,c);if(o.bitmap){(0,p.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const r=this.current,h=o.width,u=o.height,j=r.fillColor;r.maskId=`mask${g++}`;const a=this.svgFactory.createElement("svg:mask");a.setAttributeNS(null,"id",r.maskId);const S=this.svgFactory.createElement("svg:rect");S.setAttributeNS(null,"x","0"),S.setAttributeNS(null,"y","0"),S.setAttributeNS(null,"width",f(h)),S.setAttributeNS(null,"height",f(u)),S.setAttributeNS(null,"fill",j),S.setAttributeNS(null,"mask",`url(#${r.maskId})`),this.defs.append(a),this._ensureTransformGroup().append(S),this.paintInlineImageXObject(o,a)}paintFormXObjectBegin(c,o){if(Array.isArray(c)&&c.length===6&&this.transform(c[0],c[1],c[2],c[3],c[4],c[5]),o){const r=o[2]-o[0],h=o[3]-o[1],u=this.svgFactory.createElement("svg:rect");u.setAttributeNS(null,"x",o[0]),u.setAttributeNS(null,"y",o[1]),u.setAttributeNS(null,"width",f(r)),u.setAttributeNS(null,"height",f(h)),this.current.element=u,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(c){const o=this.svgFactory.create(c.width,c.height),r=this.svgFactory.createElement("svg:defs");o.append(r),this.defs=r;const h=this.svgFactory.createElement("svg:g");return h.setAttributeNS(null,"transform",v(c.transform)),o.append(h),this.svg=h,o}_ensureClipGroup(){if(!this.current.clipGroup){const c=this.svgFactory.createElement("svg:g");c.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(c),this.current.clipGroup=c}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",v(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=U},(X,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class H{static textContent(p){const P=[],N={items:P,styles:Object.create(null)};function V(M){var L;if(!M)return;let T=null;const d=M.name;if(d==="#text")T=M.value;else if(H.shouldBuildText(d))(L=M==null?void 0:M.attributes)!=null&&L.textContent?T=M.attributes.textContent:M.value&&(T=M.value);else return;if(T!==null&&P.push({str:T}),!!M.children)for(const m of M.children)V(m)}return V(p),N}static shouldBuildText(p){return!(p==="textarea"||p==="input"||p==="option"||p==="select")}}e.XfaText=H},(X,e,H)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=v,e.updateTextLayer=_;var l=H(1),p=H(6);const P=1e5,N=30,V=.8,M=new Map;function T(g,y){let U;if(y&&l.FeatureTest.isOffscreenCanvasSupported)U=new OffscreenCanvas(g,g).getContext("2d",{alpha:!1});else{const E=document.createElement("canvas");E.width=E.height=g,U=E.getContext("2d",{alpha:!1})}return U}function d(g,y){const U=M.get(g);if(U)return U;const E=T(N,y);E.font=`${N}px ${g}`;const c=E.measureText("");let o=c.fontBoundingBoxAscent,r=Math.abs(c.fontBoundingBoxDescent);if(o){const u=o/(o+r);return M.set(g,u),E.canvas.width=E.canvas.height=0,u}E.strokeStyle="red",E.clearRect(0,0,N,N),E.strokeText("g",0,0);let h=E.getImageData(0,0,N,N).data;r=0;for(let u=h.length-1-3;u>=0;u-=4)if(h[u]>0){r=Math.ceil(u/4/N);break}E.clearRect(0,0,N,N),E.strokeText("A",0,N),h=E.getImageData(0,0,N,N).data,o=0;for(let u=0,j=h.length;u<j;u+=4)if(h[u]>0){o=N-Math.floor(u/4/N);break}if(E.canvas.width=E.canvas.height=0,o){const u=o/(o+r);return M.set(g,u),u}return M.set(g,V),V}function L(g,y,U){const E=document.createElement("span"),c={angle:0,canvasWidth:0,hasText:y.str!=="",hasEOL:y.hasEOL,fontSize:0};g._textDivs.push(E);const o=l.Util.transform(g._transform,y.transform);let r=Math.atan2(o[1],o[0]);const h=U[y.fontName];h.vertical&&(r+=Math.PI/2);const u=Math.hypot(o[2],o[3]),j=u*d(h.fontFamily,g._isOffscreenCanvasSupported);let a,S;r===0?(a=o[4],S=o[5]-j):(a=o[4]+j*Math.sin(r),S=o[5]-j*Math.cos(r));const D="calc(var(--scale-factor)*",at=E.style;g._container===g._rootContainer?(at.left=`${(100*a/g._pageWidth).toFixed(2)}%`,at.top=`${(100*S/g._pageHeight).toFixed(2)}%`):(at.left=`${D}${a.toFixed(2)}px)`,at.top=`${D}${S.toFixed(2)}px)`),at.fontSize=`${D}${u.toFixed(2)}px)`,at.fontFamily=h.fontFamily,c.fontSize=u,E.setAttribute("role","presentation"),E.textContent=y.str,E.dir=y.dir,g._fontInspectorEnabled&&(E.dataset.fontName=y.fontName),r!==0&&(c.angle=r*(180/Math.PI));let G=!1;if(y.str.length>1)G=!0;else if(y.str!==" "&&y.transform[0]!==y.transform[3]){const Q=Math.abs(y.transform[0]),q=Math.abs(y.transform[3]);Q!==q&&Math.max(Q,q)/Math.min(Q,q)>1.5&&(G=!0)}G&&(c.canvasWidth=h.vertical?y.height:y.width),g._textDivProperties.set(E,c),g._isReadableStream&&g._layoutText(E)}function m(g){const{div:y,scale:U,properties:E,ctx:c,prevFontSize:o,prevFontFamily:r}=g,{style:h}=y;let u="";if(E.canvasWidth!==0&&E.hasText){const{fontFamily:j}=h,{canvasWidth:a,fontSize:S}=E;(o!==S||r!==j)&&(c.font=`${S*U}px ${j}`,g.prevFontSize=S,g.prevFontFamily=j);const{width:D}=c.measureText(y.textContent);D>0&&(u=`scaleX(${a*U/D})`)}E.angle!==0&&(u=`rotate(${E.angle}deg) ${u}`),u.length>0&&(h.transform=u)}function i(g){if(g._canceled)return;const y=g._textDivs,U=g._capability;if(y.length>P){U.resolve();return}if(!g._isReadableStream)for(const c of y)g._layoutText(c);U.resolve()}class f{constructor({textContentSource:y,container:U,viewport:E,textDivs:c,textDivProperties:o,textContentItemsStr:r,isOffscreenCanvasSupported:h}){var D;this._textContentSource=y,this._isReadableStream=y instanceof ReadableStream,this._container=this._rootContainer=U,this._textDivs=c||[],this._textContentItemsStr=r||[],this._isOffscreenCanvasSupported=h,this._fontInspectorEnabled=!!((D=globalThis.FontInspector)!=null&&D.enabled),this._reader=null,this._textDivProperties=o||new WeakMap,this._canceled=!1,this._capability=new l.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:E.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:T(0,h)};const{pageWidth:u,pageHeight:j,pageX:a,pageY:S}=E.rawDims;this._transform=[1,0,0,-1,-a,S+j],this._pageWidth=u,this._pageHeight=j,(0,p.setLayerDimensions)(U,E),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new l.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new l.AbortException("TextLayer task cancelled."))}_processItems(y,U){for(const E of y){if(E.str===void 0){if(E.type==="beginMarkedContentProps"||E.type==="beginMarkedContent"){const c=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),E.id!==null&&this._container.setAttribute("id",`${E.id}`),c.append(this._container)}else E.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(E.str),L(this,E,U)}}_layoutText(y){const U=this._layoutTextParams.properties=this._textDivProperties.get(y);if(this._layoutTextParams.div=y,m(this._layoutTextParams),U.hasText&&this._container.append(y),U.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),this._container.append(E)}}_render(){const y=new l.PromiseCapability;let U=Object.create(null);if(this._isReadableStream){const E=()=>{this._reader.read().then(({value:c,done:o})=>{if(o){y.resolve();return}Object.assign(U,c.styles),this._processItems(c.items,U),E()},y.reject)};this._reader=this._textContentSource.getReader(),E()}else if(this._textContentSource){const{items:E,styles:c}=this._textContentSource;this._processItems(E,c),y.resolve()}else throw new Error('No "textContentSource" parameter specified.');y.promise.then(()=>{U=null,i(this)},this._capability.reject)}}e.TextLayerRenderTask=f;function v(g){!g.textContentSource&&(g.textContent||g.textContentStream)&&((0,p.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),g.textContentSource=g.textContent||g.textContentStream);const{container:y,viewport:U}=g,E=getComputedStyle(y),c=E.getPropertyValue("visibility"),o=parseFloat(E.getPropertyValue("--scale-factor"));c==="visible"&&(!o||Math.abs(o-U.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const r=new f(g);return r._render(),r}function _({container:g,viewport:y,textDivs:U,textDivProperties:E,isOffscreenCanvasSupported:c,mustRotate:o=!0,mustRescale:r=!0}){if(o&&(0,p.setLayerDimensions)(g,{rotation:y.rotation}),r){const h=T(0,c),j={prevFontSize:null,prevFontFamily:null,div:null,scale:y.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:h};for(const a of U)j.properties=E.get(a),j.div=a,m(j)}}},(X,e,H)=>{var d,L,m,i,f,v,_,g,y,U,E,Ke,we,Je,Qe;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var l=H(1),p=H(4),P=H(28),N=H(33),V=H(6),M=H(34);const u=class u{constructor({uiManager:a,pageIndex:S,div:D,accessibilityManager:at,annotationLayer:G,viewport:Q,l10n:q}){st(this,E);st(this,d);st(this,L,!1);st(this,m,null);st(this,i,this.pointerup.bind(this));st(this,f,this.pointerdown.bind(this));st(this,v,new Map);st(this,_,!1);st(this,g,!1);st(this,y,!1);st(this,U);const ct=[P.FreeTextEditor,N.InkEditor,M.StampEditor];if(!u._initialized){u._initialized=!0;for(const k of ct)k.initialize(q)}a.registerEditorTypes(ct),rt(this,U,a),this.pageIndex=S,this.div=D,rt(this,d,at),rt(this,m,G),this.viewport=Q,t(this,U).addLayer(this)}get isEmpty(){return t(this,v).size===0}updateToolbar(a){t(this,U).updateToolbar(a)}updateMode(a=t(this,U).getMode()){Y(this,E,Qe).call(this),a===l.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),a!==l.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",a===l.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",a===l.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",a===l.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(a){if(!a&&t(this,U).getMode()!==l.AnnotationEditorType.INK)return;if(!a){for(const D of t(this,v).values())if(D.isEmpty()){D.setInBackground();return}}Y(this,E,we).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(a){t(this,U).setEditingState(a)}addCommands(a){t(this,U).addCommands(a)}enable(){this.div.style.pointerEvents="auto";const a=new Set;for(const D of t(this,v).values())D.enableEditing(),D.annotationElementId&&a.add(D.annotationElementId);if(!t(this,m))return;const S=t(this,m).getEditableAnnotations();for(const D of S){if(D.hide(),t(this,U).isDeletedAnnotationElement(D.data.id)||a.has(D.data.id))continue;const at=this.deserialize(D);at&&(this.addOrRebuild(at),at.enableEditing())}}disable(){var S;rt(this,y,!0),this.div.style.pointerEvents="none";const a=new Set;for(const D of t(this,v).values()){if(D.disableEditing(),!D.annotationElementId||D.serialize()!==null){a.add(D.annotationElementId);continue}(S=this.getEditableAnnotation(D.annotationElementId))==null||S.show(),D.remove()}if(t(this,m)){const D=t(this,m).getEditableAnnotations();for(const at of D){const{id:G}=at.data;a.has(G)||t(this,U).isDeletedAnnotationElement(G)||at.show()}}Y(this,E,Qe).call(this),this.isEmpty&&(this.div.hidden=!0),rt(this,y,!1)}getEditableAnnotation(a){var S;return((S=t(this,m))==null?void 0:S.getEditableAnnotation(a))||null}setActiveEditor(a){t(this,U).getActive()!==a&&t(this,U).setActiveEditor(a)}enableClick(){this.div.addEventListener("pointerdown",t(this,f)),this.div.addEventListener("pointerup",t(this,i))}disableClick(){this.div.removeEventListener("pointerdown",t(this,f)),this.div.removeEventListener("pointerup",t(this,i))}attach(a){t(this,v).set(a.id,a);const{annotationElementId:S}=a;S&&t(this,U).isDeletedAnnotationElement(S)&&t(this,U).removeDeletedAnnotationElement(a)}detach(a){var S;t(this,v).delete(a.id),(S=t(this,d))==null||S.removePointerInTextLayer(a.contentDiv),!t(this,y)&&a.annotationElementId&&t(this,U).addDeletedAnnotationElement(a)}remove(a){this.detach(a),t(this,U).removeEditor(a),a.div.contains(document.activeElement)&&setTimeout(()=>{t(this,U).focusMainContainer()},0),a.div.remove(),a.isAttachedToDOM=!1,t(this,g)||this.addInkEditorIfNeeded(!1)}changeParent(a){var S;a.parent!==this&&(a.annotationElementId&&(t(this,U).addDeletedAnnotationElement(a.annotationElementId),p.AnnotationEditor.deleteAnnotationElement(a),a.annotationElementId=null),this.attach(a),(S=a.parent)==null||S.detach(a),a.setParent(this),a.div&&a.isAttachedToDOM&&(a.div.remove(),this.div.append(a.div)))}add(a){if(this.changeParent(a),t(this,U).addEditor(a),this.attach(a),!a.isAttachedToDOM){const S=a.render();this.div.append(S),a.isAttachedToDOM=!0}a.fixAndSetPosition(),a.onceAdded(),t(this,U).addToAnnotationStorage(a)}moveEditorInDOM(a){var D;if(!a.isAttachedToDOM)return;const{activeElement:S}=document;a.div.contains(S)&&(a._focusEventsAllowed=!1,setTimeout(()=>{a.div.contains(document.activeElement)?a._focusEventsAllowed=!0:(a.div.addEventListener("focusin",()=>{a._focusEventsAllowed=!0},{once:!0}),S.focus())},0)),a._structTreeParentId=(D=t(this,d))==null?void 0:D.moveElementInDOM(this.div,a.div,a.contentDiv,!0)}addOrRebuild(a){a.needsToBeRebuilt()?a.rebuild():this.add(a)}addUndoableEditor(a){const S=()=>a._uiManager.rebuild(a),D=()=>{a.remove()};this.addCommands({cmd:S,undo:D,mustExec:!1})}getNextId(){return t(this,U).getId()}pasteEditor(a,S){t(this,U).updateToolbar(a),t(this,U).updateMode(a);const{offsetX:D,offsetY:at}=Y(this,E,Je).call(this),G=this.getNextId(),Q=Y(this,E,Ke).call(this,{parent:this,id:G,x:D,y:at,uiManager:t(this,U),isCentered:!0,...S});Q&&this.add(Q)}deserialize(a){var S;switch((S=a.annotationType)!=null?S:a.annotationEditorType){case l.AnnotationEditorType.FREETEXT:return P.FreeTextEditor.deserialize(a,this,t(this,U));case l.AnnotationEditorType.INK:return N.InkEditor.deserialize(a,this,t(this,U));case l.AnnotationEditorType.STAMP:return M.StampEditor.deserialize(a,this,t(this,U))}return null}addNewEditor(){Y(this,E,we).call(this,Y(this,E,Je).call(this),!0)}setSelected(a){t(this,U).setSelected(a)}toggleSelected(a){t(this,U).toggleSelected(a)}isSelected(a){return t(this,U).isSelected(a)}unselect(a){t(this,U).unselect(a)}pointerup(a){const{isMac:S}=l.FeatureTest.platform;if(!(a.button!==0||a.ctrlKey&&S)&&a.target===this.div&&t(this,_)){if(rt(this,_,!1),!t(this,L)){rt(this,L,!0);return}if(t(this,U).getMode()===l.AnnotationEditorType.STAMP){t(this,U).unselectAll();return}Y(this,E,we).call(this,a,!1)}}pointerdown(a){if(t(this,_)){rt(this,_,!1);return}const{isMac:S}=l.FeatureTest.platform;if(a.button!==0||a.ctrlKey&&S||a.target!==this.div)return;rt(this,_,!0);const D=t(this,U).getActive();rt(this,L,!D||D.isEmpty())}findNewParent(a,S,D){const at=t(this,U).findParent(S,D);return at===null||at===this?!1:(at.changeParent(a),!0)}destroy(){var a,S;((a=t(this,U).getActive())==null?void 0:a.parent)===this&&(t(this,U).commitOrRemove(),t(this,U).setActiveEditor(null));for(const D of t(this,v).values())(S=t(this,d))==null||S.removePointerInTextLayer(D.contentDiv),D.setParent(null),D.isAttachedToDOM=!1,D.div.remove();this.div=null,t(this,v).clear(),t(this,U).removeLayer(this)}render({viewport:a}){this.viewport=a,(0,V.setLayerDimensions)(this.div,a);for(const S of t(this,U).getEditors(this.pageIndex))this.add(S);this.updateMode()}update({viewport:a}){t(this,U).commitOrRemove(),this.viewport=a,(0,V.setLayerDimensions)(this.div,{rotation:a.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:a,pageHeight:S}=this.viewport.rawDims;return[a,S]}};d=new WeakMap,L=new WeakMap,m=new WeakMap,i=new WeakMap,f=new WeakMap,v=new WeakMap,_=new WeakMap,g=new WeakMap,y=new WeakMap,U=new WeakMap,E=new WeakSet,Ke=function(a){switch(t(this,U).getMode()){case l.AnnotationEditorType.FREETEXT:return new P.FreeTextEditor(a);case l.AnnotationEditorType.INK:return new N.InkEditor(a);case l.AnnotationEditorType.STAMP:return new M.StampEditor(a)}return null},we=function(a,S){const D=this.getNextId(),at=Y(this,E,Ke).call(this,{parent:this,id:D,x:a.offsetX,y:a.offsetY,uiManager:t(this,U),isCentered:S});return at&&this.add(at),at},Je=function(){const{x:a,y:S,width:D,height:at}=this.div.getBoundingClientRect(),G=Math.max(0,a),Q=Math.max(0,S),q=Math.min(window.innerWidth,a+D),ct=Math.min(window.innerHeight,S+at),k=(G+q)/2-a,W=(Q+ct)/2-S,[Z,C]=this.viewport.rotation%180===0?[k,W]:[W,k];return{offsetX:Z,offsetY:C}},Qe=function(){rt(this,g,!0);for(const a of t(this,v).values())a.isEmpty()&&a.remove();rt(this,g,!1)},wt(u,"_initialized",!1);let T=u;e.AnnotationEditorLayer=T},(X,e,H)=>{var M,T,d,L,m,i,f,v,_,g,Rs,ks,xs,ge,Ze,Fs,ts;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var l=H(1),p=H(5),P=H(4),N=H(29);const u=class u extends P.AnnotationEditor{constructor(S){super({...S,name:"freeTextEditor"});st(this,g);st(this,M,this.editorDivBlur.bind(this));st(this,T,this.editorDivFocus.bind(this));st(this,d,this.editorDivInput.bind(this));st(this,L,this.editorDivKeydown.bind(this));st(this,m);st(this,i,"");st(this,f,`${this.id}-editor`);st(this,v);st(this,_,null);rt(this,m,S.color||u._defaultColor||P.AnnotationEditor._defaultLineColor),rt(this,v,S.fontSize||u._defaultFontSize)}static get _keyboardManager(){const S=u.prototype,D=Q=>Q.isEmpty(),at=p.AnnotationEditorUIManager.TRANSLATE_SMALL,G=p.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,l.shadow)(this,"_keyboardManager",new p.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],S.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],S.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],S._translateEmpty,{args:[-at,0],checker:D}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],S._translateEmpty,{args:[-G,0],checker:D}],[["ArrowRight","mac+ArrowRight"],S._translateEmpty,{args:[at,0],checker:D}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],S._translateEmpty,{args:[G,0],checker:D}],[["ArrowUp","mac+ArrowUp"],S._translateEmpty,{args:[0,-at],checker:D}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],S._translateEmpty,{args:[0,-G],checker:D}],[["ArrowDown","mac+ArrowDown"],S._translateEmpty,{args:[0,at],checker:D}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],S._translateEmpty,{args:[0,G],checker:D}]]))}static initialize(S){P.AnnotationEditor.initialize(S,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const D=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(D.getPropertyValue("--freetext-padding"))}static updateDefaultParams(S,D){switch(S){case l.AnnotationEditorParamsType.FREETEXT_SIZE:u._defaultFontSize=D;break;case l.AnnotationEditorParamsType.FREETEXT_COLOR:u._defaultColor=D;break}}updateParams(S,D){switch(S){case l.AnnotationEditorParamsType.FREETEXT_SIZE:Y(this,g,Rs).call(this,D);break;case l.AnnotationEditorParamsType.FREETEXT_COLOR:Y(this,g,ks).call(this,D);break}}static get defaultPropertiesToUpdate(){return[[l.AnnotationEditorParamsType.FREETEXT_SIZE,u._defaultFontSize],[l.AnnotationEditorParamsType.FREETEXT_COLOR,u._defaultColor||P.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[l.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,v)],[l.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,m)]]}_translateEmpty(S,D){this._uiManager.translateSelectedEditors(S,D,!0)}getInitialTranslation(){const S=this.parentScale;return[-u._internalPadding*S,-(u._internalPadding+t(this,v))*S]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(l.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,L)),this.editorDiv.addEventListener("focus",t(this,T)),this.editorDiv.addEventListener("blur",t(this,M)),this.editorDiv.addEventListener("input",t(this,d)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,f)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,L)),this.editorDiv.removeEventListener("focus",t(this,T)),this.editorDiv.removeEventListener("blur",t(this,M)),this.editorDiv.removeEventListener("input",t(this,d)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(S){this._focusEventsAllowed&&(super.focusin(S),S.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var S;if(this.width){Y(this,g,ts).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(S=this._initialOptions)!=null&&S.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const S=t(this,i),D=rt(this,i,Y(this,g,xs).call(this).trimEnd());if(S===D)return;const at=G=>{if(rt(this,i,G),!G){this.remove();return}Y(this,g,Ze).call(this),this._uiManager.rebuild(this),Y(this,g,ge).call(this)};this.addCommands({cmd:()=>{at(D)},undo:()=>{at(S)},mustExec:!1}),Y(this,g,ge).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(S){this.enterInEditMode()}keydown(S){S.target===this.div&&S.key==="Enter"&&(this.enterInEditMode(),S.preventDefault())}editorDivKeydown(S){u._keyboardManager.exec(this,S)}editorDivFocus(S){this.isEditing=!0}editorDivBlur(S){this.isEditing=!1}editorDivInput(S){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let S,D;this.width&&(S=this.x,D=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,f)),this.enableEditing(),P.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(G=>{var Q;return(Q=this.editorDiv)==null?void 0:Q.setAttribute("aria-label",G)}),P.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(G=>{var Q;return(Q=this.editorDiv)==null?void 0:Q.setAttribute("default-content",G)}),this.editorDiv.contentEditable=!0;const{style:at}=this.editorDiv;if(at.fontSize=`calc(${t(this,v)}px * var(--scale-factor))`,at.color=t(this,m),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,p.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[G,Q]=this.parentDimensions;if(this.annotationElementId){const{position:q}=t(this,_);let[ct,k]=this.getInitialTranslation();[ct,k]=this.pageTranslationToScreen(ct,k);const[W,Z]=this.pageDimensions,[C,s]=this.pageTranslation;let n,b;switch(this.rotation){case 0:n=S+(q[0]-C)/W,b=D+this.height-(q[1]-s)/Z;break;case 90:n=S+(q[0]-C)/W,b=D-(q[1]-s)/Z,[ct,k]=[k,-ct];break;case 180:n=S-this.width+(q[0]-C)/W,b=D-(q[1]-s)/Z,[ct,k]=[-ct,-k];break;case 270:n=S+(q[0]-C-this.height*Z)/W,b=D+(q[1]-s-this.width*W)/Z,[ct,k]=[-k,ct];break}this.setAt(n*G,b*Q,ct,k)}else this.setAt(S*G,D*Q,this.width*G,this.height*Q);Y(this,g,Ze).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(S,D,at){let G=null;if(S instanceof N.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:q,fontColor:ct},rect:k,rotation:W,id:Z},textContent:C,textPosition:s,parent:{page:{pageNumber:n}}}=S;if(!C||C.length===0)return null;G=S={annotationType:l.AnnotationEditorType.FREETEXT,color:Array.from(ct),fontSize:q,value:C.join(`
`),position:s,pageIndex:n-1,rect:k,rotation:W,id:Z,deleted:!1}}const Q=super.deserialize(S,D,at);return rt(Q,v,S.fontSize),rt(Q,m,l.Util.makeHexColor(...S.color)),rt(Q,i,S.value),Q.annotationElementId=S.id||null,rt(Q,_,G),Q}serialize(S=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const D=u._internalPadding*this.parentScale,at=this.getRect(D,D),G=P.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,m)),Q={annotationType:l.AnnotationEditorType.FREETEXT,color:G,fontSize:t(this,v),value:t(this,i),pageIndex:this.pageIndex,rect:at,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return S?Q:this.annotationElementId&&!Y(this,g,Fs).call(this,Q)?null:(Q.id=this.annotationElementId,Q)}};M=new WeakMap,T=new WeakMap,d=new WeakMap,L=new WeakMap,m=new WeakMap,i=new WeakMap,f=new WeakMap,v=new WeakMap,_=new WeakMap,g=new WeakSet,Rs=function(S){const D=G=>{this.editorDiv.style.fontSize=`calc(${G}px * var(--scale-factor))`,this.translate(0,-(G-t(this,v))*this.parentScale),rt(this,v,G),Y(this,g,ge).call(this)},at=t(this,v);this.addCommands({cmd:()=>{D(S)},undo:()=>{D(at)},mustExec:!0,type:l.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},ks=function(S){const D=t(this,m);this.addCommands({cmd:()=>{rt(this,m,this.editorDiv.style.color=S)},undo:()=>{rt(this,m,this.editorDiv.style.color=D)},mustExec:!0,type:l.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},xs=function(){const S=this.editorDiv.getElementsByTagName("div");if(S.length===0)return this.editorDiv.innerText;const D=[];for(const at of S)D.push(at.innerText.replace(/\r\n?|\n/,""));return D.join(`
`)},ge=function(){const[S,D]=this.parentDimensions;let at;if(this.isAttachedToDOM)at=this.div.getBoundingClientRect();else{const{currentLayer:G,div:Q}=this,q=Q.style.display;Q.style.display="hidden",G.div.append(this.div),at=Q.getBoundingClientRect(),Q.remove(),Q.style.display=q}this.rotation%180===this.parentRotation%180?(this.width=at.width/S,this.height=at.height/D):(this.width=at.height/S,this.height=at.width/D),this.fixAndSetPosition()},Ze=function(){if(this.editorDiv.replaceChildren(),!!t(this,i))for(const S of t(this,i).split(`
`)){const D=document.createElement("div");D.append(S?document.createTextNode(S):document.createElement("br")),this.editorDiv.append(D)}},Fs=function(S){const{value:D,fontSize:at,color:G,rect:Q,pageIndex:q}=t(this,_);return S.value!==D||S.fontSize!==at||S.rect.some((ct,k)=>Math.abs(ct-Q[k])>=1)||S.color.some((ct,k)=>ct!==G[k])||S.pageIndex!==q},ts=function(S=!1){if(!this.annotationElementId)return;if(Y(this,g,ge).call(this),!S&&(this.width===0||this.height===0)){setTimeout(()=>Y(this,g,ts).call(this,!0),0);return}const D=u._internalPadding*this.parentScale;t(this,_).rect=this.getRect(D,D)},wt(u,"_freeTextDefaultContent",""),wt(u,"_internalPadding",0),wt(u,"_defaultColor",null),wt(u,"_defaultFontSize",10),wt(u,"_type","freetext");let V=u;e.FreeTextEditor=V},(X,e,H)=>{var b,F,ie,Ms,ot,ut,ft,mt,At,vt,tt,nt,A,O,K,et,pt,St,yt,J,Pt,Ct,Is,Ce,es,ss,Ut,qt,Vt,bt,it,lt,xt,ns,zt,B,gt,Tt,Ds,is;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var l=H(1),p=H(6),P=H(3),N=H(30),V=H(31),M=H(32);const T=1e3,d=9,L=new WeakSet;function m(kt){return{width:kt[2]-kt[0],height:kt[3]-kt[1]}}class i{static create(R){switch(R.data.annotationType){case l.AnnotationType.LINK:return new v(R);case l.AnnotationType.TEXT:return new _(R);case l.AnnotationType.WIDGET:switch(R.data.fieldType){case"Tx":return new y(R);case"Btn":return R.data.radioButton?new c(R):R.data.checkBox?new E(R):new o(R);case"Ch":return new r(R);case"Sig":return new U(R)}return new g(R);case l.AnnotationType.POPUP:return new h(R);case l.AnnotationType.FREETEXT:return new j(R);case l.AnnotationType.LINE:return new a(R);case l.AnnotationType.SQUARE:return new S(R);case l.AnnotationType.CIRCLE:return new D(R);case l.AnnotationType.POLYLINE:return new at(R);case l.AnnotationType.CARET:return new Q(R);case l.AnnotationType.INK:return new q(R);case l.AnnotationType.POLYGON:return new G(R);case l.AnnotationType.HIGHLIGHT:return new ct(R);case l.AnnotationType.UNDERLINE:return new k(R);case l.AnnotationType.SQUIGGLY:return new W(R);case l.AnnotationType.STRIKEOUT:return new Z(R);case l.AnnotationType.STAMP:return new C(R);case l.AnnotationType.FILEATTACHMENT:return new s(R);default:return new f(R)}}}const x=class x{constructor(R,{isRenderable:w=!1,ignoreBorder:z=!1,createQuadrilaterals:ht=!1}={}){st(this,b,!1);this.isRenderable=w,this.data=R.data,this.layer=R.layer,this.linkService=R.linkService,this.downloadManager=R.downloadManager,this.imageResourcesPath=R.imageResourcesPath,this.renderForms=R.renderForms,this.svgFactory=R.svgFactory,this.annotationStorage=R.annotationStorage,this.enableScripting=R.enableScripting,this.hasJSActions=R.hasJSActions,this._fieldObjects=R.fieldObjects,this.parent=R.parent,w&&(this.container=this._createContainer(z)),ht&&this._createQuadrilaterals()}static _hasPopupData({titleObj:R,contentsObj:w,richText:z}){return!!(R!=null&&R.str||w!=null&&w.str||z!=null&&z.str)}get hasPopupData(){return x._hasPopupData(this.data)}_createContainer(R){const{data:w,parent:{page:z,viewport:ht}}=this,dt=document.createElement("section");dt.setAttribute("data-annotation-id",w.id),this instanceof g||(dt.tabIndex=T),dt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&dt.setAttribute("aria-haspopup","dialog"),w.noRotate&&dt.classList.add("norotate");const{pageWidth:_t,pageHeight:Et,pageX:Ot,pageY:Ft}=ht.rawDims;if(!w.rect||this instanceof h){const{rotation:jt}=w;return!w.hasOwnCanvas&&jt!==0&&this.setRotation(jt,dt),dt}const{width:Rt,height:Wt}=m(w.rect),It=l.Util.normalizeRect([w.rect[0],z.view[3]-w.rect[1]+z.view[1],w.rect[2],z.view[3]-w.rect[3]+z.view[1]]);if(!R&&w.borderStyle.width>0){dt.style.borderWidth=`${w.borderStyle.width}px`;const jt=w.borderStyle.horizontalCornerRadius,Gt=w.borderStyle.verticalCornerRadius;if(jt>0||Gt>0){const Kt=`calc(${jt}px * var(--scale-factor)) / calc(${Gt}px * var(--scale-factor))`;dt.style.borderRadius=Kt}else if(this instanceof c){const Kt=`calc(${Rt}px * var(--scale-factor)) / calc(${Wt}px * var(--scale-factor))`;dt.style.borderRadius=Kt}switch(w.borderStyle.style){case l.AnnotationBorderStyleType.SOLID:dt.style.borderStyle="solid";break;case l.AnnotationBorderStyleType.DASHED:dt.style.borderStyle="dashed";break;case l.AnnotationBorderStyleType.BEVELED:(0,l.warn)("Unimplemented border style: beveled");break;case l.AnnotationBorderStyleType.INSET:(0,l.warn)("Unimplemented border style: inset");break;case l.AnnotationBorderStyleType.UNDERLINE:dt.style.borderBottomStyle="solid";break}const Yt=w.borderColor||null;Yt?(rt(this,b,!0),dt.style.borderColor=l.Util.makeHexColor(Yt[0]|0,Yt[1]|0,Yt[2]|0)):dt.style.borderWidth=0}dt.style.left=`${100*(It[0]-Ot)/_t}%`,dt.style.top=`${100*(It[1]-Ft)/Et}%`;const{rotation:Lt}=w;return w.hasOwnCanvas||Lt===0?(dt.style.width=`${100*Rt/_t}%`,dt.style.height=`${100*Wt/Et}%`):this.setRotation(Lt,dt),dt}setRotation(R,w=this.container){if(!this.data.rect)return;const{pageWidth:z,pageHeight:ht}=this.parent.viewport.rawDims,{width:dt,height:_t}=m(this.data.rect);let Et,Ot;R%180===0?(Et=100*dt/z,Ot=100*_t/ht):(Et=100*_t/z,Ot=100*dt/ht),w.style.width=`${Et}%`,w.style.height=`${Ot}%`,w.setAttribute("data-main-rotation",(360-R)%360)}get _commonActions(){const R=(w,z,ht)=>{const dt=ht.detail[w],_t=dt[0],Et=dt.slice(1);ht.target.style[z]=N.ColorConverters[`${_t}_HTML`](Et),this.annotationStorage.setValue(this.data.id,{[z]:N.ColorConverters[`${_t}_rgb`](Et)})};return(0,l.shadow)(this,"_commonActions",{display:w=>{const{display:z}=w.detail,ht=z%2===1;this.container.style.visibility=ht?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ht,noPrint:z===1||z===2})},print:w=>{this.annotationStorage.setValue(this.data.id,{noPrint:!w.detail.print})},hidden:w=>{const{hidden:z}=w.detail;this.container.style.visibility=z?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:z,noView:z})},focus:w=>{setTimeout(()=>w.target.focus({preventScroll:!1}),0)},userName:w=>{w.target.title=w.detail.userName},readonly:w=>{w.target.disabled=w.detail.readonly},required:w=>{this._setRequired(w.target,w.detail.required)},bgColor:w=>{R("bgColor","backgroundColor",w)},fillColor:w=>{R("fillColor","backgroundColor",w)},fgColor:w=>{R("fgColor","color",w)},textColor:w=>{R("textColor","color",w)},borderColor:w=>{R("borderColor","borderColor",w)},strokeColor:w=>{R("strokeColor","borderColor",w)},rotation:w=>{const z=w.detail.rotation;this.setRotation(z),this.annotationStorage.setValue(this.data.id,{rotation:z})}})}_dispatchEventFromSandbox(R,w){const z=this._commonActions;for(const ht of Object.keys(w.detail)){const dt=R[ht]||z[ht];dt==null||dt(w)}}_setDefaultPropertiesFromJS(R){if(!this.enableScripting)return;const w=this.annotationStorage.getRawValue(this.data.id);if(!w)return;const z=this._commonActions;for(const[ht,dt]of Object.entries(w)){const _t=z[ht];if(_t){const Et={detail:{[ht]:dt},target:R};_t(Et),delete w[ht]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:R}=this.data;if(!R)return;const[w,z,ht,dt]=this.data.rect;if(R.length===1){const[,{x:Gt,y:Yt},{x:Kt,y:Qt}]=R[0];if(ht===Gt&&dt===Yt&&w===Kt&&z===Qt)return}const{style:_t}=this.container;let Et;if(t(this,b)){const{borderColor:Gt,borderWidth:Yt}=_t;_t.borderWidth=0,Et=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Gt}" stroke-width="${Yt}">`],this.container.classList.add("hasBorder")}const Ot=ht-w,Ft=dt-z,{svgFactory:Rt}=this,Wt=Rt.createElement("svg");Wt.classList.add("quadrilateralsContainer"),Wt.setAttribute("width",0),Wt.setAttribute("height",0);const It=Rt.createElement("defs");Wt.append(It);const Lt=Rt.createElement("clipPath"),jt=`clippath_${this.data.id}`;Lt.setAttribute("id",jt),Lt.setAttribute("clipPathUnits","objectBoundingBox"),It.append(Lt);for(const[,{x:Gt,y:Yt},{x:Kt,y:Qt}]of R){const Jt=Rt.createElement("rect"),te=(Kt-w)/Ot,se=(dt-Yt)/Ft,ne=(Gt-Kt)/Ot,ps=(Yt-Qt)/Ft;Jt.setAttribute("x",te),Jt.setAttribute("y",se),Jt.setAttribute("width",ne),Jt.setAttribute("height",ps),Lt.append(Jt),Et==null||Et.push(`<rect vector-effect="non-scaling-stroke" x="${te}" y="${se}" width="${ne}" height="${ps}"/>`)}t(this,b)&&(Et.push("</g></svg>')"),_t.backgroundImage=Et.join("")),this.container.append(Wt),this.container.style.clipPath=`url(#${jt})`}_createPopup(){const{container:R,data:w}=this;R.setAttribute("aria-haspopup","dialog");const z=new h({data:{color:w.color,titleObj:w.titleObj,modificationDate:w.modificationDate,contentsObj:w.contentsObj,richText:w.richText,parentRect:w.rect,borderStyle:0,id:`popup_${w.id}`,rotation:w.rotation},parent:this.parent,elements:[this]});this.parent.div.append(z.render())}render(){(0,l.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(R,w=null){const z=[];if(this._fieldObjects){const ht=this._fieldObjects[R];if(ht)for(const{page:dt,id:_t,exportValues:Et}of ht){if(dt===-1||_t===w)continue;const Ot=typeof Et=="string"?Et:null,Ft=document.querySelector(`[data-element-id="${_t}"]`);if(Ft&&!L.has(Ft)){(0,l.warn)(`_getElementsByName - element not allowed: ${_t}`);continue}z.push({id:_t,exportValue:Ot,domElement:Ft})}return z}for(const ht of document.getElementsByName(R)){const{exportValue:dt}=ht,_t=ht.getAttribute("data-element-id");_t!==w&&L.has(ht)&&z.push({id:_t,exportValue:dt,domElement:ht})}return z}show(){var R;this.container&&(this.container.hidden=!1),(R=this.popup)==null||R.maybeShow()}hide(){var R;this.container&&(this.container.hidden=!0),(R=this.popup)==null||R.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const R=this.getElementsToTriggerPopup();if(Array.isArray(R))for(const w of R)w.classList.add("highlightArea");else R.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:R,data:{id:w}}=this;this.container.addEventListener("dblclick",()=>{var z;(z=this.linkService.eventBus)==null||z.dispatch("switchannotationeditormode",{source:this,mode:R,editId:w})})}};b=new WeakMap;let f=x;class v extends f{constructor(w,z=null){super(w,{isRenderable:!0,ignoreBorder:!!(z!=null&&z.ignoreBorder),createQuadrilaterals:!0});st(this,F);this.isTooltipOnly=w.data.isTooltipOnly}render(){const{data:w,linkService:z}=this,ht=document.createElement("a");ht.setAttribute("data-element-id",w.id);let dt=!1;return w.url?(z.addLinkAttributes(ht,w.url,w.newWindow),dt=!0):w.action?(this._bindNamedAction(ht,w.action),dt=!0):w.attachment?(this._bindAttachment(ht,w.attachment),dt=!0):w.setOCGState?(Y(this,F,Ms).call(this,ht,w.setOCGState),dt=!0):w.dest?(this._bindLink(ht,w.dest),dt=!0):(w.actions&&(w.actions.Action||w.actions["Mouse Up"]||w.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ht,w),dt=!0),w.resetForm?(this._bindResetFormAction(ht,w.resetForm),dt=!0):this.isTooltipOnly&&!dt&&(this._bindLink(ht,""),dt=!0)),this.container.classList.add("linkAnnotation"),dt&&this.container.append(ht),this.container}_bindLink(w,z){w.href=this.linkService.getDestinationHash(z),w.onclick=()=>(z&&this.linkService.goToDestination(z),!1),(z||z==="")&&Y(this,F,ie).call(this)}_bindNamedAction(w,z){w.href=this.linkService.getAnchorUrl(""),w.onclick=()=>(this.linkService.executeNamedAction(z),!1),Y(this,F,ie).call(this)}_bindAttachment(w,z){w.href=this.linkService.getAnchorUrl(""),w.onclick=()=>{var ht;return(ht=this.downloadManager)==null||ht.openOrDownloadData(this.container,z.content,z.filename),!1},Y(this,F,ie).call(this)}_bindJSAction(w,z){w.href=this.linkService.getAnchorUrl("");const ht=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const dt of Object.keys(z.actions)){const _t=ht.get(dt);_t&&(w[_t]=()=>{var Et;return(Et=this.linkService.eventBus)==null||Et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:z.id,name:dt}}),!1})}w.onclick||(w.onclick=()=>!1),Y(this,F,ie).call(this)}_bindResetFormAction(w,z){const ht=w.onclick;if(ht||(w.href=this.linkService.getAnchorUrl("")),Y(this,F,ie).call(this),!this._fieldObjects){(0,l.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ht||(w.onclick=()=>!1);return}w.onclick=()=>{var Wt;ht==null||ht();const{fields:dt,refs:_t,include:Et}=z,Ot=[];if(dt.length!==0||_t.length!==0){const It=new Set(_t);for(const Lt of dt){const jt=this._fieldObjects[Lt]||[];for(const{id:Gt}of jt)It.add(Gt)}for(const Lt of Object.values(this._fieldObjects))for(const jt of Lt)It.has(jt.id)===Et&&Ot.push(jt)}else for(const It of Object.values(this._fieldObjects))Ot.push(...It);const Ft=this.annotationStorage,Rt=[];for(const It of Ot){const{id:Lt}=It;switch(Rt.push(Lt),It.type){case"text":{const Gt=It.defaultValue||"";Ft.setValue(Lt,{value:Gt});break}case"checkbox":case"radiobutton":{const Gt=It.defaultValue===It.exportValues;Ft.setValue(Lt,{value:Gt});break}case"combobox":case"listbox":{const Gt=It.defaultValue||"";Ft.setValue(Lt,{value:Gt});break}default:continue}const jt=document.querySelector(`[data-element-id="${Lt}"]`);if(jt){if(!L.has(jt)){(0,l.warn)(`_bindResetFormAction - element not allowed: ${Lt}`);continue}}else continue;jt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Wt=this.linkService.eventBus)==null||Wt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Rt,name:"ResetForm"}})),!1}}}F=new WeakSet,ie=function(){this.container.setAttribute("data-internal-link","")},Ms=function(w,z){w.href=this.linkService.getAnchorUrl(""),w.onclick=()=>(this.linkService.executeSetOCGState(z),!1),Y(this,F,ie).call(this)};class _ extends f{constructor(R){super(R,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const R=document.createElement("img");return R.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",R.alt="[{{type}} Annotation]",R.dataset.l10nId="text_annotation_type",R.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(R),this.container}}class g extends f{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(R){var w;this.data.hasOwnCanvas&&(((w=R.previousSibling)==null?void 0:w.nodeName)==="CANVAS"&&(R.previousSibling.hidden=!0),R.hidden=!1)}_getKeyModifier(R){const{isWin:w,isMac:z}=l.FeatureTest.platform;return w&&R.ctrlKey||z&&R.metaKey}_setEventListener(R,w,z,ht,dt){z.includes("mouse")?R.addEventListener(z,_t=>{var Et;(Et=this.linkService.eventBus)==null||Et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ht,value:dt(_t),shift:_t.shiftKey,modifier:this._getKeyModifier(_t)}})}):R.addEventListener(z,_t=>{var Et;if(z==="blur"){if(!w.focused||!_t.relatedTarget)return;w.focused=!1}else if(z==="focus"){if(w.focused)return;w.focused=!0}dt&&((Et=this.linkService.eventBus)==null||Et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ht,value:dt(_t)}}))})}_setEventListeners(R,w,z,ht){var dt,_t,Et;for(const[Ot,Ft]of z)(Ft==="Action"||(dt=this.data.actions)!=null&&dt[Ft])&&((Ft==="Focus"||Ft==="Blur")&&(w||(w={focused:!1})),this._setEventListener(R,w,Ot,Ft,ht),Ft==="Focus"&&!((_t=this.data.actions)!=null&&_t.Blur)?this._setEventListener(R,w,"blur","Blur",null):Ft==="Blur"&&!((Et=this.data.actions)!=null&&Et.Focus)&&this._setEventListener(R,w,"focus","Focus",null))}_setBackgroundColor(R){const w=this.data.backgroundColor||null;R.style.backgroundColor=w===null?"transparent":l.Util.makeHexColor(w[0],w[1],w[2])}_setTextStyle(R){const w=["left","center","right"],{fontColor:z}=this.data.defaultAppearanceData,ht=this.data.defaultAppearanceData.fontSize||d,dt=R.style;let _t;const Et=2,Ot=Ft=>Math.round(10*Ft)/10;if(this.data.multiLine){const Ft=Math.abs(this.data.rect[3]-this.data.rect[1]-Et),Rt=Math.round(Ft/(l.LINE_FACTOR*ht))||1,Wt=Ft/Rt;_t=Math.min(ht,Ot(Wt/l.LINE_FACTOR))}else{const Ft=Math.abs(this.data.rect[3]-this.data.rect[1]-Et);_t=Math.min(ht,Ot(Ft/l.LINE_FACTOR))}dt.fontSize=`calc(${_t}px * var(--scale-factor))`,dt.color=l.Util.makeHexColor(z[0],z[1],z[2]),this.data.textAlignment!==null&&(dt.textAlign=w[this.data.textAlignment])}_setRequired(R,w){w?R.setAttribute("required",!0):R.removeAttribute("required"),R.setAttribute("aria-required",w)}}class y extends g{constructor(R){const w=R.renderForms||!R.data.hasAppearance&&!!R.data.fieldValue;super(R,{isRenderable:w})}setPropertyOnSiblings(R,w,z,ht){const dt=this.annotationStorage;for(const _t of this._getElementsByName(R.name,R.id))_t.domElement&&(_t.domElement[w]=z),dt.setValue(_t.id,{[ht]:z})}render(){var ht,dt;const R=this.annotationStorage,w=this.data.id;this.container.classList.add("textWidgetAnnotation");let z=null;if(this.renderForms){const _t=R.getValue(w,{value:this.data.fieldValue});let Et=_t.value||"";const Ot=R.getValue(w,{charLimit:this.data.maxLen}).charLimit;Ot&&Et.length>Ot&&(Et=Et.slice(0,Ot));let Ft=_t.formattedValue||((ht=this.data.textContent)==null?void 0:ht.join(`
`))||null;Ft&&this.data.comb&&(Ft=Ft.replaceAll(/\s+/g,""));const Rt={userValue:Et,formattedValue:Ft,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(z=document.createElement("textarea"),z.textContent=Ft!=null?Ft:Et,this.data.doNotScroll&&(z.style.overflowY="hidden")):(z=document.createElement("input"),z.type="text",z.setAttribute("value",Ft!=null?Ft:Et),this.data.doNotScroll&&(z.style.overflowX="hidden")),this.data.hasOwnCanvas&&(z.hidden=!0),L.add(z),z.setAttribute("data-element-id",w),z.disabled=this.data.readOnly,z.name=this.data.fieldName,z.tabIndex=T,this._setRequired(z,this.data.required),Ot&&(z.maxLength=Ot),z.addEventListener("input",It=>{R.setValue(w,{value:It.target.value}),this.setPropertyOnSiblings(z,"value",It.target.value,"value"),Rt.formattedValue=null}),z.addEventListener("resetform",It=>{var jt;const Lt=(jt=this.data.defaultFieldValue)!=null?jt:"";z.value=Rt.userValue=Lt,Rt.formattedValue=null});let Wt=It=>{const{formattedValue:Lt}=Rt;Lt!=null&&(It.target.value=Lt),It.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){z.addEventListener("focus",Lt=>{if(Rt.focused)return;const{target:jt}=Lt;Rt.userValue&&(jt.value=Rt.userValue),Rt.lastCommittedValue=jt.value,Rt.commitKey=1,Rt.focused=!0}),z.addEventListener("updatefromsandbox",Lt=>{this.showElementAndHideCanvas(Lt.target);const jt={value(Gt){var Yt;Rt.userValue=(Yt=Gt.detail.value)!=null?Yt:"",R.setValue(w,{value:Rt.userValue.toString()}),Gt.target.value=Rt.userValue},formattedValue(Gt){const{formattedValue:Yt}=Gt.detail;Rt.formattedValue=Yt,Yt!=null&&Gt.target!==document.activeElement&&(Gt.target.value=Yt),R.setValue(w,{formattedValue:Yt})},selRange(Gt){Gt.target.setSelectionRange(...Gt.detail.selRange)},charLimit:Gt=>{var Jt;const{charLimit:Yt}=Gt.detail,{target:Kt}=Gt;if(Yt===0){Kt.removeAttribute("maxLength");return}Kt.setAttribute("maxLength",Yt);let Qt=Rt.userValue;!Qt||Qt.length<=Yt||(Qt=Qt.slice(0,Yt),Kt.value=Rt.userValue=Qt,R.setValue(w,{value:Qt}),(Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:w,name:"Keystroke",value:Qt,willCommit:!0,commitKey:1,selStart:Kt.selectionStart,selEnd:Kt.selectionEnd}}))}};this._dispatchEventFromSandbox(jt,Lt)}),z.addEventListener("keydown",Lt=>{var Yt;Rt.commitKey=1;let jt=-1;if(Lt.key==="Escape"?jt=0:Lt.key==="Enter"&&!this.data.multiLine?jt=2:Lt.key==="Tab"&&(Rt.commitKey=3),jt===-1)return;const{value:Gt}=Lt.target;Rt.lastCommittedValue!==Gt&&(Rt.lastCommittedValue=Gt,Rt.userValue=Gt,(Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:w,name:"Keystroke",value:Gt,willCommit:!0,commitKey:jt,selStart:Lt.target.selectionStart,selEnd:Lt.target.selectionEnd}}))});const It=Wt;Wt=null,z.addEventListener("blur",Lt=>{var Gt;if(!Rt.focused||!Lt.relatedTarget)return;Rt.focused=!1;const{value:jt}=Lt.target;Rt.userValue=jt,Rt.lastCommittedValue!==jt&&((Gt=this.linkService.eventBus)==null||Gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:w,name:"Keystroke",value:jt,willCommit:!0,commitKey:Rt.commitKey,selStart:Lt.target.selectionStart,selEnd:Lt.target.selectionEnd}})),It(Lt)}),(dt=this.data.actions)!=null&&dt.Keystroke&&z.addEventListener("beforeinput",Lt=>{var se;Rt.lastCommittedValue=null;const{data:jt,target:Gt}=Lt,{value:Yt,selectionStart:Kt,selectionEnd:Qt}=Gt;let Jt=Kt,te=Qt;switch(Lt.inputType){case"deleteWordBackward":{const ne=Yt.substring(0,Kt).match(/\w*[^\w]*$/);ne&&(Jt-=ne[0].length);break}case"deleteWordForward":{const ne=Yt.substring(Kt).match(/^[^\w]*\w*/);ne&&(te+=ne[0].length);break}case"deleteContentBackward":Kt===Qt&&(Jt-=1);break;case"deleteContentForward":Kt===Qt&&(te+=1);break}Lt.preventDefault(),(se=this.linkService.eventBus)==null||se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:w,name:"Keystroke",value:Yt,change:jt||"",willCommit:!1,selStart:Jt,selEnd:te}})}),this._setEventListeners(z,Rt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Lt=>Lt.target.value)}if(Wt&&z.addEventListener("blur",Wt),this.data.comb){const Lt=(this.data.rect[2]-this.data.rect[0])/Ot;z.classList.add("comb"),z.style.letterSpacing=`calc(${Lt}px * var(--scale-factor) - 1ch)`}}else z=document.createElement("div"),z.textContent=this.data.fieldValue,z.style.verticalAlign="middle",z.style.display="table-cell";return this._setTextStyle(z),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class U extends g{constructor(R){super(R,{isRenderable:!!R.data.hasOwnCanvas})}}class E extends g{constructor(R){super(R,{isRenderable:R.renderForms})}render(){const R=this.annotationStorage,w=this.data,z=w.id;let ht=R.getValue(z,{value:w.exportValue===w.fieldValue}).value;typeof ht=="string"&&(ht=ht!=="Off",R.setValue(z,{value:ht})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const dt=document.createElement("input");return L.add(dt),dt.setAttribute("data-element-id",z),dt.disabled=w.readOnly,this._setRequired(dt,this.data.required),dt.type="checkbox",dt.name=w.fieldName,ht&&dt.setAttribute("checked",!0),dt.setAttribute("exportValue",w.exportValue),dt.tabIndex=T,dt.addEventListener("change",_t=>{const{name:Et,checked:Ot}=_t.target;for(const Ft of this._getElementsByName(Et,z)){const Rt=Ot&&Ft.exportValue===w.exportValue;Ft.domElement&&(Ft.domElement.checked=Rt),R.setValue(Ft.id,{value:Rt})}R.setValue(z,{value:Ot})}),dt.addEventListener("resetform",_t=>{const Et=w.defaultFieldValue||"Off";_t.target.checked=Et===w.exportValue}),this.enableScripting&&this.hasJSActions&&(dt.addEventListener("updatefromsandbox",_t=>{const Et={value(Ot){Ot.target.checked=Ot.detail.value!=="Off",R.setValue(z,{value:Ot.target.checked})}};this._dispatchEventFromSandbox(Et,_t)}),this._setEventListeners(dt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_t=>_t.target.checked)),this._setBackgroundColor(dt),this._setDefaultPropertiesFromJS(dt),this.container.append(dt),this.container}}class c extends g{constructor(R){super(R,{isRenderable:R.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const R=this.annotationStorage,w=this.data,z=w.id;let ht=R.getValue(z,{value:w.fieldValue===w.buttonValue}).value;typeof ht=="string"&&(ht=ht!==w.buttonValue,R.setValue(z,{value:ht}));const dt=document.createElement("input");if(L.add(dt),dt.setAttribute("data-element-id",z),dt.disabled=w.readOnly,this._setRequired(dt,this.data.required),dt.type="radio",dt.name=w.fieldName,ht&&dt.setAttribute("checked",!0),dt.tabIndex=T,dt.addEventListener("change",_t=>{const{name:Et,checked:Ot}=_t.target;for(const Ft of this._getElementsByName(Et,z))R.setValue(Ft.id,{value:!1});R.setValue(z,{value:Ot})}),dt.addEventListener("resetform",_t=>{const Et=w.defaultFieldValue;_t.target.checked=Et!=null&&Et===w.buttonValue}),this.enableScripting&&this.hasJSActions){const _t=w.buttonValue;dt.addEventListener("updatefromsandbox",Et=>{const Ot={value:Ft=>{const Rt=_t===Ft.detail.value;for(const Wt of this._getElementsByName(Ft.target.name)){const It=Rt&&Wt.id===z;Wt.domElement&&(Wt.domElement.checked=It),R.setValue(Wt.id,{value:It})}}};this._dispatchEventFromSandbox(Ot,Et)}),this._setEventListeners(dt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Et=>Et.target.checked)}return this._setBackgroundColor(dt),this._setDefaultPropertiesFromJS(dt),this.container.append(dt),this.container}}class o extends v{constructor(R){super(R,{ignoreBorder:R.data.hasAppearance})}render(){const R=super.render();R.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(R.title=this.data.alternativeText);const w=R.lastChild;return this.enableScripting&&this.hasJSActions&&w&&(this._setDefaultPropertiesFromJS(w),w.addEventListener("updatefromsandbox",z=>{this._dispatchEventFromSandbox({},z)})),R}}class r extends g{constructor(R){super(R,{isRenderable:R.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const R=this.annotationStorage,w=this.data.id,z=R.getValue(w,{value:this.data.fieldValue}),ht=document.createElement("select");L.add(ht),ht.setAttribute("data-element-id",w),ht.disabled=this.data.readOnly,this._setRequired(ht,this.data.required),ht.name=this.data.fieldName,ht.tabIndex=T;let dt=this.data.combo&&this.data.options.length>0;this.data.combo||(ht.size=this.data.options.length,this.data.multiSelect&&(ht.multiple=!0)),ht.addEventListener("resetform",Rt=>{const Wt=this.data.defaultFieldValue;for(const It of ht.options)It.selected=It.value===Wt});for(const Rt of this.data.options){const Wt=document.createElement("option");Wt.textContent=Rt.displayValue,Wt.value=Rt.exportValue,z.value.includes(Rt.exportValue)&&(Wt.setAttribute("selected",!0),dt=!1),ht.append(Wt)}let _t=null;if(dt){const Rt=document.createElement("option");Rt.value=" ",Rt.setAttribute("hidden",!0),Rt.setAttribute("selected",!0),ht.prepend(Rt),_t=()=>{Rt.remove(),ht.removeEventListener("input",_t),_t=null},ht.addEventListener("input",_t)}const Et=Rt=>{const Wt=Rt?"value":"textContent",{options:It,multiple:Lt}=ht;return Lt?Array.prototype.filter.call(It,jt=>jt.selected).map(jt=>jt[Wt]):It.selectedIndex===-1?null:It[It.selectedIndex][Wt]};let Ot=Et(!1);const Ft=Rt=>{const Wt=Rt.target.options;return Array.prototype.map.call(Wt,It=>({displayValue:It.textContent,exportValue:It.value}))};return this.enableScripting&&this.hasJSActions?(ht.addEventListener("updatefromsandbox",Rt=>{const Wt={value(It){_t==null||_t();const Lt=It.detail.value,jt=new Set(Array.isArray(Lt)?Lt:[Lt]);for(const Gt of ht.options)Gt.selected=jt.has(Gt.value);R.setValue(w,{value:Et(!0)}),Ot=Et(!1)},multipleSelection(It){ht.multiple=!0},remove(It){const Lt=ht.options,jt=It.detail.remove;Lt[jt].selected=!1,ht.remove(jt),Lt.length>0&&Array.prototype.findIndex.call(Lt,Yt=>Yt.selected)===-1&&(Lt[0].selected=!0),R.setValue(w,{value:Et(!0),items:Ft(It)}),Ot=Et(!1)},clear(It){for(;ht.length!==0;)ht.remove(0);R.setValue(w,{value:null,items:[]}),Ot=Et(!1)},insert(It){const{index:Lt,displayValue:jt,exportValue:Gt}=It.detail.insert,Yt=ht.children[Lt],Kt=document.createElement("option");Kt.textContent=jt,Kt.value=Gt,Yt?Yt.before(Kt):ht.append(Kt),R.setValue(w,{value:Et(!0),items:Ft(It)}),Ot=Et(!1)},items(It){const{items:Lt}=It.detail;for(;ht.length!==0;)ht.remove(0);for(const jt of Lt){const{displayValue:Gt,exportValue:Yt}=jt,Kt=document.createElement("option");Kt.textContent=Gt,Kt.value=Yt,ht.append(Kt)}ht.options.length>0&&(ht.options[0].selected=!0),R.setValue(w,{value:Et(!0),items:Ft(It)}),Ot=Et(!1)},indices(It){const Lt=new Set(It.detail.indices);for(const jt of It.target.options)jt.selected=Lt.has(jt.index);R.setValue(w,{value:Et(!0)}),Ot=Et(!1)},editable(It){It.target.disabled=!It.detail.editable}};this._dispatchEventFromSandbox(Wt,Rt)}),ht.addEventListener("input",Rt=>{var It;const Wt=Et(!0);R.setValue(w,{value:Wt}),Rt.preventDefault(),(It=this.linkService.eventBus)==null||It.dispatch("dispatcheventinsandbox",{source:this,detail:{id:w,name:"Keystroke",value:Ot,changeEx:Wt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ht,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Rt=>Rt.target.value)):ht.addEventListener("input",function(Rt){R.setValue(w,{value:Et(!0)})}),this.data.combo&&this._setTextStyle(ht),this._setBackgroundColor(ht),this._setDefaultPropertiesFromJS(ht),this.container.append(ht),this.container}}class h extends f{constructor(R){const{data:w,elements:z}=R;super(R,{isRenderable:f._hasPopupData(w)}),this.elements=z}render(){this.container.classList.add("popupAnnotation");const R=new u({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),w=[];for(const z of this.elements)z.popup=R,w.push(z.data.id),z.addHighlightArea();return this.container.setAttribute("aria-controls",w.map(z=>`${l.AnnotationPrefix}${z}`).join(",")),this.container}}class u{constructor({container:R,color:w,elements:z,titleObj:ht,modificationDate:dt,contentsObj:_t,richText:Et,parent:Ot,rect:Ft,parentRect:Rt,open:Wt}){st(this,Ct);st(this,ot,null);st(this,ut,Y(this,Ct,Is).bind(this));st(this,ft,Y(this,Ct,ss).bind(this));st(this,mt,Y(this,Ct,es).bind(this));st(this,At,Y(this,Ct,Ce).bind(this));st(this,vt,null);st(this,tt,null);st(this,nt,null);st(this,A,null);st(this,O,null);st(this,K,null);st(this,et,!1);st(this,pt,null);st(this,St,null);st(this,yt,null);st(this,J,null);st(this,Pt,!1);var Lt;rt(this,tt,R),rt(this,J,ht),rt(this,nt,_t),rt(this,yt,Et),rt(this,O,Ot),rt(this,vt,w),rt(this,St,Ft),rt(this,K,Rt),rt(this,A,z);const It=p.PDFDateString.toDateObject(dt);It&&rt(this,ot,Ot.l10n.get("annotation_date_string",{date:It.toLocaleDateString(),time:It.toLocaleTimeString()})),this.trigger=z.flatMap(jt=>jt.getElementsToTriggerPopup());for(const jt of this.trigger)jt.addEventListener("click",t(this,At)),jt.addEventListener("mouseenter",t(this,mt)),jt.addEventListener("mouseleave",t(this,ft)),jt.classList.add("popupTriggerArea");for(const jt of z)(Lt=jt.container)==null||Lt.addEventListener("keydown",t(this,ut));t(this,tt).hidden=!0,Wt&&Y(this,Ct,Ce).call(this)}render(){if(t(this,pt))return;const{page:{view:R},viewport:{rawDims:{pageWidth:w,pageHeight:z,pageX:ht,pageY:dt}}}=t(this,O),_t=rt(this,pt,document.createElement("div"));if(_t.className="popup",t(this,vt)){const Jt=_t.style.outlineColor=l.Util.makeHexColor(...t(this,vt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?_t.style.backgroundColor=`color-mix(in srgb, ${Jt} 30%, white)`:_t.style.backgroundColor=l.Util.makeHexColor(...t(this,vt).map(se=>Math.floor(.7*(255-se)+se)))}const Et=document.createElement("span");Et.className="header";const Ot=document.createElement("h1");if(Et.append(Ot),{dir:Ot.dir,str:Ot.textContent}=t(this,J),_t.append(Et),t(this,ot)){const Jt=document.createElement("span");Jt.classList.add("popupDate"),t(this,ot).then(te=>{Jt.textContent=te}),Et.append(Jt)}const Ft=t(this,nt),Rt=t(this,yt);if(Rt!=null&&Rt.str&&(!(Ft!=null&&Ft.str)||Ft.str===Rt.str))M.XfaLayer.render({xfaHtml:Rt.html,intent:"richText",div:_t}),_t.lastChild.classList.add("richText","popupContent");else{const Jt=this._formatContents(Ft);_t.append(Jt)}let Wt=!!t(this,K),It=Wt?t(this,K):t(this,St);for(const Jt of t(this,A))if(!It||l.Util.intersect(Jt.data.rect,It)!==null){It=Jt.data.rect,Wt=!0;break}const Lt=l.Util.normalizeRect([It[0],R[3]-It[1]+R[1],It[2],R[3]-It[3]+R[1]]),Gt=Wt?It[2]-It[0]+5:0,Yt=Lt[0]+Gt,Kt=Lt[1],{style:Qt}=t(this,tt);Qt.left=`${100*(Yt-ht)/w}%`,Qt.top=`${100*(Kt-dt)/z}%`,t(this,tt).append(_t)}_formatContents({str:R,dir:w}){const z=document.createElement("p");z.classList.add("popupContent"),z.dir=w;const ht=R.split(/(?:\r\n?|\n)/);for(let dt=0,_t=ht.length;dt<_t;++dt){const Et=ht[dt];z.append(document.createTextNode(Et)),dt<_t-1&&z.append(document.createElement("br"))}return z}forceHide(){rt(this,Pt,this.isVisible),t(this,Pt)&&(t(this,tt).hidden=!0)}maybeShow(){t(this,Pt)&&(rt(this,Pt,!1),t(this,tt).hidden=!1)}get isVisible(){return t(this,tt).hidden===!1}}ot=new WeakMap,ut=new WeakMap,ft=new WeakMap,mt=new WeakMap,At=new WeakMap,vt=new WeakMap,tt=new WeakMap,nt=new WeakMap,A=new WeakMap,O=new WeakMap,K=new WeakMap,et=new WeakMap,pt=new WeakMap,St=new WeakMap,yt=new WeakMap,J=new WeakMap,Pt=new WeakMap,Ct=new WeakSet,Is=function(R){R.altKey||R.shiftKey||R.ctrlKey||R.metaKey||(R.key==="Enter"||R.key==="Escape"&&t(this,et))&&Y(this,Ct,Ce).call(this)},Ce=function(){rt(this,et,!t(this,et)),t(this,et)?(Y(this,Ct,es).call(this),t(this,tt).addEventListener("click",t(this,At)),t(this,tt).addEventListener("keydown",t(this,ut))):(Y(this,Ct,ss).call(this),t(this,tt).removeEventListener("click",t(this,At)),t(this,tt).removeEventListener("keydown",t(this,ut)))},es=function(){t(this,pt)||this.render(),this.isVisible?t(this,et)&&t(this,tt).classList.add("focused"):(t(this,tt).hidden=!1,t(this,tt).style.zIndex=parseInt(t(this,tt).style.zIndex)+1e3)},ss=function(){t(this,tt).classList.remove("focused"),!(t(this,et)||!this.isVisible)&&(t(this,tt).hidden=!0,t(this,tt).style.zIndex=parseInt(t(this,tt).style.zIndex)-1e3)};class j extends f{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0}),this.textContent=R.data.textContent,this.textPosition=R.data.textPosition,this.annotationEditorType=l.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const R=document.createElement("div");R.classList.add("annotationTextContent"),R.setAttribute("role","comment");for(const w of this.textContent){const z=document.createElement("span");z.textContent=w,R.append(z)}this.container.append(R)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=j;class a extends f{constructor(w){super(w,{isRenderable:!0,ignoreBorder:!0});st(this,Ut,null)}render(){this.container.classList.add("lineAnnotation");const w=this.data,{width:z,height:ht}=m(w.rect),dt=this.svgFactory.create(z,ht,!0),_t=rt(this,Ut,this.svgFactory.createElement("svg:line"));return _t.setAttribute("x1",w.rect[2]-w.lineCoordinates[0]),_t.setAttribute("y1",w.rect[3]-w.lineCoordinates[1]),_t.setAttribute("x2",w.rect[2]-w.lineCoordinates[2]),_t.setAttribute("y2",w.rect[3]-w.lineCoordinates[3]),_t.setAttribute("stroke-width",w.borderStyle.width||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),dt.append(_t),this.container.append(dt),!w.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Ut)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ut=new WeakMap;class S extends f{constructor(w){super(w,{isRenderable:!0,ignoreBorder:!0});st(this,qt,null)}render(){this.container.classList.add("squareAnnotation");const w=this.data,{width:z,height:ht}=m(w.rect),dt=this.svgFactory.create(z,ht,!0),_t=w.borderStyle.width,Et=rt(this,qt,this.svgFactory.createElement("svg:rect"));return Et.setAttribute("x",_t/2),Et.setAttribute("y",_t/2),Et.setAttribute("width",z-_t),Et.setAttribute("height",ht-_t),Et.setAttribute("stroke-width",_t||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),dt.append(Et),this.container.append(dt),!w.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,qt)}addHighlightArea(){this.container.classList.add("highlightArea")}}qt=new WeakMap;class D extends f{constructor(w){super(w,{isRenderable:!0,ignoreBorder:!0});st(this,Vt,null)}render(){this.container.classList.add("circleAnnotation");const w=this.data,{width:z,height:ht}=m(w.rect),dt=this.svgFactory.create(z,ht,!0),_t=w.borderStyle.width,Et=rt(this,Vt,this.svgFactory.createElement("svg:ellipse"));return Et.setAttribute("cx",z/2),Et.setAttribute("cy",ht/2),Et.setAttribute("rx",z/2-_t/2),Et.setAttribute("ry",ht/2-_t/2),Et.setAttribute("stroke-width",_t||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),dt.append(Et),this.container.append(dt),!w.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Vt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vt=new WeakMap;class at extends f{constructor(w){super(w,{isRenderable:!0,ignoreBorder:!0});st(this,bt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const w=this.data,{width:z,height:ht}=m(w.rect),dt=this.svgFactory.create(z,ht,!0);let _t=[];for(const Ot of w.vertices){const Ft=Ot.x-w.rect[0],Rt=w.rect[3]-Ot.y;_t.push(Ft+","+Rt)}_t=_t.join(" ");const Et=rt(this,bt,this.svgFactory.createElement(this.svgElementName));return Et.setAttribute("points",_t),Et.setAttribute("stroke-width",w.borderStyle.width||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),dt.append(Et),this.container.append(dt),!w.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,bt)}addHighlightArea(){this.container.classList.add("highlightArea")}}bt=new WeakMap;class G extends at{constructor(R){super(R),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Q extends f{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class q extends f{constructor(w){super(w,{isRenderable:!0,ignoreBorder:!0});st(this,it,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=l.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const w=this.data,{width:z,height:ht}=m(w.rect),dt=this.svgFactory.create(z,ht,!0);for(const _t of w.inkLists){let Et=[];for(const Ft of _t){const Rt=Ft.x-w.rect[0],Wt=w.rect[3]-Ft.y;Et.push(`${Rt},${Wt}`)}Et=Et.join(" ");const Ot=this.svgFactory.createElement(this.svgElementName);t(this,it).push(Ot),Ot.setAttribute("points",Et),Ot.setAttribute("stroke-width",w.borderStyle.width||1),Ot.setAttribute("stroke","transparent"),Ot.setAttribute("fill","transparent"),!w.popupRef&&this.hasPopupData&&this._createPopup(),dt.append(Ot)}return this.container.append(dt),this.container}getElementsToTriggerPopup(){return t(this,it)}addHighlightArea(){this.container.classList.add("highlightArea")}}it=new WeakMap,e.InkAnnotationElement=q;class ct extends f{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class k extends f{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class W extends f{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Z extends f{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class C extends f{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=C;class s extends f{constructor(w){var dt;super(w,{isRenderable:!0});st(this,xt);st(this,lt,null);const{filename:z,content:ht}=this.data.file;this.filename=(0,p.getFilenameFromUrl)(z,!0),this.content=ht,(dt=this.linkService.eventBus)==null||dt.dispatch("fileattachmentannotation",{source:this,filename:z,content:ht})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:w,data:z}=this;let ht;z.hasAppearance||z.fillAlpha===0?ht=document.createElement("div"):(ht=document.createElement("img"),ht.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(z.name)?"paperclip":"pushpin"}.svg`,z.fillAlpha&&z.fillAlpha<1&&(ht.style=`filter: opacity(${Math.round(z.fillAlpha*100)}%);`)),ht.addEventListener("dblclick",Y(this,xt,ns).bind(this)),rt(this,lt,ht);const{isMac:dt}=l.FeatureTest.platform;return w.addEventListener("keydown",_t=>{_t.key==="Enter"&&(dt?_t.metaKey:_t.ctrlKey)&&Y(this,xt,ns).call(this)}),!z.popupRef&&this.hasPopupData?this._createPopup():ht.classList.add("popupTriggerArea"),w.append(ht),w}getElementsToTriggerPopup(){return t(this,lt)}addHighlightArea(){this.container.classList.add("highlightArea")}}lt=new WeakMap,xt=new WeakSet,ns=function(){var w;(w=this.downloadManager)==null||w.openOrDownloadData(this.container,this.content,this.filename)};class n{constructor({div:R,accessibilityManager:w,annotationCanvasMap:z,l10n:ht,page:dt,viewport:_t}){st(this,Tt);st(this,zt,null);st(this,B,null);st(this,gt,new Map);this.div=R,rt(this,zt,w),rt(this,B,z),this.l10n=ht,this.page=dt,this.viewport=_t,this.zIndex=0,this.l10n||(this.l10n=V.NullL10n)}async render(R){const{annotations:w}=R,z=this.div;(0,p.setLayerDimensions)(z,this.viewport);const ht=new Map,dt={data:null,layer:z,linkService:R.linkService,downloadManager:R.downloadManager,imageResourcesPath:R.imageResourcesPath||"",renderForms:R.renderForms!==!1,svgFactory:new p.DOMSVGFactory,annotationStorage:R.annotationStorage||new P.AnnotationStorage,enableScripting:R.enableScripting===!0,hasJSActions:R.hasJSActions,fieldObjects:R.fieldObjects,parent:this,elements:null};for(const _t of w){if(_t.noHTML)continue;const Et=_t.annotationType===l.AnnotationType.POPUP;if(Et){const Rt=ht.get(_t.id);if(!Rt)continue;dt.elements=Rt}else{const{width:Rt,height:Wt}=m(_t.rect);if(Rt<=0||Wt<=0)continue}dt.data=_t;const Ot=i.create(dt);if(!Ot.isRenderable)continue;if(!Et&&_t.popupRef){const Rt=ht.get(_t.popupRef);Rt?Rt.push(Ot):ht.set(_t.popupRef,[Ot])}Ot.annotationEditorType>0&&t(this,gt).set(Ot.data.id,Ot);const Ft=Ot.render();_t.hidden&&(Ft.style.visibility="hidden"),Y(this,Tt,Ds).call(this,Ft,_t.id)}Y(this,Tt,is).call(this),await this.l10n.translate(z)}update({viewport:R}){const w=this.div;this.viewport=R,(0,p.setLayerDimensions)(w,{rotation:R.rotation}),Y(this,Tt,is).call(this),w.hidden=!1}getEditableAnnotations(){return Array.from(t(this,gt).values())}getEditableAnnotation(R){return t(this,gt).get(R)}}zt=new WeakMap,B=new WeakMap,gt=new WeakMap,Tt=new WeakSet,Ds=function(R,w){var ht;const z=R.firstChild||R;z.id=`${l.AnnotationPrefix}${w}`,this.div.append(R),(ht=t(this,zt))==null||ht.moveElementInDOM(this.div,R,z,!1)},is=function(){if(!t(this,B))return;const R=this.div;for(const[w,z]of t(this,B)){const ht=R.querySelector(`[data-annotation-id="${w}"]`);if(!ht)continue;const{firstChild:dt}=ht;dt?dt.nodeName==="CANVAS"?dt.replaceWith(z):dt.before(z):ht.append(z)}t(this,B).clear()},e.AnnotationLayer=n},(X,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function H(P){return Math.floor(Math.max(0,Math.min(1,P))*255).toString(16).padStart(2,"0")}function l(P){return Math.max(0,Math.min(255,255*P))}class p{static CMYK_G([N,V,M,T]){return["G",1-Math.min(1,.3*N+.59*M+.11*V+T)]}static G_CMYK([N]){return["CMYK",0,0,0,1-N]}static G_RGB([N]){return["RGB",N,N,N]}static G_rgb([N]){return N=l(N),[N,N,N]}static G_HTML([N]){const V=H(N);return`#${V}${V}${V}`}static RGB_G([N,V,M]){return["G",.3*N+.59*V+.11*M]}static RGB_rgb(N){return N.map(l)}static RGB_HTML(N){return`#${N.map(H).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([N,V,M,T]){return["RGB",1-Math.min(1,N+T),1-Math.min(1,M+T),1-Math.min(1,V+T)]}static CMYK_rgb([N,V,M,T]){return[l(1-Math.min(1,N+T)),l(1-Math.min(1,M+T)),l(1-Math.min(1,V+T))]}static CMYK_HTML(N){const V=this.CMYK_RGB(N).slice(1);return this.RGB_HTML(V)}static RGB_CMYK([N,V,M]){const T=1-N,d=1-V,L=1-M,m=Math.min(T,d,L);return["CMYK",T,d,L,m]}}e.ColorConverters=p},(X,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=l;const H={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};H.print_progress_percent="{{progress}}%";function l(N,V){switch(N){case"find_match_count":N=`find_match_count[${V.total===1?"one":"other"}]`;break;case"find_match_count_limit":N=`find_match_count_limit[${V.limit===1?"one":"other"}]`;break}return H[N]||""}function p(N,V){return V?N.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(M,T)=>T in V?V[T]:"{{"+T+"}}"):N}const P={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(N,V=null,M=l(N,V)){return p(M,V)},async translate(N){}};e.NullL10n=P},(X,e,H)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var l=H(25);class p{static setupStorage(N,V,M,T,d){const L=T.getValue(V,{value:null});switch(M.name){case"textarea":if(L.value!==null&&(N.textContent=L.value),d==="print")break;N.addEventListener("input",m=>{T.setValue(V,{value:m.target.value})});break;case"input":if(M.attributes.type==="radio"||M.attributes.type==="checkbox"){if(L.value===M.attributes.xfaOn?N.setAttribute("checked",!0):L.value===M.attributes.xfaOff&&N.removeAttribute("checked"),d==="print")break;N.addEventListener("change",m=>{T.setValue(V,{value:m.target.checked?m.target.getAttribute("xfaOn"):m.target.getAttribute("xfaOff")})})}else{if(L.value!==null&&N.setAttribute("value",L.value),d==="print")break;N.addEventListener("input",m=>{T.setValue(V,{value:m.target.value})})}break;case"select":if(L.value!==null){N.setAttribute("value",L.value);for(const m of M.children)m.attributes.value===L.value?m.attributes.selected=!0:m.attributes.hasOwnProperty("selected")&&delete m.attributes.selected}N.addEventListener("input",m=>{const i=m.target.options,f=i.selectedIndex===-1?"":i[i.selectedIndex].value;T.setValue(V,{value:f})});break}}static setAttributes({html:N,element:V,storage:M=null,intent:T,linkService:d}){const{attributes:L}=V,m=N instanceof HTMLAnchorElement;L.type==="radio"&&(L.name=`${L.name}-${T}`);for(const[i,f]of Object.entries(L))if(f!=null)switch(i){case"class":f.length&&N.setAttribute(i,f.join(" "));break;case"dataId":break;case"id":N.setAttribute("data-element-id",f);break;case"style":Object.assign(N.style,f);break;case"textContent":N.textContent=f;break;default:(!m||i!=="href"&&i!=="newWindow")&&N.setAttribute(i,f)}m&&d.addLinkAttributes(N,L.href,L.newWindow),M&&L.dataId&&this.setupStorage(N,L.dataId,V,M)}static render(N){var v;const V=N.annotationStorage,M=N.linkService,T=N.xfaHtml,d=N.intent||"display",L=document.createElement(T.name);T.attributes&&this.setAttributes({html:L,element:T,intent:d,linkService:M});const m=[[T,-1,L]],i=N.div;if(i.append(L),N.viewport){const _=`matrix(${N.viewport.transform.join(",")})`;i.style.transform=_}d!=="richText"&&i.setAttribute("class","xfaLayer xfaFont");const f=[];for(;m.length>0;){const[_,g,y]=m.at(-1);if(g+1===_.children.length){m.pop();continue}const U=_.children[++m.at(-1)[1]];if(U===null)continue;const{name:E}=U;if(E==="#text"){const o=document.createTextNode(U.value);f.push(o),y.append(o);continue}const c=(v=U==null?void 0:U.attributes)!=null&&v.xmlns?document.createElementNS(U.attributes.xmlns,E):document.createElement(E);if(y.append(c),U.attributes&&this.setAttributes({html:c,element:U,storage:V,intent:d,linkService:M}),U.children&&U.children.length>0)m.push([U,-1,c]);else if(U.value){const o=document.createTextNode(U.value);l.XfaText.shouldBuildText(E)&&f.push(o),c.append(o)}}for(const _ of i.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:f}}static update(N){const V=`matrix(${N.viewport.transform.join(",")})`;N.div.style.transform=V,N.div.hidden=!1}}e.XfaLayer=p},(X,e,H)=>{var T,d,L,m,i,f,v,_,g,y,U,E,c,o,r,Os,Ls,Ns,Us,rs,Bs,as,js,Hs,Ws,qs,Gs,ee,os,Te,Pe,le,ls,Re,F,zs,cs,Xs,Vs,hs,ke,ce;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var l=H(1),p=H(4),P=H(29),N=H(6),V=H(5);const vt=class vt extends p.AnnotationEditor{constructor(A){super({...A,name:"inkEditor"});st(this,r);st(this,T,0);st(this,d,0);st(this,L,this.canvasPointermove.bind(this));st(this,m,this.canvasPointerleave.bind(this));st(this,i,this.canvasPointerup.bind(this));st(this,f,this.canvasPointerdown.bind(this));st(this,v,new Path2D);st(this,_,!1);st(this,g,!1);st(this,y,!1);st(this,U,null);st(this,E,0);st(this,c,0);st(this,o,null);this.color=A.color||null,this.thickness=A.thickness||null,this.opacity=A.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(A){p.AnnotationEditor.initialize(A,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(A,O){switch(A){case l.AnnotationEditorParamsType.INK_THICKNESS:vt._defaultThickness=O;break;case l.AnnotationEditorParamsType.INK_COLOR:vt._defaultColor=O;break;case l.AnnotationEditorParamsType.INK_OPACITY:vt._defaultOpacity=O/100;break}}updateParams(A,O){switch(A){case l.AnnotationEditorParamsType.INK_THICKNESS:Y(this,r,Os).call(this,O);break;case l.AnnotationEditorParamsType.INK_COLOR:Y(this,r,Ls).call(this,O);break;case l.AnnotationEditorParamsType.INK_OPACITY:Y(this,r,Ns).call(this,O);break}}static get defaultPropertiesToUpdate(){return[[l.AnnotationEditorParamsType.INK_THICKNESS,vt._defaultThickness],[l.AnnotationEditorParamsType.INK_COLOR,vt._defaultColor||p.AnnotationEditor._defaultLineColor],[l.AnnotationEditorParamsType.INK_OPACITY,Math.round(vt._defaultOpacity*100)]]}get propertiesToUpdate(){var A;return[[l.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||vt._defaultThickness],[l.AnnotationEditorParamsType.INK_COLOR,this.color||vt._defaultColor||p.AnnotationEditor._defaultLineColor],[l.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((A=this.opacity)!=null?A:vt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Y(this,r,Te).call(this),Y(this,r,Pe).call(this)),this.isAttachedToDOM||(this.parent.add(this),Y(this,r,le).call(this)),Y(this,r,ce).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,U).disconnect(),rt(this,U,null),super.remove())}setParent(A){!this.parent&&A?this._uiManager.removeShouldRescale(this):this.parent&&A===null&&this._uiManager.addShouldRescale(this),super.setParent(A)}onScaleChanging(){const[A,O]=this.parentDimensions,K=this.width*A,et=this.height*O;this.setDimensions(K,et)}enableEditMode(){t(this,_)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,f)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,f)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,_)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),rt(this,_,!0),this.div.classList.add("disabled"),Y(this,r,ce).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(A){this._focusEventsAllowed&&(super.focusin(A),this.enableEditMode())}canvasPointerdown(A){A.button!==0||!this.isInEditMode()||t(this,_)||(this.setInForeground(),A.preventDefault(),A.type!=="mouse"&&this.div.focus(),Y(this,r,Bs).call(this,A.offsetX,A.offsetY))}canvasPointermove(A){A.preventDefault(),Y(this,r,as).call(this,A.offsetX,A.offsetY)}canvasPointerup(A){A.preventDefault(),Y(this,r,os).call(this,A)}canvasPointerleave(A){Y(this,r,os).call(this,A)}get isResizable(){return!this.isEmpty()&&t(this,_)}render(){if(this.div)return this.div;let A,O;this.width&&(A=this.x,O=this.y),super.render(),p.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(yt=>{var J;return(J=this.div)==null?void 0:J.setAttribute("aria-label",yt)});const[K,et,pt,St]=Y(this,r,Us).call(this);if(this.setAt(K,et,0,0),this.setDims(pt,St),Y(this,r,Te).call(this),this.width){const[yt,J]=this.parentDimensions;this.setAspectRatio(this.width*yt,this.height*J),this.setAt(A*yt,O*J,this.width*yt,this.height*J),rt(this,y,!0),Y(this,r,le).call(this),this.setDims(this.width*yt,this.height*J),Y(this,r,ee).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Y(this,r,Pe).call(this),this.div}setDimensions(A,O){const K=Math.round(A),et=Math.round(O);if(t(this,E)===K&&t(this,c)===et)return;rt(this,E,K),rt(this,c,et),this.canvas.style.visibility="hidden";const[pt,St]=this.parentDimensions;this.width=A/pt,this.height=O/St,this.fixAndSetPosition(),t(this,_)&&Y(this,r,ls).call(this,A,O),Y(this,r,le).call(this),Y(this,r,ee).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(A,O,K){var Ut,qt,Vt;if(A instanceof P.InkAnnotationElement)return null;const et=super.deserialize(A,O,K);et.thickness=A.thickness,et.color=l.Util.makeHexColor(...A.color),et.opacity=A.opacity;const[pt,St]=et.pageDimensions,yt=et.width*pt,J=et.height*St,Pt=et.parentScale,Ct=A.thickness/2;rt(et,_,!0),rt(et,E,Math.round(yt)),rt(et,c,Math.round(J));const{paths:Ht,rect:Bt,rotation:$t}=A;for(let{bezier:bt}of Ht){bt=Y(Ut=vt,F,Xs).call(Ut,bt,Bt,$t);const it=[];et.paths.push(it);let lt=Pt*(bt[0]-Ct),xt=Pt*(bt[1]-Ct);for(let zt=2,B=bt.length;zt<B;zt+=6){const gt=Pt*(bt[zt]-Ct),Tt=Pt*(bt[zt+1]-Ct),Dt=Pt*(bt[zt+2]-Ct),Nt=Pt*(bt[zt+3]-Ct),kt=Pt*(bt[zt+4]-Ct),R=Pt*(bt[zt+5]-Ct);it.push([[lt,xt],[gt,Tt],[Dt,Nt],[kt,R]]),lt=kt,xt=R}const Xt=Y(this,F,zs).call(this,it);et.bezierPath2D.push(Xt)}const Mt=Y(qt=et,r,hs).call(qt);return rt(et,d,Math.max(p.AnnotationEditor.MIN_SIZE,Mt[2]-Mt[0])),rt(et,T,Math.max(p.AnnotationEditor.MIN_SIZE,Mt[3]-Mt[1])),Y(Vt=et,r,ls).call(Vt,yt,J),et}serialize(){if(this.isEmpty())return null;const A=this.getRect(0,0),O=p.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:l.AnnotationEditorType.INK,color:O,thickness:this.thickness,opacity:this.opacity,paths:Y(this,r,Vs).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,A),pageIndex:this.pageIndex,rect:A,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};T=new WeakMap,d=new WeakMap,L=new WeakMap,m=new WeakMap,i=new WeakMap,f=new WeakMap,v=new WeakMap,_=new WeakMap,g=new WeakMap,y=new WeakMap,U=new WeakMap,E=new WeakMap,c=new WeakMap,o=new WeakMap,r=new WeakSet,Os=function(A){const O=this.thickness;this.addCommands({cmd:()=>{this.thickness=A,Y(this,r,ce).call(this)},undo:()=>{this.thickness=O,Y(this,r,ce).call(this)},mustExec:!0,type:l.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Ls=function(A){const O=this.color;this.addCommands({cmd:()=>{this.color=A,Y(this,r,ee).call(this)},undo:()=>{this.color=O,Y(this,r,ee).call(this)},mustExec:!0,type:l.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ns=function(A){A/=100;const O=this.opacity;this.addCommands({cmd:()=>{this.opacity=A,Y(this,r,ee).call(this)},undo:()=>{this.opacity=O,Y(this,r,ee).call(this)},mustExec:!0,type:l.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Us=function(){const{parentRotation:A,parentDimensions:[O,K]}=this;switch(A){case 90:return[0,K,K,O];case 180:return[O,K,O,K];case 270:return[O,0,K,O];default:return[0,0,O,K]}},rs=function(){const{ctx:A,color:O,opacity:K,thickness:et,parentScale:pt,scaleFactor:St}=this;A.lineWidth=et*pt/St,A.lineCap="round",A.lineJoin="round",A.miterLimit=10,A.strokeStyle=`${O}${(0,V.opacityToHex)(K)}`},Bs=function(A,O){var K;this.canvas.addEventListener("contextmenu",N.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,m)),this.canvas.addEventListener("pointermove",t(this,L)),this.canvas.addEventListener("pointerup",t(this,i)),this.canvas.removeEventListener("pointerdown",t(this,f)),this.isEditing=!0,t(this,y)||(rt(this,y,!0),Y(this,r,le).call(this),this.thickness||(this.thickness=vt._defaultThickness),this.color||(this.color=vt._defaultColor||p.AnnotationEditor._defaultLineColor),(K=this.opacity)!=null||(this.opacity=vt._defaultOpacity)),this.currentPath.push([A,O]),rt(this,g,!1),Y(this,r,rs).call(this),rt(this,o,()=>{Y(this,r,Ws).call(this),t(this,o)&&window.requestAnimationFrame(t(this,o))}),window.requestAnimationFrame(t(this,o))},as=function(A,O){const[K,et]=this.currentPath.at(-1);if(this.currentPath.length>1&&A===K&&O===et)return;const pt=this.currentPath;let St=t(this,v);if(pt.push([A,O]),rt(this,g,!0),pt.length<=2){St.moveTo(...pt[0]),St.lineTo(A,O);return}pt.length===3&&(rt(this,v,St=new Path2D),St.moveTo(...pt[0])),Y(this,r,qs).call(this,St,...pt.at(-3),...pt.at(-2),A,O)},js=function(){if(this.currentPath.length===0)return;const A=this.currentPath.at(-1);t(this,v).lineTo(...A)},Hs=function(A,O){rt(this,o,null),A=Math.min(Math.max(A,0),this.canvas.width),O=Math.min(Math.max(O,0),this.canvas.height),Y(this,r,as).call(this,A,O),Y(this,r,js).call(this);let K;if(this.currentPath.length!==1)K=Y(this,r,Gs).call(this);else{const J=[A,O];K=[[J,J.slice(),J.slice(),J]]}const et=t(this,v),pt=this.currentPath;this.currentPath=[],rt(this,v,new Path2D);const St=()=>{this.allRawPaths.push(pt),this.paths.push(K),this.bezierPath2D.push(et),this.rebuild()},yt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Y(this,r,Te).call(this),Y(this,r,Pe).call(this)),Y(this,r,ce).call(this))};this.addCommands({cmd:St,undo:yt,mustExec:!0})},Ws=function(){if(!t(this,g))return;rt(this,g,!1);const A=Math.ceil(this.thickness*this.parentScale),O=this.currentPath.slice(-3),K=O.map(St=>St[0]),et=O.map(St=>St[1]);Math.min(...K)-A,Math.max(...K)+A,Math.min(...et)-A,Math.max(...et)+A;const{ctx:pt}=this;pt.save(),pt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const St of this.bezierPath2D)pt.stroke(St);pt.stroke(t(this,v)),pt.restore()},qs=function(A,O,K,et,pt,St,yt){const J=(O+et)/2,Pt=(K+pt)/2,Ct=(et+St)/2,Ht=(pt+yt)/2;A.bezierCurveTo(J+2*(et-J)/3,Pt+2*(pt-Pt)/3,Ct+2*(et-Ct)/3,Ht+2*(pt-Ht)/3,Ct,Ht)},Gs=function(){const A=this.currentPath;if(A.length<=2)return[[A[0],A[0],A.at(-1),A.at(-1)]];const O=[];let K,[et,pt]=A[0];for(K=1;K<A.length-2;K++){const[Bt,$t]=A[K],[Mt,Ut]=A[K+1],qt=(Bt+Mt)/2,Vt=($t+Ut)/2,bt=[et+2*(Bt-et)/3,pt+2*($t-pt)/3],it=[qt+2*(Bt-qt)/3,Vt+2*($t-Vt)/3];O.push([[et,pt],bt,it,[qt,Vt]]),[et,pt]=[qt,Vt]}const[St,yt]=A[K],[J,Pt]=A[K+1],Ct=[et+2*(St-et)/3,pt+2*(yt-pt)/3],Ht=[J+2*(St-J)/3,Pt+2*(yt-Pt)/3];return O.push([[et,pt],Ct,Ht,[J,Pt]]),O},ee=function(){if(this.isEmpty()){Y(this,r,Re).call(this);return}Y(this,r,rs).call(this);const{canvas:A,ctx:O}=this;O.setTransform(1,0,0,1,0,0),O.clearRect(0,0,A.width,A.height),Y(this,r,Re).call(this);for(const K of this.bezierPath2D)O.stroke(K)},os=function(A){this.canvas.removeEventListener("pointerleave",t(this,m)),this.canvas.removeEventListener("pointermove",t(this,L)),this.canvas.removeEventListener("pointerup",t(this,i)),this.canvas.addEventListener("pointerdown",t(this,f)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",N.noContextMenu)},10),Y(this,r,Hs).call(this,A.offsetX,A.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Te=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",p.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(A=>{var O;return(O=this.canvas)==null?void 0:O.setAttribute("aria-label",A)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Pe=function(){rt(this,U,new ResizeObserver(A=>{const O=A[0].contentRect;O.width&&O.height&&this.setDimensions(O.width,O.height)})),t(this,U).observe(this.div)},le=function(){if(!t(this,y))return;const[A,O]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*A),this.canvas.height=Math.ceil(this.height*O),Y(this,r,Re).call(this)},ls=function(A,O){const K=Y(this,r,ke).call(this),et=(A-K)/t(this,d),pt=(O-K)/t(this,T);this.scaleFactor=Math.min(et,pt)},Re=function(){const A=Y(this,r,ke).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+A,this.translationY*this.scaleFactor+A)},F=new WeakSet,zs=function(A){const O=new Path2D;for(let K=0,et=A.length;K<et;K++){const[pt,St,yt,J]=A[K];K===0&&O.moveTo(...pt),O.bezierCurveTo(St[0],St[1],yt[0],yt[1],J[0],J[1])}return O},cs=function(A,O,K){const[et,pt,St,yt]=O;switch(K){case 0:for(let J=0,Pt=A.length;J<Pt;J+=2)A[J]+=et,A[J+1]=yt-A[J+1];break;case 90:for(let J=0,Pt=A.length;J<Pt;J+=2){const Ct=A[J];A[J]=A[J+1]+et,A[J+1]=Ct+pt}break;case 180:for(let J=0,Pt=A.length;J<Pt;J+=2)A[J]=St-A[J],A[J+1]+=pt;break;case 270:for(let J=0,Pt=A.length;J<Pt;J+=2){const Ct=A[J];A[J]=St-A[J+1],A[J+1]=yt-Ct}break;default:throw new Error("Invalid rotation")}return A},Xs=function(A,O,K){const[et,pt,St,yt]=O;switch(K){case 0:for(let J=0,Pt=A.length;J<Pt;J+=2)A[J]-=et,A[J+1]=yt-A[J+1];break;case 90:for(let J=0,Pt=A.length;J<Pt;J+=2){const Ct=A[J];A[J]=A[J+1]-pt,A[J+1]=Ct-et}break;case 180:for(let J=0,Pt=A.length;J<Pt;J+=2)A[J]=St-A[J],A[J+1]-=pt;break;case 270:for(let J=0,Pt=A.length;J<Pt;J+=2){const Ct=A[J];A[J]=yt-A[J+1],A[J+1]=St-Ct}break;default:throw new Error("Invalid rotation")}return A},Vs=function(A,O,K,et){var Pt,Ct;const pt=[],St=this.thickness/2,yt=A*O+St,J=A*K+St;for(const Ht of this.paths){const Bt=[],$t=[];for(let Mt=0,Ut=Ht.length;Mt<Ut;Mt++){const[qt,Vt,bt,it]=Ht[Mt],lt=A*qt[0]+yt,xt=A*qt[1]+J,Xt=A*Vt[0]+yt,zt=A*Vt[1]+J,B=A*bt[0]+yt,gt=A*bt[1]+J,Tt=A*it[0]+yt,Dt=A*it[1]+J;Mt===0&&(Bt.push(lt,xt),$t.push(lt,xt)),Bt.push(Xt,zt,B,gt,Tt,Dt),$t.push(Xt,zt),Mt===Ut-1&&$t.push(Tt,Dt)}pt.push({bezier:Y(Pt=vt,F,cs).call(Pt,Bt,et,this.rotation),points:Y(Ct=vt,F,cs).call(Ct,$t,et,this.rotation)})}return pt},hs=function(){let A=1/0,O=-1/0,K=1/0,et=-1/0;for(const pt of this.paths)for(const[St,yt,J,Pt]of pt){const Ct=l.Util.bezierBoundingBox(...St,...yt,...J,...Pt);A=Math.min(A,Ct[0]),K=Math.min(K,Ct[1]),O=Math.max(O,Ct[2]),et=Math.max(et,Ct[3])}return[A,K,O,et]},ke=function(){return t(this,_)?Math.ceil(this.thickness*this.parentScale):0},ce=function(A=!1){if(this.isEmpty())return;if(!t(this,_)){Y(this,r,ee).call(this);return}const O=Y(this,r,hs).call(this),K=Y(this,r,ke).call(this);rt(this,d,Math.max(p.AnnotationEditor.MIN_SIZE,O[2]-O[0])),rt(this,T,Math.max(p.AnnotationEditor.MIN_SIZE,O[3]-O[1]));const et=Math.ceil(K+t(this,d)*this.scaleFactor),pt=Math.ceil(K+t(this,T)*this.scaleFactor),[St,yt]=this.parentDimensions;this.width=et/St,this.height=pt/yt,this.setAspectRatio(et,pt);const J=this.translationX,Pt=this.translationY;this.translationX=-O[0],this.translationY=-O[1],Y(this,r,le).call(this),Y(this,r,ee).call(this),rt(this,E,et),rt(this,c,pt),this.setDims(et,pt);const Ct=A?K/this.scaleFactor/2:0;this.translate(J-this.translationX-Ct,Pt-this.translationY-Ct)},st(vt,F),wt(vt,"_defaultColor",null),wt(vt,"_defaultOpacity",1),wt(vt,"_defaultThickness",1),wt(vt,"_type","ink");let M=vt;e.InkEditor=M},(X,e,H)=>{var M,T,d,L,m,i,f,v,_,g,y,me,_e,xe,ds,$s,Ys,us,Fe,Ks;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var l=H(1),p=H(4),P=H(6),N=H(29);const S=class S extends p.AnnotationEditor{constructor(G){super({...G,name:"stampEditor"});st(this,y);st(this,M,null);st(this,T,null);st(this,d,null);st(this,L,null);st(this,m,null);st(this,i,null);st(this,f,null);st(this,v,null);st(this,_,!1);st(this,g,!1);rt(this,L,G.bitmapUrl),rt(this,m,G.bitmapFile)}static initialize(G){p.AnnotationEditor.initialize(G)}static get supportedTypes(){const G=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,l.shadow)(this,"supportedTypes",G.map(Q=>`image/${Q}`))}static get supportedTypesStr(){return(0,l.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(G){return this.supportedTypes.includes(G)}static paste(G,Q){Q.pasteEditor(l.AnnotationEditorType.STAMP,{bitmapFile:G.getAsFile()})}remove(){var G,Q;t(this,T)&&(rt(this,M,null),this._uiManager.imageManager.deleteId(t(this,T)),(G=t(this,i))==null||G.remove(),rt(this,i,null),(Q=t(this,f))==null||Q.disconnect(),rt(this,f,null)),super.remove()}rebuild(){if(!this.parent){t(this,T)&&Y(this,y,xe).call(this);return}super.rebuild(),this.div!==null&&(t(this,T)&&Y(this,y,xe).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,d)||t(this,M)||t(this,L)||t(this,m))}get isResizable(){return!0}render(){if(this.div)return this.div;let G,Q;if(this.width&&(G=this.x,Q=this.y),super.render(),this.div.hidden=!0,t(this,M)?Y(this,y,ds).call(this):Y(this,y,xe).call(this),this.width){const[q,ct]=this.parentDimensions;this.setAt(G*q,Q*ct,this.width*q,this.height*ct)}return this.div}static deserialize(G,Q,q){if(G instanceof N.StampAnnotationElement)return null;const ct=super.deserialize(G,Q,q),{rect:k,bitmapUrl:W,bitmapId:Z,isSvg:C,accessibilityData:s}=G;Z&&q.imageManager.isValidId(Z)?rt(ct,T,Z):rt(ct,L,W),rt(ct,_,C);const[n,b]=ct.pageDimensions;return ct.width=(k[2]-k[0])/n,ct.height=(k[3]-k[1])/b,s&&(ct.altTextData=s),ct}serialize(G=!1,Q=null){if(this.isEmpty())return null;const q={annotationType:l.AnnotationEditorType.STAMP,bitmapId:t(this,T),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,_),structTreeParentId:this._structTreeParentId};if(G)return q.bitmapUrl=Y(this,y,Fe).call(this,!0),q.accessibilityData=this.altTextData,q;const{decorative:ct,altText:k}=this.altTextData;if(!ct&&k&&(q.accessibilityData={type:"Figure",alt:k}),Q===null)return q;Q.stamps||(Q.stamps=new Map);const W=t(this,_)?(q.rect[2]-q.rect[0])*(q.rect[3]-q.rect[1]):null;if(!Q.stamps.has(t(this,T)))Q.stamps.set(t(this,T),{area:W,serialized:q}),q.bitmap=Y(this,y,Fe).call(this,!1);else if(t(this,_)){const Z=Q.stamps.get(t(this,T));W>Z.area&&(Z.area=W,Z.serialized.bitmap.close(),Z.serialized.bitmap=Y(this,y,Fe).call(this,!1))}return q}};M=new WeakMap,T=new WeakMap,d=new WeakMap,L=new WeakMap,m=new WeakMap,i=new WeakMap,f=new WeakMap,v=new WeakMap,_=new WeakMap,g=new WeakMap,y=new WeakSet,me=function(G,Q=!1){if(!G){this.remove();return}rt(this,M,G.bitmap),Q||(rt(this,T,G.id),rt(this,_,G.isSvg)),Y(this,y,ds).call(this)},_e=function(){rt(this,d,null),this._uiManager.enableWaiting(!1),t(this,i)&&this.div.focus()},xe=function(){if(t(this,T)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,T)).then(Q=>Y(this,y,me).call(this,Q,!0)).finally(()=>Y(this,y,_e).call(this));return}if(t(this,L)){const Q=t(this,L);rt(this,L,null),this._uiManager.enableWaiting(!0),rt(this,d,this._uiManager.imageManager.getFromUrl(Q).then(q=>Y(this,y,me).call(this,q)).finally(()=>Y(this,y,_e).call(this)));return}if(t(this,m)){const Q=t(this,m);rt(this,m,null),this._uiManager.enableWaiting(!0),rt(this,d,this._uiManager.imageManager.getFromFile(Q).then(q=>Y(this,y,me).call(this,q)).finally(()=>Y(this,y,_e).call(this)));return}const G=document.createElement("input");G.type="file",G.accept=S.supportedTypesStr,rt(this,d,new Promise(Q=>{G.addEventListener("change",async()=>{if(!G.files||G.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const q=await this._uiManager.imageManager.getFromFile(G.files[0]);Y(this,y,me).call(this,q)}Q()}),G.addEventListener("cancel",()=>{this.remove(),Q()})}).finally(()=>Y(this,y,_e).call(this))),G.click()},ds=function(){const{div:G}=this;let{width:Q,height:q}=t(this,M);const[ct,k]=this.pageDimensions,W=.75;if(this.width)Q=this.width*ct,q=this.height*k;else if(Q>W*ct||q>W*k){const n=Math.min(W*ct/Q,W*k/q);Q*=n,q*=n}const[Z,C]=this.parentDimensions;this.setDims(Q*Z/ct,q*C/k),this._uiManager.enableWaiting(!1);const s=rt(this,i,document.createElement("canvas"));G.append(s),G.hidden=!1,Y(this,y,us).call(this,Q,q),Y(this,y,Ks).call(this),t(this,g)||(this.parent.addUndoableEditor(this),rt(this,g,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},$s=function(G,Q){var W;const[q,ct]=this.parentDimensions;this.width=G/q,this.height=Q/ct,this.setDims(G,Q),(W=this._initialOptions)!=null&&W.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,v)!==null&&clearTimeout(t(this,v)),rt(this,v,setTimeout(()=>{rt(this,v,null),Y(this,y,us).call(this,G,Q)},200))},Ys=function(G,Q){const{width:q,height:ct}=t(this,M);let k=q,W=ct,Z=t(this,M);for(;k>2*G||W>2*Q;){const C=k,s=W;k>2*G&&(k=k>=16384?Math.floor(k/2)-1:Math.ceil(k/2)),W>2*Q&&(W=W>=16384?Math.floor(W/2)-1:Math.ceil(W/2));const n=new OffscreenCanvas(k,W);n.getContext("2d").drawImage(Z,0,0,C,s,0,0,k,W),Z=n.transferToImageBitmap()}return Z},us=function(G,Q){G=Math.ceil(G),Q=Math.ceil(Q);const q=t(this,i);if(!q||q.width===G&&q.height===Q)return;q.width=G,q.height=Q;const ct=t(this,_)?t(this,M):Y(this,y,Ys).call(this,G,Q),k=q.getContext("2d");k.filter=this._uiManager.hcmFilter,k.drawImage(ct,0,0,ct.width,ct.height,0,0,G,Q)},Fe=function(G){if(G){if(t(this,_)){const ct=this._uiManager.imageManager.getSvgUrl(t(this,T));if(ct)return ct}const Q=document.createElement("canvas");return{width:Q.width,height:Q.height}=t(this,M),Q.getContext("2d").drawImage(t(this,M),0,0),Q.toDataURL()}if(t(this,_)){const[Q,q]=this.pageDimensions,ct=Math.round(this.width*Q*P.PixelsPerInch.PDF_TO_CSS_UNITS),k=Math.round(this.height*q*P.PixelsPerInch.PDF_TO_CSS_UNITS),W=new OffscreenCanvas(ct,k);return W.getContext("2d").drawImage(t(this,M),0,0,t(this,M).width,t(this,M).height,0,0,ct,k),W.transferToImageBitmap()}return structuredClone(t(this,M))},Ks=function(){rt(this,f,new ResizeObserver(G=>{const Q=G[0].contentRect;Q.width&&Q.height&&Y(this,y,$s).call(this,Q.width,Q.height)})),t(this,f).observe(this.div)},wt(S,"_type","stamp");let V=S;e.StampEditor=V}],__webpack_module_cache__={};function __w_pdfjs_require__(X){var e=__webpack_module_cache__[X];if(e!==void 0)return e.exports;var H=__webpack_module_cache__[X]={exports:{}};return __webpack_modules__[X](H,H.exports,__w_pdfjs_require__),H.exports}var __webpack_exports__={};return(()=>{var X=__webpack_exports__;Object.defineProperty(X,"__esModule",{value:!0}),Object.defineProperty(X,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(X,"AnnotationEditorLayer",{enumerable:!0,get:function(){return P.AnnotationEditorLayer}}),Object.defineProperty(X,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(X,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(X,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return N.AnnotationEditorUIManager}}),Object.defineProperty(X,"AnnotationLayer",{enumerable:!0,get:function(){return V.AnnotationLayer}}),Object.defineProperty(X,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(X,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(X,"DOMSVGFactory",{enumerable:!0,get:function(){return l.DOMSVGFactory}}),Object.defineProperty(X,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(X,"GlobalWorkerOptions",{enumerable:!0,get:function(){return M.GlobalWorkerOptions}}),Object.defineProperty(X,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(X,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(X,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(X,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(X,"PDFDataRangeTransport",{enumerable:!0,get:function(){return H.PDFDataRangeTransport}}),Object.defineProperty(X,"PDFDateString",{enumerable:!0,get:function(){return l.PDFDateString}}),Object.defineProperty(X,"PDFWorker",{enumerable:!0,get:function(){return H.PDFWorker}}),Object.defineProperty(X,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(X,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(X,"PixelsPerInch",{enumerable:!0,get:function(){return l.PixelsPerInch}}),Object.defineProperty(X,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(X,"RenderingCancelledException",{enumerable:!0,get:function(){return l.RenderingCancelledException}}),Object.defineProperty(X,"SVGGraphics",{enumerable:!0,get:function(){return H.SVGGraphics}}),Object.defineProperty(X,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(X,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(X,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(X,"XfaLayer",{enumerable:!0,get:function(){return T.XfaLayer}}),Object.defineProperty(X,"build",{enumerable:!0,get:function(){return H.build}}),Object.defineProperty(X,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(X,"getDocument",{enumerable:!0,get:function(){return H.getDocument}}),Object.defineProperty(X,"getFilenameFromUrl",{enumerable:!0,get:function(){return l.getFilenameFromUrl}}),Object.defineProperty(X,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return l.getPdfFilenameFromUrl}}),Object.defineProperty(X,"getXfaPageViewport",{enumerable:!0,get:function(){return l.getXfaPageViewport}}),Object.defineProperty(X,"isDataScheme",{enumerable:!0,get:function(){return l.isDataScheme}}),Object.defineProperty(X,"isPdfFile",{enumerable:!0,get:function(){return l.isPdfFile}}),Object.defineProperty(X,"loadScript",{enumerable:!0,get:function(){return l.loadScript}}),Object.defineProperty(X,"noContextMenu",{enumerable:!0,get:function(){return l.noContextMenu}}),Object.defineProperty(X,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(X,"renderTextLayer",{enumerable:!0,get:function(){return p.renderTextLayer}}),Object.defineProperty(X,"setLayerDimensions",{enumerable:!0,get:function(){return l.setLayerDimensions}}),Object.defineProperty(X,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(X,"updateTextLayer",{enumerable:!0,get:function(){return p.updateTextLayer}}),Object.defineProperty(X,"version",{enumerable:!0,get:function(){return H.version}});var e=__w_pdfjs_require__(1),H=__w_pdfjs_require__(2),l=__w_pdfjs_require__(6),p=__w_pdfjs_require__(26),P=__w_pdfjs_require__(27),N=__w_pdfjs_require__(5),V=__w_pdfjs_require__(29),M=__w_pdfjs_require__(14),T=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$2);var pdfExports=pdf$2.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdf$1=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]);export{pdf$1 as p};
