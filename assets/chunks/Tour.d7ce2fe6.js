import{u as L,_ as C,M as g,a7 as B,v as o,b as p,y as h,B as m,F as _,C as y,O as d,a4 as T,X as f,p as H,L as $,a as D,h as I,H as S,V as w,d as P,t as k,r as F,aD as M}from"./framework.85587507.js";import{p as N}from"./Subheading.c0cc5beb.js";import{p as O}from"./Caption.0fb17850.js";import{p as j}from"./Button.5a506684.js";import{p as R}from"./index.ed319991.js";import{I as V}from"./16.27851ed8.js";import{a as z,c as A,b as U,s as X,i as Z,h as q,o as E}from"./floating-ui.dom.d66a0422.js";import{t as G}from"./index.05a917e2.js";import"./Caption.vue_vue_type_style_index_0_lang.c18631db.js";import"./Button.vue_vue_type_style_index_0_lang.c2e85313.js";import"./index.a3ecab28.js";import"./marked.esm.bd0bcd16.js";import"./commonjsHelpers.de833af9.js";import"./vite-browser-external_commonjs-proxy.0726eb50.js";import"./index.2cca933c.js";const J=L({components:{pSubheading:N,pCaption:O,pButton:j,IconClose:V},directives:{pMd:R},props:{title:{type:String,default:void 0},text:{type:String,default:""},image:{type:String,default:void 0},highlight:{type:Boolean,default:!0},step:{type:Number,default:0},totalStep:{type:Number,default:0},dismissable:{type:Boolean,default:!0},prevLabel:{type:String,default:"Previous"},nextLabel:{type:String,default:"Next"},dismissLabel:{type:String,default:"Dismiss"},finishLabel:{type:String,default:"Finish"}},emits:["prev","next","dismiss"],setup(){return{}}});const K=["src"],Q={class:"tour__body"},W={"data-testid":"tour-title"},Y={"data-testid":"tour-text"},x={class:"tour__footer"},tt={key:0,class:"tour__meta","data-testid":"tour-meta"},et={class:"tour__controls"},st=_("span",{class:"tour__divider"},"â€¢",-1);function it(t,e,s,u,a,r){const l=g("IconClose"),i=g("p-subheading"),v=g("p-caption"),c=g("p-button"),b=B("p-md");return o(),p("div",{class:D(["tour__dialog",{"tour--image":!!t.image}]),"data-testid":"tour-dialog"},[t.dismissable?(o(),p("span",{key:0,"data-testid":"tour-dismiss",class:"tour__dismiss",onClick:e[0]||(e[0]=n=>t.$emit("dismiss",n))},[h(l)])):m("",!0),t.image?(o(),p("img",{key:1,class:"tour__image","data-testid":"tour-image",src:t.image,alt:"tour-image",width:"320",height:"195"},null,8,K)):m("",!0),_("div",Q,[t.title?(o(),y(i,{key:0,size:"sm"},{default:d(()=>[T(_("span",W,null,512),[[b,t.title,void 0,{inline:!0}]])]),_:1})):m("",!0),h(v,null,{default:d(()=>[T(_("span",Y,null,512),[[b,t.text,void 0,{inline:!0}]])]),_:1})]),_("div",x,[t.totalStep>2?(o(),p("div",tt,f(t.step)+" / "+f(t.totalStep),1)):m("",!0),_("div",et,[t.dismissable&&t.step<t.totalStep?(o(),p(H,{key:0},[h(c,{"data-testid":"tour-control-dismiss",size:"xs",variant:"link",onClick:e[1]||(e[1]=n=>t.$emit("dismiss",n))},{default:d(()=>[$(f(t.dismissLabel),1)]),_:1}),st],64)):m("",!0),h(c,{"data-testid":"tour-control-prev",size:"xs",variant:"link",disabled:t.step<2,onClick:e[2]||(e[2]=n=>t.$emit("prev",n))},{default:d(()=>[$(f(t.prevLabel),1)]),_:1},8,["disabled"]),t.step===t.totalStep?(o(),y(c,{key:1,"data-testid":"tour-control-finish",size:"xs",variant:"solid",color:"info",onClick:e[3]||(e[3]=n=>t.$emit("next",n))},{default:d(()=>[$(f(t.finishLabel),1)]),_:1})):(o(),y(c,{key:2,"data-testid":"tour-control-next",size:"xs",variant:"solid",color:"info",onClick:e[4]||(e[4]=n=>t.$emit("next",n))},{default:d(()=>[$(f(t.nextLabel),1)]),_:1}))])])],2)}const ot=C(J,[["render",it]]),at=L({inheritAttrs:!1,props:{target:{type:Object,default:void 0}},setup(t){const e=I(t,"target"),s=G("highlight");return S(u=>{if(s.value&&e.value){const a=z(e.value,s.value,()=>{const r=e.value.getBoundingClientRect(),l=16;s.value.style.width=`${r.width+l}px`,s.value.style.height=`${r.height+l}px`,s.value.style.left=`${r.left-l/2}px`,s.value.style.top=`${r.top-l/2}px`});u(a)}}),{}}});const nt={class:"tour__backdrop"};function lt(t,e,s,u,a,r){return o(),p("div",nt,[_("div",w({ref:"highlight",class:"tour__highlight"},t.$attrs),null,16)])}const rt=C(at,[["render",lt]]),ut=L({components:{TourDialog:ot,TourHighlight:rt},setup(){const t=P(!1),e=k(),s=k(),u=k(),a=F(()=>{var i;return(i=e.value)==null?void 0:i.$el});S(i=>{if(s.value&&a.value){const v=z(s.value,a.value,async()=>{A(s.value,a.value,{strategy:"absolute",middleware:[U({altBoundary:!0}),X({padding:16}),Z(),q(),E(16)]}).then(({x:c,y:b,middlewareData:n})=>{a.value&&(a.value.style.transform=`translate3d(${c||0}px, ${b||0}px, 0)`,a.value.style.visibility=n.hide.referenceHidden?"hidden":"visible")})});i(v)}}),S(i=>{t.value&&document.body.classList.add("tour--active"),i(()=>{document.body.classList.remove("tour--active")})});function r(i,v){s.value=i,u.value=v,t.value=!0}function l(){t.value=!1}return{isShow:t,dialog:e,target:s,show:r,hide:l,config:u}}});const dt={class:"tour"};function pt(t,e,s,u,a,r){const l=g("TourHighlight"),i=g("TourDialog");return o(),p("div",dt,[h(M,{name:"fade"},{default:d(()=>[t.isShow?(o(),y(l,{key:0,target:t.target},null,8,["target"])):m("",!0),t.isShow?(o(),y(i,w({key:1,ref:"dialog"},t.config),null,16)):m("",!0)]),_:1})])}const wt=C(ut,[["render",pt]]);export{wt as default};
