import{p as D}from"./Checkbox.b7073695.js";import{u as B}from"./index.c3f1570d.js";import{I as N,D as T}from"./vuedraggable.umd.cb12b031.js";import{d as A}from"./defu.573334b8.js";import{d as H,g as u,_ as S,C as g,o as s,c as d,H as k,e as r,F as v,D as w,n as b,N as f,r as c,a as p,t as m,b as L,w as I,k as _}from"./framework.c6b37a8b.js";const U=H({components:{Checkbox:D,IconDrag:N,Draggable:T},props:{variant:{type:String,default:"flexible"},modelValue:{type:Array,default:()=>[]},fields:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},selectable:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},emptyLabel:{type:String,default:"There are no records to show"},noLabel:{type:Boolean,default:!1},showTableHeader:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue","update:items"],setup(e,{emit:o}){const n=B(e),V=u({get(){return e.items.map(t=>A(t,{_key:Symbol("item-key")}))},set(t){o("update:items",t)}}),$=u(()=>{const t=[];return e.variant&&t.push(`datatable--${e.variant}`),e.selectable&&t.push("datatable--selectable"),e.draggable&&t.push("datatable--draggable"),e.noLabel&&e.variant==="flexible"&&t.push("datatable--no-label"),e.showTableHeader&&e.variant==="flexible"&&t.push("datatable--show-table-header"),t}),y=u(()=>e.items.filter(t=>t._selectable!==!1)),i=u({get(){return n.value.length===y.value.length},set(t){i.value!==t&&(n.value=t?[...y.value]:[])}}),h=u(()=>n.value.length>0&&n.value.length<y.value.length);return{model:n,rows:V,classNames:$,selectAll:i,indeterminate:h}}});const z={key:0,class:"datatable__headers"},F={key:0,class:"datatable__header datatable__drag"},j={key:1,class:"datatable__header datatable__checkbox"},E=["data-header"],M={class:"datatable__row","data-role":"row"},R={key:0,class:"datatable__cell datatable__drag","data-testid":"datatable-drag-handle"},q={key:1,class:"datatable__cell datatable__checkbox"},G=["data-cell"],J={key:2,class:"datatable__body"},K={class:"datatable__row"},O=["data-cell"],P={"data-testid":"datatable-empty",class:"datatable__cell datatable__cell--empty datatable__state-empty"},Q={class:"flex items-center justify-center text-subtle dark:text-dark-subtle"};function W(e,o,n,V,$,y){const i=g("IconDrag"),h=g("Checkbox"),t=g("Draggable");return s(),d("div",{"data-testid":"datatable",class:b(["datatable",e.classNames])},[e.variant==="static"||e.variant==="flexible"&&e.showTableHeader?(s(),d("div",z,[e.draggable?(s(),d("div",F,[k(i)])):r("",!0),e.selectable?(s(),d("div",j,[k(h,{modelValue:e.selectAll,"onUpdate:modelValue":o[0]||(o[0]=a=>e.selectAll=a),"data-testid":"datatable-select-all",indeterminate:e.indeterminate},null,8,["modelValue","indeterminate"])])):r("",!0),(s(!0),d(v,null,w(e.fields,a=>(s(),d("div",{key:a.key,class:b(["datatable__header",a.thClass]),"data-testid":"datatable-static-header",style:f(a.width?{width:`${a.width}%`}:{flex:"1 1 0%"}),"data-header":a.key},[c(e.$slots,`head(${a.key})`,{label:a.label,field:a},()=>[p(m(a.label),1)])],14,E))),128))])):r("",!0),e.items.length>0?(s(),L(t,{key:1,modelValue:e.rows,"onUpdate:modelValue":o[2]||(o[2]=a=>e.rows=a),class:"datatable__body",handle:".datatable__drag","item-key":"_key",disabled:!e.draggable},{item:I(({element:a,index:C})=>[_("div",M,[e.draggable?(s(),d("div",R,[k(i)])):r("",!0),e.selectable?(s(),d("div",q,[k(h,{modelValue:e.model,"onUpdate:modelValue":o[1]||(o[1]=l=>e.model=l),"data-testid":"datatable-select",value:a,disabled:a._selectable===!1},null,8,["modelValue","value","disabled"])])):r("",!0),(s(!0),d(v,null,w(e.fields,l=>(s(),d("div",{key:l.key,class:b(["datatable__cell",l.tdClass]),"data-testid":"datatable-cell",style:f(l.width?{width:`${l.width}%`}:{flex:"1 1 0%"}),"data-cell":l.key},[e.variant==="flexible"?(s(),d("div",{key:0,class:b(["datatable__header",l.thClass])},[c(e.$slots,`head(${l.key})`,{label:l.label,field:l,dataHeader:l.key},()=>[p(m(l.label),1)])],2)):r("",!0),c(e.$slots,`cell(${l.key})`,{index:C,item:a},()=>[p(m(l.formatter(a[l.key],a)),1)])],14,G))),128))])]),_:3},8,["modelValue","disabled"])):(s(),d("div",J,[_("div",K,[e.variant==="flexible"?(s(!0),d(v,{key:0},w(e.fields,a=>(s(),d("div",{key:a.key,class:b(["datatable__cell datatable__cell--empty",a.tdClass]),"data-testid":"datatable-cell-empty",style:f(a.width?{width:`${a.width}%`}:{flex:"1 1 0%"}),"data-cell":a.key},[_("div",{class:b(["datatable__header",a.thClass])},[c(e.$slots,`head(${a.key})`,{label:a.label,field:a,dataHeader:a.key},()=>[p(m(a.label),1)])],2)],14,O))),128)):r("",!0),_("div",P,[c(e.$slots,"empty",{},()=>[_("span",Q,m(e.emptyLabel),1)])])])]))],2)}const ae=S(U,[["render",W]]);export{ae as p};
