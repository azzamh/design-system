import{a as K,b as I,c as x}from"./index.Csv9uUho.js";import{_ as L}from"./Checkbox.vue_vue_type_script_setup_true_lang.XhXr1R96.js";/* empty css                                                 */import{d as A,c as r,m as u,a as h,n as m,O as j,o as s,K as f,r as z,l as _,y as E,g as B,w as D,p as i,h as y,aa as C,G as N,H as O,R as G,b as T,f as $}from"./framework.BjhmxGx1.js";import{u as H}from"./index.BUKJqaQF.js";import{D as M,I as P}from"./vuedraggable.umd.BbBQhSa7.js";import{I as q}from"./16.BXii4W4b.js";import{I as J}from"./16.kRuHEmua.js";const Q=A({inheritAttrs:!1,__name:"TableStaticRoot",props:{scrollable:{type:Boolean,default:!0},tableClass:{type:[String,Array,Object],default:void 0}},setup(a){return(d,l)=>a.scrollable?(s(),r("div",j({key:0,class:"table-static"},d.$attrs),[u("table",{class:m(["table-static__table",a.tableClass])},[h(d.$slots,"default")],2)],16)):(s(),r("table",j({key:1,class:["table-static__table",a.tableClass]},d.$attrs),[h(d.$slots,"default")],16))}}),W=["active"],X=A({__name:"TableStaticSort",props:{active:{type:String,default:void 0}},setup(a){return(d,l)=>(s(),r("div",{active:a.active,class:"table-static__header-sort","data-testid":"table-static-header-sort"},[f(q,{class:"table-static__header-sort-up"}),f(J,{class:"table-static__header-sort-down"})],8,W))}}),Y={key:0,class:"table-static__headers"},Z={key:0,class:"table-static__header table-static__drag"},tt={key:1,class:"table-static__header table-static__checkbox"},et=["data-header","onClick"],at={class:"table-static__header-label"},lt={key:0,class:"table-static__cell table-static__drag","data-testid":"table-static-drag-handle"},st={key:1,class:"table-static__cell table-static__checkbox"},rt=["data-cell"],ct={key:2,class:"table-static__body"},ot={class:"table-static__row"},it=["colspan"],dt={class:"flex items-center justify-center text-subtle dark:text-dark-subtle"},gt=A({__name:"TableStatic",props:{apperance:{type:String,default:"table"},modelValue:{type:Array,default:()=>[]},fields:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},selectable:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},emptyLabel:{type:String,default:"There are no records to show"},noLabel:{type:Boolean,default:!1},tableClass:{type:[String,Array,Object],default:void 0},trClass:{type:[String,Array,Object],default:void 0},scrollable:{type:Boolean,default:!0},sortable:{type:[Boolean,String],default:!1},sortBy:{type:Object,default:()=>({})}},emits:["update:modelValue","update:items","update:sortBy","sort"],setup(a,{emit:d}){const l=a,n=H(l),g=z(l.sortBy),k=d,v=_({get(){return l.items.map(t=>x(t))},set(t){k("update:items",t)}}),U=_(()=>{const t=["table-static"];return l.apperance&&t.push(`table-static--${l.apperance}`),l.selectable&&t.push("table-static--selectable"),l.draggable&&t.push("table-static--draggable"),l.noLabel&&t.push("table-static--no-label"),l.scrollable&&t.push("table-static--scrollable"),t}),w=_(()=>l.items.filter(t=>t._selectable!==!1)),p=_({get(){return l.items.length===0?!1:n.value.length===w.value.length},set(t){p.value!==t&&(n.value=t?w.value.map(c=>I(c)):[])}}),R=_(()=>n.value.length>0&&n.value.length<w.value.length);E(()=>l.sortBy,t=>{g.value=t});function S(t){return l.sortable&&t.sortable!==!1}function V(t){return g.value[t.key]}function F(t){if(S(t)){const c=V(t),e=c==="asc"?"desc":c==="desc"?void 0:"asc",b=l.sortable==="multiple"?{...g.value,[t.key]:e}:{[t.key]:e};g.value=b,k("update:sortBy",b),k("sort",b)}}return(t,c)=>(s(),B(Q,{"data-testid":"table-static",scrollable:a.scrollable,class:m(i(U)),"table-class":a.tableClass},{default:D(()=>[a.noLabel?y("",!0):(s(),r("thead",Y,[u("tr",{class:m(a.trClass)},[a.draggable?(s(),r("th",Z)):y("",!0),a.selectable?(s(),r("th",tt,[f(L,{modelValue:i(p),"onUpdate:modelValue":c[0]||(c[0]=e=>C(p)?p.value=e:null),"data-testid":"table-static-select-all",indeterminate:i(R)},null,8,["modelValue","indeterminate"])])):y("",!0),(s(!0),r(N,null,O(a.fields,e=>(s(),r("th",{key:e.key,class:m(["table-static__header",[e.thClass,{"table-static__header--sortable":S(e)}]]),"data-testid":"table-static-header",style:G(e.width?{width:i(K)(e.width)}:{}),"data-header":e.key,onClick:b=>F(e)},[h(t.$slots,`head(${e.key})`,{label:e.label,field:e,sort:V(e)},()=>[u("span",at,[T($(e.label)+" ",1),S(e)?(s(),B(X,{key:0,active:V(e)},null,8,["active"])):y("",!0)])])],14,et))),128))],2)])),Array.isArray(a.items)&&a.items.length>0?(s(),B(i(M),{key:1,modelValue:i(v),"onUpdate:modelValue":c[2]||(c[2]=e=>C(v)?v.value=e:null),class:"table-static__body",handle:".table-static__drag","item-key":"_key",tag:"tbody",disabled:!a.draggable},{item:D(({element:e,index:b})=>[u("tr",{class:m(["table-static__row",a.trClass]),"data-role":"row"},[h(t.$slots,"row",{item:e,index:b},()=>[a.draggable?(s(),r("td",lt,[f(P)])):y("",!0),a.selectable?(s(),r("td",st,[f(L,{modelValue:i(n),"onUpdate:modelValue":c[1]||(c[1]=o=>C(n)?n.value=o:null),"data-testid":"table-static-select",value:i(I)(e),disabled:e._selectable===!1},null,8,["modelValue","value","disabled"])])):y("",!0),(s(!0),r(N,null,O(a.fields,o=>(s(),r("td",{key:o.key,class:m(["table-static__cell",o.tdClass]),"data-testid":"table-static-cell","data-cell":o.key},[h(t.$slots,`cell(${o.key})`,{index:b,item:e},()=>[T($(o.formatter(e[o.key],e)),1)])],10,rt))),128))])],2)]),_:3},8,["modelValue","disabled"])):(s(),r("tbody",ct,[u("tr",ot,[u("td",{colspan:a.selectable?a.fields.length+1:a.fields.length,"data-testid":"table-static-empty",class:"table-static__cell table-static__cell--empty datatable__state-empty"},[h(t.$slots,"empty",{},()=>[u("span",dt,$(a.emptyLabel),1)])],8,it)])]))]),_:3},8,["scrollable","class","table-class"]))}});export{gt as _};
