import{d as M,V as H,g as f,h as g,G as q,j as N,y as R,o as P,b as j,w as D,ad as G,ae as J,r as K,O as L,J as O}from"./framework.e_h4aueT.js";const B="--vc-auto-duration",Q=`height var(${B}) cubic-bezier(0.33, 1, 0.68, 1)`,p={padding:0},T={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"};function _(l){return l.value?parseFloat(getComputedStyle(l.value).height):0}function k(l){var n;var a;return{height:`${(n=(a=l.value)==null?void 0:a.scrollHeight)!=null?n:0}px`}}function z(l){if(!l.value)return{};const{transition:a}=getComputedStyle(l.value);return a==="all 0s ease 0s"?{transition:Q}:{transition:a}}function A(l){if(!l.value)return!0;const{transition:a}=getComputedStyle(l.value);return matchMedia("(prefers-reduced-motion: reduce)").matches||a.includes("none")||a.includes("height 0s")}const E=M({inheritAttrs:!0,__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(l,{emit:a}){const n=l,o=H(n,"when"),i=H(n,"baseHeight"),v=f(()=>({overflow:"hidden",height:`${i.value}px`})),m=f(()=>({...p,...i.value===0?{display:"none"}:v.value})),t=g(null),c=g(o.value?"expanded":"collapsed"),s=e=>c.value=e,h=q({}),u=e=>h.value=e,d=e=>u({...h.value,...e}),x=g(300),y=f(()=>({[B]:`${x.value}ms`}));function w(){u(p),s("expanded"),a("expanded")}function C(){u(m.value),s("collapsed"),a("collapsed")}function F(e){var r;e.target===t.value&&e.propertyName==="height"&&(o.value?((r=t.value)==null?void 0:r.scrollHeight)===_(t)&&w():i.value===_(t)&&C())}return N(()=>{if(!t.value)return;o.value||i.value!==0||u(T);const e=function(b=0){if(b===0)return 0;const S=b/36,$=Math.round(10*(4+15*S**.25+S/5));return Number.isFinite($)?$:0}(t.value.scrollHeight-i.value);var r;r=e<=0?300:e,x.value=r,u(o.value?p:m.value)}),R(o,e=>{if(e){if(A(t))return w();s("expanding"),a("expand"),u({...p,...v.value,...y.value}),requestAnimationFrame(()=>{d({...k(t),...z(t),willChange:"height"})})}else{if(A(t))return C();s("collapsing"),a("collapse"),d({...y.value,...k(t)}),requestAnimationFrame(()=>{d({...v.value,...z(t),willChange:"height"})})}}),R(i,e=>{o.value||d(e>0?{display:void 0,height:`${e}px`}:{display:"none"})}),(e,r)=>(P(),j(O(n.as),{ref_key:"collapseRef",ref:t,style:L(h.value),onTransitionend:F,"data-collapse":c.value},{default:D(()=>[K(e.$slots,"default",J(G({state:c.value})))]),_:3},40,["style","data-collapse"]))}});export{E as Q};
