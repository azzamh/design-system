import{t as f}from"./index.r0OCB_7d.js";import{u as y}from"./index.VOHB-FDq.js";import{a as V,c as x,f as C,s as E,o as b,d as k}from"./floating-ui.dom._N-HlnuN.js";import{d as h,V as v,g as B,y as M,z as T,_ as w,a5 as _,aa as F,o as p,c as d,k as g,r as N,n as P,h as U,as as z,D,a8 as R,F as j,E as q,b as A,w as I,M as L}from"./framework.e_h4aueT.js";import{p as O}from"./index.xrtdoFjR.js";import{t as G}from"./toString.MVWRvL-L.js";import"./index.L8r16ak4.js";import"./index.dnE_v7BF.js";import"./commonjsHelpers.4gQjN7DL.js";import"./vite-browser-external_commonjs-proxy.KqFAHE5p.js";import"./defu.sEzLH6yp.js";import"./isObjectLike.OM1Hublo.js";import"./isArray.nknceDKk.js";import"./isSymbol.K1VvrVGN.js";var H=0;function J(t){var n=++H;return G(t)+n}const K=h({props:{modelValue:{type:Boolean,default:!1},color:{type:String,default:"black"},target:{type:Object,default:void 0},placement:{type:String,default:"top"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue","show","hide"],setup(t,{emit:n}){const i=y(t),u=v(t,"placement"),l=v(t,"target"),s=f("tooltip"),r=f("arrow"),o=B(()=>{const e=[];return t.color&&e.push(`tooltip--${t.color}`),e});return M(i,e=>{n(e?"show":"hide",l.value)}),T(e=>{if(s.value&&l.value&&r.value){const a=V(l.value,s.value,()=>{x(l.value,s.value,{strategy:"absolute",placement:u.value,middleware:[C(),E(),b(12),k({element:r.value})]}).then(({x:c,y:$,middlewareData:m,placement:S})=>{s.value&&(s.value.dataset.popperPlacement=S,s.value.style.left=`${c||0}px`,s.value.style.top=`${$||0}px`),r.value&&(r.value.style.left=`${m.arrow.x}px`,r.value.style.top=`${m.arrow.y}px`)})},{animationFrame:!0});e(a)}},{flush:"post"}),{isShow:i,classNames:o}}}),Q={ref:"arrow",class:"tooltip__arrow","data-popper-arrow":""};function W(t,n,i,u,l,s){return _((p(),d("div",{ref:"tooltip",class:P(["tooltip",t.classNames]),"data-testid":"tooltip"},[g("div",Q,null,512),N(t.$slots,"default")],2)),[[F,t.isShow]])}const X=w(K,[["render",W]]),Y=h({components:{Tooltip:X},directives:{pMd:O},setup(){const t=U(new Map);function n(o){const e=J("tooltip_");return t.value.set(e,z({...o,isShow:!1})),e}function i(o,e){const a=t.value.get(o);a&&(a.target=e.target,a.text=e.text,a.placement=e.placement)}function u(o){const e=t.value.get(o);e.target.dispatchEvent(new CustomEvent("tooltip:show",{detail:e,cancelable:!0}))&&(e.isShow=!0)}function l(o){const e=t.value.get(o);e.target.dispatchEvent(new CustomEvent("tooltip:hide",{detail:e,cancelable:!0}))&&(e.isShow=!1)}function s(o){t.value.get(o).isShow?l(o):u(o)}function r(o){t.value.delete(o)}return{items:t,add:n,update:i,show:u,hide:l,toggle:s,remove:r}}}),Z={class:"tooltip-container","data-testid":"tooltip-container"};function ee(t,n,i,u,l,s){const r=D("Tooltip"),o=R("p-md");return p(),d("div",Z,[(p(!0),d(j,null,q(t.items,([e,a])=>(p(),A(r,L({key:e,modelValue:a.isShow,"onUpdate:modelValue":c=>a.isShow=c},a),{default:I(()=>[_(g("span",null,null,512),[[o,a.text,void 0,{inline:!0}]])]),_:2},1040,["modelValue","onUpdate:modelValue"]))),128))])}const ve=w(Y,[["render",ee]]);export{ve as default};
