import{d as N,a1 as Y,M as Z,g,o as s,c as f,r as v,e as x,k,L as ee,l as u,n as z,F as B,D as M,b as m,w as p,a as _,t as y,h as A,x as te,a3 as P,H as V,al as U,a0 as F,O as ae}from"./framework.7f91dcc9.js";import{_ as le}from"./Dropdown.vue_vue_type_script_setup_true_lang.fba0490c.js";import{p as se}from"./Dropdown.vue_vue_type_style_index_0_lang.21ad9543.js";import{p as ie}from"./DropdownHeader.9a53bcd8.js";import{p as ne}from"./Input.b6bb91e9.js";import{p as oe}from"./Text.41a05dd3.js";import{I as de}from"./index.a3ecab28.js";import{p as H}from"./Label.f19ef089.js";import{I as re}from"./20.2e3ff662.js";import{I as ue}from"./20.31d71269.js";import{I as ce}from"./20.5dc07cd9.js";import{I as pe}from"./IconCheckbox.503aae36.js";import{p as fe}from"./SpinnerRing.17050e48.js";import{i as $,v as me}from"./value.d2e2d3a1.js";import{d as ye,u as ve}from"./adapter.75030ac0.js";import{u as he}from"./use-loading.d32b5219.js";import{g as ge}from"./index.3977721e.js";import{i as be}from"./isNil.c75b1b34.js";import{w as Se}from"./index.6b52b4c9.js";const ke={key:0,class:"input__prepend"},_e=k("input",{class:"input__hidden",type:"text"},null,-1),xe=["disabled","readonly"],Ce={key:1,class:"input__append"},Ae=N({inheritAttrs:!1,__name:"SelectInput",props:{size:{type:String,default:"md"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},containerClass:{type:[String,Array,Object],default:void 0}},setup(e){const l=e,a=Y(),r=Z(de,void 0,!1),b=g(()=>{const i=[];return r!=null&&r.size.value?i.push(`input--${r==null?void 0:r.size.value}`):l.size&&i.push(`input--${l.size}`),l.disabled&&i.push("input--disabled"),l.readonly&&i.push("input--readonly"),l.error&&i.push("input--error","state--error"),a.prepend&&i.push("input--has-prepend"),a.append&&i.push("input--has-append"),i});return(i,h)=>(s(),f("div",{class:z(["input",e.containerClass]),"data-testid":"input-container"},[i.$slots.prepend?(s(),f("span",ke,[v(i.$slots,"prepend")])):x("",!0),_e,k("div",ee({class:["input__form",u(b)],"data-testid":"input",disabled:e.disabled,readonly:e.readonly,tabindex:1},i.$attrs),[v(i.$slots,"default")],16,xe),i.$slots.append?(s(),f("span",Ce,[v(i.$slots,"append")])):x("",!0)],2))}});const Ve={class:"select__tags"},$e=N({__name:"SelectTags",props:{items:{type:Array,default:()=>[]},displayLimit:{type:Number,default:2},limitText:{type:String,default:"+{n} Other(s)"}},setup(e){const l=e,a=g(()=>l.items.slice(0,l.displayLimit)),r=g(()=>l.limitText.replaceAll("{n}",String(l.items.length-l.displayLimit)));return(b,i)=>(s(),f("div",Ve,[(s(!0),f(B,null,M(u(a),(h,T)=>(s(),m(H,{key:T,"data-testid":"select-tag",variant:"light",size:"xs"},{default:p(()=>[_(y(h.text),1)]),_:2},1024))),128)),e.items.length>e.displayLimit?(s(),m(H,{key:0,"data-testid":"select-tag-others",variant:"light",size:"xs"},{default:p(()=>[_(y(u(r)),1)]),_:1})):x("",!0)]))}});function L(e,l){var a;return(a=e.find(r=>$(r.value,l)))!=null?a:{text:"",value:void 0}}function w(e,l){return Array.isArray(l)?e.filter(a=>me(l,a.value)):[]}const Be=ye({setup({props:e,keyword:l}){const a=ve(e);return g(()=>a.value.filter(b=>b.text.toLowerCase().includes(l.value.toLowerCase())))}}),Te={key:1,"data-testid":"select-placeholder"},Ie={class:"input__form__placeholder"},Le={key:0,"data-testid":"select-no-data",class:"select__empty"},we={class:"select__option"},ze={class:"select__option-text"},Ne={class:"select__option-checked"},Oe={key:2,"data-testid":"select-loading",class:"select__loading"},at=N({models:{prop:"modelValue",event:"update:modelValue"},__name:"Select",props:{modelValue:{type:void 0,default:void 0},selected:{type:[Object,Array],default:void 0},options:{type:Array,default:()=>[]},placeholder:{type:String,default:"Â "},emptyText:{type:String,default:"No Data"},loadingText:{type:String,default:"Loading..."},searchText:{type:String,default:"Search..."},adapter:{type:Object,default:()=>Be},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},clearLabel:{type:String,default:"Clear"},size:{type:String,default:"md"},sectionLabel:{type:String,default:void 0},noCaret:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},displayLimit:{type:Number,default:void 0},limitText:{type:String,default:void 0},searchable:{type:Boolean,default:!0},menuSize:{type:String,default:void 0},menuClass:{type:[String,Array,Object],default:void 0},divider:{type:Boolean,default:!1},noAnimation:{type:Boolean,default:!1},noCloseAfterSelect:{type:Boolean,default:!1}},emits:["change","update:modelValue","update:selected","userInput"],setup(e,{emit:l}){const a=e,r=l,b=A(),i=A(),h=g(()=>{var t;return(t=b.value)==null?void 0:t.input}),T=g(()=>{var t;return(t=i.value)==null?void 0:t.menuBody}),C=A(""),c=A(!1),I=he({elapsed:!1}),R={props:a,keyword:C,isOpen:c,isLoading:I,menuEl:T},S=a.adapter.setup(R),o=A(a.multiple?w(S.value,a.modelValue):L(S.value,a.modelValue)),O=()=>{!a.disabled&&!a.readonly&&(c.value=!c.value)},G=g(()=>{const t=[];return c.value&&t.push("select--open"),a.disabled&&t.push("select--disabled"),a.readonly&&t.push("select--readonly"),a.multiple&&t.push("select--multiple"),t}),q=g(()=>{var t;return a.multiple?Array.isArray(o.value)&&o.value.length>0:!be((t=o.value)==null?void 0:t.value)}),j=Se(()=>a.modelValue,t=>{o.value=a.multiple?w(S.value,t):L(S.value,t)});te(S,t=>{a.modelValue&&t.length>0&&(o.value=a.multiple?w(t,a.modelValue):L(t,a.modelValue))});function D(t){let d;a.multiple?t?Array.isArray(o.value)&&(d=o.value.some(n=>$(n.value,t.value))?o.value.filter(n=>!$(n.value,t.value)):[...o.value,t]):d=[]:d=t,j.pause(),o.value=d,r("change",d),r("update:selected",d),r("update:modelValue",a.multiple?d.map(n=>n.value):d==null?void 0:d.value),c.value&&r("userInput",d),a.noCloseAfterSelect||(c.value=!1),ae(()=>{j.resume()})}function W(){!a.disabled&&!a.readonly&&(c.value=!0)}function J(){D()}function E(t){return o.value?a.multiple&&Array.isArray(o.value)?o.value.some(d=>$(t.value,d.value)):$(t.value,o.value.value):!1}function K(){var t;(t=h.value)==null||t.focus()}function Q(){C.value=""}return ge(()=>{c.value&&h.value&&h.value!==document.activeElement&&(h.value.select(),h.value.focus())}),(t,d)=>(s(),m(le,{ref_key:"dropdown",ref:i,modelValue:u(c),"onUpdate:modelValue":d[1]||(d[1]=n=>P(c)?c.value=n:null),class:z(["select",u(G)]),"data-testid":"select","aria-label":"select",disabled:e.disabled,divider:e.divider,"menu-size":e.menuSize,"menu-class":e.menuClass,"no-animation":e.noAnimation,onShow:K,onHide:Q},{activator:p(()=>[V(Ae,{"data-testid":"select-activator",class:"select__activator",size:e.size,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,error:e.error,onFocus:W},U({default:p(()=>[u(q)?v(t.$slots,"selected",{key:0,item:u(o),multiple:e.multiple},()=>{var n;return[a.multiple&&Array.isArray(u(o))?(s(),m($e,{key:0,items:u(o),"display-limit":e.displayLimit,"limit-text":e.limitText},null,8,["items","display-limit","limit-text"])):(s(),f(B,{key:1},[_(y((n=u(o))==null?void 0:n.text),1)],64))]}):(s(),f("div",Te,[v(t.$slots,"placeholder",{},()=>[k("span",Ie,y(e.placeholder),1)])]))]),_:2},[e.noCaret?void 0:{name:"append",fn:p(()=>[v(t.$slots,"caret",{isOpen:u(c),toggle:O},()=>[V(re,{class:"select__caret","data-testid":"select-caret-icon",onClick:O})])]),key:"0"}]),1032,["size","placeholder","disabled","readonly","error"])]),prepend:p(()=>[e.searchable?(s(),m(ne,{key:0,ref_key:"input",ref:b,modelValue:u(C),"onUpdate:modelValue":d[0]||(d[0]=n=>P(C)?C.value=n:null),"data-testid":"select-search",class:"select__search no--error",placeholder:e.searchText,clearable:!0},{append:p(()=>[V(ce,{class:"select__search-icon"})]),_:1},8,["modelValue","placeholder"])):x("",!0)]),default:p(()=>[!u(I)&&u(S).length===0?(s(),f("div",Le,[v(t.$slots,"empty",{},()=>[_(y(e.emptyText),1)])])):(s(),f(B,{key:1},[e.sectionLabel||e.clearable?(s(),m(ie,{key:0,"data-testid":"select-label"},U({default:p(()=>[_(y(e.sectionLabel),1)]),_:2},[e.clearable?{name:"action",fn:p(()=>[V(oe,{"data-testid":"select-clear",variant:"caption2",href:"javascript:void",onClick:F(J,["prevent"])},{default:p(()=>[_(y(e.clearLabel),1)]),_:1},8,["onClick"])]),key:"0"}:void 0]),1024)):x("",!0),(s(!0),f(B,null,M(u(S),(n,X)=>(s(),m(se,{key:X,"data-testid":"select-item",class:z({selected:E(n)}),disabled:!!n.disabled,onClick:F(je=>D(n),["prevent"])},{default:p(()=>[k("div",we,[k("div",ze,[v(t.$slots,"option",{isSelected:E(n),item:n},()=>[_(y(n.text),1)])]),k("div",Ne,[e.multiple?(s(),m(pe,{key:0})):(s(),m(ue,{key:1}))])])]),_:2},1032,["class","disabled","onClick"]))),128))],64)),u(I)?(s(),f("div",Oe,[V(fe),v(t.$slots,"loading",{},()=>[k("span",null,y(e.loadingText),1)])])):x("",!0)]),_:3},8,["modelValue","disabled","divider","menu-size","menu-class","class","no-animation"]))}});export{at as _};
