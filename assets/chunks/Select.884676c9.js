import{D as A}from"./Dropdown.cc4fe2e2.js";import{p as z}from"./Dropdown.vue_vue_type_style_index_0_lang.4c0dec1d.js";import{p as T}from"./Input.8d83488f.js";import{I as F}from"./20.01c0fa08.js";import{I as j}from"./20.7fcb09db.js";import{p as q}from"./SpinnerRing.e8c90ecd.js";import{i as $}from"./value.830bdabd.js";import{d as E,u as M}from"./adapter.74390648.js";import{c as w,m as U,g as G,r as m,w as V,_ as P,L as i,x as u,A as O,B as f,Q as v,ag as Q,q as y,p as C,y as B,z as b,N as R,v as D,G as k,M as H,C as J}from"./framework.f0e3e228.js";import{u as K}from"./use-loading.a38f43e0.js";import{m as W,k as X}from"./theme.9e82a338.js";function L(e,o){var l;return(l=e.find(n=>$(n.value,o)))!=null?l:{text:"",value:void 0}}const Y=E({setup({props:e,keyword:o}){const l=M(e);return w(()=>l.value.filter(d=>d.text.toLowerCase().includes(o.value.toLowerCase())))}}),Z=U({components:{Dropdown:A,DropdownItem:z,pInput:T,IconArrow:F,IconCheck:j,IconLoading:q},props:{modelValue:{type:[String,Number,Boolean,Array,Object,Date],default:void 0},selected:{type:Object,default:()=>({text:"",value:void 0})},options:{type:Array,default:()=>[]},placeholder:{type:String,default:""},emptyText:{type:String,default:"No Data"},loadingText:{type:String,default:"Loading..."},adapter:{type:Object,default:()=>Y},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},size:{type:String,default:"md"},noCaret:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["change","update:modelValue","update:selected","userInput"],setup(e,{emit:o}){const l=G(),n=m(),d=m(""),s=m(!1),p=K({elapsed:!1}),g={props:e,keyword:d,isOpen:s,isLoading:p},c=e.adapter.setup(g),r=m(L(c.value,e.modelValue)),h=()=>{s.value=!s.value},_=w(()=>{const t=[];return s.value&&t.push("select--open"),e.disabled&&t.push("select--disabled"),e.readonly&&t.push("select--readonly"),e.error&&t.push("select--error","state--error"),t}),a=w({get(){var t;return s.value?d.value:(t=r.value)==null?void 0:t.text},set(t){t!==a.value&&(d.value=t)}});V(()=>e.modelValue,t=>{r.value=L(c.value,t)});function I(t){r.value=t,o("change",t),o("update:selected",t),o("update:modelValue",t.value),s.value&&o("userInput",t)}function S(){!e.disabled&&!e.readonly&&(s.value=!0)}function N(t){return $(t.value,r.value.value)}return V(s,t=>{t||(d.value="")},{flush:"post"}),W(()=>{s.value&&n.value&&n.value!==document.activeElement&&n.value.focus()}),X(()=>{var t;(t=l==null?void 0:l.proxy)!=null&&t.$el&&(n.value=l.proxy.$el.querySelector(".select__search"))}),{classNames:_,isOpen:s,isLoading:p,search:a,items:c,toggleOpen:h,select:I,onFocus:S,isSelected:N}}});const x={key:0,"data-testid":"select-no-data",class:"select__empty"},ee={class:"select__option"},te={class:"select__option-text"},oe={key:2,"data-testid":"select-loading",class:"select__loading"};function ae(e,o,l,n,d,s){const p=i("IconArrow"),g=i("p-input"),c=i("IconCheck"),r=i("DropdownItem"),h=i("IconLoading"),_=i("Dropdown");return u(),O(_,{modelValue:e.isOpen,"onUpdate:modelValue":o[1]||(o[1]=a=>e.isOpen=a),class:D(["select",e.classNames]),"data-testid":"select","aria-label":"select",disabled:e.disabled},{activator:f(()=>[v(g,{modelValue:e.search,"onUpdate:modelValue":o[0]||(o[0]=a=>e.search=a),"data-testid":"select-search",class:"select__search",size:e.size,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,onFocus:e.onFocus},Q({_:2},[e.noCaret?void 0:{name:"append",fn:f(()=>[y(e.$slots,"caret",{isOpen:e.isOpen,toggle:e.toggleOpen},()=>[v(p,{class:"select__caret","data-testid":"select-caret-icon",onClick:e.toggleOpen},null,8,["onClick"])])]),key:"0"}]),1032,["modelValue","size","placeholder","disabled","readonly","onFocus"])]),default:f(()=>[!e.isLoading&&e.items.length===0?(u(),C("div",x,[y(e.$slots,"empty",{},()=>[B(b(e.emptyText),1)])])):(u(!0),C(H,{key:1},R(e.items,(a,I)=>(u(),O(r,{key:I,"data-testid":"select-item",class:D({selected:e.isSelected(a)}),disabled:!!a.disabled,onClick:S=>e.select(a)},{default:f(()=>[k("div",ee,[k("div",te,[y(e.$slots,"option",{isSelected:e.isSelected(a),item:a},()=>[B(b(a.text),1)])]),v(c,{class:"select__option-checked"})])]),_:2},1032,["class","disabled","onClick"]))),128)),e.isLoading?(u(),C("div",oe,[v(h,{width:"14",height:"14"}),y(e.$slots,"loading",{},()=>[k("span",null,b(e.loadingText),1)])])):J("",!0)]),_:3},8,["modelValue","disabled","class"])}const ve=P(Z,[["render",ae]]);export{ve as p};
