import{u as D,r as i,_ as T,M as p,v as s,b as d,y as v,B as r,p as g,s as w,a as b,I as f,z as _,L as k,X as c,C as A,O as B,F as y}from"./framework.0fccce8d.js";import{p as H}from"./Checkbox.cc8058b2.js";import{u as L}from"./index.aa62d5f4.js";import{I,D as z}from"./vuedraggable.umd.3a89800a.js";import{d as M}from"./defu.573334b8.js";const S=D({components:{Checkbox:H,IconDrag:I,Draggable:z},props:{variant:{type:String,default:"flexible"},modelValue:{type:Array,default:()=>[]},fields:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},selectable:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},emptyLabel:{type:String,default:"There are no records to show"},noLabel:{type:Boolean,default:!1},showTableHeader:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue","update:items"],setup(e,{emit:o}){const n=L(e),$=i({get(){return e.items.map(t=>M(t,{_key:Symbol("item-key")}))},set(t){o("update:items",t)}}),V=i(()=>{const t=[];return e.variant&&t.push(`datatable--${e.variant}`),e.selectable&&t.push("datatable--selectable"),e.draggable&&t.push("datatable--draggable"),e.noLabel&&e.variant==="flexible"&&t.push("datatable--no-label"),e.showTableHeader&&e.variant==="flexible"&&t.push("datatable--show-table-header"),t}),h=i(()=>e.items.filter(t=>t._selectable!==!1)),u=i({get(){return n.value.length===h.value.length},set(t){u.value!==t&&(n.value=t?[...h.value]:[])}}),m=i(()=>n.value.length>0&&n.value.length<h.value.length);return{model:n,rows:$,classNames:V,selectAll:u,indeterminate:m}}});const U={key:0,class:"datatable__headers"},j={key:0,class:"datatable__header datatable__drag"},F={key:1,class:"datatable__header datatable__checkbox"},N=["data-header"],O={class:"datatable__row","data-role":"row"},R={key:0,class:"datatable__cell datatable__drag","data-testid":"datatable-drag-handle"},X={key:1,class:"datatable__cell datatable__checkbox"},q=["data-cell"],E={key:2,class:"datatable__body"},G={class:"datatable__row"},J=["data-cell"],K={"data-testid":"datatable-empty",class:"datatable__cell datatable__cell--empty datatable__state-empty"},P={class:"flex items-center justify-center text-subtle dark:text-dark-subtle"};function Q(e,o,n,$,V,h){const u=p("IconDrag"),m=p("Checkbox"),t=p("Draggable");return s(),d("div",{"data-testid":"datatable",class:b(["datatable",e.classNames])},[e.variant==="static"||e.variant==="flexible"&&e.showTableHeader?(s(),d("div",U,[e.draggable?(s(),d("div",j,[v(u)])):r("",!0),e.selectable?(s(),d("div",F,[v(m,{modelValue:e.selectAll,"onUpdate:modelValue":o[0]||(o[0]=a=>e.selectAll=a),"data-testid":"datatable-select-all",indeterminate:e.indeterminate},null,8,["modelValue","indeterminate"])])):r("",!0),(s(!0),d(g,null,w(e.fields,a=>(s(),d("div",{key:a.key,class:b(["datatable__header",a.thClass]),"data-testid":"datatable-static-header",style:f(a.width?{width:`${a.width}%`}:{flex:"1 1 0%"}),"data-header":a.key},[_(e.$slots,`head(${a.key})`,{label:a.label,field:a},()=>[k(c(a.label),1)])],14,N))),128))])):r("",!0),e.items.length>0?(s(),A(t,{key:1,modelValue:e.rows,"onUpdate:modelValue":o[2]||(o[2]=a=>e.rows=a),class:"datatable__body",handle:".datatable__drag","item-key":"_key",disabled:!e.draggable},{item:B(({element:a,index:C})=>[y("div",O,[e.draggable?(s(),d("div",R,[v(u)])):r("",!0),e.selectable?(s(),d("div",X,[v(m,{modelValue:e.model,"onUpdate:modelValue":o[1]||(o[1]=l=>e.model=l),"data-testid":"datatable-select",value:a,disabled:a._selectable===!1},null,8,["modelValue","value","disabled"])])):r("",!0),(s(!0),d(g,null,w(e.fields,l=>(s(),d("div",{key:l.key,class:b(["datatable__cell",l.tdClass]),"data-testid":"datatable-cell",style:f(l.width?{width:`${l.width}%`}:{flex:"1 1 0%"}),"data-cell":l.key},[e.variant==="flexible"?(s(),d("div",{key:0,class:b(["datatable__header",l.thClass])},[_(e.$slots,`head(${l.key})`,{label:l.label,field:l,dataHeader:l.key},()=>[k(c(l.label),1)])],2)):r("",!0),_(e.$slots,`cell(${l.key})`,{index:C,item:a},()=>[k(c(l.formatter(a[l.key],a)),1)])],14,q))),128))])]),_:3},8,["modelValue","disabled"])):(s(),d("div",E,[y("div",G,[e.variant==="flexible"?(s(!0),d(g,{key:0},w(e.fields,a=>(s(),d("div",{key:a.key,class:b(["datatable__cell datatable__cell--empty",a.tdClass]),"data-testid":"datatable-cell-empty",style:f(a.width?{width:`${a.width}%`}:{flex:"1 1 0%"}),"data-cell":a.key},[y("div",{class:b(["datatable__header",a.thClass])},[_(e.$slots,`head(${a.key})`,{label:a.label,field:a,dataHeader:a.key},()=>[k(c(a.label),1)])],2)],14,J))),128)):r("",!0),y("div",K,[_(e.$slots,"empty",{},()=>[y("span",P,c(e.emptyLabel),1)])])])]))],2)}const ae=T(S,[["render",Q]]);export{ae as p};
