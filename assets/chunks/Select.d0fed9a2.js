import{D as H}from"./Dropdown.167bd178.js";import{p as j}from"./Dropdown.vue_vue_type_style_index_0_lang.47de1fd7.js";import{p as E}from"./DropdownHeader.b628b98a.js";import{p as M}from"./Input.2326a85e.js";import{I as q}from"./20.53746a59.js";import{I as U}from"./20.9c4ebfa9.js";import{p as P}from"./SpinnerRing.6542d453.js";import{i as F}from"./value.d2e2d3a1.js";import{d as R,u as Z}from"./adapter.1f450279.js";import{g as V,d as G,h as v,x as B,a9 as J,_ as K,C as r,o as i,b as I,w as p,H as y,ak as Q,r as g,Z as W,c as h,a as _,t as b,e as $,F as z,D as X,n as A,k as D}from"./framework.991e0c5a.js";import{u as Y}from"./use-loading.3c895455.js";import{t as x}from"./index.3c12bf60.js";import{g as ee}from"./index.e839ddf5.js";function N(e,t){var s;return(s=e.find(n=>F(n.value,t)))!=null?s:{text:"",value:void 0}}const ae=R({setup({props:e,keyword:t}){const s=Z(e);return V(()=>s.value.filter(d=>d.text.toLowerCase().includes(t.value.toLowerCase())))}}),te=G({components:{Dropdown:H,DropdownItem:j,DropdownHeader:E,pInput:M,IconArrow:q,IconCheck:U,IconLoading:P},props:{modelValue:{type:[String,Number,Boolean,Array,Object,Date],default:void 0},selected:{type:Object,default:()=>({text:"",value:void 0})},options:{type:Array,default:()=>[]},placeholder:{type:String,default:""},emptyText:{type:String,default:"No Data"},loadingText:{type:String,default:"Loading..."},adapter:{type:Object,default:()=>ae},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},size:{type:String,default:"md"},sectionLabel:{type:String,default:void 0},noCaret:{type:Boolean,default:!1},divider:{type:Boolean,default:!1},menuSize:{type:String,default:"sm"},menuClass:{type:[String,Array,Object],default:void 0}},models:{prop:"modelValue",event:"update:modelValue"},emits:["change","update:modelValue","update:selected","userInput"],setup(e,{emit:t}){const s=J(),n=v(),d=v(""),l=v(!1),f=Y({elapsed:!1}),C={props:e,keyword:d,isOpen:l,isLoading:f},c=e.adapter.setup(C),u=v(N(c.value,e.modelValue)),w=()=>{!e.disabled&&!e.readonly&&(l.value=!l.value)},S=V(()=>{const a=[];return l.value&&a.push("select--open"),e.disabled&&a.push("select--disabled"),e.readonly&&a.push("select--readonly"),e.error&&a.push("select--error","state--error"),a}),m=V({get(){var a;return l.value?d.value:(a=u.value)==null?void 0:a.text},set(a){a!==m.value&&(d.value=a)}});B(()=>e.modelValue,a=>{u.value=N(c.value,a)});function o(a){u.value=a,t("change",a),t("update:selected",a),t("update:modelValue",a==null?void 0:a.value),l.value&&t("userInput",a)}function k(){!e.disabled&&!e.readonly&&(l.value=!0)}function L(){l.value?d.value="":o()}function T(a){var O;return F(a.value,(O=u.value)==null?void 0:O.value)}return B(l,a=>{a||(d.value="")},{flush:"post"}),ee(()=>{l.value&&n.value&&n.value!==document.activeElement&&n.value.focus()}),x(()=>{var a;(a=s==null?void 0:s.proxy)!=null&&a.$el&&(n.value=s.proxy.$el.querySelector(".select__search"))}),{classNames:S,isOpen:l,isLoading:f,search:m,items:c,toggleOpen:w,select:o,onFocus:k,onClear:L,isSelected:T}}});const oe={key:0,"data-testid":"select-no-data",class:"select__empty"},le={class:"select__option"},se={class:"select__option-text"},ne={key:2,"data-testid":"select-loading",class:"select__loading"};function de(e,t,s,n,d,l){const f=r("IconArrow"),C=r("p-input"),c=r("DropdownHeader"),u=r("IconCheck"),w=r("DropdownItem"),S=r("IconLoading"),m=r("Dropdown");return i(),I(m,{modelValue:e.isOpen,"onUpdate:modelValue":t[1]||(t[1]=o=>e.isOpen=o),class:A(["select",e.classNames]),"data-testid":"select","aria-label":"select",disabled:e.disabled,divider:e.divider,"menu-size":e.menuSize,"menu-class":e.menuClass},{activator:p(()=>[y(C,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=o=>e.search=o),"data-testid":"select-search",class:"select__search",size:e.size,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,clearable:e.clearable,onClear:W(e.onClear,["prevent"]),onFocus:e.onFocus},Q({_:2},[e.noCaret?void 0:{name:"append",fn:p(()=>[g(e.$slots,"caret",{isOpen:e.isOpen,toggle:e.toggleOpen},()=>[y(f,{class:"select__caret","data-testid":"select-caret-icon",onClick:e.toggleOpen},null,8,["onClick"])])]),key:"0"}]),1032,["modelValue","size","placeholder","disabled","readonly","clearable","onClear","onFocus"])]),default:p(()=>[!e.isLoading&&e.items.length===0?(i(),h("div",oe,[g(e.$slots,"empty",{},()=>[_(b(e.emptyText),1)])])):(i(),h(z,{key:1},[e.sectionLabel?(i(),I(c,{key:0,"data-testid":"select-label"},{default:p(()=>[_(b(e.sectionLabel),1)]),_:1})):$("",!0),(i(!0),h(z,null,X(e.items,(o,k)=>(i(),I(w,{key:k,"data-testid":"select-item",class:A({selected:e.isSelected(o)}),disabled:!!o.disabled,onClick:L=>e.select(o)},{default:p(()=>[D("div",le,[D("div",se,[g(e.$slots,"option",{isSelected:e.isSelected(o),item:o},()=>[_(b(o.text),1)])]),y(u,{class:"select__option-checked"})])]),_:2},1032,["class","disabled","onClick"]))),128))],64)),e.isLoading?(i(),h("div",ne,[y(S,{width:"14",height:"14"}),g(e.$slots,"loading",{},()=>[D("span",null,b(e.loadingText),1)])])):$("",!0)]),_:3},8,["modelValue","disabled","divider","menu-size","menu-class","class"])}const we=K(te,[["render",de]]);export{we as p};
