import{d as I,$ as Q,M as X,g as h,o as i,c as f,r as v,e as A,k as C,L as Y,l as r,n as L,F as T,D as H,b as m,w as p,a as S,t as y,h as _,a1 as j,H as $,ak as D,Z as E,O as ee}from"./framework.e7be1a03.js";import{_ as te}from"./Dropdown.vue_vue_type_script_setup_true_lang.1f1ef4b7.js";import{p as ae}from"./Dropdown.vue_vue_type_style_index_0_lang.7783cb4c.js";import{p as le}from"./DropdownHeader.bb6eb37d.js";import{p as se}from"./Input.3998d57b.js";import{p as ie}from"./Text.e7661c41.js";import{I as ne}from"./index.a3ecab28.js";import{p as P}from"./Label.d1e9f9ec.js";import{I as oe}from"./20.3ed33228.js";import{I as de}from"./20.02019edf.js";import{I as re}from"./20.0304e3cd.js";import{I as ue}from"./IconCheckbox.72d5e91d.js";import{p as ce}from"./SpinnerRing.01a776bb.js";import{i as x,v as pe}from"./value.d2e2d3a1.js";import{d as fe,u as me}from"./adapter.a360f6cf.js";import{u as ye}from"./use-loading.db1fee04.js";import{g as ve}from"./index.6382afcb.js";import{w as he}from"./index.2b14f1dc.js";const be={key:0,class:"input__prepend"},ge=["disabled","readonly"],Se={key:1,class:"input__append"},ke=I({inheritAttrs:!1,__name:"SelectInput",props:{size:{type:String,default:"md"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},containerClass:{type:[String,Array,Object],default:void 0}},setup(e){const l=e,a=Q(),u=X(ne,void 0,!1),b=h(()=>{const s=[];return u!=null&&u.size.value?s.push(`input--${u==null?void 0:u.size.value}`):l.size&&s.push(`input--${l.size}`),l.disabled&&s.push("input--disabled"),l.readonly&&s.push("input--readonly"),l.error&&s.push("input--error","state--error"),a.prepend&&s.push("input--has-prepend"),a.append&&s.push("input--has-append"),s});return(s,B)=>(i(),f("div",{class:L(["input",e.containerClass]),"data-testid":"input-container"},[s.$slots.prepend?(i(),f("span",be,[v(s.$slots,"prepend")])):A("",!0),C("div",Y({class:["input__form",r(b)],"data-testid":"input",disabled:e.disabled,readonly:e.readonly,tabindex:1},s.$attrs),[v(s.$slots,"default")],16,ge),s.$slots.append?(i(),f("span",Se,[v(s.$slots,"append")])):A("",!0)],2))}}),Ce={class:"select__tags"},Ae=I({__name:"SelectTags",props:{items:{type:Array,default:()=>[]},displayLimit:{type:Number,default:2},limitText:{type:String,default:"+{n} Other(s)"}},setup(e){const l=e,a=h(()=>l.items.slice(0,l.displayLimit)),u=h(()=>l.limitText.replaceAll("{n}",String(l.items.length-l.displayLimit)));return(b,s)=>(i(),f("div",Ce,[(i(!0),f(T,null,H(r(a),(B,g)=>(i(),m(P,{key:g,"data-testid":"select-tag",variant:"light",size:"xs"},{default:p(()=>[S(y(B.text),1)]),_:2},1024))),128)),e.items.length>e.displayLimit?(i(),m(P,{key:0,"data-testid":"select-tag-others",variant:"light",size:"xs"},{default:p(()=>[S(y(r(u)),1)]),_:1})):A("",!0)]))}});function U(e,l){var a;return(a=e.find(u=>x(u.value,l)))!=null?a:{text:"",value:void 0}}function F(e,l){return Array.isArray(l)?e.filter(a=>pe(l,a.value)):[]}const _e=fe({setup({props:e,keyword:l}){const a=me(e);return h(()=>a.value.filter(b=>b.text.toLowerCase().includes(l.value.toLowerCase())))}}),$e={key:1,"data-testid":"select-placeholder"},xe={class:"input__form__placeholder"},Be={key:0,"data-testid":"select-no-data",class:"select__empty"},Te={class:"select__option"},Ve={class:"select__option-text"},Le={class:"select__option-checked"},Ie={key:2,"data-testid":"select-loading",class:"select__loading"},Qe=I({models:{prop:"modelValue",event:"update:modelValue"},__name:"Select",props:{modelValue:{type:[String,Number,Boolean,Array,Object,Date],default:void 0},selected:{type:[Object,Array],default:void 0},options:{type:Array,default:()=>[]},placeholder:{type:String,default:"Â "},emptyText:{type:String,default:"No Data"},loadingText:{type:String,default:"Loading..."},searchText:{type:String,default:"Search..."},adapter:{type:Object,default:()=>_e},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},clearLabel:{type:String,default:"Clear"},size:{type:String,default:"md"},sectionLabel:{type:String,default:void 0},noCaret:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},displayLimit:{type:Number,default:void 0},limitText:{type:String,default:void 0},searchable:{type:Boolean,default:!0},menuSize:{type:String,default:void 0},menuClass:{type:[String,Array,Object],default:void 0},divider:{type:Boolean,default:!1},noAnimation:{type:Boolean,default:!1},noCloseAfterSelect:{type:Boolean,default:!1}},emits:["change","update:modelValue","update:selected","userInput"],setup(e,{emit:l}){const a=e,u=_(),b=_(),s=h(()=>{var t;return(t=u.value)==null?void 0:t.input}),B=h(()=>{var t;return(t=b.value)==null?void 0:t.menuBody}),g=_(""),c=_(!1),V=ye({elapsed:!1}),M={props:a,keyword:g,isOpen:c,isLoading:V,menuEl:B},k=a.adapter.setup(M),d=_(a.multiple?F(k.value,a.modelValue):U(k.value,a.modelValue)),z=()=>{!a.disabled&&!a.readonly&&(c.value=!c.value)},R=h(()=>{const t=[];return c.value&&t.push("select--open"),a.disabled&&t.push("select--disabled"),a.readonly&&t.push("select--readonly"),a.multiple&&t.push("select--multiple"),t}),G=h(()=>{var t;return a.multiple?Array.isArray(d.value)&&d.value.length>0:(t=d.value)==null?void 0:t.value}),w=he(()=>a.modelValue,t=>{d.value=a.multiple?F(k.value,t):U(k.value,t)});function O(t){let o;a.multiple?t?Array.isArray(d.value)&&(o=d.value.some(n=>x(n.value,t.value))?d.value.filter(n=>!x(n.value,t.value)):[...d.value,t]):o=[]:o=t,w.pause(),d.value=o,l("change",o),l("update:selected",o),l("update:modelValue",a.multiple?o.map(n=>n.value):o==null?void 0:o.value),c.value&&l("userInput",o),a.noCloseAfterSelect||(c.value=!1),ee(()=>{w.resume()})}function q(){!a.disabled&&!a.readonly&&(c.value=!0)}function W(){O()}function N(t){return d.value?a.multiple&&Array.isArray(d.value)?d.value.some(o=>x(t.value,o.value)):x(t.value,d.value.value):!1}function Z(){var t;(t=s.value)==null||t.focus()}function J(){g.value=""}return ve(()=>{c.value&&s.value&&s.value!==document.activeElement&&(s.value.select(),s.value.focus())}),(t,o)=>(i(),m(te,{ref_key:"dropdown",ref:b,modelValue:r(c),"onUpdate:modelValue":o[1]||(o[1]=n=>j(c)?c.value=n:null),class:L(["select",r(R)]),"data-testid":"select","aria-label":"select",disabled:e.disabled,divider:e.divider,"menu-size":e.menuSize,"menu-class":e.menuClass,"no-animation":e.noAnimation,onShow:Z,onHide:J},{activator:p(()=>[$(ke,{"data-testid":"select-activator",class:"select__activator",size:e.size,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,error:e.error,onFocus:q},D({default:p(()=>[r(G)?v(t.$slots,"selected",{key:0,item:r(d),multiple:e.multiple},()=>{var n;return[a.multiple&&Array.isArray(r(d))?(i(),m(Ae,{key:0,items:r(d),"display-limit":e.displayLimit,"limit-text":e.limitText},null,8,["items","display-limit","limit-text"])):(i(),f(T,{key:1},[S(y((n=r(d))==null?void 0:n.text),1)],64))]}):(i(),f("div",$e,[v(t.$slots,"placeholder",{},()=>[C("span",xe,y(e.placeholder),1)])]))]),_:2},[e.noCaret?void 0:{name:"append",fn:p(()=>[v(t.$slots,"caret",{isOpen:r(c),toggle:z},()=>[$(oe,{class:"select__caret","data-testid":"select-caret-icon",onClick:z})])]),key:"0"}]),1032,["size","placeholder","disabled","readonly","error"])]),prepend:p(()=>[e.searchable?(i(),m(se,{key:0,ref_key:"input",ref:u,modelValue:r(g),"onUpdate:modelValue":o[0]||(o[0]=n=>j(g)?g.value=n:null),"data-testid":"select-search",class:"select__search no--error",placeholder:e.searchText,clearable:!0},{append:p(()=>[$(re,{class:"select__search-icon"})]),_:1},8,["modelValue","placeholder"])):A("",!0)]),default:p(()=>[!r(V)&&r(k).length===0?(i(),f("div",Be,[v(t.$slots,"empty",{},()=>[S(y(e.emptyText),1)])])):(i(),f(T,{key:1},[e.sectionLabel||e.clearable?(i(),m(le,{key:0,"data-testid":"select-label"},D({default:p(()=>[S(y(e.sectionLabel),1)]),_:2},[e.clearable?{name:"action",fn:p(()=>[$(ie,{"data-testid":"select-clear",variant:"caption2",href:"javascript:void",onClick:E(W,["prevent"])},{default:p(()=>[S(y(e.clearLabel),1)]),_:1},8,["onClick"])]),key:"0"}:void 0]),1024)):A("",!0),(i(!0),f(T,null,H(r(k),(n,K)=>(i(),m(ae,{key:K,"data-testid":"select-item",class:L({selected:N(n)}),disabled:!!n.disabled,onClick:E(ze=>O(n),["prevent"])},{default:p(()=>[C("div",Te,[C("div",Ve,[v(t.$slots,"option",{isSelected:N(n),item:n},()=>[S(y(n.text),1)])]),C("div",Le,[e.multiple?(i(),m(ue,{key:0})):(i(),m(de,{key:1}))])])]),_:2},1032,["class","disabled","onClick"]))),128))],64)),r(V)?(i(),f("div",Ie,[$(ce),v(t.$slots,"loading",{},()=>[C("span",null,y(e.loadingText),1)])])):A("",!0)]),_:3},8,["modelValue","disabled","divider","menu-size","menu-class","class","no-animation"]))}});export{Qe as _};
