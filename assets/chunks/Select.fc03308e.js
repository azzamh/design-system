import{D as F}from"./Dropdown.250bbcac.js";import{p as T}from"./Dropdown.vue_vue_type_style_index_0_lang.970ad067.js";import{p as j}from"./DropdownHeader.26a06b23.js";import{p as q}from"./Input.ac4cd77e.js";import{I as M}from"./20.67c2913f.js";import{I as N}from"./20.e163875b.js";import{p as P}from"./SpinnerRing.268c9815.js";import{r as L,u as E,P as v,q as V,H as U,_ as R,M as r,v as i,C as D,j as p,I as y,ai as W,g,f as h,i as S,X as b,B as $,y as B,D as X,h as A,F as C}from"./framework.408943e8.js";import{i as z}from"./value.d2e2d3a1.js";import{d as G,u as J}from"./adapter.199cbf5e.js";import{u as K}from"./use-loading.4cc04ae9.js";import{m as Q,k as Y}from"./theme.af157f64.js";function H(e,a){var l;return(l=e.find(n=>z(n.value,a)))!=null?l:{text:"",value:void 0}}const Z=G({setup({props:e,keyword:a}){const l=J(e);return L(()=>l.value.filter(d=>d.text.toLowerCase().includes(a.value.toLowerCase())))}}),x=E({components:{Dropdown:F,DropdownItem:T,DropdownHeader:j,pInput:q,IconArrow:M,IconCheck:N,IconLoading:P},props:{modelValue:{type:[String,Number,Boolean,Array,Object,Date],default:void 0},selected:{type:Object,default:()=>({text:"",value:void 0})},options:{type:Array,default:()=>[]},placeholder:{type:String,default:""},emptyText:{type:String,default:"No Data"},loadingText:{type:String,default:"Loading..."},adapter:{type:Object,default:()=>Z},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},size:{type:String,default:"md"},sectionLabel:{type:String,default:void 0},noCaret:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["change","update:modelValue","update:selected","userInput"],setup(e,{emit:a}){const l=U(),n=v(),d=v(""),s=v(!1),f=K({elapsed:!1}),_={props:e,keyword:d,isOpen:s,isLoading:f},c=e.adapter.setup(_),u=v(H(c.value,e.modelValue)),I=()=>{s.value=!s.value},w=L(()=>{const o=[];return s.value&&o.push("select--open"),e.disabled&&o.push("select--disabled"),e.readonly&&o.push("select--readonly"),e.error&&o.push("select--error","state--error"),o}),m=L({get(){var o;return s.value?d.value:(o=u.value)==null?void 0:o.text},set(o){o!==m.value&&(d.value=o)}});V(()=>e.modelValue,o=>{u.value=H(c.value,o)});function t(o){u.value=o,a("change",o),a("update:selected",o),a("update:modelValue",o.value),s.value&&a("userInput",o)}function k(){!e.disabled&&!e.readonly&&(s.value=!0)}function O(o){return z(o.value,u.value.value)}return V(s,o=>{o||(d.value="")},{flush:"post"}),Q(()=>{s.value&&n.value&&n.value!==document.activeElement&&n.value.focus()}),Y(()=>{var o;(o=l==null?void 0:l.proxy)!=null&&o.$el&&(n.value=l.proxy.$el.querySelector(".select__search"))}),{classNames:w,isOpen:s,isLoading:f,search:m,items:c,toggleOpen:I,select:t,onFocus:k,isSelected:O}}});const ee={key:0,"data-testid":"select-no-data",class:"select__empty"},oe={class:"select__option"},ae={class:"select__option-text"},te={key:2,"data-testid":"select-loading",class:"select__loading"};function se(e,a,l,n,d,s){const f=r("IconArrow"),_=r("p-input"),c=r("DropdownHeader"),u=r("IconCheck"),I=r("DropdownItem"),w=r("IconLoading"),m=r("Dropdown");return i(),D(m,{modelValue:e.isOpen,"onUpdate:modelValue":a[1]||(a[1]=t=>e.isOpen=t),class:A(["select",e.classNames]),"data-testid":"select","aria-label":"select",disabled:e.disabled},{activator:p(()=>[y(_,{modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=t=>e.search=t),"data-testid":"select-search",class:"select__search",size:e.size,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,clearable:e.clearable,onFocus:e.onFocus},W({_:2},[e.noCaret?void 0:{name:"append",fn:p(()=>[g(e.$slots,"caret",{isOpen:e.isOpen,toggle:e.toggleOpen},()=>[y(f,{class:"select__caret","data-testid":"select-caret-icon",onClick:e.toggleOpen},null,8,["onClick"])])]),key:"0"}]),1032,["modelValue","size","placeholder","disabled","readonly","clearable","onFocus"])]),default:p(()=>[!e.isLoading&&e.items.length===0?(i(),h("div",ee,[g(e.$slots,"empty",{},()=>[S(b(e.emptyText),1)])])):(i(),h(B,{key:1},[e.sectionLabel?(i(),D(c,{key:0,"data-testid":"select-label"},{default:p(()=>[S(b(e.sectionLabel),1)]),_:1})):$("",!0),(i(!0),h(B,null,X(e.items,(t,k)=>(i(),D(I,{key:k,"data-testid":"select-item",class:A({selected:e.isSelected(t)}),disabled:!!t.disabled,onClick:O=>e.select(t)},{default:p(()=>[C("div",oe,[C("div",ae,[g(e.$slots,"option",{isSelected:e.isSelected(t),item:t},()=>[S(b(t.text),1)])]),y(u,{class:"select__option-checked"})])]),_:2},1032,["class","disabled","onClick"]))),128))],64)),e.isLoading?(i(),h("div",te,[y(w,{width:"14",height:"14"}),g(e.$slots,"loading",{},()=>[C("span",null,b(e.loadingText),1)])])):$("",!0)]),_:3},8,["modelValue","disabled","class"])}const ge=R(x,[["render",se]]);export{ge as p};
