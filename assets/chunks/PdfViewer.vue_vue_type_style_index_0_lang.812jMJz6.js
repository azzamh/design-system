const __vite__fileDeps=["assets/chunks/interact.min.B6Nbp2Yr.js","assets/chunks/theme.DdlbdNMy.js","assets/chunks/framework.sPKXfJg2.js","assets/chunks/pdf.Bdyw1wc4.js","assets/chunks/vite-browser-external_commonjs-proxy.DH-MYENY.js","assets/chunks/pdf_viewer.CXL_EVc_.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{H as b,r as _,aI as re,aG as pe,a0 as q,Z as K,y as E,p as o,au as me,O as Y,a6 as ge,aJ as ye,aK as _e,k as V,ag as we,aB as oe,P as xe,z as Pe,_ as be,o as j,c as F,m,d as W,J as x,w as L,t as B,a9 as Ee,l as ce,ab as I,b as Se,aL as De,ac as le,a as z,ah as $e,aM as Z,aH as ie,ax as ke,am as Ce,as as ne,ak as X,T as Te,n as Ne}from"./framework.sPKXfJg2.js";import{v as ue}from"./index.BfsXMAL2.js";import{n as A}from"./noop.DX6rZLP_.js";import{I as Oe,a as Le}from"./20.BfHAGBAm.js";import{I as Ve}from"./20.Cxj30OQu.js";import{_ as J}from"./Button.vue_vue_type_script_setup_true_lang.D0k62JW9.js";import"./Button.vue_vue_type_style_index_0_lang.l0sNRNKZ.js";import{_ as ze}from"./Divider.vue_vue_type_script_setup_true_lang.B9NCHUQL.js";import"./Divider.vue_vue_type_style_index_0_lang.l0sNRNKZ.js";import{_ as Me}from"./Select.vue_vue_type_style_index_0_lang.BIsFLdCH.js";import{_ as je}from"./Heading.vue_vue_type_script_setup_true_lang.lANNuoEL.js";import"./Heading.vue_vue_type_style_index_0_lang.l0sNRNKZ.js";import{f as Fe}from"./focus.DEzknfUe.js";import{u as G,a as Ie}from"./index.DKCf7HtC.js";import{d as Be}from"./debounce.CE-8mXQa.js";import{r as Re}from"./baseGetTag.Cu32HCTk.js";import{t as We}from"./toInteger.NZnbAWM7.js";import{t as He}from"./toNumber.Dcxq_36h.js";import{t as se}from"./toString.CQAYsbsy.js";import{u as Ae}from"./use-loading.BD8gj8Da.js";var Je=Re.isFinite,Ge=Math.min;function Ue(e){var n=Math[e];return function(i,t){if(i=He(i),t=t==null?0:Ge(We(t),292),t&&Je(i)){var a=(se(i)+"e").split("e"),s=n(a[0]+"e"+(+a[1]+t));return a=(se(s)+"e").split("e"),+(a[0]+"e"+(+a[1]-t))}return n(i)}}var Ze=Ue("round");const Xe=Symbol("DropzoneContext");function qe(e,n){const i=b(!0),t=b(),a=_(),s=_();async function r(){if(g(),e.value){const{default:f}=await K(()=>import("./interact.min.B6Nbp2Yr.js").then(l=>l.i),__vite__mapDeps([0,1,2]));f.dynamicDrop(!0),t.value=f(n.value,{context:e.value}).dropzone({accept:".pdf-object",overlap:.95,enabled:i.value,checker(l,u,h,v,$,w,y){var P;return h&&(((P=e.value)==null?void 0:P.contains(y))||y.classList.contains("pdf-object--external"))},ondragenter(l){s.value=l.target,l.target.classList.add("hover")},ondragleave(l){l.target.classList.remove("hover")},ondrop(l){s.value=l.target,a.value=l.target,l.target.classList.remove("hover")}})}}function g(){t.value&&t.value.unset()}return re(e,f=>{f.some(u=>u.type==="childList"&&u.target.matches(n.value))&&r()},{subtree:!0,childList:!0}),pe(()=>{g()}),q(Xe,{dropzone:a,hoverzone:s}),i}function Ke(e,n=document.body,i=!1){const t=b();function a(){var s,r;t.value=i?(s=o(n))==null?void 0:s.querySelectorAll(o(e)):(r=o(n))==null?void 0:r.querySelector(o(e))}return E(()=>o(e),()=>{a()}),re(n,s=>{s.some(r=>r.type==="childList")&&a()},{childList:!0,subtree:!0}),me(()=>{a()}),t}const Q=Symbol("PDFObjects"),ta=Symbol("PDFObjects");function Ye(e){var f,l,u,h;const n=V(()=>Ze(e.width/e.height,2)),i=_((f=e.minWidth)!=null?f:e.width*.5),t=_((l=e.maxWidth)!=null?l:e.width*2),a=_((u=e.minHeight)!=null?u:e.height*.5),s=_((h=e.maxHeight)!=null?h:e.height*2),r=G(e.width,i,t),g=G(e.height,a,s);return E(()=>e.minWidth,v=>{Number.isFinite(v)&&(i.value=v)}),E(()=>e.minHeight,v=>{Number.isFinite(v)&&(a.value=v)}),E(()=>e.maxWidth,v=>{Number.isFinite(v)&&(t.value=v)}),E(()=>e.maxHeight,v=>{Number.isFinite(v)&&(s.value=v)}),{ratio:n,width:r,height:g,minWidth:i,maxWidth:t,minHeight:a,maxHeight:s}}function aa(e){var w;const{objects:n,page:i}=Y(Q),t=_((w=e.page)!=null?w:i.value),a=_(e.x),s=_(e.y),r=Symbol("PDFObject"),{width:g,height:f,minWidth:l,maxWidth:u,minHeight:h,maxHeight:v,ratio:$}=Ye(e);return n.set(r,ge({id:r,page:t,x:a,y:s,width:g,height:f})),ye(()=>{Number.isFinite(t.value)||we(i).toBeTruthy().then(()=>{t.value=i.value})}),_e(()=>{n.delete(r)}),{id:r,x:a,y:s,page:t,width:g,height:f,minWidth:l,minHeight:h,maxWidth:u,maxHeight:v,ratio:$}}function oa(e){const{root:n}=Y(Q),i=V(()=>`.page[data-page-number="${o(e)}"]`);return Ke(i,n)}const ia=Be(Fe,100),de=Symbol("PdfViewer");function he(){return Y(de,()=>{const e=_(1),n=_(1),i=_(0);return{page:e,scale:n,totalPage:i,zoomIn:A,zoomOut:A,next:A,prev:A}},!0)}function Qe(e,n={}){const i=_(!1),t=V(()=>{var h;return(h=o(n.offsetTop))!=null?h:0}),a=V(()=>{var h;return(h=o(e))==null?void 0:h.parentElement}),{top:s,height:r}=oe(a),{top:g,width:f,left:l}=oe(e),{height:u}=xe();return Pe(h=>{i.value&&e.value&&(s.value-t.value>=0?(e.value.style.setProperty("height",`${u.value-g.value}px`),e.value.style.setProperty("width","100%")):(a.value.style.setProperty("min-height",`${r.value}px`),e.value.style.setProperty("position","fixed"),e.value.style.setProperty("top",`${t.value}px`),e.value.style.setProperty("left",`${l.value}px`),e.value.style.setProperty("width",`${f.value}px`),e.value.style.setProperty("height",`${u.value-t.value}px`)),h(()=>{a.value.style.removeProperty("min-height"),e.value.style.removeProperty("position"),e.value.style.removeProperty("top"),e.value.style.removeProperty("left"),e.value.style.removeProperty("width"),e.value.style.removeProperty("height")}))}),i}const et={},tt={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",class:"persona-icon",viewBox:"0 0 20 20"},at=m("path",{fill:"currentColor","fill-rule":"evenodd",d:"M4.673 12.83a.575.575 0 0 1 0-.821l4.91-4.839a.595.595 0 0 1 .834 0l4.91 4.839c.23.226.23.594 0 .82a.595.595 0 0 1-.833 0L10 8.403 5.506 12.83a.595.595 0 0 1-.833 0","clip-rule":"evenodd"},null,-1),ot=[at];function it(e,n){return j(),F("svg",tt,ot)}const nt=be(et,[["render",it]]),st={"data-testid":"pdf-navigation",class:"pdf__navigation"},rt={class:"pdf__navigation-container"},ct={class:"pdf__navigation-scale"},lt={"data-testid":"pdf-total",class:"pdf__navigation-total"},ut=W({__name:"PdfNavigation",setup(e){const{page:n,scale:i,totalPage:t,zoomIn:a,zoomOut:s,next:r,prev:g}=he(),f=V(()=>Array.from({length:t.value}).map((l,u)=>({text:`${u+1}`,value:u+1})));return(l,u)=>(j(),F("div",st,[m("div",rt,[x(J,{"data-testid":"pdf-zoom-out",variant:"ghost",size:"xs",icon:"",onClick:o(s)},{default:L(()=>[x(Oe)]),_:1},8,["onClick"]),m("span",ct,B((o(i)*100).toFixed(0))+"% ",1),x(J,{"data-testid":"pdf-zoom-in",variant:"ghost",size:"xs",icon:"",onClick:o(a)},{default:L(()=>[x(Le)]),_:1},8,["onClick"]),x(ze,{vertical:""}),x(Me,{modelValue:o(n),"onUpdate:modelValue":u[0]||(u[0]=h=>Ee(n)?n.value=h:null),options:o(f),size:"xs"},null,8,["modelValue","options"]),m("span",lt,"of "+B(o(t)),1),x(J,{"data-testid":"pdf-prev",variant:"ghost",size:"xs",icon:"",onClick:o(g)},{default:L(()=>[x(nt)]),_:1},8,["onClick"]),x(J,{"data-testid":"pdf-next",variant:"ghost",size:"xs",icon:"",onClick:o(r)},{default:L(()=>[x(Ve)]),_:1},8,["onClick"])])]))}}),dt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='595'%20height='842'%20aria-labelledby='loading-aria'%20preserveAspectRatio='none'%20role='img'%20viewBox='0%200%20595%20842'%3e%3ctitle%20id='loading-aria'%3eLoading...%3c/title%3e%3crect%20width='100%25'%20height='100%25'%20x='0'%20y='0'%20clip-path='url(%23clip-path)'%20style='fill:url(%23fill)'/%3e%3cdefs%3e%3cclipPath%20id='clip-path'%3e%3crect%20width='191'%20height='14'%20x='44'%20y='64'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='44'%20y='94'%20rx='2.068'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='152'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='182'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='212'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='242'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='272'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='302'%20rx='7'/%3e%3crect%20width='349'%20height='14'%20x='44'%20y='332'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='390'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='420'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='450'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='480'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='510'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='540'%20rx='7'/%3e%3crect%20width='183'%20height='14'%20x='44'%20y='570'%20rx='7'/%3e%3crect%20width='191'%20height='14'%20x='360'%20y='628'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='411'%20y='678'%20rx='2.068'/%3e%3crect%20width='191'%20height='14'%20x='44'%20y='64'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='44'%20y='94'%20rx='2.068'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='152'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='182'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='212'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='242'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='272'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='302'%20rx='7'/%3e%3crect%20width='349'%20height='14'%20x='44'%20y='332'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='390'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='420'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='450'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='480'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='510'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='540'%20rx='7'/%3e%3crect%20width='183'%20height='14'%20x='44'%20y='570'%20rx='7'/%3e%3crect%20width='191'%20height='14'%20x='360'%20y='628'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='411'%20y='678'%20rx='2.068'/%3e%3c/clipPath%3e%3clinearGradient%20id='fill'%3e%3cstop%20offset='.6'%20stop-color='%23E7E7E8'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='-2;%20-2;%201'/%3e%3c/stop%3e%3cstop%20offset='1.6'%20stop-color='%23CFCFD1'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='-1;%20-1;%202'/%3e%3c/stop%3e%3cstop%20offset='2.6'%20stop-color='%23E7E7E8'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='0;%200;%203'/%3e%3c/stop%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",ht={"data-testid":"pdf-loading",class:"pdf__loading"},ft=["src"],vt=W({__name:"PdfLoading",setup(e){return(n,i)=>(j(),F("div",ht,[m("img",{src:o(dt),width:"793",height:"1122"},null,8,ft)]))}});let R,M;async function ee(){if(!R){const e=await K(()=>import("./pdf.Bdyw1wc4.js").then(n=>n.p),__vite__mapDeps([3,1,2,4]));typeof window<"u"&&"Worker"in window&&(e.GlobalWorkerOptions.workerSrc=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${e.version}/build/pdf.worker.min.js`),R=e}return R}async function te(){return await ee(),M||(M=await K(()=>import("./pdf_viewer.CXL_EVc_.js").then(e=>e.p),__vite__mapDeps([5,1,2]))),M}async function pt(...e){return await ee(),R.getDocument(...e)}async function mt(){return`https://cdn.jsdelivr.net/npm/pdfjs-dist@${await fe()}/cmaps/`}async function fe(){return await ee(),R.version}async function gt(){return await te(),new M.EventBus}async function yt(...e){return await te(),new M.PDFViewer(...e)}async function _t(...e){return await te(),new M.PDFLinkService(...e)}const wt={"data-testid":"pdf-error",class:"pdf__error"},xt={class:"mt-7"},Pt=m("dt",null,"URL:",-1),bt={class:"truncate"},Et=["href"],St=m("dt",null," Reason: ",-1),Dt=m("dt",null," PDFJS Version: ",-1),$t=W({__name:"PdfError",props:{url:{type:String,default:""},error:{type:Object,default:()=>({})}},setup(e){const n=_("");return ce(async()=>{n.value=await fe()}),(i,t)=>I((j(),F("div",wt,[x(je,{element:"h3"},{default:L(()=>[Se(" Failed to load PDF ")]),_:1}),m("dl",xt,[Pt,m("dd",bt,[m("a",{href:e.url,target:"_blank"},[m("code",null,B(e.url),1)],8,Et)]),St,m("dd",null,[m("code",null,B(e.error.message),1)]),Dt,m("dd",null,[m("code",null,B(o(n)),1)])])])),[[o(ue),1122/793]])}}),kt=["mousemove","mousedown","touchstart","keydown","scroll"];function Ct(e,n=5e3){const i=_(!1);let t;function a(){i.value=!1,t&&clearTimeout(t),t=setTimeout(()=>{i.value=!0},n)}return De(e,kt,a,{passive:!0}),i}const Tt=W({__name:"PdfObjects",props:{dropTarget:{type:String,default:".pdfViewer > .page"}},setup(e){const n=e,i=new Map,t=_(),a=he(),s=le(n,"dropTarget");return qe(t,s),q(Q,{...a,objects:i,root:t}),(r,g)=>(j(),F("div",{ref_key:"root",ref:t,class:"pdf-objects","data-testid":"pdf-objects"},[z(r.$slots,"default")],512))}});function Nt(e,n){const i=b(),t=b(),a=b(),s=b(),r=b(),g=V(()=>{var c,d;return(d=(c=i.value)==null?void 0:c.numPages)!=null?d:0}),f=G(1,.1,2),l=G(1,1,Ie(g,1)),u=Ae(),h=b(!1),v=b(),$=Z(),w=Z(),y=Z();async function P(c,d,S={}){u.value=!0,v.value=void 0;try{await k(),c&&(s.value=await pt({url:c,password:d,cMapUrl:await mt(),cMapPacked:!0,disableStream:S.disableStream,disableRange:S.disableRange}),i.value=await s.value.promise,a.value.setDocument(i.value),r.value.setDocument(i.value),$.trigger(i.value))}catch(D){D instanceof Error&&(v.value=D,w.trigger(D))}finally{u.value=!1}}async function k(){var c,d;s.value&&!s.value.destroyed&&(await s.value.destroy(),i.value=void 0,s.value=void 0,(c=a.value)==null||c.setDocument(null),(d=r.value)==null||d.setDocument(null))}async function U(){if(typeof navigator<"u"&&e.value&&n.value){const c=await gt();c.on("pagesinit",()=>{var D,H;const d=(H=(D=n.value)==null?void 0:D.clientWidth)!=null?H:0,S=d>0&&d<793;a.value.currentScaleValue=S?"page-width":"1",a.value.currentPageNumber=l.value,h.value=!0,y.trigger(a.value)}),c.on("pagechanging",d=>{l.value=d.pageNumber}),c.on("scalechanging",d=>{f.value=d.scale}),t.value=c,r.value=await _t({eventBus:t.value}),a.value=await yt({container:e.value,viewer:n.value,eventBus:t.value,linkService:r.value,removePageBorders:!0,annotationEditorMode:-1}),r.value.setViewer(a.value)}}return E([e,n],async([c,d])=>{a.value?c&&d&&(a.value.container=c,a.value.viewer=d,i.value&&a.value.setDocument(i.value),a.value.update()):await U()}),E(l,c=>{a.value&&c!==a.value.currentPageNumber&&(a.value.currentPageNumber=c)}),E(f,c=>{a.value&&c!==a.value.currentScale&&(a.value.currentScale=c)}),$e(async()=>{var c;await k(),(c=a.value)==null||c.cleanup()}),{page:l,scale:f,totalPage:g,loading:u,error:v,ready:h,openDoc:P,closeDoc:k,pdfDoc:i,pdfEventBus:t,pdfViewer:a,pdfLoadingTask:s,pdfLinkService:r,onLoaded:$.on,onError:w.on,onReady:y.on}}const Ot=["data-page","data-scale"],Lt={class:"pdf__header"},Vt={class:"pdf__footer"},na=W({__name:"PdfViewer",props:{src:{type:String,default:""},page:{type:Number,default:1},scale:{type:Number,default:1},password:{type:String,default:void 0},layout:{type:String,default:"fixed"},ratio:{type:[Number,String],default:210/297},offsetTop:{type:[Number,String],default:0},config:{type:[Object],default:()=>({})}},emits:["ready","loaded","error","error-password","update:page","update:scale"],setup(e,{expose:n,emit:i}){const t=e,a=i,s=_(),r=_(),g=_(),f=Ct(r),l=ie(t,"page"),u=ie(t,"scale"),h=ke(le(t,"offsetTop"),{nanToZero:!0}),v=Qe(s,{offsetTop:h}),$=V(()=>{const p=[];return t.layout&&p.push(`pdf-viewer--layout-${t.layout}`),p}),{page:w,scale:y,totalPage:P,openDoc:k,closeDoc:U,pdfDoc:c,loading:d,error:S,onLoaded:D,onError:H,onReady:ve}=Nt(r,g);Ce(()=>[t.src,t.password],([p,ae])=>{k(p,ae,t.config)},{debounce:500}),E(()=>t.layout,p=>{v.value=p==="fit"},{immediate:!0}),ce(async()=>{t.src&&k(t.src,t.password,t.config)}),D(p=>{a("loaded",p)}),H(p=>{p.name==="PasswordException"&&a("error-password",p),a("error",p)}),ve(p=>{a("ready",p)});function C(){y.value=Math.round(y.value/.1)*.1+.1}function T(){y.value=Math.round(y.value/.1)*.1-.1}function N(){w.value++}function O(){w.value--}return q(de,{page:w,scale:y,totalPage:P,zoomIn:C,zoomOut:T,next:N,prev:O}),ne(w,l),ne(y,u),n({page:w,scale:y,root:s,container:r,viewer:g,loading:d,totalPage:P,zoomIn:C,zoomOut:T,next:N,prev:O,openDoc:k,closeDoc:U}),(p,ae)=>I((j(),F("div",{ref_key:"root",ref:s,"data-testid":"pdf-viewer",class:Ne(["pdf",o($)]),"data-page":o(w),"data-scale":o(y)},[m("div",Lt,[z(p.$slots,"header",{page:o(w),scale:o(y),totalPage:o(P),zoomIn:C,zoomOut:T,next:N,prev:O,doc:o(c)})]),x(Tt,{class:"pdf__wrapper"},{default:L(()=>[m("div",{ref_key:"container",ref:r,class:"pdf__container pdfContainer"},[I(x(vt,null,null,512),[[X,o(d)||!e.src]]),I(x($t,{url:e.src,error:o(S)},null,8,["url","error"]),[[X,!o(d)&&o(S)]]),m("div",{ref_key:"viewer",ref:g,class:"pdf__viewer pdfViewer"},null,512),z(p.$slots,"default",{page:o(w),scale:o(y),totalPage:o(P),zoomIn:C,zoomOut:T,next:N,prev:O,doc:o(c)})],512),z(p.$slots,"container",{page:o(w),scale:o(y),totalPage:o(P),zoomIn:C,zoomOut:T,next:N,prev:O,doc:o(c)}),x(Te,{name:"slide-up"},{default:L(()=>[I(x(ut,null,null,512),[[X,!o(f)&&!o(d)&&!o(S)]])]),_:1}),z(p.$slots,"body",{page:o(w),scale:o(y),totalPage:o(P),zoomIn:C,zoomOut:T,next:N,prev:O,doc:o(c)})]),_:3}),m("div",Vt,[z(p.$slots,"footer",{page:o(w),scale:o(y),totalPage:o(P),zoomIn:C,zoomOut:T,next:N,prev:O,doc:o(c)})])],10,Ot)),[[o(ue),e.layout==="fixed"?Number(e.ratio):0]])}});export{Xe as D,ta as P,na as _,oa as a,Q as b,ia as f,aa as u};
