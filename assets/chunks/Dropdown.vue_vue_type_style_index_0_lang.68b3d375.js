import{u as S,r as p,I as z,_ as y,v as u,C as _,O as h,d as D,L as P,X as T,e as X,E,c as O,F as k,P as L,x as j,q as M,Y as R,M as B,a2 as I,D as q,B as N,$ as K,z as U,k as Z}from"./framework.0290506e.js";import{t as C,o as G,c as b}from"./index.2e2e8d76.js";import{p as Y}from"./Button.4b622724.js";import{u as J}from"./use-focus.b9bc053c.js";import{a as Q,c as ee,f as te,s as ne,o as oe,h as ae}from"./floating-ui.dom.d66a0422.js";import{u as se}from"./index.a7bd0a4b.js";import{I as le}from"./16.855c43ca.js";const A=Symbol("DROPDOWN_CONTEXT"),ie=S({props:{text:{type:String,default:""},href:{type:String,default:void 0},active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:a}){const s=z(A,void 0,!0);function o(t){a("click",t),(s!=null&&s.close&&!t.defaultPrevented||t.defaultPrevented&&e.href)&&s.close()}const r=p(()=>{const t=[""];return e.active&&t.push("dropdown__item--active"),t}),l=p(()=>{let t="button";return e.href&&(t="a"),t});return{handleOnClick:o,classNames:r,tagName:l}}});function re(e,a,s,o,r,l){return u(),_(E(e.tagName),{"data-testid":"dropdown-item",class:X(["dropdown__item",e.classNames]),href:e.href,disabled:e.disabled,onClick:e.handleOnClick},{default:h(()=>[D(e.$slots,"default",{},()=>[P(T(e.text),1)])]),_:3},8,["class","href","disabled","onClick"])}const de=y(ie,[["render",re]]),ue={},ce={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",class:"persona-icon",viewBox:"0 0 16 16"},pe=k("path",{fill:"currentColor",d:"M5.646 3.647a.5.5 0 0 1 .708 0l4 4a.5.5 0 0 1 0 .707l-4 4a.5.5 0 0 1-.708-.708L9.293 8 5.647 4.354a.5.5 0 0 1 0-.708Z"},null,-1),fe=[pe];function _e(e,a){return u(),O("svg",ce,fe)}const ve=y(ue,[["render",_e]]),me={},we={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",class:"persona-icon",viewBox:"0 0 16 16"},be=k("path",{fill:"currentColor",d:"M7.613 13.376a.444.444 0 0 1-.627-.012L2.124 8.308a.445.445 0 0 1 0-.616l4.862-5.056a.444.444 0 1 1 .64.617L3.487 7.556h10.068a.444.444 0 0 1 0 .888H3.488l4.137 4.303a.445.445 0 0 1-.012.629Z"},null,-1),he=[be];function ye(e,a){return u(),O("svg",we,he)}const ke=y(me,[["render",ye]]),x=Symbol("DropdownTree"),ge=S({components:{DropdownItem:de,IconNext:ve,IconBack:ke},props:{text:{type:String,default:""},noCaret:{type:Boolean,default:!1}},emits:["click"],setup(e,{slots:a,emit:s}){var f;const o=z(x,void 0,!0),r=L("slide-left"),l=p(()=>o===void 0),t=(f=o==null?void 0:o.tree)!=null?f:j({_level:0,slots:a}),d=()=>{t.value={_level:t.value._level+1,prev:t.value,slots:a}},c=()=>{t.value.prev&&(t.value=t.value.prev)},v=p(()=>t.value.slots.default),g=p(()=>!!(l.value&&t.value.prev));M(t,(i,n)=>{r.value=i._level>n._level?"slide-left":"slide-right"}),l.value&&R(x,{tree:t,next:d,back:c});function $(){l.value&&(t.value={prev:void 0,_level:0,slots:a})}function m(){const i=new MouseEvent("click");s("click",i),i.defaultPrevented||d()}return{isRoot:l,tree:t,view:v,next:d,back:c,reset:$,canBack:g,transition:r,handleOnClick:m}}});const $e=k("div",{class:"dropdown__group-content"},null,-1),Be={class:"dropdown__subitem__content"};function Ce(e,a,s,o,r,l){const t=B("IconBack"),d=B("DropdownItem"),c=B("IconNext");return u(),_(K,{name:e.transition,mode:"out-in"},{default:h(()=>[(u(),O("div",{key:e.tree._level,"data-testid":"dropdown-subitem",class:"dropdown__subitem"},[e.canBack?(u(),_(d,{key:"btn-back","data-testid":"dropdown-back",class:"dropdown__subitem__btn dropdown__subitem__btn--back",onClick:a[0]||(a[0]=I(v=>e.back(),["prevent"]))},{default:h(()=>[D(e.$slots,"button-back",{},()=>[q(t,{class:"dropdown__subitem__next"}),$e])]),_:3})):N("",!0),e.isRoot?(u(),_(E(e.view),{key:2})):(u(),_(d,{key:"btn-next",class:"dropdown__subitem__btn",onClick:I(e.handleOnClick,["prevent"])},{default:h(()=>[k("div",Be,[D(e.$slots,"button-content",{next:e.next,back:e.back},()=>[P(T(e.text),1)])]),e.noCaret?N("",!0):(u(),_(c,{key:0,"data-testid":"dropdown-subitem-next",class:"dropdown__subitem__next"}))]),_:3},8,["onClick"]))]))]),_:3},8,["name"])}const De=y(ge,[["render",Ce]]),Te=S({components:{Button:Y,DropdownGroup:De,IconArrow:le},props:{modelValue:{type:Boolean,default:!1},text:{type:String,default:""},placement:{type:String,default:"bottom-start"},variant:{type:String,default:"solid"},color:{type:String,default:"default"},size:{type:String,default:"md"},icon:{type:Boolean,default:!1},pill:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},noCaret:{type:Boolean,default:!1},divider:{type:Boolean,default:!1},menuClass:{type:[String,Array,Object],default:void 0},buttonClass:{type:[String,Array,Object],default:void 0},menuSize:{type:String,default:"sm"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["show","hide","update:modelValue"],setup(e,{emit:a}){const s=C("dropdown"),o=C("menu"),r=C("wizard"),l=U(e,"placement"),t=se(e),d=L(!1),{next:c,prev:v}=J(o),g=p(()=>{const n=[""];return e.divider&&n.push("dropdown--divider"),n}),$=p(()=>{const n=[""];return e.menuSize&&n.push(`dropdown__menu--${e.menuSize}`),n});function m(){e.disabled||(t.value?i():f())}function f(){e.disabled||(t.value=!0,a("show"))}function i(){e.disabled||(t.value=!1,a("hide"))}return G(o,()=>{t.value&&setTimeout(()=>{i()})},{ignore:[s]}),b("Escape",n=>{const w=n.target;t.value&&(i(),typeof w.blur=="function"&&w.blur())}),b(["ArrowUp"],n=>{t.value&&(n.preventDefault(),v())}),b(["ArrowDown"],n=>{t.value&&(n.preventDefault(),c())}),b(["Tab"],n=>{t.value&&(n.preventDefault(),n.shiftKey?v():c())}),Z(n=>{if(s.value&&o.value){const w=Q(s.value,o.value,()=>{ee(s.value,o.value,{strategy:"absolute",placement:l.value,middleware:[te(),ne(),oe(8),ae()]}).then(({x:F,y:V,placement:H,middlewareData:W})=>{o.value&&(o.value.dataset.popperPlacement=H,o.value.style.left=`${F||0}px`,o.value.style.top=`${V||0}px`,d.value=W.hide.referenceHidden)})});n(w)}},{flush:"post"}),M(t,n=>{!n&&r.value&&r.value.reset()},{immediate:!0}),R(A,{isOpen:t,toggle:m,open:f,close:i}),{isOpen:t,isHidden:d,classNames:g,containerSize:$,toggle:m,open:f,close:i}}});export{Te as _,De as a,de as p};
