import{d as z,a1 as X,M as Y,g as h,o as i,c as f,r as v,e as x,k,L as Z,l as r,n as w,F as B,D as H,b as m,w as p,a as _,t as y,h as C,x as ee,a3 as E,H as A,al as P,a0 as U,O as te}from"./framework.f5f77227.js";import{_ as ae}from"./Dropdown.vue_vue_type_script_setup_true_lang.7cf975cd.js";import{p as le}from"./Dropdown.vue_vue_type_style_index_0_lang.559f1785.js";import{p as se}from"./DropdownHeader.311ceedb.js";import{p as ie}from"./Input.88a385da.js";import{p as ne}from"./Text.acf44734.js";import{I as oe}from"./index.a3ecab28.js";import{p as F}from"./Label.30c79594.js";import{I as de}from"./20.aaffb2c4.js";import{I as re}from"./20.3c42dcdd.js";import{I as ue}from"./20.2d77b086.js";import{I as ce}from"./IconCheckbox.b09949e0.js";import{p as pe}from"./SpinnerRing.7d567aee.js";import{i as V,v as fe}from"./value.d2e2d3a1.js";import{d as me,u as ye}from"./adapter.0f94470a.js";import{u as ve}from"./use-loading.cae02e7d.js";import{g as he}from"./index.df38a97b.js";import{i as ge}from"./isNil.c75b1b34.js";import{w as be}from"./index.b8759187.js";const Se={key:0,class:"input__prepend"},ke=k("input",{class:"input__hidden",type:"text"},null,-1),_e=["disabled","readonly"],xe={key:1,class:"input__append"},Ce=z({inheritAttrs:!1,__name:"SelectInput",props:{size:{type:String,default:"md"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},containerClass:{type:[String,Array,Object],default:void 0}},setup(e){const l=e,a=X(),u=Y(oe,void 0,!1),g=h(()=>{const s=[];return u!=null&&u.size.value?s.push(`input--${u==null?void 0:u.size.value}`):l.size&&s.push(`input--${l.size}`),l.disabled&&s.push("input--disabled"),l.readonly&&s.push("input--readonly"),l.error&&s.push("input--error","state--error"),a.prepend&&s.push("input--has-prepend"),a.append&&s.push("input--has-append"),s});return(s,$)=>(i(),f("div",{class:w(["input",e.containerClass]),"data-testid":"input-container"},[s.$slots.prepend?(i(),f("span",Se,[v(s.$slots,"prepend")])):x("",!0),ke,k("div",Z({class:["input__form",r(g)],"data-testid":"input",disabled:e.disabled,readonly:e.readonly,tabindex:1},s.$attrs),[v(s.$slots,"default")],16,_e),s.$slots.append?(i(),f("span",xe,[v(s.$slots,"append")])):x("",!0)],2))}});const Ae={class:"select__tags"},Ve=z({__name:"SelectTags",props:{items:{type:Array,default:()=>[]},displayLimit:{type:Number,default:2},limitText:{type:String,default:"+{n} Other(s)"}},setup(e){const l=e,a=h(()=>l.items.slice(0,l.displayLimit)),u=h(()=>l.limitText.replaceAll("{n}",String(l.items.length-l.displayLimit)));return(g,s)=>(i(),f("div",Ae,[(i(!0),f(B,null,H(r(a),($,b)=>(i(),m(F,{key:b,"data-testid":"select-tag",variant:"light",size:"xs"},{default:p(()=>[_(y($.text),1)]),_:2},1024))),128)),e.items.length>e.displayLimit?(i(),m(F,{key:0,"data-testid":"select-tag-others",variant:"light",size:"xs"},{default:p(()=>[_(y(r(u)),1)]),_:1})):x("",!0)]))}});function I(e,l){var a;return(a=e.find(u=>V(u.value,l)))!=null?a:{text:"",value:void 0}}function L(e,l){return Array.isArray(l)?e.filter(a=>fe(l,a.value)):[]}const $e=me({setup({props:e,keyword:l}){const a=ye(e);return h(()=>a.value.filter(g=>g.text.toLowerCase().includes(l.value.toLowerCase())))}}),Be={key:1,"data-testid":"select-placeholder"},Te={class:"input__form__placeholder"},Ie={key:0,"data-testid":"select-no-data",class:"select__empty"},Le={class:"select__option"},we={class:"select__option-text"},ze={class:"select__option-checked"},Ne={key:2,"data-testid":"select-loading",class:"select__loading"},tt=z({models:{prop:"modelValue",event:"update:modelValue"},__name:"Select",props:{modelValue:{type:void 0,default:void 0},selected:{type:[Object,Array],default:void 0},options:{type:Array,default:()=>[]},placeholder:{type:String,default:"Â "},emptyText:{type:String,default:"No Data"},loadingText:{type:String,default:"Loading..."},searchText:{type:String,default:"Search..."},adapter:{type:Object,default:()=>$e},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},clearLabel:{type:String,default:"Clear"},size:{type:String,default:"md"},sectionLabel:{type:String,default:void 0},noCaret:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},displayLimit:{type:Number,default:void 0},limitText:{type:String,default:void 0},searchable:{type:Boolean,default:!0},menuSize:{type:String,default:void 0},menuClass:{type:[String,Array,Object],default:void 0},divider:{type:Boolean,default:!1},noAnimation:{type:Boolean,default:!1},noCloseAfterSelect:{type:Boolean,default:!1}},emits:["change","update:modelValue","update:selected","userInput"],setup(e,{emit:l}){const a=e,u=C(),g=C(),s=h(()=>{var t;return(t=u.value)==null?void 0:t.input}),$=h(()=>{var t;return(t=g.value)==null?void 0:t.menuBody}),b=C(""),c=C(!1),T=ve({elapsed:!1}),M={props:a,keyword:b,isOpen:c,isLoading:T,menuEl:$},S=a.adapter.setup(M),o=C(a.multiple?L(S.value,a.modelValue):I(S.value,a.modelValue)),N=()=>{!a.disabled&&!a.readonly&&(c.value=!c.value)},R=h(()=>{const t=[];return c.value&&t.push("select--open"),a.disabled&&t.push("select--disabled"),a.readonly&&t.push("select--readonly"),a.multiple&&t.push("select--multiple"),t}),G=h(()=>{var t;return a.multiple?Array.isArray(o.value)&&o.value.length>0:!ge((t=o.value)==null?void 0:t.value)}),O=be(()=>a.modelValue,t=>{o.value=a.multiple?L(S.value,t):I(S.value,t)});ee(S,t=>{a.modelValue&&t.length>0&&(o.value=a.multiple?L(t,a.modelValue):I(t,a.modelValue))});function j(t){let d;a.multiple?t?Array.isArray(o.value)&&(d=o.value.some(n=>V(n.value,t.value))?o.value.filter(n=>!V(n.value,t.value)):[...o.value,t]):d=[]:d=t,O.pause(),o.value=d,l("change",d),l("update:selected",d),l("update:modelValue",a.multiple?d.map(n=>n.value):d==null?void 0:d.value),c.value&&l("userInput",d),a.noCloseAfterSelect||(c.value=!1),te(()=>{O.resume()})}function q(){!a.disabled&&!a.readonly&&(c.value=!0)}function W(){j()}function D(t){return o.value?a.multiple&&Array.isArray(o.value)?o.value.some(d=>V(t.value,d.value)):V(t.value,o.value.value):!1}function J(){var t;(t=s.value)==null||t.focus()}function K(){b.value=""}return he(()=>{c.value&&s.value&&s.value!==document.activeElement&&(s.value.select(),s.value.focus())}),(t,d)=>(i(),m(ae,{ref_key:"dropdown",ref:g,modelValue:r(c),"onUpdate:modelValue":d[1]||(d[1]=n=>E(c)?c.value=n:null),class:w(["select",r(R)]),"data-testid":"select","aria-label":"select",disabled:e.disabled,divider:e.divider,"menu-size":e.menuSize,"menu-class":e.menuClass,"no-animation":e.noAnimation,onShow:J,onHide:K},{activator:p(()=>[A(Ce,{"data-testid":"select-activator",class:"select__activator",size:e.size,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,error:e.error,onFocus:q},P({default:p(()=>[r(G)?v(t.$slots,"selected",{key:0,item:r(o),multiple:e.multiple},()=>{var n;return[a.multiple&&Array.isArray(r(o))?(i(),m(Ve,{key:0,items:r(o),"display-limit":e.displayLimit,"limit-text":e.limitText},null,8,["items","display-limit","limit-text"])):(i(),f(B,{key:1},[_(y((n=r(o))==null?void 0:n.text),1)],64))]}):(i(),f("div",Be,[v(t.$slots,"placeholder",{},()=>[k("span",Te,y(e.placeholder),1)])]))]),_:2},[e.noCaret?void 0:{name:"append",fn:p(()=>[v(t.$slots,"caret",{isOpen:r(c),toggle:N},()=>[A(de,{class:"select__caret","data-testid":"select-caret-icon",onClick:N})])]),key:"0"}]),1032,["size","placeholder","disabled","readonly","error"])]),prepend:p(()=>[e.searchable?(i(),m(ie,{key:0,ref_key:"input",ref:u,modelValue:r(b),"onUpdate:modelValue":d[0]||(d[0]=n=>E(b)?b.value=n:null),"data-testid":"select-search",class:"select__search no--error",placeholder:e.searchText,clearable:!0},{append:p(()=>[A(ue,{class:"select__search-icon"})]),_:1},8,["modelValue","placeholder"])):x("",!0)]),default:p(()=>[!r(T)&&r(S).length===0?(i(),f("div",Ie,[v(t.$slots,"empty",{},()=>[_(y(e.emptyText),1)])])):(i(),f(B,{key:1},[e.sectionLabel||e.clearable?(i(),m(se,{key:0,"data-testid":"select-label"},P({default:p(()=>[_(y(e.sectionLabel),1)]),_:2},[e.clearable?{name:"action",fn:p(()=>[A(ne,{"data-testid":"select-clear",variant:"caption2",href:"javascript:void",onClick:U(W,["prevent"])},{default:p(()=>[_(y(e.clearLabel),1)]),_:1},8,["onClick"])]),key:"0"}:void 0]),1024)):x("",!0),(i(!0),f(B,null,H(r(S),(n,Q)=>(i(),m(le,{key:Q,"data-testid":"select-item",class:w({selected:D(n)}),disabled:!!n.disabled,onClick:U(Oe=>j(n),["prevent"])},{default:p(()=>[k("div",Le,[k("div",we,[v(t.$slots,"option",{isSelected:D(n),item:n},()=>[_(y(n.text),1)])]),k("div",ze,[e.multiple?(i(),m(ce,{key:0})):(i(),m(re,{key:1}))])])]),_:2},1032,["class","disabled","onClick"]))),128))],64)),r(T)?(i(),f("div",Ne,[A(pe),v(t.$slots,"loading",{},()=>[k("span",null,y(e.loadingText),1)])])):x("",!0)]),_:3},8,["modelValue","disabled","divider","menu-size","menu-class","class","no-animation"]))}});export{tt as _};
