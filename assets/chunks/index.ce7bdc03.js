import{u as A,h as y,r as c,d as h,t as z,A as F,q as $,v as O,C as S,O as j,I as k,D as M,z as T,ab as B,ac as D}from"./framework.8f224ebd.js";const _="--vc-auto-duration",G=`height var(${_}) cubic-bezier(0.33, 1, 0.68, 1)`,v={padding:0},I={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"};function b(u){var a;return{height:`${(a=u==null?void 0:u.scrollHeight)!=null?a:0}px`}}function C(u){if(!u)return{};const{transition:a}=getComputedStyle(u);return a==="all 0s ease 0s"?{transition:G}:{transition:a}}function H(u){if(!u)return!0;const{transition:a}=getComputedStyle(u);return window.matchMedia("(prefers-reduced-motion: reduce)").matches||a.includes("none")||a.includes("height 0s")}A({inheritAttrs:!0});const L=A({__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(u,{emit:a}){const d=u,n=y(d,"when"),i=y(d,"baseHeight"),p=c(()=>({overflow:"hidden",height:`${i.value}px`})),g=c(()=>({...v,...i.value===0?{display:"none"}:p.value})),t=h(null),s=h(n.value?"expanded":"collapsed"),e=z({}),f=h(300),m=c(()=>({[_]:`${f.value}ms`}));function x(){e.value=v,s.value="expanded",a("expanded")}function w(){e.value=g.value,s.value="collapsed",a("collapsed")}function q(l){var o,r;l.target===t.value&&l.propertyName==="height"&&(n.value?((o=t.value)==null?void 0:o.scrollHeight)===parseFloat(l.target.style.height)&&x():((r=t.value)==null?void 0:r.style.height)===`${i.value}px`&&w())}return F(()=>{if(!t.value)return;n.value||i.value!==0||(e.value=I);const l=function(o=0){if(o===0)return 0;const r=o/36;return Math.round(10*(4+15*r**.25+r/5))}(t.value.scrollHeight-i.value);f.value=l<=0?300:l,e.value=n.value?v:g.value}),$(n,l=>{if(l){if(H(t.value))return x();s.value="expanding",a("expand"),e.value={...v,...p.value,...m.value,willChange:"height"},requestAnimationFrame(()=>{e.value={...e.value,...b(t.value),...C(t.value)}})}else{if(H(t.value))return w();s.value="collapsing",a("collapse"),e.value={...e.value,...m.value,...b(t.value),willChange:"height"},requestAnimationFrame(()=>{e.value={...e.value,...p.value,...C(t.value)}})}}),$(i,l=>{n.value||(e.value={...e.value,...l===0?{display:"none"}:{transition:"none",height:`${l}px`}})}),(l,o)=>(O(),S(M(d.as),{ref_key:"collapseRef",ref:t,style:k(e.value),onTransitionend:q,"data-collapse":s.value},{default:j(()=>[T(l.$slots,"default",B(D({state:s.value})))]),_:3},40,["style","data-collapse"]))}});export{L as G};
