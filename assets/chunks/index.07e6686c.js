import{u as A,h as y,r as p,d as h,t as z,A as F,q as $,v as O,C as S,O as j,I as k,D as M,z as T,ab as B,ac as D}from"./framework.8f224ebd.js";const _="--vc-auto-duration",G=`height var(${_}) cubic-bezier(0.33, 1, 0.68, 1)`,r={padding:0},I={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"};function b(u){var a;return{height:`${(a=u==null?void 0:u.scrollHeight)!=null?a:0}px`}}function C(u){if(!u)return{};const{transition:a}=getComputedStyle(u);return a==="all 0s ease 0s"?{transition:G}:{transition:a}}function H(u){if(!u)return!0;const{transition:a}=getComputedStyle(u);return window.matchMedia("(prefers-reduced-motion: reduce)").matches||a.includes("none")||a.includes("height 0s")}A({inheritAttrs:!0});const L=A({__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(u,{emit:a}){const v=u,n=y(v,"when"),i=y(v,"baseHeight"),d=p(()=>({overflow:"hidden",height:`${i.value}px`})),c=p(()=>({...r,...i.value===0?{display:"none"}:d.value})),t=h(null),s=h(n.value?"expanded":"collapsed"),e=z({}),g=h(300),f=p(()=>({[_]:`${g.value}ms`}));function m(){e.value=r,s.value="expanded",a("expanded")}function x(){e.value=c.value,s.value="collapsed",a("collapsed")}function q(l){var o,w;l.target===t.value&&l.propertyName==="height"&&(n.value?((o=t.value)==null?void 0:o.scrollHeight)===parseFloat(l.target.style.height)&&m():((w=t.value)==null?void 0:w.style.height)===`${i.value}px`&&x())}return F(()=>{t.value&&(n.value||i.value!==0||(e.value=I),g.value=function(l=0){if(l===0)return 0;const o=l/36;return Math.round(10*(4+15*o**.25+o/5))}(t.value.scrollHeight-i.value),e.value=n.value?r:c.value)}),$(n,l=>{if(l){if(H(t.value))return m();s.value="expanding",a("expand"),e.value={...r,...d.value,...f.value,willChange:"height"},requestAnimationFrame(()=>{e.value={...e.value,...b(t.value),...C(t.value)}})}else{if(H(t.value))return x();s.value="collapsing",a("collapse"),e.value={...e.value,...f.value,...b(t.value),willChange:"height"},requestAnimationFrame(()=>{e.value={...e.value,...d.value,...C(t.value)}})}}),$(i,l=>{n.value||(e.value={...e.value,...l===0?{display:"none"}:{transition:"none",height:`${l}px`}})}),(l,o)=>(O(),S(M(v.as),{ref_key:"collapseRef",ref:t,style:k(e.value),onTransitionend:q,"data-collapse":s.value},{default:j(()=>[T(l.$slots,"default",B(D({state:s.value})))]),_:3},40,["style","data-collapse"]))}});export{L as G};
