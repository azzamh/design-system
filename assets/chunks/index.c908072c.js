import{d as k,a4 as y,g as c,h,E as R,j as z,x as b,o as B,b as F,w as M,r as j,aa as q,ab as A,N,I as P}from"./framework.f99460e8.js";const S="--vc-auto-duration",T=`height var(${S}) cubic-bezier(0.33, 1, 0.68, 1)`,v={padding:0},D={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"};function C(n){var a;return{height:`${(a=n==null?void 0:n.scrollHeight)!=null?a:0}px`}}function $(n){if(!n)return{};const{transition:a}=getComputedStyle(n);return a==="all 0s ease 0s"?{transition:T}:{transition:a}}function H(n){if(!n)return!0;const{transition:a}=getComputedStyle(n);return window.matchMedia("(prefers-reduced-motion: reduce)").matches||a.includes("none")||a.includes("height 0s")}const G=k({__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(n,{emit:a}){const d=n,u=y(d,"when"),o=y(d,"baseHeight"),p=c(()=>({overflow:"hidden",height:`${o.value}px`})),f=c(()=>({...v,...o.value===0?{display:"none"}:p.value})),t=h(null),i=h(u.value?"expanded":"collapsed"),e=R({}),g=h(300),m=c(()=>({[S]:`${g.value}ms`}));function x(){e.value=v,i.value="expanded",a("expanded")}function w(){e.value=f.value,i.value="collapsed",a("collapsed")}function _(l){var s,r;l.target===t.value&&l.propertyName==="height"&&(u.value?((s=t.value)==null?void 0:s.scrollHeight)===parseFloat(l.target.style.height)&&x():((r=t.value)==null?void 0:r.style.height)===`${o.value}px`&&w())}return z(()=>{if(!t.value)return;u.value||o.value!==0||(e.value=D);const l=function(s=0){if(s===0)return 0;const r=s/36;return Math.round(10*(4+15*r**.25+r/5))}(t.value.scrollHeight-o.value);g.value=l<=0?300:l,e.value=u.value?v:f.value}),b(u,l=>{if(l){if(H(t.value))return x();i.value="expanding",a("expand"),e.value={...v,...p.value,...m.value,willChange:"height"},requestAnimationFrame(()=>{e.value={...e.value,...C(t.value),...$(t.value)}})}else{if(H(t.value))return w();i.value="collapsing",a("collapse"),e.value={...e.value,...m.value,...C(t.value),willChange:"height"},requestAnimationFrame(()=>{e.value={...e.value,...p.value,...$(t.value)}})}}),b(o,l=>{u.value||(e.value={...e.value,...l===0?{display:"none"}:{transition:"none",height:`${l}px`}})}),(l,s)=>(B(),F(P(d.as),{ref_key:"collapseRef",ref:t,style:N(e.value),onTransitionend:_,"data-collapse":i.value},{default:M(()=>[j(l.$slots,"default",q(A({state:i.value})))]),_:3},40,["style","data-collapse"]))}});export{G};
