import{t as w,d as h,g as se,Y as X,W as J,G as U,am as re,r as I,N as G,q as S,H as ie,_ as C,v as k,b as F,F as v,u as M,M as y,y as g,O as N,X as V,a9 as ee,a6 as z,L as le,h as te,z as T,a8 as de,A as ue,aa as A,$ as ce,a as fe}from"./framework.8f224ebd.js";import{p as oe}from"./index.c9564ca0.js";import{j as pe,f as Y,k as ve,l as me,t as H,u as K}from"./index.966f9612.js";import{I as ge,a as _e}from"./20.d8042be9.js";import{I as he}from"./20.902ba94a.js";import{_ as ye}from"./Button.vue_vue_type_script_setup_true_lang.513a44e5.js";import"./Button.vue_vue_type_style_index_0_lang.4ed993c7.js";import{p as Pe}from"./Divider.593d71e8.js";import{p as $e}from"./Select.53e646eb.js";import{H as we}from"./Heading.82269685.js";import{u as be}from"./use-selector.b6c5c978.js";import{f as Se}from"./focus.33532f0c.js";import{u as W}from"./index.4671eb08.js";import{d as De}from"./debounce.b619e377.js";import{m as Ee,l as Oe,u as Ne,o as Z,b as Ie,a as Le,s as Q}from"./index.6a61eda6.js";import{r as Te}from"./isObjectLike.53b0037d.js";import{t as Ce}from"./toInteger.d4d227f4.js";import{t as ke}from"./toNumber.75689a18.js";import{t as x}from"./toString.314d06e3.js";import{u as Fe}from"./use-loading.1184eea2.js";var je=Te.isFinite,ze=Math.min;function Ve(e){var n=Math[e];return function(o,a){if(o=ke(o),a=a==null?0:ze(Ce(a),292),a&&je(o)){var t=(x(o)+"e").split("e"),r=n(t[0]+"e"+(+t[1]+a));return t=(x(r)+"e").split("e"),+(t[0]+"e"+(+t[1]-a))}return n(o)}}var Me=Ve("round");const He=Me,We=Symbol("DropzoneContext");function Be(e,n){const o=w(!0),a=w(),t=h(),r=h();async function l(){if(i(),e.value){const{default:p}=await J(()=>import("./interact.min.7201a62d.js").then(s=>s.i),["assets/chunks/interact.min.7201a62d.js","assets/chunks/commonjsHelpers.de833af9.js"]);a.value=p(n.value,{context:e.value}).dropzone({accept:".pdf-object",overlap:.95,enabled:o.value,checker(s,f,d,c,P,$,D){var E;return d&&(((E=e.value)==null?void 0:E.contains(D))||D.classList.contains("pdf-object--external"))},ondragenter(s){r.value=s.target,s.target.classList.add("hover")},ondragleave(s){s.target.classList.remove("hover")},ondrop(s){r.value=s.target,t.value=s.target,s.target.classList.remove("hover")}})}}function i(){a.value&&a.value.unset()}return pe(e,p=>{p.some(f=>f.type==="childList"&&f.target.matches(n.value))&&l()},{subtree:!0,childList:!0}),se(()=>{i()}),X(We,{dropzone:t,hoverzone:r}),o}const q=Symbol("PDFObjects"),xt=Symbol("PDFObjects");function Re(e){var p,s,f,d;const n=I(()=>He(e.width/e.height,2)),o=h((p=e.minWidth)!=null?p:e.width*.5),a=h((s=e.maxWidth)!=null?s:e.width*2),t=h((f=e.minHeight)!=null?f:e.height*.5),r=h((d=e.maxHeight)!=null?d:e.height*2),l=W(e.width,o,a),i=W(e.height,t,r);return S(()=>e.minWidth,c=>{Number.isFinite(c)&&(o.value=c)}),S(()=>e.minHeight,c=>{Number.isFinite(c)&&(t.value=c)}),S(()=>e.maxWidth,c=>{Number.isFinite(c)&&(a.value=c)}),S(()=>e.maxHeight,c=>{Number.isFinite(c)&&(r.value=c)}),{ratio:n,width:l,height:i,minWidth:o,maxWidth:a,minHeight:t,maxHeight:r}}function eo(e){var $;const{objects:n,page:o}=U(q),a=h(($=e.page)!=null?$:o.value),t=h(e.x),r=h(e.y),l=Symbol("PDFObject"),{width:i,height:p,minWidth:s,maxWidth:f,minHeight:d,maxHeight:c,ratio:P}=Re(e);return n.set(l,re({id:l,page:a,x:t,y:r,width:i,height:p})),Ee(()=>{Number.isFinite(a.value)||Ne(o).toBeTruthy().then(()=>{a.value=o.value})}),Oe(()=>{n.delete(l)}),{id:l,x:t,y:r,page:a,width:i,height:p,minWidth:s,minHeight:d,maxWidth:f,maxHeight:c,ratio:P}}function to(e){const{root:n}=U(q),o=I(()=>`.page[data-page-number="${G(e)}"]`);return be(o,n)}const oo=De(Se,100),ae=Symbol("PdfViewer");function ne(){return U(ae,()=>{const e=h(1),n=h(1),o=h(0);return{page:e,scale:n,totalPage:o}},!0)}function Ae(e,n={}){const o=h(!1),a=I(()=>{var d;return(d=G(n.offsetTop))!=null?d:0}),t=I(()=>{var d;return(d=G(e))==null?void 0:d.parentElement}),{top:r,height:l}=Y(t),{top:i,width:p,left:s}=Y(e),{height:f}=ve();return ie(d=>{o.value&&e.value&&(r.value-a.value>=0?(e.value.style.setProperty("height",`${f.value-i.value}px`),e.value.style.setProperty("width","100%")):(t.value.style.setProperty("min-height",`${l.value}px`),e.value.style.setProperty("position","fixed"),e.value.style.setProperty("top",`${a.value}px`),e.value.style.setProperty("left",`${s.value}px`),e.value.style.setProperty("width",`${p.value}px`),e.value.style.setProperty("height",`${f.value-a.value}px`)),d(()=>{t.value.style.removeProperty("min-height"),e.value.style.removeProperty("position"),e.value.style.removeProperty("top"),e.value.style.removeProperty("left"),e.value.style.removeProperty("width"),e.value.style.removeProperty("height")}))}),o}const Ze={},Je={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",class:"persona-icon",viewBox:"0 0 20 20"},Ge=v("path",{fill:"currentColor","fill-rule":"evenodd",d:"M4.673 12.83a.575.575 0 0 1 0-.821l4.91-4.839a.595.595 0 0 1 .834 0l4.91 4.839c.23.226.23.594 0 .82a.595.595 0 0 1-.833 0L10 8.403 5.506 12.83a.595.595 0 0 1-.833 0Z","clip-rule":"evenodd"},null,-1),Xe=[Ge];function Ue(e,n){return k(),F("svg",Je,Xe)}const qe=C(Ze,[["render",Ue]]),Ye=M({components:{IconZoomIn:ge,IconZoomOut:_e,IconPrev:qe,IconNext:he,pButton:ye,pDivider:Pe,pSelect:$e},setup(){const{page:e,scale:n,totalPage:o}=ne(),a=I(()=>Array.from({length:o.value}).map((p,s)=>({text:`${s+1}`,value:s+1})));function t(){n.value=Math.round(n.value/.1)*.1+.1}function r(){n.value=Math.round(n.value/.1)*.1-.1}function l(){e.value++}function i(){e.value--}return{page:e,pages:a,scale:n,totalPage:o,zoomIn:t,zoomOut:r,next:l,prev:i}}});const Ke={"data-testid":"pdf-navigation",class:"pdf__navigation"},Qe={class:"pdf__navigation-container"},xe={class:"pdf__navigation-scale"},et={"data-testid":"pdf-total",class:"flex-shrink-0"};function tt(e,n,o,a,t,r){const l=y("IconZoomOut"),i=y("p-button"),p=y("IconZoomIn"),s=y("p-divider"),f=y("p-select"),d=y("IconPrev"),c=y("IconNext");return k(),F("div",Ke,[v("div",Qe,[g(i,{"data-testid":"pdf-zoom-out",variant:"ghost",size:"xs",icon:"",onClick:e.zoomOut},{default:N(()=>[g(l)]),_:1},8,["onClick"]),v("span",xe,V((e.scale*100).toFixed(0))+"% ",1),g(i,{"data-testid":"pdf-zoom-in",variant:"ghost",size:"xs",icon:"",onClick:e.zoomIn},{default:N(()=>[g(p)]),_:1},8,["onClick"]),g(s,{vertical:""}),g(f,{modelValue:e.page,"onUpdate:modelValue":n[0]||(n[0]=P=>e.page=P),options:e.pages,size:"xs"},null,8,["modelValue","options"]),v("span",et,"of "+V(e.totalPage),1),g(i,{"data-testid":"pdf-prev",variant:"ghost",size:"xs",icon:"",onClick:e.prev},{default:N(()=>[g(d)]),_:1},8,["onClick"]),g(i,{"data-testid":"pdf-next",variant:"ghost",size:"xs",icon:"",onClick:e.next},{default:N(()=>[g(c)]),_:1},8,["onClick"])])])}const ot=C(Ye,[["render",tt]]),at="/design-system/assets/pdf-loading.2dcb0a6f.svg",nt=M({setup(){return{PDF_LOADING_IMG:at}}});const st={"data-testid":"pdf-loading",class:"pdf__loading"},rt=["src"];function it(e,n,o,a,t,r){return k(),F("div",st,[v("img",{src:e.PDF_LOADING_IMG,width:"793",height:"1122"},null,8,rt)])}const lt=C(nt,[["render",it]]),dt=M({directives:{pAspectRatio:oe},components:{Heading:we},props:{url:{type:String,default:""},pdfJs:{type:Object,default:()=>({})},error:{type:Object,default:()=>({})}},setup(){return{}}});const ut={"data-testid":"pdf-error",class:"pdf__error"},ct={class:"mt-7"},ft=v("dt",null,"URL:",-1),pt={class:"truncate"},vt=["href"],mt=v("dt",null," Reason: ",-1),gt=v("dt",null," PDFJS Version: ",-1);function _t(e,n,o,a,t,r){const l=y("Heading"),i=ee("p-aspect-ratio");return z((k(),F("div",ut,[g(l,{element:"h3"},{default:N(()=>[le(" Failed to load PDF ")]),_:1}),v("dl",ct,[ft,v("dd",pt,[v("a",{href:e.url,target:"_blank"},[v("code",null,V(e.url),1)],8,vt)]),mt,v("dd",null,[v("code",null,V(e.error.message),1)]),gt,v("dd",null,[v("code",null,V(e.pdfJs.version),1)])])])),[[i,1122/793]])}const ht=C(dt,[["render",_t]]),yt=["mousemove","mousedown","touchstart","keydown","scroll"];function Pt(e,n=5e3){const o=h(!1);let a;function t(){o.value=!1,a&&clearTimeout(a),a=setTimeout(()=>{o.value=!0},n)}return me(e,yt,t,{passive:!0}),o}const $t=M({props:{dropTarget:{type:String,default:".pdfViewer > .page"}},setup(e){const n=new Map,o=H("root"),a=ne(),t=te(e,"dropTarget");return X(q,{...a,objects:n,root:o}),Be(o,t),{}}}),wt={ref:"root",class:"pdf-objects","data-testid":"pdf-objects"};function bt(e,n,o,a,t,r){return k(),F("div",wt,[T(e.$slots,"default")],512)}const St=C($t,[["render",bt]]);function Dt(e,n){const o=w(),a=w(),t=w(),r=w(),l=w(),i=w(),p=I(()=>{var u,_;return(_=(u=o.value)==null?void 0:u.numPages)!=null?_:0}),s=W(1,.1,2),f=W(1,1,p),d=Fe(),c=w(!1),P=w(),$=Z(),D=Z(),E=Z();async function B(u,_){d.value=!0,P.value=void 0;try{i.value=await J(()=>import("./pdf.a346a54c.js").then(b=>b.p),["assets/chunks/pdf.a346a54c.js","assets/chunks/commonjsHelpers.de833af9.js","assets/chunks/vite-browser-external_commonjs-proxy.0726eb50.js"]),typeof window<"u"&&"Worker"in window&&(i.value.GlobalWorkerOptions.workerSrc=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${i.value.version}/build/pdf.worker.min.js`),await j(),u&&(r.value=i.value.getDocument({url:u,password:_,cMapUrl:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${i.value.version}/cmaps/`,cMapPacked:!0,disableStream:!1}),o.value=await r.value.promise,t.value.setDocument(o.value),l.value.setDocument(o.value),$.trigger(o.value))}catch(b){b instanceof Error&&(P.value=b,D.trigger(b))}finally{d.value=!1}}async function j(){var u,_;r.value&&!r.value.destroyed&&(await r.value.destroy(),o.value=void 0,r.value=void 0,(u=t.value)==null||u.setDocument(null),(_=l.value)==null||_.setDocument(null))}async function R(){if(typeof navigator<"u"&&e.value&&n.value){const{NullL10n:u,PDFLinkService:_,PDFViewer:b,EventBus:m}=await J(()=>import("./pdf_viewer.a040767f.js").then(O=>O.p),["assets/chunks/pdf_viewer.a040767f.js","assets/chunks/commonjsHelpers.de833af9.js","assets/chunks/pdf.a346a54c.js","assets/chunks/vite-browser-external_commonjs-proxy.0726eb50.js"]),L=new m;L.on("pagesinit",()=>{const O=n.value.clientWidth>=793;t.value.currentScaleValue=O?"1":"page-width",t.value.currentPageNumber=f.value,c.value=!0,E.trigger(t.value)}),L.on("pagechanging",O=>{f.value=O.pageNumber}),L.on("scalechanging",O=>{s.value=O.scale}),a.value=L,l.value=new _({eventBus:a.value}),t.value=new b({container:e.value,viewer:n.value,eventBus:a.value,linkService:l.value,l10n:u,useOnlyCssZoom:!1,removePageBorders:!0}),l.value.setViewer(t.value)}}return S([e,n],async([u,_])=>{t.value?u&&_&&(t.value.container=u,t.value.viewer=_,o.value&&t.value.setDocument(o.value),t.value.update()):await R()}),S(f,u=>{t.value&&u!==t.value.currentPageNumber&&(t.value.currentPageNumber=u)}),S(s,u=>{t.value&&u!==t.value.currentScale&&(t.value.currentScale=u)}),de(async()=>{var u;(u=t.value)==null||u.cleanup(),await j()}),{page:f,scale:s,totalPage:p,loading:d,error:P,ready:c,openDoc:B,closeDoc:j,pdfDoc:o,pdfEventBus:a,pdfViewer:t,pdfLoadingTask:r,pdfLinkService:l,pdfJS:i,onLoaded:$.on,onError:D.on,onReady:E.on}}const Et=M({directives:{pAspectRatio:oe},components:{PdfObjects:St,PdfNavigation:ot,PdfLoading:lt,PdfError:ht},props:{src:{type:String,default:""},page:{type:Number,default:1},scale:{type:Number,default:1},password:{type:String,default:void 0},layout:{type:String,default:"fixed"},ratio:{type:[Number,String],default:210/297},offsetTop:{type:[Number,String],default:0}},emits:["ready","loaded","error","error-password","update:page","update:scale"],setup(e,{emit:n}){const o=H("root"),a=H("container"),t=H("viewer"),r=Pt(a),l=K(e,"page"),i=K(e,"scale"),p=Ie(te(e,"offsetTop"),{nanToZero:!0}),s=Ae(o,{offsetTop:p}),f=I(()=>{const m=[];return e.layout&&m.push(`pdf-viewer--layout-${e.layout}`),m}),{page:d,scale:c,totalPage:P,openDoc:$,closeDoc:D,pdfDoc:E,pdfJS:B,loading:j,error:R,onLoaded:u,onError:_,onReady:b}=Dt(a,t);return Le(()=>[e.src,e.password],([m,L])=>{$(m,L)},{debounce:500}),S(()=>e.layout,m=>{s.value=m==="fit"},{immediate:!0}),ue(async()=>{e.src&&$(e.src,e.password)}),u(m=>{n("loaded",m)}),_(m=>{m.name==="PasswordException"&&n("error-password",m),n("error",m)}),b(m=>{n("ready",m)}),X(ae,{page:d,scale:c,totalPage:P}),Q(d,l),Q(c,i),{pdfPage:d,pdfScale:c,classNames:f,totalPage:P,openDoc:$,closeDoc:D,pdfDoc:E,pdfJS:B,idle:r,loading:j,error:R}}});const Ot=["data-page","data-scale"],Nt={class:"pdf__header"},It={ref:"container",class:"pdf__container pdfContainer"},Lt={ref:"viewer",class:"pdf__viewer pdfViewer"},Tt={class:"pdf__footer"};function Ct(e,n,o,a,t,r){const l=y("PdfLoading"),i=y("PdfError"),p=y("PdfNavigation"),s=y("PdfObjects"),f=ee("p-aspect-ratio");return z((k(),F("div",{ref:"root","data-testid":"pdf-viewer",class:fe(["pdf",e.classNames]),"data-page":e.pdfPage,"data-scale":e.pdfScale},[v("div",Nt,[T(e.$slots,"header",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,doc:e.pdfDoc})]),g(s,{class:"pdf__wrapper"},{default:N(()=>[v("div",It,[z(g(l,null,null,512),[[A,e.loading||!e.src]]),z(g(i,{url:e.src,"pdf-js":e.pdfJS,error:e.error},null,8,["url","pdf-js","error"]),[[A,!e.loading&&e.error]]),v("div",Lt,null,512),T(e.$slots,"default",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,doc:e.pdfDoc})],512),T(e.$slots,"container",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,doc:e.pdfDoc}),g(ce,{name:"slide-up"},{default:N(()=>[z(g(p,null,null,512),[[A,!e.idle&&!e.loading&&!e.error]])]),_:1}),T(e.$slots,"body",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,doc:e.pdfDoc})]),_:3}),v("div",Tt,[T(e.$slots,"footer",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,doc:e.pdfDoc})])],10,Ot)),[[f,e.layout==="fixed"?e.ratio:!1]])}const ao=C(Et,[["render",Ct]]),no="/design-system/assets/Calibrator-v3.e869f66c.pdf";export{We as D,no as F,xt as P,to as a,q as b,oo as f,ao as p,eo as u};
