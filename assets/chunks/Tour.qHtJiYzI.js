import{p as D}from"./Subheading.N-T1u5Ys.js";import{p as z}from"./Caption.lyGTd4HY.js";import{_ as N}from"./Button.vue_vue_type_script_setup_true_lang.EqSgP6OH.js";import"./Button.vue_vue_type_style_index_0_lang.w40geAFS.js";import{p as F}from"./index.xrtdoFjR.js";import{I}from"./16.sG-bdMPB.js";import{d as C,_ as w,D as v,a8 as V,o as i,c as p,I as _,e as m,k as c,b as y,w as u,a5 as B,t as g,F as H,a as b,n as P,V as R,z as S,M as L,h as E,G as k,g as G,a7 as M,aZ as U}from"./framework.5W3OCrpp.js";import{a as T,c as j,b as A,s as O,i as Z,h as q,o as J}from"./floating-ui.dom._N-HlnuN.js";import{t as K}from"./index.vDTeR44h.js";import"./Caption.vue_vue_type_style_index_0_lang.w40geAFS.js";import"./index.hjpy5ZnQ.js";import"./SpinnerRinggo.fbIZkiat.js";import"./commonjsHelpers.4gQjN7DL.js";import"./vite-browser-external_commonjs-proxy.KqFAHE5p.js";import"./defu.sEzLH6yp.js";import"./index.vqmJczYN.js";const Q=C({components:{pSubheading:D,pCaption:z,pButton:N,IconClose:I},directives:{pMd:F},props:{title:{type:String,default:void 0},text:{type:String,default:""},image:{type:String,default:void 0},highlight:{type:Boolean,default:!0},step:{type:Number,default:0},totalStep:{type:Number,default:0},dismissable:{type:Boolean,default:!0},prevLabel:{type:String,default:"Previous"},nextLabel:{type:String,default:"Next"},dismissLabel:{type:String,default:"Dismiss"},finishLabel:{type:String,default:"Finish"}},emits:["prev","next","dismiss"],setup(){return{}}}),W=["src"],X={class:"tour__body"},Y={"data-testid":"tour-title"},x={"data-testid":"tour-text"},tt={class:"tour__footer"},et={key:0,class:"tour__meta","data-testid":"tour-meta"},st={class:"tour__controls"},ot=c("span",{class:"tour__divider"},"â€¢",-1);function it(t,e,s,d,a,l){const n=v("IconClose"),o=v("p-subheading"),h=v("p-caption"),f=v("p-button"),$=V("p-md");return i(),p("div",{class:P(["tour__dialog",{"tour--image":!!t.image}]),"data-testid":"tour-dialog"},[t.dismissable?(i(),p("span",{key:0,"data-testid":"tour-dismiss",class:"tour__dismiss",onClick:e[0]||(e[0]=r=>t.$emit("dismiss",r))},[_(n)])):m("",!0),t.image?(i(),p("img",{key:1,class:"tour__image","data-testid":"tour-image",src:t.image,alt:"tour-image",width:"320",height:"195"},null,8,W)):m("",!0),c("div",X,[t.title?(i(),y(o,{key:0,class:"tour__title",size:"sm"},{default:u(()=>[B(c("span",Y,null,512),[[$,t.title,void 0,{inline:!0}]])]),_:1})):m("",!0),_(h,null,{default:u(()=>[B(c("span",x,null,512),[[$,t.text,void 0,{inline:!0}]])]),_:1})]),c("div",tt,[t.totalStep>2?(i(),p("div",et,g(t.step)+" / "+g(t.totalStep),1)):m("",!0),c("div",st,[t.dismissable&&t.step<t.totalStep?(i(),p(H,{key:0},[_(f,{"data-testid":"tour-control-dismiss",size:"xs",variant:"link",onClick:e[1]||(e[1]=r=>t.$emit("dismiss",r))},{default:u(()=>[b(g(t.dismissLabel),1)]),_:1}),ot],64)):m("",!0),_(f,{"data-testid":"tour-control-prev",size:"xs",variant:"link",disabled:t.step<2,onClick:e[2]||(e[2]=r=>t.$emit("prev",r))},{default:u(()=>[b(g(t.prevLabel),1)]),_:1},8,["disabled"]),t.step===t.totalStep?(i(),y(f,{key:1,"data-testid":"tour-control-finish",size:"xs",variant:"solid",color:"info",onClick:e[3]||(e[3]=r=>t.$emit("next",r))},{default:u(()=>[b(g(t.finishLabel),1)]),_:1})):(i(),y(f,{key:2,"data-testid":"tour-control-next",size:"xs",variant:"solid",color:"info",onClick:e[4]||(e[4]=r=>t.$emit("next",r))},{default:u(()=>[b(g(t.nextLabel),1)]),_:1}))])])],2)}const at=w(Q,[["render",it]]),nt=C({inheritAttrs:!1,props:{target:{type:Object,default:void 0}},setup(t){const e=R(t,"target"),s=K("highlight");return S(d=>{if(s.value&&e.value){const a=T(e.value,s.value,()=>{const l=e.value.getBoundingClientRect(),n=16;s.value.style.width=`${l.width+n}px`,s.value.style.height=`${l.height+n}px`,s.value.style.left=`${l.left-n/2}px`,s.value.style.top=`${l.top-n/2}px`},{animationFrame:!0});d(a)}}),{}}}),rt={class:"tour__backdrop"};function lt(t,e,s,d,a,l){return i(),p("div",rt,[c("div",L({ref:"highlight",class:"tour__highlight"},t.$attrs),null,16)])}const dt=w(nt,[["render",lt]]),ut=C({components:{TourDialog:at,TourHighlight:dt},setup(){const t=E(!1),e=k(),s=k(),d=k(),a=G(()=>{var o;return(o=e.value)==null?void 0:o.$el});S(o=>{if(s.value&&a.value){const h=T(s.value,a.value,async()=>{j(s.value,a.value,{strategy:"absolute",middleware:[A({altBoundary:!0}),O({padding:16}),Z(),q(),J(16)]}).then(({x:f,y:$,middlewareData:r})=>{a.value&&(a.value.style.transform=`translate3d(${f||0}px, ${$||0}px, 0)`,a.value.style.visibility=r.hide.referenceHidden?"hidden":"visible")})},{animationFrame:!0});o(h)}}),S(o=>{t.value&&document.body.classList.add("tour--active"),o(()=>{document.body.classList.remove("tour--active")})});function l(o,h){s.value=o,d.value=h,t.value=!0}function n(){t.value=!1}return M(()=>{n()}),{isShow:t,dialog:e,target:s,show:l,hide:n,config:d}}}),pt={class:"tour"};function mt(t,e,s,d,a,l){const n=v("TourHighlight"),o=v("TourDialog");return i(),p("div",pt,[_(U,{name:"fade"},{default:u(()=>[t.isShow?(i(),y(n,{key:0,target:t.target},null,8,["target"])):m("",!0),t.isShow?(i(),y(o,L({key:1,ref:"dialog"},t.config),null,16)):m("",!0)]),_:1})])}const Dt=w(ut,[["render",mt]]);export{Dt as default};
