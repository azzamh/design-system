import{d as L,$ as Q,M as X,g as h,o as i,c as f,r as v,e as k,k as C,L as Y,l as r,n as z,F as T,D as H,b as m,w as p,a as S,t as y,h as $,a1 as j,H as x,ak as D,Z as E,O as ee}from"./framework.f99460e8.js";import{_ as te}from"./Dropdown.vue_vue_type_script_setup_true_lang.39c18aeb.js";import{p as ae}from"./Dropdown.vue_vue_type_style_index_0_lang.98fe4c2b.js";import{p as le}from"./DropdownHeader.f706ac38.js";import{p as se}from"./Input.19d62327.js";import{p as ie}from"./Text.56ace8ae.js";import{I as ne}from"./index.a3ecab28.js";import{p as P}from"./Label.9a70e97a.js";import{I as oe}from"./20.5cf2e5ef.js";import{I as de}from"./20.846824de.js";import{I as re}from"./20.e5eebfe4.js";import{I as ue}from"./IconCheckbox.643a8a43.js";import{p as ce}from"./SpinnerRing.84e24d5c.js";import{i as _,v as pe}from"./value.d2e2d3a1.js";import{d as fe,u as me}from"./adapter.d0e3e116.js";import{u as ye}from"./use-loading.a4685ceb.js";import{g as ve}from"./index.5e8fa405.js";import{w as he}from"./index.a453e079.js";const ge={key:0,class:"input__prepend"},be=["disabled","readonly"],Se={key:1,class:"input__append"},ke=L({inheritAttrs:!1,__name:"SelectInput",props:{size:{type:String,default:"md"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},containerClass:{type:[String,Array,Object],default:void 0}},setup(e){const l=e,a=Q(),u=X(ne,void 0,!1),g=h(()=>{const s=[];return u!=null&&u.size.value?s.push(`input--${u==null?void 0:u.size.value}`):l.size&&s.push(`input--${l.size}`),l.disabled&&s.push("input--disabled"),l.readonly&&s.push("input--readonly"),l.error&&s.push("input--error","state--error"),a.prepend&&s.push("input--has-prepend"),a.append&&s.push("input--has-append"),s});return(s,B)=>(i(),f("div",{class:z(["input",e.containerClass]),"data-testid":"input-container"},[s.$slots.prepend?(i(),f("span",ge,[v(s.$slots,"prepend")])):k("",!0),C("div",Y({class:["input__form",r(g)],"data-testid":"input",disabled:e.disabled,readonly:e.readonly,tabindex:1},s.$attrs),[v(s.$slots,"default")],16,be),s.$slots.append?(i(),f("span",Se,[v(s.$slots,"append")])):k("",!0)],2))}}),Ae={class:"select__tags"},Ce=L({__name:"SelectTags",props:{items:{type:Array,default:()=>[]},displayLimit:{type:Number,default:2},limitText:{type:String,default:"+{n} Other(s)"}},setup(e){const l=e,a=h(()=>l.items.slice(0,l.displayLimit)),u=h(()=>l.limitText.replaceAll("{n}",String(l.items.length-l.displayLimit)));return(g,s)=>(i(),f("div",Ae,[(i(!0),f(T,null,H(r(a),(B,b)=>(i(),m(P,{key:b,"data-testid":"select-tag",variant:"light",size:"xs"},{default:p(()=>[S(y(B.text),1)]),_:2},1024))),128)),e.items.length>e.displayLimit?(i(),m(P,{key:0,"data-testid":"select-tag-others",variant:"light",size:"xs"},{default:p(()=>[S(y(r(u)),1)]),_:1})):k("",!0)]))}});function U(e,l){var a;return(a=e.find(u=>_(u.value,l)))!=null?a:{text:"",value:void 0}}function F(e,l){return Array.isArray(l)?e.filter(a=>pe(l,a.value)):[]}const $e=fe({setup({props:e,keyword:l}){const a=me(e);return h(()=>a.value.filter(g=>g.text.toLowerCase().includes(l.value.toLowerCase())))}}),xe={key:1,"data-testid":"select-placeholder"},_e={class:"input__form__placeholder"},Be={key:0,"data-testid":"select-no-data",class:"select__empty"},Te={class:"select__option"},Ve={class:"select__option-text"},ze={class:"select__option-checked"},Le={key:2,"data-testid":"select-loading",class:"select__loading"},Qe=L({models:{prop:"modelValue",event:"update:modelValue"},__name:"Select",props:{modelValue:{type:void 0,default:void 0},selected:{type:[Object,Array],default:void 0},options:{type:Array,default:()=>[]},placeholder:{type:String,default:"Â "},emptyText:{type:String,default:"No Data"},loadingText:{type:String,default:"Loading..."},searchText:{type:String,default:"Search..."},adapter:{type:Object,default:()=>$e},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},clearLabel:{type:String,default:"Clear"},size:{type:String,default:"md"},sectionLabel:{type:String,default:void 0},noCaret:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},displayLimit:{type:Number,default:void 0},limitText:{type:String,default:void 0},searchable:{type:Boolean,default:!0},menuSize:{type:String,default:void 0},menuClass:{type:[String,Array,Object],default:void 0},divider:{type:Boolean,default:!1},noAnimation:{type:Boolean,default:!1},noCloseAfterSelect:{type:Boolean,default:!1}},emits:["change","update:modelValue","update:selected","userInput"],setup(e,{emit:l}){const a=e,u=$(),g=$(),s=h(()=>{var t;return(t=u.value)==null?void 0:t.input}),B=h(()=>{var t;return(t=g.value)==null?void 0:t.menuBody}),b=$(""),c=$(!1),V=ye({elapsed:!1}),M={props:a,keyword:b,isOpen:c,isLoading:V,menuEl:B},A=a.adapter.setup(M),o=$(a.multiple?F(A.value,a.modelValue):U(A.value,a.modelValue)),I=()=>{!a.disabled&&!a.readonly&&(c.value=!c.value)},R=h(()=>{const t=[];return c.value&&t.push("select--open"),a.disabled&&t.push("select--disabled"),a.readonly&&t.push("select--readonly"),a.multiple&&t.push("select--multiple"),t}),G=h(()=>{var t;return a.multiple?Array.isArray(o.value)&&o.value.length>0:(t=o.value)==null?void 0:t.value}),w=he(()=>a.modelValue,t=>{o.value=a.multiple?F(A.value,t):U(A.value,t)});function O(t){let d;a.multiple?t?Array.isArray(o.value)&&(d=o.value.some(n=>_(n.value,t.value))?o.value.filter(n=>!_(n.value,t.value)):[...o.value,t]):d=[]:d=t,w.pause(),o.value=d,l("change",d),l("update:selected",d),l("update:modelValue",a.multiple?d.map(n=>n.value):d==null?void 0:d.value),c.value&&l("userInput",d),a.noCloseAfterSelect||(c.value=!1),ee(()=>{w.resume()})}function q(){!a.disabled&&!a.readonly&&(c.value=!0)}function W(){O()}function N(t){return o.value?a.multiple&&Array.isArray(o.value)?o.value.some(d=>_(t.value,d.value)):_(t.value,o.value.value):!1}function Z(){var t;(t=s.value)==null||t.focus()}function J(){b.value=""}return ve(()=>{c.value&&s.value&&s.value!==document.activeElement&&(s.value.select(),s.value.focus())}),(t,d)=>(i(),m(te,{ref_key:"dropdown",ref:g,modelValue:r(c),"onUpdate:modelValue":d[1]||(d[1]=n=>j(c)?c.value=n:null),class:z(["select",r(R)]),"data-testid":"select","aria-label":"select",disabled:e.disabled,divider:e.divider,"menu-size":e.menuSize,"menu-class":e.menuClass,"no-animation":e.noAnimation,onShow:Z,onHide:J},{activator:p(()=>[x(ke,{"data-testid":"select-activator",class:"select__activator",size:e.size,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,error:e.error,onFocus:q},D({default:p(()=>[r(G)?v(t.$slots,"selected",{key:0,item:r(o),multiple:e.multiple},()=>{var n;return[a.multiple&&Array.isArray(r(o))?(i(),m(Ce,{key:0,items:r(o),"display-limit":e.displayLimit,"limit-text":e.limitText},null,8,["items","display-limit","limit-text"])):Array.isArray(r(o))?k("",!0):(i(),f(T,{key:1},[S(y((n=r(o))==null?void 0:n.text),1)],64))]}):(i(),f("div",xe,[v(t.$slots,"placeholder",{},()=>[C("span",_e,y(e.placeholder),1)])]))]),_:2},[e.noCaret?void 0:{name:"append",fn:p(()=>[v(t.$slots,"caret",{isOpen:r(c),toggle:I},()=>[x(oe,{class:"select__caret","data-testid":"select-caret-icon",onClick:I})])]),key:"0"}]),1032,["size","placeholder","disabled","readonly","error"])]),prepend:p(()=>[e.searchable?(i(),m(se,{key:0,ref_key:"input",ref:u,modelValue:r(b),"onUpdate:modelValue":d[0]||(d[0]=n=>j(b)?b.value=n:null),"data-testid":"select-search",class:"select__search no--error",size:e.size,placeholder:e.searchText,clearable:!0},{append:p(()=>[x(re,{class:"select__search-icon"})]),_:1},8,["modelValue","size","placeholder"])):k("",!0)]),default:p(()=>[!r(V)&&r(A).length===0?(i(),f("div",Be,[v(t.$slots,"empty",{},()=>[S(y(e.emptyText),1)])])):(i(),f(T,{key:1},[e.sectionLabel||e.clearable?(i(),m(le,{key:0,"data-testid":"select-label"},D({default:p(()=>[S(y(e.sectionLabel),1)]),_:2},[e.clearable?{name:"action",fn:p(()=>[x(ie,{"data-testid":"select-clear",variant:"caption2",href:"javascript:void",onClick:E(W,["prevent"])},{default:p(()=>[S(y(e.clearLabel),1)]),_:1},8,["onClick"])]),key:"0"}:void 0]),1024)):k("",!0),(i(!0),f(T,null,H(r(A),(n,K)=>(i(),m(ae,{key:K,"data-testid":"select-item",class:z({selected:N(n)}),disabled:!!n.disabled,onClick:E(Ie=>O(n),["prevent"])},{default:p(()=>[C("div",Te,[C("div",Ve,[v(t.$slots,"option",{isSelected:N(n),item:n},()=>[S(y(n.text),1)])]),C("div",ze,[e.multiple?(i(),m(ue,{key:0})):(i(),m(de,{key:1}))])])]),_:2},1032,["class","disabled","onClick"]))),128))],64)),r(V)?(i(),f("div",Le,[x(ce),v(t.$slots,"loading",{},()=>[C("span",null,y(e.loadingText),1)])])):k("",!0)]),_:3},8,["modelValue","disabled","divider","menu-size","menu-class","class","no-animation"]))}});export{Qe as _};
