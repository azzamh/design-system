import{I as F,z as _,q as s,aI as N,au as k,P as w,r as m,a7 as B,aK as M,aL as W,l as p,ag as H,aB as b,Q as D,A as V,_ as j,o as $,c as I,p as P,d as A,K as d,w as g,f as E,aa as L,aM as R}from"./framework.CUNsVCb6.js";import{f as q}from"./focus.DWrlVhv-.js";import{u as O}from"./index.CkoVn9rD.js";import{d as K}from"./debounce.CE-8mXQa.js";import{r as X}from"./baseGetTag.Cu32HCTk.js";import{t as J}from"./toInteger.NZnbAWM7.js";import{t as U}from"./toNumber.Dcxq_36h.js";import{t as T}from"./toString.CQAYsbsy.js";import{n as y}from"./noop.DX6rZLP_.js";import{I as Z,a as Q}from"./20.C0l9PQz_.js";import{I as G}from"./20.MY7Zs_eI.js";import{_ as x}from"./Button.vue_vue_type_script_setup_true_lang.BUfMrwdW.js";import"./Button.vue_vue_type_style_index_0_lang.l0sNRNKZ.js";import{_ as Y}from"./Divider.vue_vue_type_script_setup_true_lang.DbDnWlhI.js";import"./Divider.vue_vue_type_style_index_0_lang.l0sNRNKZ.js";import{_ as ee}from"./Select.vue_vue_type_style_index_0_lang.CZRgbKqv.js";var te=X.isFinite,oe=Math.min;function ne(e){var n=Math[e];return function(o,t){if(o=U(o),t=t==null?0:oe(J(t),292),t&&te(o)){var a=(T(o)+"e").split("e"),i=n(a[0]+"e"+(+a[1]+t));return a=(T(i)+"e").split("e"),+(a[0]+"e"+(+a[1]-t))}return n(o)}}var ae=ne("round");function ie(e,n=document.body,o=!1){const t=F();function a(){var i,l;t.value=o?(i=s(n))==null?void 0:i.querySelectorAll(s(e)):(l=s(n))==null?void 0:l.querySelector(s(e))}return _(()=>s(e),()=>{a()}),N(n,i=>{i.some(l=>l.type==="childList")&&a()},{childList:!0,subtree:!0}),k(()=>{a()}),t}const S=Symbol("PDFObjects"),Me=Symbol("PDFObjects");function se(e){var f,v,u,r;const n=p(()=>ae(e.width/e.height,2)),o=m((f=e.minWidth)!=null?f:e.width*.5),t=m((v=e.maxWidth)!=null?v:e.width*2),a=m((u=e.minHeight)!=null?u:e.height*.5),i=m((r=e.maxHeight)!=null?r:e.height*2),l=O(e.width,o,t),h=O(e.height,a,i);return _(()=>e.minWidth,c=>{Number.isFinite(c)&&(o.value=c)}),_(()=>e.minHeight,c=>{Number.isFinite(c)&&(a.value=c)}),_(()=>e.maxWidth,c=>{Number.isFinite(c)&&(t.value=c)}),_(()=>e.maxHeight,c=>{Number.isFinite(c)&&(i.value=c)}),{ratio:n,width:l,height:h,minWidth:o,maxWidth:t,minHeight:a,maxHeight:i}}function We(e){var C;const{objects:n,page:o}=w(S),t=m((C=e.page)!=null?C:o.value),a=m(e.x),i=m(e.y),l=Symbol("PDFObject"),{width:h,height:f,minWidth:v,maxWidth:u,minHeight:r,maxHeight:c,ratio:z}=se(e);return n.set(l,B({id:l,page:t,x:a,y:i,width:h,height:f})),M(()=>{Number.isFinite(t.value)||H(o).toBeTruthy().then(()=>{t.value=o.value})}),W(()=>{n.delete(l)}),{id:l,x:a,y:i,page:t,width:h,height:f,minWidth:v,minHeight:r,maxWidth:u,maxHeight:c,ratio:z}}function He(e){const{root:n}=w(S),o=p(()=>`.page[data-page-number="${s(e)}"]`);return ie(o,n)}const De=K(q,100),le=Symbol("PdfViewer");function re(){return w(le,()=>{const e=m(1),n=m(1),o=m(0);return{page:e,scale:n,totalPage:o,zoomIn:y,zoomOut:y,next:y,prev:y}},!0)}function Ve(e,n={}){const o=m(!1),t=p(()=>{var r;return(r=s(n.offsetTop))!=null?r:0}),a=p(()=>{var r;return(r=s(e))==null?void 0:r.parentElement}),{top:i,height:l}=b(a),{top:h,width:f,left:v}=b(e),{height:u}=D();return V(r=>{o.value&&e.value&&(i.value-t.value>=0?(e.value.style.setProperty("height",`${u.value-h.value}px`),e.value.style.setProperty("width","100%")):(a.value.style.setProperty("min-height",`${l.value}px`),e.value.style.setProperty("position","fixed"),e.value.style.setProperty("top",`${t.value}px`),e.value.style.setProperty("left",`${v.value}px`),e.value.style.setProperty("width",`${f.value}px`),e.value.style.setProperty("height",`${u.value-t.value}px`)),r(()=>{a.value.style.removeProperty("min-height"),e.value.style.removeProperty("position"),e.value.style.removeProperty("top"),e.value.style.removeProperty("left"),e.value.style.removeProperty("width"),e.value.style.removeProperty("height")}))}),o}const ue={},ce={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",class:"persona-icon",viewBox:"0 0 20 20"},me=P("path",{fill:"currentColor","fill-rule":"evenodd",d:"M4.673 12.83a.575.575 0 0 1 0-.821l4.91-4.839a.595.595 0 0 1 .834 0l4.91 4.839c.23.226.23.594 0 .82a.595.595 0 0 1-.833 0L10 8.403 5.506 12.83a.595.595 0 0 1-.833 0","clip-rule":"evenodd"},null,-1),de=[me];function fe(e,n){return $(),I("svg",ce,de)}const he=j(ue,[["render",fe]]),ve={"data-testid":"pdf-navigation",class:"pdf__navigation"},_e={class:"pdf__navigation-container"},pe={class:"pdf__navigation-scale"},ge={"data-testid":"pdf-total",class:"pdf__navigation-total"},je=A({__name:"PdfNavigation",setup(e){const{page:n,scale:o,totalPage:t,zoomIn:a,zoomOut:i,next:l,prev:h}=re(),f=p(()=>Array.from({length:t.value}).map((v,u)=>({text:`${u+1}`,value:u+1})));return(v,u)=>($(),I("div",ve,[P("div",_e,[d(x,{"data-testid":"pdf-zoom-out",variant:"ghost",size:"xs",icon:"",onClick:s(i)},{default:g(()=>[d(Z)]),_:1},8,["onClick"]),P("span",pe,E((s(o)*100).toFixed(0))+"% ",1),d(x,{"data-testid":"pdf-zoom-in",variant:"ghost",size:"xs",icon:"",onClick:s(a)},{default:g(()=>[d(Q)]),_:1},8,["onClick"]),d(Y,{vertical:""}),d(ee,{modelValue:s(n),"onUpdate:modelValue":u[0]||(u[0]=r=>L(n)?n.value=r:null),options:s(f),size:"xs"},null,8,["modelValue","options"]),P("span",ge,"of "+E(s(t)),1),d(x,{"data-testid":"pdf-prev",variant:"ghost",size:"xs",icon:"",onClick:s(h)},{default:g(()=>[d(he)]),_:1},8,["onClick"]),d(x,{"data-testid":"pdf-next",variant:"ghost",size:"xs",icon:"",onClick:s(l)},{default:g(()=>[d(G)]),_:1},8,["onClick"])])]))}}),ye=["mousemove","mousedown","touchstart","keydown","scroll"];function Ae(e,n=5e3){const o=m(!1);let t;function a(){o.value=!1,t&&clearTimeout(t),t=setTimeout(()=>{o.value=!0},n)}return R(e,ye,a,{passive:!0}),o}export{S as P,je as _,He as a,Me as b,re as c,Ae as d,Ve as e,De as f,le as g,We as u};
