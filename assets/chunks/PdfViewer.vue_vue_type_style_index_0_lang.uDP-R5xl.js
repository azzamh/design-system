const __vite__fileDeps=["assets/chunks/interact.min.7Skv8Xe5.js","assets/chunks/theme.CSZYo2bV.js","assets/chunks/framework.sPKXfJg2.js","assets/chunks/pdf.BhIlgA7Q.js","assets/chunks/vite-browser-external_commonjs-proxy.DBPDWxQs.js","assets/chunks/pdf_viewer.C7wAuWp_.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{H as b,r as _,aI as re,aG as ge,a0 as q,Z as K,y as E,p as o,au as ye,O as Y,a6 as _e,aJ as we,aK as xe,k as V,ag as Pe,aB as oe,P as be,z as Ee,_ as Se,o as F,c as B,m,d as W,J as x,w as L,t as j,a9 as De,l as ce,ab as I,b as $e,aL as Ce,ac as le,a as z,ah as ke,aM as Z,aH as ie,ax as Te,am as Ne,as as ne,ak as X,T as Oe,n as Le}from"./framework.sPKXfJg2.js";import{v as ue}from"./index.BfsXMAL2.js";import{n as A}from"./noop.DX6rZLP_.js";import{I as Ve,a as ze}from"./20.BfHAGBAm.js";import{I as Me}from"./20.Cxj30OQu.js";import{_ as J}from"./Button.vue_vue_type_script_setup_true_lang.D0k62JW9.js";import"./Button.vue_vue_type_style_index_0_lang.l0sNRNKZ.js";import{_ as Fe}from"./Divider.vue_vue_type_script_setup_true_lang.B9NCHUQL.js";import"./Divider.vue_vue_type_style_index_0_lang.l0sNRNKZ.js";import{_ as Be}from"./Select.vue_vue_type_style_index_0_lang.BIsFLdCH.js";import{_ as Ie}from"./Heading.vue_vue_type_script_setup_true_lang.lANNuoEL.js";import"./Heading.vue_vue_type_style_index_0_lang.l0sNRNKZ.js";import{w as de,a as he}from"./theme.CSZYo2bV.js";import{f as je}from"./focus.BAazLjn0.js";import{u as G,a as Re}from"./index.DKCf7HtC.js";import{d as We}from"./debounce.CE-8mXQa.js";import{r as He}from"./baseGetTag.Cu32HCTk.js";import{t as Ae}from"./toInteger.NZnbAWM7.js";import{t as Je}from"./toNumber.Dcxq_36h.js";import{t as se}from"./toString.CQAYsbsy.js";import{u as Ge}from"./use-loading.BD8gj8Da.js";var Ue=He.isFinite,Ze=Math.min;function Xe(e){var n=Math[e];return function(i,t){if(i=Je(i),t=t==null?0:Ze(Ae(t),292),t&&Ue(i)){var a=(se(i)+"e").split("e"),s=n(a[0]+"e"+(+a[1]+t));return a=(se(s)+"e").split("e"),+(a[0]+"e"+(+a[1]-t))}return n(i)}}var qe=Xe("round");const Ke=Symbol("DropzoneContext");function Ye(e,n){const i=b(!0),t=b(),a=_(),s=_();async function r(){if(g(),e.value){const{default:f}=await K(()=>import("./interact.min.7Skv8Xe5.js").then(l=>l.i),__vite__mapDeps([0,1,2]));f.dynamicDrop(!0),t.value=f(n.value,{context:e.value}).dropzone({accept:".pdf-object",overlap:.95,enabled:i.value,checker(l,u,h,v,$,w,y){var P;return h&&(((P=e.value)==null?void 0:P.contains(y))||y.classList.contains("pdf-object--external"))},ondragenter(l){s.value=l.target,l.target.classList.add("hover")},ondragleave(l){l.target.classList.remove("hover")},ondrop(l){s.value=l.target,a.value=l.target,l.target.classList.remove("hover")}})}}function g(){t.value&&t.value.unset()}return re(e,f=>{f.some(u=>u.type==="childList"&&u.target.matches(n.value))&&r()},{subtree:!0,childList:!0}),ge(()=>{g()}),q(Ke,{dropzone:a,hoverzone:s}),i}function Qe(e,n=document.body,i=!1){const t=b();function a(){var s,r;t.value=i?(s=o(n))==null?void 0:s.querySelectorAll(o(e)):(r=o(n))==null?void 0:r.querySelector(o(e))}return E(()=>o(e),()=>{a()}),re(n,s=>{s.some(r=>r.type==="childList")&&a()},{childList:!0,subtree:!0}),ye(()=>{a()}),t}const Q=Symbol("PDFObjects"),ia=Symbol("PDFObjects");function et(e){var f,l,u,h;const n=V(()=>qe(e.width/e.height,2)),i=_((f=e.minWidth)!=null?f:e.width*.5),t=_((l=e.maxWidth)!=null?l:e.width*2),a=_((u=e.minHeight)!=null?u:e.height*.5),s=_((h=e.maxHeight)!=null?h:e.height*2),r=G(e.width,i,t),g=G(e.height,a,s);return E(()=>e.minWidth,v=>{Number.isFinite(v)&&(i.value=v)}),E(()=>e.minHeight,v=>{Number.isFinite(v)&&(a.value=v)}),E(()=>e.maxWidth,v=>{Number.isFinite(v)&&(t.value=v)}),E(()=>e.maxHeight,v=>{Number.isFinite(v)&&(s.value=v)}),{ratio:n,width:r,height:g,minWidth:i,maxWidth:t,minHeight:a,maxHeight:s}}function na(e){var w;const{objects:n,page:i}=Y(Q),t=_((w=e.page)!=null?w:i.value),a=_(e.x),s=_(e.y),r=Symbol("PDFObject"),{width:g,height:f,minWidth:l,maxWidth:u,minHeight:h,maxHeight:v,ratio:$}=et(e);return n.set(r,_e({id:r,page:t,x:a,y:s,width:g,height:f})),we(()=>{Number.isFinite(t.value)||Pe(i).toBeTruthy().then(()=>{t.value=i.value})}),xe(()=>{n.delete(r)}),{id:r,x:a,y:s,page:t,width:g,height:f,minWidth:l,minHeight:h,maxWidth:u,maxHeight:v,ratio:$}}function sa(e){const{root:n}=Y(Q),i=V(()=>`.page[data-page-number="${o(e)}"]`);return Qe(i,n)}const ra=We(je,100),fe=Symbol("PdfViewer");function ve(){return Y(fe,()=>{const e=_(1),n=_(1),i=_(0);return{page:e,scale:n,totalPage:i,zoomIn:A,zoomOut:A,next:A,prev:A}},!0)}function tt(e,n={}){const i=_(!1),t=V(()=>{var h;return(h=o(n.offsetTop))!=null?h:0}),a=V(()=>{var h;return(h=o(e))==null?void 0:h.parentElement}),{top:s,height:r}=oe(a),{top:g,width:f,left:l}=oe(e),{height:u}=be();return Ee(h=>{i.value&&e.value&&(s.value-t.value>=0?(e.value.style.setProperty("height",`${u.value-g.value}px`),e.value.style.setProperty("width","100%")):(a.value.style.setProperty("min-height",`${r.value}px`),e.value.style.setProperty("position","fixed"),e.value.style.setProperty("top",`${t.value}px`),e.value.style.setProperty("left",`${l.value}px`),e.value.style.setProperty("width",`${f.value}px`),e.value.style.setProperty("height",`${u.value-t.value}px`)),h(()=>{a.value.style.removeProperty("min-height"),e.value.style.removeProperty("position"),e.value.style.removeProperty("top"),e.value.style.removeProperty("left"),e.value.style.removeProperty("width"),e.value.style.removeProperty("height")}))}),i}const at={},ot={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",class:"persona-icon",viewBox:"0 0 20 20"},it=m("path",{fill:"currentColor","fill-rule":"evenodd",d:"M4.673 12.83a.575.575 0 0 1 0-.821l4.91-4.839a.595.595 0 0 1 .834 0l4.91 4.839c.23.226.23.594 0 .82a.595.595 0 0 1-.833 0L10 8.403 5.506 12.83a.595.595 0 0 1-.833 0","clip-rule":"evenodd"},null,-1),nt=[it];function st(e,n){return F(),B("svg",ot,nt)}const rt=Se(at,[["render",st]]),ct={"data-testid":"pdf-navigation",class:"pdf__navigation"},lt={class:"pdf__navigation-container"},ut={class:"pdf__navigation-scale"},dt={"data-testid":"pdf-total",class:"pdf__navigation-total"},ht=W({__name:"PdfNavigation",setup(e){const{page:n,scale:i,totalPage:t,zoomIn:a,zoomOut:s,next:r,prev:g}=ve(),f=V(()=>Array.from({length:t.value}).map((l,u)=>({text:`${u+1}`,value:u+1})));return(l,u)=>(F(),B("div",ct,[m("div",lt,[x(J,{"data-testid":"pdf-zoom-out",variant:"ghost",size:"xs",icon:"",onClick:o(s)},{default:L(()=>[x(Ve)]),_:1},8,["onClick"]),m("span",ut,j((o(i)*100).toFixed(0))+"% ",1),x(J,{"data-testid":"pdf-zoom-in",variant:"ghost",size:"xs",icon:"",onClick:o(a)},{default:L(()=>[x(ze)]),_:1},8,["onClick"]),x(Fe,{vertical:""}),x(Be,{modelValue:o(n),"onUpdate:modelValue":u[0]||(u[0]=h=>De(n)?n.value=h:null),options:o(f),size:"xs"},null,8,["modelValue","options"]),m("span",dt,"of "+j(o(t)),1),x(J,{"data-testid":"pdf-prev",variant:"ghost",size:"xs",icon:"",onClick:o(g)},{default:L(()=>[x(rt)]),_:1},8,["onClick"]),x(J,{"data-testid":"pdf-next",variant:"ghost",size:"xs",icon:"",onClick:o(r)},{default:L(()=>[x(Me)]),_:1},8,["onClick"])])]))}}),ft="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='595'%20height='842'%20aria-labelledby='loading-aria'%20preserveAspectRatio='none'%20role='img'%20viewBox='0%200%20595%20842'%3e%3ctitle%20id='loading-aria'%3eLoading...%3c/title%3e%3crect%20width='100%25'%20height='100%25'%20x='0'%20y='0'%20clip-path='url(%23clip-path)'%20style='fill:url(%23fill)'/%3e%3cdefs%3e%3cclipPath%20id='clip-path'%3e%3crect%20width='191'%20height='14'%20x='44'%20y='64'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='44'%20y='94'%20rx='2.068'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='152'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='182'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='212'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='242'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='272'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='302'%20rx='7'/%3e%3crect%20width='349'%20height='14'%20x='44'%20y='332'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='390'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='420'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='450'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='480'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='510'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='540'%20rx='7'/%3e%3crect%20width='183'%20height='14'%20x='44'%20y='570'%20rx='7'/%3e%3crect%20width='191'%20height='14'%20x='360'%20y='628'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='411'%20y='678'%20rx='2.068'/%3e%3crect%20width='191'%20height='14'%20x='44'%20y='64'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='44'%20y='94'%20rx='2.068'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='152'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='182'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='212'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='242'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='272'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='302'%20rx='7'/%3e%3crect%20width='349'%20height='14'%20x='44'%20y='332'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='390'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='420'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='450'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='480'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='510'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='540'%20rx='7'/%3e%3crect%20width='183'%20height='14'%20x='44'%20y='570'%20rx='7'/%3e%3crect%20width='191'%20height='14'%20x='360'%20y='628'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='411'%20y='678'%20rx='2.068'/%3e%3c/clipPath%3e%3clinearGradient%20id='fill'%3e%3cstop%20offset='.6'%20stop-color='%23E7E7E8'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='-2;%20-2;%201'/%3e%3c/stop%3e%3cstop%20offset='1.6'%20stop-color='%23CFCFD1'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='-1;%20-1;%202'/%3e%3c/stop%3e%3cstop%20offset='2.6'%20stop-color='%23E7E7E8'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='0;%200;%203'/%3e%3c/stop%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",vt={"data-testid":"pdf-loading",class:"pdf__loading"},pt=["src"],mt=W({__name:"PdfLoading",setup(e){return(n,i)=>(F(),B("div",vt,[m("img",{src:o(ft),width:"793",height:"1122"},null,8,pt)]))}});let R,M;async function ee(){if(!R){const e=await K(()=>import("./pdf.BhIlgA7Q.js").then(n=>n.p),__vite__mapDeps([3,1,2,4]));typeof window<"u"&&"Worker"in window&&(e.GlobalWorkerOptions.workerSrc=de(`pdfjs-dist@${e.version}/build/pdf.worker.min.js`,he())),R=e}return R}async function te(){return await ee(),M||(M=await K(()=>import("./pdf_viewer.C7wAuWp_.js").then(e=>e.p),__vite__mapDeps([5,1,2]))),M}async function gt(...e){return await ee(),R.getDocument(...e)}async function yt(){return de(`pdfjs-dist@${await pe()}/cmaps/`,he())}async function pe(){return await ee(),R.version}async function _t(){return await te(),new M.EventBus}async function wt(...e){return await te(),new M.PDFViewer(...e)}async function xt(...e){return await te(),new M.PDFLinkService(...e)}const Pt={"data-testid":"pdf-error",class:"pdf__error"},bt={class:"mt-7"},Et=m("dt",null,"URL:",-1),St={class:"truncate"},Dt=["href"],$t=m("dt",null," Reason: ",-1),Ct=m("dt",null," PDFJS Version: ",-1),kt=W({__name:"PdfError",props:{url:{type:String,default:""},error:{type:Object,default:()=>({})}},setup(e){const n=_("");return ce(async()=>{n.value=await pe()}),(i,t)=>I((F(),B("div",Pt,[x(Ie,{element:"h3"},{default:L(()=>[$e(" Failed to load PDF ")]),_:1}),m("dl",bt,[Et,m("dd",St,[m("a",{href:e.url,target:"_blank"},[m("code",null,j(e.url),1)],8,Dt)]),$t,m("dd",null,[m("code",null,j(e.error.message),1)]),Ct,m("dd",null,[m("code",null,j(o(n)),1)])])])),[[o(ue),1122/793]])}}),Tt=["mousemove","mousedown","touchstart","keydown","scroll"];function Nt(e,n=5e3){const i=_(!1);let t;function a(){i.value=!1,t&&clearTimeout(t),t=setTimeout(()=>{i.value=!0},n)}return Ce(e,Tt,a,{passive:!0}),i}const Ot=W({__name:"PdfObjects",props:{dropTarget:{type:String,default:".pdfViewer > .page"}},setup(e){const n=e,i=new Map,t=_(),a=ve(),s=le(n,"dropTarget");return Ye(t,s),q(Q,{...a,objects:i,root:t}),(r,g)=>(F(),B("div",{ref_key:"root",ref:t,class:"pdf-objects","data-testid":"pdf-objects"},[z(r.$slots,"default")],512))}});function Lt(e,n){const i=b(),t=b(),a=b(),s=b(),r=b(),g=V(()=>{var c,d;return(d=(c=i.value)==null?void 0:c.numPages)!=null?d:0}),f=G(1,.1,2),l=G(1,1,Re(g,1)),u=Ge(),h=b(!1),v=b(),$=Z(),w=Z(),y=Z();async function P(c,d,S={}){u.value=!0,v.value=void 0;try{await C(),c&&(s.value=await gt({url:c,password:d,cMapUrl:await yt(),cMapPacked:!0,disableStream:S.disableStream,disableRange:S.disableRange}),i.value=await s.value.promise,a.value.setDocument(i.value),r.value.setDocument(i.value),$.trigger(i.value))}catch(D){D instanceof Error&&(v.value=D,w.trigger(D))}finally{u.value=!1}}async function C(){var c,d;s.value&&!s.value.destroyed&&(await s.value.destroy(),i.value=void 0,s.value=void 0,(c=a.value)==null||c.setDocument(null),(d=r.value)==null||d.setDocument(null))}async function U(){if(typeof navigator<"u"&&e.value&&n.value){const c=await _t();c.on("pagesinit",()=>{var D,H;const d=(H=(D=n.value)==null?void 0:D.clientWidth)!=null?H:0,S=d>0&&d<793;a.value.currentScaleValue=S?"page-width":"1",a.value.currentPageNumber=l.value,h.value=!0,y.trigger(a.value)}),c.on("pagechanging",d=>{l.value=d.pageNumber}),c.on("scalechanging",d=>{f.value=d.scale}),t.value=c,r.value=await xt({eventBus:t.value}),a.value=await wt({container:e.value,viewer:n.value,eventBus:t.value,linkService:r.value,removePageBorders:!0,annotationEditorMode:-1}),r.value.setViewer(a.value)}}return E([e,n],async([c,d])=>{a.value?c&&d&&(a.value.container=c,a.value.viewer=d,i.value&&a.value.setDocument(i.value),a.value.update()):await U()}),E(l,c=>{a.value&&c!==a.value.currentPageNumber&&(a.value.currentPageNumber=c)}),E(f,c=>{a.value&&c!==a.value.currentScale&&(a.value.currentScale=c)}),ke(async()=>{var c;await C(),(c=a.value)==null||c.cleanup()}),{page:l,scale:f,totalPage:g,loading:u,error:v,ready:h,openDoc:P,closeDoc:C,pdfDoc:i,pdfEventBus:t,pdfViewer:a,pdfLoadingTask:s,pdfLinkService:r,onLoaded:$.on,onError:w.on,onReady:y.on}}const Vt=["data-page","data-scale"],zt={class:"pdf__header"},Mt={class:"pdf__footer"},ca=W({__name:"PdfViewer",props:{src:{type:String,default:""},page:{type:Number,default:1},scale:{type:Number,default:1},password:{type:String,default:void 0},layout:{type:String,default:"fixed"},ratio:{type:[Number,String],default:210/297},offsetTop:{type:[Number,String],default:0},config:{type:[Object],default:()=>({})}},emits:["ready","loaded","error","error-password","update:page","update:scale"],setup(e,{expose:n,emit:i}){const t=e,a=i,s=_(),r=_(),g=_(),f=Nt(r),l=ie(t,"page"),u=ie(t,"scale"),h=Te(le(t,"offsetTop"),{nanToZero:!0}),v=tt(s,{offsetTop:h}),$=V(()=>{const p=[];return t.layout&&p.push(`pdf-viewer--layout-${t.layout}`),p}),{page:w,scale:y,totalPage:P,openDoc:C,closeDoc:U,pdfDoc:c,loading:d,error:S,onLoaded:D,onError:H,onReady:me}=Lt(r,g);Ne(()=>[t.src,t.password],([p,ae])=>{C(p,ae,t.config)},{debounce:500}),E(()=>t.layout,p=>{v.value=p==="fit"},{immediate:!0}),ce(async()=>{t.src&&C(t.src,t.password,t.config)}),D(p=>{a("loaded",p)}),H(p=>{p.name==="PasswordException"&&a("error-password",p),a("error",p)}),me(p=>{a("ready",p)});function k(){y.value=Math.round(y.value/.1)*.1+.1}function T(){y.value=Math.round(y.value/.1)*.1-.1}function N(){w.value++}function O(){w.value--}return q(fe,{page:w,scale:y,totalPage:P,zoomIn:k,zoomOut:T,next:N,prev:O}),ne(w,l),ne(y,u),n({page:w,scale:y,root:s,container:r,viewer:g,loading:d,totalPage:P,zoomIn:k,zoomOut:T,next:N,prev:O,openDoc:C,closeDoc:U}),(p,ae)=>I((F(),B("div",{ref_key:"root",ref:s,"data-testid":"pdf-viewer",class:Le(["pdf",o($)]),"data-page":o(w),"data-scale":o(y)},[m("div",zt,[z(p.$slots,"header",{page:o(w),scale:o(y),totalPage:o(P),zoomIn:k,zoomOut:T,next:N,prev:O,doc:o(c)})]),x(Ot,{class:"pdf__wrapper"},{default:L(()=>[m("div",{ref_key:"container",ref:r,class:"pdf__container pdfContainer"},[I(x(mt,null,null,512),[[X,o(d)||!e.src]]),I(x(kt,{url:e.src,error:o(S)},null,8,["url","error"]),[[X,!o(d)&&o(S)]]),m("div",{ref_key:"viewer",ref:g,class:"pdf__viewer pdfViewer"},null,512),z(p.$slots,"default",{page:o(w),scale:o(y),totalPage:o(P),zoomIn:k,zoomOut:T,next:N,prev:O,doc:o(c)})],512),z(p.$slots,"container",{page:o(w),scale:o(y),totalPage:o(P),zoomIn:k,zoomOut:T,next:N,prev:O,doc:o(c)}),x(Oe,{name:"slide-up"},{default:L(()=>[I(x(ht,null,null,512),[[X,!o(f)&&!o(d)&&!o(S)]])]),_:1}),z(p.$slots,"body",{page:o(w),scale:o(y),totalPage:o(P),zoomIn:k,zoomOut:T,next:N,prev:O,doc:o(c)})]),_:3}),m("div",Mt,[z(p.$slots,"footer",{page:o(w),scale:o(y),totalPage:o(P),zoomIn:k,zoomOut:T,next:N,prev:O,doc:o(c)})])],10,Vt)),[[o(ue),e.layout==="fixed"?Number(e.ratio):0]])}});export{Ke as D,ia as P,ca as _,sa as a,Q as b,ra as f,na as u};
