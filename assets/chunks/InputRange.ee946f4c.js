import{t as b,e as G}from"./index.8df9a8d7.js";import{u as T}from"./index.09847e4e.js";import{t as H,q as L,a7 as J,W as K,u as Q,h as _,d as N,r,_ as Y,v as x,b as ee,F as o,a4 as S,a9 as E,I as $,a as ae}from"./framework.0fccce8d.js";import{t as te}from"./throttle.77eff498.js";import{b as h,s as B}from"./index.9c3046df.js";function I(e,t){const s=H();L(e,async c=>{if(s.value&&s.value.unset(),c){const{default:m}=await K(()=>import("./interact.min.7201a62d.js").then(l=>l.i),["assets/chunks/interact.min.7201a62d.js","assets/chunks/commonjsHelpers.de833af9.js"]),u=te(t,1e3/120);s.value=m(c).styleCursor(!1).draggable({onmove:u})}}),J(async()=>{s.value&&s.value.unset()})}const le=Q({props:{modelValue:{type:[Number,Array],default:void 0},start:{type:Number,default:void 0},end:{type:Number,default:void 0},step:{type:[String,Number],default:1},min:{type:[String,Number],default:0},max:{type:[String,Number],default:100},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["change","update:modelValue","update:end","update:start"],setup(e,{emit:t}){var C,A,V;const s=b("track"),c=b("thumb-start"),m=b("thumb-end"),u=h(_(e,"min")),l=h(_(e,"max")),f=h(_(e,"step")),y=N(Array.isArray(e.modelValue)?e.modelValue[0]:(C=e.start)!=null?C:u.value),g=N(Array.isArray(e.modelValue)?e.modelValue[1]:(V=(A=e.end)!=null?A:e.modelValue)!=null?V:l.value),P=r(()=>e.multiple?y.value+f.value:u.value),R=r(()=>e.multiple?g.value-f.value:l.value),i=T(y.value,u,R),d=T(g.value,P,l),{width:D,left:F}=G(s),M=r({get(){var a;return Array.isArray(e.modelValue)?e.modelValue[0]:(a=e.start)!=null?a:u.value},set(a){t("update:start",a)}}),U=r({get(){var a;return Array.isArray(e.modelValue)?e.modelValue[1]:Number.isFinite(e.modelValue)?e.modelValue:(a=e.end)!=null?a:l.value},set(a){t("update:end",a)}}),p=r(()=>(i.value-u.value)/(l.value-u.value)*100),q=r(()=>(d.value-u.value)/(l.value-u.value)*100),z=r(()=>{const a=[];return e.disabled&&a.push("input-range--disabled"),e.readonly&&a.push("input-range--readonly"),e.error&&a.push("input-range--error","state--error"),a}),O=r(()=>({width:`${p.value}%`})),j=r(()=>({width:`${q.value-p.value}%`}));function v(a){const k=(a.pageX-F.value)/D.value*(l.value-u.value)+u.value;return Math.round(k/f.value)*f.value}function W(a){!e.disabled&&!e.readonly&&(i.value=v(a))}function X(a){if(!e.disabled&&!e.readonly){const n=v(a);if(e.multiple){const w=Math.abs(n-i.value),k=Math.abs(n-d.value);if(w<k){i.value=n;return}}d.value=n}}function Z(a){!e.disabled&&!e.readonly&&(d.value=v(a))}return I(c,a=>{!e.disabled&&!e.readonly&&(i.value=v(a))}),I(m,a=>{!e.disabled&&!e.readonly&&(d.value=v(a))}),B(i,M,{immediate:!1}),B(d,U,{immediate:!1}),L([i,d],([a,n])=>{y.value=a,g.value=n,e.multiple?(t("update:modelValue",[a,n]),t("change",[a,n])):(t("update:modelValue",n),t("change",n))}),{classNames:z,lowerStyle:O,upperStyle:j,onClickLowerTrack:W,onClickActiveTrack:X,onClickUpperTrack:Z}}});const ue={ref:"track",class:"input-range__tracks"},ne={ref:"thumb-start","data-testid":"thumb-start",class:"input-range__thumb input-range__thumb-start"},re={ref:"thumb-end","data-testid":"thumb-end",class:"input-range__thumb input-range__thumb-end"};function se(e,t,s,c,m,u){return x(),ee("div",{"data-testid":"input-range",class:ae(["input-range",e.classNames])},[o("div",ue,[S(o("div",{"data-testid":"track-lower",class:"input-range__track input-range__track-lower",style:$(e.lowerStyle),onClickCapture:t[0]||(t[0]=(...l)=>e.onClickLowerTrack&&e.onClickLowerTrack(...l))},null,36),[[E,e.multiple]]),o("div",{ref:"track-active","data-testid":"track-active",class:"input-range__track input-range__track-active",style:$(e.upperStyle),onClickCapture:t[1]||(t[1]=(...l)=>e.onClickActiveTrack&&e.onClickActiveTrack(...l))},[S(o("div",ne,null,512),[[E,e.multiple]]),o("div",re,null,512)],36),o("div",{"data-testid":"track-upper",class:"input-range__track input-range__track-upper",onClickCapture:t[2]||(t[2]=(...l)=>e.onClickUpperTrack&&e.onClickUpperTrack(...l))},null,32)],512)],2)}const fe=Y(le,[["render",se]]);export{fe as p};
