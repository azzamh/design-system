import{d as N,a6 as d,T as F,D as x,N as b,h as s,g as S,Z as g,_ as P,o as h,c as $,I as A,w as V,r as B}from"./framework.5W3OCrpp.js";import{f as H}from"./vnode.4FUanfmM.js";import{u as E}from"./index.uAbLSuRm.js";import{u as O}from"./index.gVcbEyr5.js";import{r as y}from"./hook._b3mB_HI.js";import{n as p}from"./noop.Uu3q6ZSj.js";import{p as I,s as X}from"./index.vqmJczYN.js";const j=N({props:{active:{type:Number,default:0},keepAlive:{type:Boolean,default:!1},transition:{type:String,default:"slide-left"}},setup(e,{slots:i}){return()=>{const a=H(i.default(),"Step").at(e.active),r=()=>e.keepAlive?d(x("keep-alive"),()=>d(a,{key:e.active})):d(a,{key:e.active});return d(F,{name:e.transition,mode:"out-in"},r)}}}),_=Symbol("STEPS_CONTEXT");function z(){const e=b(_,()=>(console.warn("<p-step> must be placed inside <p-steps>"),{next:p,prev:p,toStep:p,total:s(1),step:s(1),canPrev:s(!1),canNext:s(!1),onPrevHooks:s([]),onNextHooks:s([])}),!0),i=s([]),a=s([]);function r(t){i.value.unshift(t)}function n(t){a.value.unshift(t)}const l=async(...t)=>await y(i.value,...t),o=async(...t)=>await y(a.value,...t);return e.onPrevHooks.value.unshift(l),e.onNextHooks.value.unshift(o),I(()=>{const t=e.onPrevHooks.value.indexOf(l),u=e.onNextHooks.value.indexOf(o);t>-1&&e.onPrevHooks.value.splice(t,1),u>-1&&e.onNextHooks.value.splice(u,1)}),{...e,onBeforePrev:r,onBeforeNext:n}}const D=N({components:{StepSlider:j},props:{modelValue:{type:Number,default:1},keepAlive:{type:Boolean,default:!1},direction:{type:String,default:"horizontal"},loop:{type:Boolean,default:!1},animation:{type:String,default:"slide"},onBeforePrev:{type:Function,default:()=>!0},onBeforeNext:{type:Function,default:()=>!0},onFinished:{type:Function,default:p}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e,{slots:i}){const a=s([e.onBeforeNext]),r=s([e.onBeforePrev]),n=E(e),l=s(e.direction==="vertical"?"slide-top":"slide-left"),o=S(()=>H(i.default(),"Step").length),t=O(n,1,o),u=S(()=>e.loop||n.value<=o.value),c=S(()=>e.loop||n.value>1);async function T(){u.value&&await v(n.value+1)}async function w(){c.value&&await v(n.value-1)}async function v(f){const m=n.value,C=f>m?a.value:r.value,k=e.loop?((f-1)%o.value+o.value)%o.value+1:f;await y(C,k,m)&&(k<=o.value?(l.value=f>m?e.direction==="vertical"?`${e.animation}-top`:`${e.animation}-left`:e.direction==="vertical"?`${e.animation}-bottom`:`${e.animation}-right`,t.value=k):await e.onFinished())}return X(t,n),g(_,{step:t,next:T,prev:w,total:o,canNext:u,canPrev:c,toStep:v,onPrevHooks:r,onNextHooks:a}),{transition:l,step:t}}}),M={class:"steps","data-testid":"steps"};function R(e,i,a,r,n,l){const o=x("StepSlider");return h(),$("div",M,[A(o,{active:e.step-1,"keep-alive":e.keepAlive,transition:e.transition},{default:V(()=>[B(e.$slots,"default")]),_:3},8,["active","keep-alive","transition"])])}const ee=P(D,[["render",R]]),U=N({name:"Step",props:{onBeforePrev:{type:Function,default:()=>!0},onBeforeNext:{type:Function,default:()=>!0}},setup(e){const{canNext:i,canPrev:a,toStep:r,step:n,total:l,next:o,prev:t,onBeforeNext:u,onBeforePrev:c}=z();return u(e.onBeforeNext),c(e.onBeforePrev),{canNext:i,canPrev:a,toStep:r,prev:t,next:o,total:l,step:n}}}),Z={class:"step","data-testid":"step"};function q(e,i,a,r,n,l){return h(),$("div",Z,[B(e.$slots,"default",{step:e.step,next:e.next,prev:e.prev,total:e.total,canPrev:e.canPrev,canNext:e.canNext,toStep:e.toStep})])}const te=P(U,[["render",q]]);export{ee as S,te as a};
