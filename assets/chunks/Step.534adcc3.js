import{u as N,a5 as v,$ as g,an as w,G as F,d as s,r as S,Y as O,_ as P,M as A,v as _,b as x,y as V,O as C,z as $}from"./framework.f49100b7.js";import{f as h}from"./vnode.367af46b.js";import{u as E}from"./index.24520511.js";import{u as z}from"./index.3d96e82b.js";import{r as k}from"./hook.64405bb6.js";import{p as M,s as X}from"./index.774a92e6.js";function d(){}const G=N({props:{active:{type:Number,default:0},keepAlive:{type:Boolean,default:!1},transition:{type:String,default:"slide-left"}},setup(e,{slots:i}){return()=>{const a=h(i.default(),"Step").at(e.active),l=()=>e.keepAlive?v(w,()=>v(a,{key:e.active})):v(a,{key:e.active});return v(g,{name:e.transition,mode:"out-in"},l)}}}),B=Symbol("STEPS_CONTEXT");function I(){const e=F(B,()=>(console.warn("<p-step> must be placed inside <p-steps>"),{next:d,prev:d,toStep:d,total:s(1),step:s(1),canPrev:s(!1),canNext:s(!1),onPrevHooks:s([]),onNextHooks:s([])}),!0),i=s([]),a=s([]);function l(t){i.value.unshift(t)}function o(t){a.value.unshift(t)}const r=async(...t)=>await k(i.value,...t),n=async(...t)=>await k(a.value,...t);return e.onPrevHooks.value.unshift(r),e.onNextHooks.value.unshift(n),M(()=>{const t=e.onPrevHooks.value.indexOf(r),u=e.onNextHooks.value.indexOf(n);t>-1&&e.onPrevHooks.value.splice(t,1),u>-1&&e.onNextHooks.value.splice(u,1)}),{...e,onBeforePrev:l,onBeforeNext:o}}const L=N({components:{StepSlider:G},props:{modelValue:{type:Number,default:1},keepAlive:{type:Boolean,default:!1},direction:{type:String,default:"horizontal"},loop:{type:Boolean,default:!1},animation:{type:String,default:"slide"},onBeforePrev:{type:Function,default:()=>!0},onBeforeNext:{type:Function,default:()=>!0},onFinished:{type:Function,default:d}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e,{slots:i}){const a=s([e.onBeforeNext]),l=s([e.onBeforePrev]),o=E(e),r=s(e.direction==="vertical"?"slide-top":"slide-left"),n=S(()=>h(i.default(),"Step").length),t=z(o,1,n),u=S(()=>e.loop||o.value<=n.value),c=S(()=>e.loop||o.value>1);async function H(){u.value&&await p(o.value+1)}async function T(){c.value&&await p(o.value-1)}async function p(f){const m=o.value,b=f>m?a.value:l.value,y=e.loop?((f-1)%n.value+n.value)%n.value+1:f;await k(b,y,m)&&(y<=n.value?(r.value=f>m?e.direction==="vertical"?`${e.animation}-top`:`${e.animation}-left`:e.direction==="vertical"?`${e.animation}-bottom`:`${e.animation}-right`,t.value=y):await e.onFinished())}return X(t,o),O(B,{step:t,next:H,prev:T,total:n,canNext:u,canPrev:c,toStep:p,onPrevHooks:l,onNextHooks:a}),{transition:r,step:t}}});const R={class:"steps","data-testid":"steps"};function U(e,i,a,l,o,r){const n=A("StepSlider");return _(),x("div",R,[V(n,{active:e.step-1,"keep-alive":e.keepAlive,transition:e.transition},{default:C(()=>[$(e.$slots,"default")]),_:3},8,["active","keep-alive","transition"])])}const ee=P(L,[["render",U]]),Y=N({name:"Step",props:{onBeforePrev:{type:Function,default:()=>!0},onBeforeNext:{type:Function,default:()=>!0}},setup(e){const{canNext:i,canPrev:a,toStep:l,step:o,total:r,next:n,prev:t,onBeforeNext:u,onBeforePrev:c}=I();return u(e.onBeforeNext),c(e.onBeforePrev),{canNext:i,canPrev:a,toStep:l,prev:t,next:n,total:r,step:o}}}),j={class:"step","data-testid":"step"};function q(e,i,a,l,o,r){return _(),x("div",j,[$(e.$slots,"default",{step:e.step,next:e.next,prev:e.prev,total:e.total,canPrev:e.canPrev,canNext:e.canNext,toStep:e.toStep})])}const te=P(Y,[["render",q]]);export{ee as S,te as a};
