import{Q as l}from"./queue.-V8fDHS_.js";import{I as d,an as m,a7 as p,r as v,ao as u,V as c,q as g}from"./framework.Bbc-9rUu.js";let a,r;const i=new l;async function w(e,f){if(a||(a=d(new Map)),!r){const t=document.createElement("div"),o=m({name:"GlobalContainer",render:()=>[...a.value.values()].map(s=>p(s.component,{ref:s.ref}))});document.body.append(t),o.mount(t),t.id="global",r=o}let n=a.value.get(e);return n||(n={component:f,ref:v()},a.value.set(e,n),u(a),await c()),g(n.ref)}async function y(e){a&&r&&(a.value.delete(e),u(a),await c())}async function h(e){return await i.add(()=>w(e,e))}async function q(e){return await i.add(()=>y(e))}export{q as r,h as u};
