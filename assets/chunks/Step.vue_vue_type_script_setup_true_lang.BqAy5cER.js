import{d as B,a7 as m,T as C,E as F,O as b,r as a,aP as A,a4 as E,k as P,ap as g,a0 as V,o as h,c as H,J as X,w as j,a as T,p as i}from"./framework.BSGfltUV.js";import{f as w}from"./vnode.Bhx6YfeE.js";import{u as z}from"./index.CNBnMbe7.js";import{u as I}from"./index.B28X-GUt.js";import{r as S}from"./hook.9LiryyeR.js";import{n as k}from"./noop.DX6rZLP_.js";const J=B({props:{active:{type:Number,default:0},keepAlive:{type:Boolean,default:!1},transition:{type:String,default:"slide-left"}},setup(o,{slots:e}){return()=>{const s=w(e.default(),"Step").at(o.active),l=()=>o.keepAlive?m(F("keep-alive"),()=>m(s,{key:o.active})):m(s,{key:o.active});return m(C,{name:o.transition,mode:"out-in"},l)}}}),$=Symbol("STEPS_CONTEXT");function M(){const o=b($,()=>(console.warn("<p-step> must be placed inside <p-steps>"),{next:k,prev:k,toStep:k,total:a(1),step:a(1),canPrev:a(!1),canNext:a(!1),onPrevHooks:a([]),onNextHooks:a([])}),!0),e=a([]),s=a([]);function l(t){e.value.unshift(t)}function c(t){s.value.unshift(t)}const n=async(...t)=>await S(e.value,...t),u=async(...t)=>await S(s.value,...t);return o.onPrevHooks.value.unshift(n),o.onNextHooks.value.unshift(u),A(()=>{const t=o.onPrevHooks.value.indexOf(n),r=o.onNextHooks.value.indexOf(u);t>-1&&o.onPrevHooks.value.splice(t,1),r>-1&&o.onNextHooks.value.splice(r,1)}),{...o,onBeforePrev:l,onBeforeNext:c}}const R={class:"steps","data-testid":"steps"},W=B({__name:"Steps",props:{modelValue:{type:Number,default:1},keepAlive:{type:Boolean,default:!1},direction:{type:String,default:"horizontal"},loop:{type:Boolean,default:!1},animation:{type:String,default:"slide"},onBeforePrev:{type:Function,default:()=>!0},onBeforeNext:{type:Function,default:()=>!0},onFinished:{type:Function,default:k}},emits:["update:modelValue"],setup(o){const e=o,s=E(),l=a([e.onBeforeNext]),c=a([e.onBeforePrev]),n=z(e),u=a(e.direction==="vertical"?"slide-top":"slide-left"),t=P(()=>w(s.default(),"Step").length),r=I(n,1,t),f=P(()=>e.loop||n.value<=t.value),v=P(()=>e.loop||n.value>1);async function x(){f.value&&await y(n.value+1)}async function _(){v.value&&await y(n.value-1)}async function y(p){const d=n.value,O=p>d?l.value:c.value,N=e.loop?((p-1)%t.value+t.value)%t.value+1:p;await S(O,N,d)&&(N<=t.value?(u.value=p>d?e.direction==="vertical"?`${e.animation}-top`:`${e.animation}-left`:e.direction==="vertical"?`${e.animation}-bottom`:`${e.animation}-right`,r.value=N):await e.onFinished())}return g(r,n),V($,{step:r,next:x,prev:_,total:t,canNext:f,canPrev:v,toStep:y,onPrevHooks:c,onNextHooks:l}),(p,d)=>(h(),H("div",R,[X(J,{active:i(r)-1,"keep-alive":o.keepAlive,transition:i(u)},{default:j(()=>[T(p.$slots,"default")]),_:3},8,["active","keep-alive","transition"])]))}}),U={class:"step","data-testid":"step"},Y=B({name:"Step",__name:"Step",props:{onBeforePrev:{type:Function,default:()=>!0},onBeforeNext:{type:Function,default:()=>!0}},setup(o){const e=o,{canNext:s,canPrev:l,toStep:c,step:n,total:u,next:t,prev:r,onBeforeNext:f,onBeforePrev:v}=M();return f(e.onBeforeNext),v(e.onBeforePrev),(x,_)=>(h(),H("div",U,[T(x.$slots,"default",{step:i(n),next:i(t),prev:i(r),total:i(u),canPrev:i(l),canNext:i(s),toStep:i(c)})]))}});export{W as _,Y as a};
