import{d as F,a4 as b,g as c,h,E as R,j as z,x as C,o as B,b as M,w as N,r as j,aa as q,ab as A,N as E,I}from"./framework.e7be1a03.js";const _="--vc-auto-duration",P=`height var(${_}) cubic-bezier(0.33, 1, 0.68, 1)`,v={padding:0},D={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"};function $(n){var a;return{height:`${(a=n==null?void 0:n.scrollHeight)!=null?a:0}px`}}function H(n){if(!n)return{};const{transition:a}=getComputedStyle(n);return a==="all 0s ease 0s"?{transition:P}:{transition:a}}function S(n){if(!n)return!0;const{transition:a}=getComputedStyle(n);return window.matchMedia("(prefers-reduced-motion: reduce)").matches||a.includes("none")||a.includes("height 0s")}const G=F({__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(n,{emit:a}){const d=n,u=b(d,"when"),o=b(d,"baseHeight"),p=c(()=>({overflow:"hidden",height:`${o.value}px`})),f=c(()=>({...v,...o.value===0?{display:"none"}:p.value})),t=h(null),i=h(u.value?"expanded":"collapsed"),e=R({}),g=h(300),m=c(()=>({[_]:`${g.value}ms`}));function x(){e.value=v,i.value="expanded",a("expanded")}function w(){e.value=f.value,i.value="collapsed",a("collapsed")}function k(l){var s,r;l.target===t.value&&l.propertyName==="height"&&(u.value?((s=t.value)==null?void 0:s.scrollHeight)===parseFloat(l.target.style.height)&&x():((r=t.value)==null?void 0:r.style.height)===`${o.value}px`&&w())}return z(()=>{if(!t.value)return;u.value||o.value!==0||(e.value=D);const l=function(s=0){if(s===0)return 0;const r=s/36,y=Math.round(10*(4+15*r**.25+r/5));return Number.isFinite(y)?y:0}(t.value.scrollHeight-o.value);g.value=l<=0?300:l,e.value=u.value?v:f.value}),C(u,l=>{if(l){if(S(t.value))return x();i.value="expanding",a("expand"),e.value={...v,...p.value,...m.value,willChange:"height"},requestAnimationFrame(()=>{e.value={...e.value,...$(t.value),...H(t.value)}})}else{if(S(t.value))return w();i.value="collapsing",a("collapse"),e.value={...e.value,...m.value,...$(t.value),willChange:"height"},requestAnimationFrame(()=>{e.value={...e.value,...p.value,...H(t.value)}})}}),C(o,l=>{u.value||(e.value={...e.value,...l===0?{display:"none"}:{transition:"none",height:`${l}px`}})}),(l,s)=>(B(),M(I(d.as),{ref_key:"collapseRef",ref:t,style:E(e.value),onTransitionend:k,"data-collapse":i.value},{default:N(()=>[j(l.$slots,"default",q(A({state:i.value})))]),_:3},40,["style","data-collapse"]))}});export{G as I};
