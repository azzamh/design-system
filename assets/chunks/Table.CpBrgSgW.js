import{_ as A}from"./Checkbox.vue_vue_type_script_setup_true_lang.KKMrjslI.js";import"./Checkbox.vue_vue_type_style_index_0_lang.l0sNRNKZ.js";import{u as B}from"./index.BXynq5-W.js";import{I as D,D as N}from"./vuedraggable.umd.M-WxvSuA.js";import{d as S}from"./defu.CMw4_7D2.js";import{d as T,k as u,_ as H,E as p,o as s,c as d,J as k,g as r,F as v,G as w,n as b,Q as f,a as m,b as g,t as c,f as L,w as I,m as y}from"./framework.sPKXfJg2.js";const U=T({components:{Checkbox:A,IconDrag:D,Draggable:N},props:{variant:{type:String,default:"flexible"},modelValue:{type:Array,default:()=>[]},fields:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},selectable:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},emptyLabel:{type:String,default:"There are no records to show"},noLabel:{type:Boolean,default:!1},showTableHeader:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue","update:items"],setup(e,{emit:o}){const n=B(e),V=u({get(){return e.items.map(t=>S(t,{_key:Symbol("item-key")}))},set(t){o("update:items",t)}}),$=u(()=>{const t=[];return e.variant&&t.push(`datatable--${e.variant}`),e.selectable&&t.push("datatable--selectable"),e.draggable&&t.push("datatable--draggable"),e.noLabel&&e.variant==="flexible"&&t.push("datatable--no-label"),e.showTableHeader&&e.variant==="flexible"&&t.push("datatable--show-table-header"),t}),_=u(()=>e.items.filter(t=>t._selectable!==!1)),i=u({get(){return e.items.length===0?!1:n.value.length===_.value.length},set(t){i.value!==t&&(n.value=t?[..._.value]:[])}}),h=u(()=>n.value.length>0&&n.value.length<_.value.length);return{model:n,rows:V,classNames:$,selectAll:i,indeterminate:h}}}),z={key:0,class:"datatable__headers"},E={key:0,class:"datatable__header datatable__drag"},F={key:1,class:"datatable__header datatable__checkbox"},j=["data-header"],G={class:"datatable__row","data-role":"row"},J={key:0,class:"datatable__cell datatable__drag","data-testid":"datatable-drag-handle"},M={key:1,class:"datatable__cell datatable__checkbox"},Q=["data-cell"],R={key:2,class:"datatable__body"},q={class:"datatable__row"},K=["data-cell"],O={"data-testid":"datatable-empty",class:"datatable__cell datatable__cell--empty datatable__state-empty"},P={class:"flex items-center justify-center text-subtle dark:text-dark-subtle"};function W(e,o,n,V,$,_){const i=p("IconDrag"),h=p("Checkbox"),t=p("Draggable");return s(),d("div",{"data-testid":"datatable",class:b(["datatable",e.classNames])},[e.variant==="static"||e.variant==="flexible"&&e.showTableHeader?(s(),d("div",z,[e.draggable?(s(),d("div",E,[k(i)])):r("",!0),e.selectable?(s(),d("div",F,[k(h,{modelValue:e.selectAll,"onUpdate:modelValue":o[0]||(o[0]=a=>e.selectAll=a),"data-testid":"datatable-select-all",indeterminate:e.indeterminate},null,8,["modelValue","indeterminate"])])):r("",!0),(s(!0),d(v,null,w(e.fields,a=>(s(),d("div",{key:a.key,class:b(["datatable__header",a.thClass]),"data-testid":"datatable-static-header",style:f(a.width?{width:`${a.width}%`}:{flex:"1 1 0%"}),"data-header":a.key},[m(e.$slots,`head(${a.key})`,{label:a.label,field:a},()=>[g(c(a.label),1)])],14,j))),128))])):r("",!0),Array.isArray(e.items)&&e.items.length>0?(s(),L(t,{key:1,modelValue:e.rows,"onUpdate:modelValue":o[2]||(o[2]=a=>e.rows=a),class:"datatable__body",handle:".datatable__drag","item-key":"_key",disabled:!e.draggable},{item:I(({element:a,index:C})=>[y("div",G,[e.draggable?(s(),d("div",J,[k(i)])):r("",!0),e.selectable?(s(),d("div",M,[k(h,{modelValue:e.model,"onUpdate:modelValue":o[1]||(o[1]=l=>e.model=l),"data-testid":"datatable-select",value:a,disabled:a._selectable===!1},null,8,["modelValue","value","disabled"])])):r("",!0),(s(!0),d(v,null,w(e.fields,l=>(s(),d("div",{key:l.key,class:b(["datatable__cell",l.tdClass]),"data-testid":"datatable-cell",style:f(l.width?{width:`${l.width}%`}:{flex:"1 1 0%"}),"data-cell":l.key},[e.variant==="flexible"?(s(),d("div",{key:0,class:b(["datatable__header",l.thClass])},[m(e.$slots,`head(${l.key})`,{label:l.label,field:l,dataHeader:l.key},()=>[g(c(l.label),1)])],2)):r("",!0),m(e.$slots,`cell(${l.key})`,{index:C,item:a},()=>[g(c(l.formatter(a[l.key],a)),1)])],14,Q))),128))])]),_:3},8,["modelValue","disabled"])):(s(),d("div",R,[y("div",q,[e.variant==="flexible"?(s(!0),d(v,{key:0},w(e.fields,a=>(s(),d("div",{key:a.key,class:b(["datatable__cell datatable__cell--empty",a.tdClass]),"data-testid":"datatable-cell-empty",style:f(a.width?{width:`${a.width}%`}:{flex:"1 1 0%"}),"data-cell":a.key},[y("div",{class:b(["datatable__header",a.thClass])},[m(e.$slots,`head(${a.key})`,{label:a.label,field:a,dataHeader:a.key},()=>[g(c(a.label),1)])],2)],14,K))),128)):r("",!0),y("div",O,[m(e.$slots,"empty",{},()=>[y("span",P,c(e.emptyLabel),1)])])])]))],2)}const te=H(U,[["render",W]]);export{te as p};
