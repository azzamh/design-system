import{d as B,a6 as m,T as C,E as F,O as b,r as a,aK as A,a3 as E,l as P,al as g,$ as V,o as h,c as H,J as X,w as j,a as T,q as i}from"./framework.etf_9QdW.js";import{f as $}from"./vnode.bxCZ63xY.js";import{u as q}from"./index.pFnKfgok.js";import{u as z}from"./index.tQiyIFZx.js";import{r as S}from"./hook._b3mB_HI.js";import{n as x}from"./noop.Uu3q6ZSj.js";const I=B({props:{active:{type:Number,default:0},keepAlive:{type:Boolean,default:!1},transition:{type:String,default:"slide-left"}},setup(o,{slots:e}){return()=>{const s=$(e.default(),"Step").at(o.active),l=()=>o.keepAlive?m(F("keep-alive"),()=>m(s,{key:o.active})):m(s,{key:o.active});return m(C,{name:o.transition,mode:"out-in"},l)}}}),w=Symbol("STEPS_CONTEXT");function J(){const o=b(w,()=>(console.warn("<p-step> must be placed inside <p-steps>"),{next:x,prev:x,toStep:x,total:a(1),step:a(1),canPrev:a(!1),canNext:a(!1),onPrevHooks:a([]),onNextHooks:a([])}),!0),e=a([]),s=a([]);function l(t){e.value.unshift(t)}function c(t){s.value.unshift(t)}const n=async(...t)=>await S(e.value,...t),u=async(...t)=>await S(s.value,...t);return o.onPrevHooks.value.unshift(n),o.onNextHooks.value.unshift(u),A(()=>{const t=o.onPrevHooks.value.indexOf(n),r=o.onNextHooks.value.indexOf(u);t>-1&&o.onPrevHooks.value.splice(t,1),r>-1&&o.onNextHooks.value.splice(r,1)}),{...o,onBeforePrev:l,onBeforeNext:c}}const K={class:"steps","data-testid":"steps"},W=B({__name:"Steps",props:{modelValue:{type:Number,default:1},keepAlive:{type:Boolean,default:!1},direction:{type:String,default:"horizontal"},loop:{type:Boolean,default:!1},animation:{type:String,default:"slide"},onBeforePrev:{type:Function,default:()=>!0},onBeforeNext:{type:Function,default:()=>!0},onFinished:{type:Function,default:x}},emits:["update:modelValue"],setup(o){const e=o,s=E(),l=a([e.onBeforeNext]),c=a([e.onBeforePrev]),n=q(e),u=a(e.direction==="vertical"?"slide-top":"slide-left"),t=P(()=>$(s.default(),"Step").length),r=z(n,1,t),f=P(()=>e.loop||n.value<=t.value),v=P(()=>e.loop||n.value>1);async function k(){f.value&&await y(n.value+1)}async function _(){v.value&&await y(n.value-1)}async function y(p){const d=n.value,O=p>d?l.value:c.value,N=e.loop?((p-1)%t.value+t.value)%t.value+1:p;await S(O,N,d)&&(N<=t.value?(u.value=p>d?e.direction==="vertical"?`${e.animation}-top`:`${e.animation}-left`:e.direction==="vertical"?`${e.animation}-bottom`:`${e.animation}-right`,r.value=N):await e.onFinished())}return g(r,n),V(w,{step:r,next:k,prev:_,total:t,canNext:f,canPrev:v,toStep:y,onPrevHooks:c,onNextHooks:l}),(p,d)=>(h(),H("div",K,[X(I,{active:i(r)-1,"keep-alive":o.keepAlive,transition:i(u)},{default:j(()=>[T(p.$slots,"default")]),_:3},8,["active","keep-alive","transition"])]))}}),M={class:"step","data-testid":"step"},Y=B({name:"Step",__name:"Step",props:{onBeforePrev:{type:Function,default:()=>!0},onBeforeNext:{type:Function,default:()=>!0}},setup(o){const e=o,{canNext:s,canPrev:l,toStep:c,step:n,total:u,next:t,prev:r,onBeforeNext:f,onBeforePrev:v}=J();return f(e.onBeforeNext),v(e.onBeforePrev),(k,_)=>(h(),H("div",M,[T(k.$slots,"default",{step:i(n),next:i(t),prev:i(r),total:i(u),canPrev:i(l),canNext:i(s),toStep:i(c)})]))}});export{W as _,Y as a};
