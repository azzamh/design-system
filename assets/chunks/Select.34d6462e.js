import{D as T}from"./Dropdown.4dca8cab.js";import{p as F}from"./Dropdown.vue_vue_type_style_index_0_lang.2d361046.js";import{p as H}from"./DropdownHeader.c7ae28bf.js";import{p as j}from"./Input.8ca34c1f.js";import{I as q}from"./20.dae04f12.js";import{I as E}from"./20.da228d84.js";import{p as M}from"./SpinnerRing.7b5be636.js";import{i as z}from"./value.d2e2d3a1.js";import{d as U,u as G}from"./adapter.074eba2e.js";import{c as D,m as P,g as Q,r as v,w as B,_ as R,L as r,x as i,A as C,B as p,Q as y,ai as J,q as g,p as h,y as S,z as b,C as O,M as $,N as K,v as N,G as V}from"./framework.f14560cd.js";import{u as W}from"./use-loading.bab9acdb.js";import{m as X,k as Y}from"./theme.bdd572ce.js";function A(e,o){var l;return(l=e.find(n=>z(n.value,o)))!=null?l:{text:"",value:void 0}}const Z=U({setup({props:e,keyword:o}){const l=G(e);return D(()=>l.value.filter(d=>d.text.toLowerCase().includes(o.value.toLowerCase())))}}),x=P({components:{Dropdown:T,DropdownItem:F,DropdownHeader:H,pInput:j,IconArrow:q,IconCheck:E,IconLoading:M},props:{modelValue:{type:[String,Number,Boolean,Array,Object,Date],default:void 0},selected:{type:Object,default:()=>({text:"",value:void 0})},options:{type:Array,default:()=>[]},placeholder:{type:String,default:""},emptyText:{type:String,default:"No Data"},loadingText:{type:String,default:"Loading..."},adapter:{type:Object,default:()=>Z},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},size:{type:String,default:"md"},sectionLabel:{type:String,default:void 0},noCaret:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["change","update:modelValue","update:selected","userInput"],setup(e,{emit:o}){const l=Q(),n=v(),d=v(""),s=v(!1),f=W({elapsed:!1}),_={props:e,keyword:d,isOpen:s,isLoading:f},u=e.adapter.setup(_),c=v(A(u.value,e.modelValue)),w=()=>{s.value=!s.value},I=D(()=>{const t=[];return s.value&&t.push("select--open"),e.disabled&&t.push("select--disabled"),e.readonly&&t.push("select--readonly"),e.error&&t.push("select--error","state--error"),t}),m=D({get(){var t;return s.value?d.value:(t=c.value)==null?void 0:t.text},set(t){t!==m.value&&(d.value=t)}});B(()=>e.modelValue,t=>{c.value=A(u.value,t)});function a(t){c.value=t,o("change",t),o("update:selected",t),o("update:modelValue",t.value),s.value&&o("userInput",t)}function k(){!e.disabled&&!e.readonly&&(s.value=!0)}function L(t){return z(t.value,c.value.value)}return B(s,t=>{t||(d.value="")},{flush:"post"}),X(()=>{s.value&&n.value&&n.value!==document.activeElement&&n.value.focus()}),Y(()=>{var t;(t=l==null?void 0:l.proxy)!=null&&t.$el&&(n.value=l.proxy.$el.querySelector(".select__search"))}),{classNames:I,isOpen:s,isLoading:f,search:m,items:u,toggleOpen:w,select:a,onFocus:k,isSelected:L}}});const ee={key:0,"data-testid":"select-no-data",class:"select__empty"},te={class:"select__option"},oe={class:"select__option-text"},ae={key:2,"data-testid":"select-loading",class:"select__loading"};function se(e,o,l,n,d,s){const f=r("IconArrow"),_=r("p-input"),u=r("DropdownHeader"),c=r("IconCheck"),w=r("DropdownItem"),I=r("IconLoading"),m=r("Dropdown");return i(),C(m,{modelValue:e.isOpen,"onUpdate:modelValue":o[1]||(o[1]=a=>e.isOpen=a),class:N(["select",e.classNames]),"data-testid":"select","aria-label":"select",disabled:e.disabled},{activator:p(()=>[y(_,{modelValue:e.search,"onUpdate:modelValue":o[0]||(o[0]=a=>e.search=a),"data-testid":"select-search",class:"select__search",size:e.size,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,clearable:e.clearable,onFocus:e.onFocus},J({_:2},[e.noCaret?void 0:{name:"append",fn:p(()=>[g(e.$slots,"caret",{isOpen:e.isOpen,toggle:e.toggleOpen},()=>[y(f,{class:"select__caret","data-testid":"select-caret-icon",onClick:e.toggleOpen},null,8,["onClick"])])]),key:"0"}]),1032,["modelValue","size","placeholder","disabled","readonly","clearable","onFocus"])]),default:p(()=>[!e.isLoading&&e.items.length===0?(i(),h("div",ee,[g(e.$slots,"empty",{},()=>[S(b(e.emptyText),1)])])):(i(),h($,{key:1},[e.sectionLabel?(i(),C(u,{key:0,"data-testid":"select-label"},{default:p(()=>[S(b(e.sectionLabel),1)]),_:1})):O("",!0),(i(!0),h($,null,K(e.items,(a,k)=>(i(),C(w,{key:k,"data-testid":"select-item",class:N({selected:e.isSelected(a)}),disabled:!!a.disabled,onClick:L=>e.select(a)},{default:p(()=>[V("div",te,[V("div",oe,[g(e.$slots,"option",{isSelected:e.isSelected(a),item:a},()=>[S(b(a.text),1)])]),y(c,{class:"select__option-checked"})])]),_:2},1032,["class","disabled","onClick"]))),128))],64)),e.isLoading?(i(),h("div",ae,[y(I,{width:"14",height:"14"}),g(e.$slots,"loading",{},()=>[V("span",null,b(e.loadingText),1)])])):O("",!0)]),_:3},8,["modelValue","disabled","class"])}const ge=R(x,[["render",se]]);export{ge as p};
