import{d as P,a2 as Z,N as ee,g as b,o as s,c as m,r as f,e as A,k,M as te,m as r,n as O,F as z,E as H,b as v,w as p,a as C,t as h,h as x,y as ae,a4 as U,I as B,an as F,ae as le,ad as se,a1 as M,P as ie}from"./framework.e_h4aueT.js";import{_ as oe}from"./Dropdown.vue_vue_type_script_setup_true_lang.2xGEKwA1.js";import{p as ne}from"./Dropdown.vue_vue_type_style_index_0_lang.6fPL861O.js";import{p as de}from"./DropdownHeader.wW6XUJhf.js";import{p as re}from"./Input.avtU0igR.js";import{p as ue}from"./Text.JsRyatD5.js";import{I as ce}from"./index.hjpy5ZnQ.js";import{p as G}from"./Label.tHT-V29-.js";import{I as pe}from"./20.lPxbblgA.js";import{I as me}from"./20.BZPKkrjT.js";import{I as fe}from"./20.xRrL9iad.js";import{I as ye}from"./IconCheckbox.cnMIBEMQ.js";import{p as ve}from"./SpinnerRing.amwUdINQ.js";import{i as I,v as he}from"./value.Mcqa82Kw.js";import{d as be,u as ge}from"./adapter.ObXYk3jj.js";import{u as Se}from"./use-loading.ijVy5faM.js";import{g as ke}from"./index.r0OCB_7d.js";import{i as Ce}from"./isNil.-q_uwI5T.js";import{w as $e}from"./index.L8r16ak4.js";const Ae={key:0,class:"input__prepend"},Ve=k("input",{class:"input__hidden",type:"text"},null,-1),xe=["disabled","readonly"],Be={key:1,class:"input__append"},Ie=P({inheritAttrs:!1,__name:"SelectInput",props:{size:{type:String,default:"md"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},containerClass:{type:[String,Array,Object],default:void 0}},setup(e){const l=e,u=Z(),a=ee(ce,void 0,!1),y=b(()=>{const i=[];return a!=null&&a.size.value?i.push(`input--${a==null?void 0:a.size.value}`):l.size&&i.push(`input--${l.size}`),l.disabled&&i.push("input--disabled"),l.readonly&&i.push("input--readonly"),l.error&&i.push("input--error","state--error"),u.prepend&&i.push("input--has-prepend"),u.append&&i.push("input--has-append"),i});return(i,V)=>(s(),m("div",{class:O(["input",e.containerClass]),"data-testid":"input-container"},[i.$slots.prepend?(s(),m("span",Ae,[f(i.$slots,"prepend")])):A("",!0),Ve,k("div",te({class:["input__form",r(y)],"data-testid":"input",disabled:e.disabled,readonly:e.readonly,tabindex:1},i.$attrs),[f(i.$slots,"default")],16,xe),i.$slots.append?(s(),m("span",Be,[f(i.$slots,"append")])):A("",!0)],2))}}),Te={class:"select__tags"},Le=P({__name:"SelectTags",props:{items:{type:Array,default:()=>[]},displayLimit:{type:Number,default:2},limitText:{type:String,default:"+{n} Other(s)"}},setup(e){const l=e,u=b(()=>l.items.slice(0,l.displayLimit)),a=b(()=>l.limitText.replaceAll("{n}",String(l.items.length-l.displayLimit)));return(y,i)=>(s(),m("div",Te,[(s(!0),m(z,null,H(r(u),(V,g)=>(s(),v(G,{key:g,"data-testid":"select-tag",variant:"light",size:"xs"},{default:p(()=>[C(h(V.text),1)]),_:2},1024))),128)),e.items.length>e.displayLimit?(s(),v(G,{key:0,"data-testid":"select-tag-others",variant:"light",size:"xs"},{default:p(()=>[C(h(r(a)),1)]),_:1})):A("",!0)]))}});function N(e,l){var u;return(u=e.find(a=>I(a.value,l)))!=null?u:{text:"",value:void 0}}function _(e,l){return Array.isArray(l)?e.filter(u=>he(l,u.value)):[]}const ze=be({setup({props:e,keyword:l}){const u=ge(e);return b(()=>u.value.filter(y=>y.text.toLowerCase().includes(l.value.toLowerCase())))}}),we={key:1,"data-testid":"select-placeholder"},Ne={class:"input__form__placeholder"},_e={key:0,"data-testid":"select-no-data",class:"select__empty"},Oe={class:"select__option"},Pe={class:"select__option-text"},Ee={class:"select__option-checked"},je={key:2,"data-testid":"select-loading",class:"select__loading"},it=P({models:{prop:"modelValue",event:"update:modelValue"},__name:"Select",props:{modelValue:{type:void 0,default:void 0},selected:{type:[Object,Array],default:void 0},options:{type:Array,default:()=>[]},placeholder:{type:String,default:"Â "},emptyText:{type:String,default:"No Data"},loadingText:{type:String,default:"Loading..."},searchText:{type:String,default:"Search..."},adapter:{type:Object,default:()=>ze},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},clearLabel:{type:String,default:"Clear"},size:{type:String,default:"md"},sectionLabel:{type:String,default:void 0},noCaret:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},displayLimit:{type:Number,default:void 0},limitText:{type:String,default:void 0},searchable:{type:Boolean,default:!0},menuSize:{type:String,default:void 0},menuClass:{type:[String,Array,Object],default:void 0},divider:{type:Boolean,default:!1},noAnimation:{type:Boolean,default:!1},noCloseAfterSelect:{type:Boolean,default:!1}},emits:["change","update:modelValue","update:selected","userInput"],setup(e,{expose:l,emit:u}){const a=e,y=u,i=x(),V=x(),g=b(()=>{var t;return(t=i.value)==null?void 0:t.input}),E=b(()=>{var t;return(t=V.value)==null?void 0:t.menuBody}),$=x(""),c=x(!1),T=Se({elapsed:!1}),q={props:a,keyword:$,isOpen:c,isLoading:T,menuEl:E},S=a.adapter.setup(q),o=x(a.multiple?_(S.value,a.modelValue):N(S.value,a.modelValue)),w=()=>{!a.disabled&&!a.readonly&&(c.value=!c.value)},W=b(()=>{const t=[];return c.value&&t.push("select--open"),a.disabled&&t.push("select--disabled"),a.readonly&&t.push("select--readonly"),a.multiple&&t.push("select--multiple"),t}),J=b(()=>{var t;return a.multiple?Array.isArray(o.value)&&o.value.length>0:!Ce((t=o.value)==null?void 0:t.value)}),j=$e(()=>a.modelValue,t=>{o.value=a.multiple?_(S.value,t):N(S.value,t)});ae(S,t=>{a.modelValue&&t.length>0&&(o.value=a.multiple?_(t,a.modelValue):N(t,a.modelValue))});function D(t){let n;a.multiple?t?Array.isArray(o.value)&&(n=o.value.some(d=>I(d.value,t.value))?o.value.filter(d=>!I(d.value,t.value)):[...o.value,t]):n=[]:n=t,j.pause(),o.value=n,y("change",n),y("update:selected",n),y("update:modelValue",a.multiple?n.map(d=>d.value):n==null?void 0:n.value),c.value&&y("userInput",n),a.noCloseAfterSelect||(c.value=!1),ie(()=>{j.resume()})}function K(){!a.disabled&&!a.readonly&&(c.value=!0)}function Q(){D()}function R(t){return o.value?a.multiple&&Array.isArray(o.value)?o.value.some(n=>I(t.value,n.value)):I(t.value,o.value.value):!1}function X(){var t;(t=g.value)==null||t.focus()}function Y(){$.value=""}return ke(()=>{c.value&&g.value&&g.value!==document.activeElement&&(g.value.select(),g.value.focus())}),l({keyword:$,isOpen:c,isLoading:T,menuEl:E,toggle:w}),(t,n)=>(s(),v(oe,{ref_key:"dropdown",ref:V,modelValue:r(c),"onUpdate:modelValue":n[1]||(n[1]=d=>U(c)?c.value=d:null),class:O(["select",r(W)]),"data-testid":"select","aria-label":"select",disabled:e.disabled,divider:e.divider,"menu-size":e.menuSize,"menu-class":e.menuClass,"no-animation":e.noAnimation,onShow:X,onHide:Y},{activator:p(d=>[f(t.$slots,"activator",le(se(d)),()=>[B(Ie,{"data-testid":"select-activator",class:"select__activator",size:e.size,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,error:e.error,onFocus:K},F({default:p(()=>[r(J)?f(t.$slots,"selected",{key:0,item:r(o),multiple:e.multiple},()=>{var L;return[a.multiple&&Array.isArray(r(o))?(s(),v(Le,{key:0,items:r(o),"display-limit":e.displayLimit,"limit-text":e.limitText},null,8,["items","display-limit","limit-text"])):(s(),m(z,{key:1},[C(h((L=r(o))==null?void 0:L.text),1)],64))]}):(s(),m("div",we,[f(t.$slots,"placeholder",{},()=>[k("span",Ne,h(e.placeholder),1)])]))]),_:2},[e.noCaret?void 0:{name:"append",fn:p(()=>[f(t.$slots,"caret",{isOpen:r(c),toggle:w},()=>[B(pe,{class:"select__caret","data-testid":"select-caret-icon",onClick:w})])]),key:"0"}]),1032,["size","placeholder","disabled","readonly","error"])])]),prepend:p(()=>[e.searchable?(s(),v(re,{key:0,ref_key:"input",ref:i,modelValue:r($),"onUpdate:modelValue":n[0]||(n[0]=d=>U($)?$.value=d:null),"data-testid":"select-search",class:"select__search no--error",placeholder:e.searchText,clearable:!0},{append:p(()=>[B(fe,{class:"select__search-icon"})]),_:1},8,["modelValue","placeholder"])):A("",!0)]),default:p(()=>[!r(T)&&r(S).length===0?(s(),m("div",_e,[f(t.$slots,"empty",{},()=>[C(h(e.emptyText),1)])])):(s(),m(z,{key:1},[e.sectionLabel||e.clearable?(s(),v(de,{key:0,"data-testid":"select-label"},F({default:p(()=>[C(h(e.sectionLabel),1)]),_:2},[e.clearable?{name:"action",fn:p(()=>[B(ue,{"data-testid":"select-clear",variant:"caption2",href:"javascript:void",onClick:M(Q,["prevent"])},{default:p(()=>[C(h(e.clearLabel),1)]),_:1},8,["onClick"])]),key:"0"}:void 0]),1024)):A("",!0),(s(!0),m(z,null,H(r(S),(d,L)=>(s(),v(ne,{key:L,"data-testid":"select-item",class:O({selected:R(d)}),disabled:!!d.disabled,onClick:M(De=>D(d),["prevent"])},{default:p(()=>[k("div",Oe,[k("div",Pe,[f(t.$slots,"option",{isSelected:R(d),item:d},()=>[C(h(d.text),1)])]),k("div",Ee,[e.multiple?(s(),v(ye,{key:0})):(s(),v(me,{key:1}))])])]),_:2},1032,["class","disabled","onClick"]))),128))],64)),r(T)?(s(),m("div",je,[B(ve),f(t.$slots,"loading",{},()=>[k("span",null,h(e.loadingText),1)])])):A("",!0)]),_:3},8,["modelValue","disabled","divider","menu-size","menu-class","class","no-animation"]))}});export{it as _};
