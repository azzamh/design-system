import{_ as B}from"./chunks/Button.vue_vue_type_script_setup_true_lang.ZHeh2b3E.js";import"./chunks/Button.vue_vue_type_style_index_0_lang.w40geAFS.js";import{H as os,m as rs,Y as hs,ae as ps,_ as ss,o as S,c as V,p as t,l as T,d as ds,r as _,a9 as J,ai as cs,a2 as P,n as K,q as l,R as Z,a0 as U,a8 as ks,g as gs,J as o,w as g,a7 as j,b as m,a as us,j as Q,t as G,V as F,E as Es}from"./chunks/framework.95PECLjQ.js";import{u as ms}from"./chunks/index.mXdi38WT.js";import{t as X}from"./chunks/throttle.Yy5L90F6.js";import{_ as ys}from"./chunks/InputRange.vue_vue_type_style_index_0_lang.NGybyiFG.js";import{I as vs,a as _s}from"./chunks/20.Ve6ZMnwF.js";import{c as fs,u as Fs}from"./chunks/index.zScMNJcM.js";import{u as bs}from"./chunks/index.BH_KCAlA.js";import{f as Cs}from"./chunks/base64.6dLoFO2g.js";import{v as xs}from"./chunks/index.fxfGuyno.js";import"./chunks/index.hjpy5ZnQ.js";import"./chunks/SpinnerRinggo.vue_vue_type_script_setup_true_lang.eR8P-bYU.js";import"./chunks/debounce.fM6nWQov.js";import"./chunks/isObject.mlSoqgao.js";import"./chunks/isObjectLike.OM1Hublo.js";import"./chunks/toNumber.jidAZ9H9.js";import"./chunks/isSymbol.K1VvrVGN.js";import"./chunks/defu.3rjBFRnm.js";import"./chunks/load-image.o1nqrQGg.js";import"./chunks/create-image._im0xJpR.js";import"./chunks/avatar.CzBZbX_M.js";import"./chunks/color-hash.7xxmQZVO.js";function As(s,i){const p=os();rs(async()=>{if(s.value){const{default:e}=await hs(()=>import("./chunks/interact.min.R9cCznFE.js").then(u=>u.i),__vite__mapDeps([0,1,2])),c=X(i.onmove,1e3/120),y=X(i.onpinch,1e3/120);p.value=e(s.value).styleCursor(!0).gesturable({inertia:!0,onstart:i.onstart,onmove:y,onend:y,modifiers:[e.modifiers.restrict({restriction:"parent",endOnly:!0})]}).draggable({inertia:!0,onstart:i.onstart,onmove:c,onend:c,modifiers:[e.modifiers.restrict({restriction:"parent",endOnly:!0})]})}}),ps(async()=>{var e;(e=p.value)==null||e.unset()})}const ws={},Bs={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",class:"persona-icon",viewBox:"0 0 20 20"},Ts=t("path",{fill:"currentColor","fill-rule":"evenodd",d:"M13.5 15.998a.603.603 0 0 0-.603-.603h-.796V9.002a.603.603 0 0 0-.603-.603H5.105v-.796a.603.603 0 0 0-1.206 0v.796h-.796a.603.603 0 0 0 0 1.206h.796v6.393c0 .333.27.603.603.603h6.393v.796a.603.603 0 0 0 1.206 0v-.796h.796c.333 0 .603-.27.603-.603m-2.605-.603h-5.79v-5.79h5.79zM11.866 2.16a.592.592 0 0 0-.852.045L9.655 3.758a.634.634 0 0 0 0 .83l1.359 1.552a.592.592 0 0 0 .852.046.633.633 0 0 0 .045-.876l-.451-.516h3.172c.917 0 1.66.764 1.66 1.707v3.88c0 .342.27.62.604.62a.612.612 0 0 0 .604-.62V6.5c0-1.628-1.284-2.948-2.868-2.948H11.46l.451-.516a.633.633 0 0 0-.045-.877","clip-rule":"evenodd"},null,-1),qs=[Ts];function Ds(s,i){return S(),V("svg",Bs,qs)}const Ps=ss(ws,[["render",Ds]]),Ss={},Vs={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",class:"persona-icon",viewBox:"0 0 20 20"},Is=t("path",{fill:"currentColor","fill-rule":"evenodd",d:"M6.5 15.998c0-.333.27-.603.603-.603h.796V9.002c0-.333.27-.603.603-.603h6.393v-.796a.603.603 0 0 1 1.206 0v.796h.796a.603.603 0 0 1 0 1.206h-.796v6.393c0 .333-.27.603-.603.603H9.105v.796a.603.603 0 0 1-1.206 0v-.796h-.796a.603.603 0 0 1-.603-.603m2.605-.603h5.79v-5.79h-5.79zM8.134 2.16a.592.592 0 0 1 .852.045l1.359 1.552a.634.634 0 0 1 0 .83L8.986 6.14a.592.592 0 0 1-.852.046.633.633 0 0 1-.045-.876l.451-.516H5.368c-.917 0-1.66.764-1.66 1.707v3.88c0 .342-.27.62-.604.62a.612.612 0 0 1-.604-.62V6.5c0-1.628 1.284-2.948 2.868-2.948H8.54l-.451-.516a.633.633 0 0 1 .045-.877","clip-rule":"evenodd"},null,-1),Ns=[Is];function Rs(s,i){return S(),V("svg",Vs,Ns)}const $s=ss(Ss,[["render",Rs]]);function Ms(s){var I;const{width:i,height:p,image:e,scale:c,angle:y,x:u,y:f,rounded:k}=s,h=(I=s.canvas)!=null?I:fs(i,p),a=h.getContext("2d"),E=e.width*c,q=e.height*c;if(h.width=i,h.height=p,a.clearRect(0,0,i,p),a.translate(i/2,p/2),a.rotate(y*Math.PI/180),a.translate(i/-2,p/-2),a.drawImage(e,(i-E)/2+u,(p-q)/2+f,E,q),k){const b=Math.min(i/2,p/2);a.globalCompositeOperation="destination-in",a.beginPath(),a.moveTo(b,0),a.arcTo(i,0,i,p,b),a.arcTo(i,p,0,p,b),a.arcTo(0,p,0,0,b),a.arcTo(0,0,i,0,b),a.closePath(),a.fill()}return h.toDataURL()}function zs(s,i=1){return T(()=>{var p;return s.width&&s.height?Number.parseFloat(`${s.width}`)/Number.parseFloat(`${s.height}`):(p=s.ratio)!=null?p:i})}function Us(s){return T(()=>{if(s.width)return Number.parseFloat(`${s.width}`);if(s.height&&s.ratio)return Number.parseFloat(`${s.height}`)*s.ratio})}function js(s){return T(()=>{if(s.height)return Number.parseFloat(`${s.height}`);if(s.width&&s.ratio)return Number.parseFloat(`${s.width}`)/s.ratio})}const Hs={class:"cropper__preview"},Os=["src","width","height"],Ws={class:"cropper__control"},Ls={class:"cropper__control-bar"},C=ds({__name:"Cropper",props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},src:{type:[String,globalThis.File],default:void 0},ratio:{type:Number,default:void 0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},imgWidth:{type:[String,Number],default:512},imgHeight:{type:[String,Number],default:512},imgClass:{type:[String,Array,Object],default:void 0},rounded:{type:Boolean,default:!1},noCrop:{type:Boolean,default:!1},noAutocrop:{type:Boolean,default:!1}},emits:["update:modelValue","change","result","load"],setup(s,{expose:i,emit:p}){const e=s,c=p,y=bs(e),u=_(0),f=_(0),k=_(0),h=ms(1,.5,2),a=zs(e),E=Us(e),q=js(e),I=J(e,"rounded"),b=J(e,"src"),ts=Fs(b),N=_(),w=_(),v=_(),is=T(()=>{const r=[];return e.noCrop&&r.push("cropper--no-crop"),e.rounded&&r.push("cropper--rounded"),r}),es=T(()=>({transform:`rotate(${k.value}deg) translate(${u.value}px, ${f.value}px) scale(${h.value})`})),as=T(()=>({aspectRatio:`${a.value}`,width:E.value?`${E.value}px`:"66.666667%"}));function D(){if(w.value&&v.value){const r=k.value%180===0?v.value.width:v.value.height,n=k.value%180===0?v.value.height:v.value.width;h.value=Math.min(w.value.clientWidth/r,w.value.clientHeight/n)}u.value=0,f.value=0}function R(){h.value+=.1}function $(){h.value-=.1}function M(r){k.value=(Math.trunc(k.value/90)*90+r)%360,D()}function x(r,n){const d=Math.cos(k.value*Math.PI/180),A=Math.sin(k.value*Math.PI/180),O=r*d+n*A,W=n*d-r*A;u.value+=O,f.value+=W}function H(){k.value=0,D()}function z(){var r,n;if(w.value&&v.value&&N.value){const d=w.value.clientWidth*2/3,A=(r=E.value)!=null?r:d,O=(n=q.value)!=null?n:A/a.value,W=d>0&&A>d?A/d:1,L=Ms({canvas:N.value,image:v.value,width:A,height:O,x:u.value,y:f.value,angle:k.value,scale:h.value*W,rounded:e.rounded}),Y=e.modelModifiers.base64?L:Cs(L);return y.value=Y,c("change",Y),c("result",Y),L}}function ns(r){v.value&&v.value.focus(),r.deltaY>0?R():$()}function ls(){c("load"),D(),!e.noCrop&&!e.noAutocrop&&z()}return As(v,{onpinch(r){h.value=r.scale,x(r.dx,r.dy)},onmove(r){x(r.dx,r.dy)}}),cs([b,E,q,a,I,u,f,h,k],()=>{!e.noCrop&&!e.noAutocrop&&z()},{debounce:500}),i({zoomIn:R,zoomOut:$,rotate:M,crop:z,reset:H,move:x,fit:D,canvas:N,image:v}),(r,n)=>(S(),V("div",{"data-testid":"cropper",class:K(["cropper",l(is)])},[t("div",Hs,[t("canvas",{ref_key:"canvas",ref:N,"data-testid":"cropper-canvas",class:"cropper__canvas"},null,512),t("div",{ref_key:"parent",ref:w,"data-testid":"cropper-container",class:"cropper__image-container",onWheel:P(ns,["prevent"])},[t("img",{ref_key:"image",ref:v,"data-testid":"cropper-preview",alt:"cropper-preview",tabindex:"0",class:K(["cropper__image",s.imgClass]),src:l(ts),style:Z(l(es)),width:s.imgWidth,height:s.imgHeight,onLoad:ls,onKeydown:[n[0]||(n[0]=U(P(d=>x(0,-1),["prevent"]),["up"])),n[1]||(n[1]=U(P(d=>x(0,1),["prevent"]),["down"])),n[2]||(n[2]=U(P(d=>x(-1,0),["prevent"]),["left"])),n[3]||(n[3]=U(P(d=>x(1,0),["prevent"]),["right"]))]},null,46,Os)],544),s.noCrop?gs("",!0):ks((S(),V("div",{key:0,"data-testid":"cropper-mask",class:"cropper__mask",style:Z(l(as))},null,4)),[[l(xs),l(a),void 0,{fixed:!0}]])]),t("div",Ws,[t("div",Ls,[o(B,{"data-testid":"cropper-zoom-out",size:"xs",variant:"link",icon:"",pill:"",onClick:n[4]||(n[4]=d=>$())},{default:g(()=>[o(vs)]),_:1}),o(ys,{modelValue:l(h),"onUpdate:modelValue":n[5]||(n[5]=d=>j(h)?h.value=d:null),"data-testid":"cropper-zoom-slider",class:"cropper__slider",min:"0.5",max:"2",step:"0.1"},null,8,["modelValue"]),o(B,{"data-testid":"cropper-zoom-in",size:"xs",variant:"link",icon:"",pill:"",onClick:n[6]||(n[6]=d=>R())},{default:g(()=>[o(_s)]),_:1}),o(B,{"data-testid":"cropper-rotate-left",size:"xs",variant:"link",icon:"",pill:"",onClick:n[7]||(n[7]=d=>M(-90))},{default:g(()=>[o(Ps)]),_:1}),o(B,{"data-testid":"cropper-rotate-right",size:"xs",variant:"link",icon:"",pill:"",onClick:n[8]||(n[8]=d=>M(90))},{default:g(()=>[o($s)]),_:1})]),o(B,{"data-testid":"cropper-reset",class:"cropper__control__reset",size:"xs",variant:"link",onClick:n[9]||(n[9]=d=>H())},{default:g(()=>[m(" Reset ")]),_:1}),us(r.$slots,"control",{scale:l(h),angle:l(k),crop:z,zoomIn:R,zoomOut:$,fit:D,rotate:M,reset:H})])],2))}}),Ys=F("",4),Gs=F("",4),Js=F("",2),Ks=F("",3),Zs=F("",3),Qs=F("",3),Xs=F("",2),st={class:"truncate"},tt=t("h3",{id:"encode-to-base64",tabindex:"-1"},[m("Encode to base64 "),t("a",{class:"header-anchor",href:"#encode-to-base64","aria-label":'Permalink to "Encode to base64"'},"​")],-1),it=t("p",null,[m("You can add modifier "),t("code",null,"base64"),m(" to your "),t("code",null,"v-model"),m(", it's enforce result to "),t("a",{href:"https://en.wikipedia.org/wiki/Data_URI_scheme",target:"_blank",rel:"noreferrer"},"base64-dataURI"),m(".")],-1),et=F("",2),at={class:"truncate"},nt=["src"],lt=t("h3",{id:"disabling-autocrop",tabindex:"-1"},[m("Disabling Autocrop "),t("a",{class:"header-anchor",href:"#disabling-autocrop","aria-label":'Permalink to "Disabling Autocrop"'},"​")],-1),ot=t("p",null,[m("By default, cropping process was ran every movement (drag, zoom, & rotate). It can be exhausting the resource on some device. You can disabled it using prop "),t("code",null,"no-autocrop"),m(". And to trigger the cropping, you can use "),t("code",null,"templateRef"),m(" on "),t("code",null,"<p-cropper>"),m(" component, and call "),t("code",null,".crop()"),m(" function.")],-1),rt={class:"mt-4"},ht=t("p",null,[t("strong",null,"result:")],-1),pt={class:"truncate"},dt=["src"],ct=F("",10),Rt=JSON.parse('{"title":"Cropper · Components","description":"Preview and crop image","frontmatter":{"title":"Cropper · Components","description":"Preview and crop image"},"headers":[],"relativePath":"components/cropper/index.md","filePath":"components/cropper/index.md"}'),kt={name:"components/cropper/index.md"},$t=Object.assign(kt,{setup(s){const i=Q("/assets/images/img-sample-crop.jpg"),p=Q("/assets/images/empty-img.png"),e=_(),c=_(),y=_(),u=_();function f(){u.value&&u.value.crop()}return(k,h)=>{const a=Es("preview");return S(),V("div",null,[Ys,o(a,{class:"flex-col"},{default:g(()=>[o(C,{src:l(i)},null,8,["src"])]),_:1}),Gs,o(a,null,{default:g(()=>[o(C,{src:l(i),width:"500",height:"200"},null,8,["src"])]),_:1}),Js,o(a,null,{default:g(()=>[o(C,{src:l(i),ratio:16/9},null,8,["src"])]),_:1}),Ks,o(a,null,{default:g(()=>[o(C,{src:l(i),rounded:""},null,8,["src"])]),_:1}),Zs,o(a,null,{default:g(()=>[o(C,{src:l(i),"no-crop":""},null,8,["src"])]),_:1}),Qs,o(a,null,{default:g(()=>[o(C,{src:l(i),modelValue:l(e),"onUpdate:modelValue":h[0]||(h[0]=E=>j(e)?e.value=E:null)},null,8,["src","modelValue"])]),_:1}),Xs,t("pre",st,[t("code",null,G(l(e)),1)]),tt,it,o(a,{class:"flex-col"},{default:g(()=>[o(C,{src:l(i),modelValue:l(c),"onUpdate:modelValue":h[1]||(h[1]=E=>j(c)?c.value=E:null),modelModifiers:{base64:!0}},null,8,["src","modelValue"])]),_:1}),et,t("pre",at,[t("code",null,G(l(c)),1)]),t("img",{class:"mt-2 border",src:l(c)||l(p),alt:"Result Image"},null,8,nt),lt,ot,o(a,{class:"flex-col"},{default:g(()=>[o(C,{ref_key:"cropper",ref:u,src:l(i),modelValue:l(y),"onUpdate:modelValue":h[2]||(h[2]=E=>j(y)?y.value=E:null),modelModifiers:{base64:!0},"no-autocrop":""},null,8,["src","modelValue"]),t("div",rt,[o(B,{onClick:f},{default:g(()=>[m("Do Crop")]),_:1})])]),_:1}),ht,t("pre",pt,[t("code",null,G(l(y)),1)]),t("img",{class:"mt-2 border",src:l(y)||l(p),alt:"Result Image"},null,8,dt),ct])}}});export{Rt as __pageData,$t as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/chunks/interact.min.R9cCznFE.js","assets/chunks/theme.B-aWuVSp.js","assets/chunks/framework.95PECLjQ.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
