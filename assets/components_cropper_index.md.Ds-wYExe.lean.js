const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/interact.min.CbIEsjER.js","assets/chunks/commonjsHelpers.BosuxZz1.js"])))=>i.map(i=>d[i]);
import{_ as B}from"./chunks/Button.vue_vue_type_script_setup_true_lang.DfXXWqOU.js";/* empty css                                                      */import{I as os,A as rs,Z as ds,a3 as ps,_ as ts,o as S,c as I,m as t,l as T,d as hs,r as f,t as G,a4 as P,p as n,n as J,R as Q,a1 as M,ac as cs,h as ks,K as o,w as u,aa as z,b as m,a as us,k as X,f as K,a9 as b,F as gs}from"./chunks/framework.BKe39h19.js";import{u as Es}from"./chunks/index.BcOYuKu3.js";import{t as ss}from"./chunks/throttle.CdTQLZho.js";import{_ as ms}from"./chunks/InputRange.vue_vue_type_style_index_0_lang.Cnhlp6lT.js";import{I as ys,a as _s}from"./chunks/20.CII7kjKA.js";import{c as vs}from"./chunks/canvas.D47M5PTM.js";import{u as fs}from"./chunks/index.BgZLTpqE.js";import{f as bs}from"./chunks/base64.CRVHLH2y.js";import{v as Fs}from"./chunks/index.TF6MXDoF.js";import{u as Cs}from"./chunks/use-preview.B76UdCu-.js";import{a as xs,b as As}from"./chunks/index.CyBTFB5O.js";import"./chunks/index.DvWHfs5K.js";import"./chunks/SpinnerRinggo.vue_vue_type_script_setup_true_lang.DPDHpNan.js";import"./chunks/debounce.CE-8mXQa.js";import"./chunks/isObject.C3e4t58V.js";import"./chunks/baseGetTag.Cu32HCTk.js";import"./chunks/toNumber.Dcxq_36h.js";import"./chunks/isSymbol.BOom9x27.js";import"./chunks/isObjectLike.nLWjQ9zq.js";import"./chunks/index.CF2swUAz.js";import"./chunks/defu.CMw4_7D2.js";import"./chunks/load-image.CsguPAoR.js";import"./chunks/create-image.CkAV8b2h.js";import"./chunks/avatar.qWHUbXZ4.js";import"./chunks/color-hash.CY8Op1ql.js";function ws(s,i){const p=os();rs(async()=>{if(s.value){const{default:e}=await ds(async()=>{const{default:g}=await import("./chunks/interact.min.CbIEsjER.js").then(v=>v.i);return{default:g}},__vite__mapDeps([0,1])),c=ss(i.onmove,1e3/120),y=ss(i.onpinch,1e3/120);p.value=e(s.value).styleCursor(!0).gesturable({inertia:!0,onstart:i.onstart,onmove:y,onend:y,modifiers:[e.modifiers.restrict({restriction:"parent",endOnly:!0})]}).draggable({inertia:!0,onstart:i.onstart,onmove:c,onend:c,modifiers:[e.modifiers.restrict({restriction:"parent",endOnly:!0})]})}}),ps(async()=>{var e;(e=p.value)==null||e.unset()})}const Bs={},Ts={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",class:"persona-icon",viewBox:"0 0 20 20"},qs=t("path",{fill:"currentColor","fill-rule":"evenodd",d:"M3.71 7.131h8.534a.625.625 0 0 1 .625.625v8.533c0 .345-.28.625-.625.625H3.711a.625.625 0 0 1-.625-.625V7.756c0-.345.28-.625.625-.625m.626 1.25v7.283h7.283V8.381zM11.54 1.77a.625.625 0 0 1-.065.881l-.376.324h2.974a2.95 2.95 0 0 1 2.952 2.952v3.88a.625.625 0 1 1-1.25 0v-3.88c0-.94-.762-1.702-1.702-1.702h-2.974l.376.324a.625.625 0 0 1-.817.947L9.01 4.073a.625.625 0 0 1 0-.946l1.648-1.422a.625.625 0 0 1 .882.065","clip-rule":"evenodd"},null,-1),Ds=[qs];function Ps(s,i){return S(),I("svg",Ts,Ds)}const Ss=ts(Bs,[["render",Ps]]),Is={},Vs={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",class:"persona-icon",viewBox:"0 0 20 20"},Ns=t("path",{fill:"currentColor","fill-rule":"evenodd",d:"M8.46 1.77a.625.625 0 0 1 .882-.065l1.648 1.422a.625.625 0 0 1 0 .946L9.342 5.496a.625.625 0 0 1-.817-.947l.376-.324H5.927c-.94 0-1.702.762-1.702 1.702v3.88a.625.625 0 1 1-1.25 0v-3.88a2.95 2.95 0 0 1 2.952-2.952h2.974l-.376-.324a.625.625 0 0 1-.065-.881M7.13 7.756c0-.345.28-.625.626-.625h8.533a.625.625 0 0 1 .625.625v8.533c0 .345-.28.625-.625.625H7.756a.625.625 0 0 1-.625-.625zm1.25.625v7.283h7.284V8.381z","clip-rule":"evenodd"},null,-1),Rs=[Ns];function $s(s,i){return S(),I("svg",Vs,Rs)}const Ms=ts(Is,[["render",$s]]);function zs(s){var V;const{width:i,height:p,image:e,scale:c,angle:y,x:g,y:v,rounded:k}=s,r=(V=s.canvas)!=null?V:vs(i,p),l=r.getContext("2d"),E=e.width*c,q=e.height*c;if(r.width=i,r.height=p,l.clearRect(0,0,i,p),l.translate(i/2,p/2),l.rotate(y*Math.PI/180),l.translate(i/-2,p/-2),l.drawImage(e,(i-E)/2+g,(p-q)/2+v,E,q),k){const F=Math.min(i/2,p/2);l.globalCompositeOperation="destination-in",l.beginPath(),l.moveTo(F,0),l.arcTo(i,0,i,p,F),l.arcTo(i,p,0,p,F),l.arcTo(0,p,0,0,F),l.arcTo(0,0,i,0,F),l.closePath(),l.fill()}return r.toDataURL()}function Us(s,i=1){return T(()=>{var p;return s.width&&s.height?Number.parseFloat(`${s.width}`)/Number.parseFloat(`${s.height}`):(p=s.ratio)!=null?p:i})}function js(s){return T(()=>{if(s.width)return Number.parseFloat(`${s.width}`);if(s.height&&s.ratio)return Number.parseFloat(`${s.height}`)*s.ratio})}function Os(s){return T(()=>{if(s.height)return Number.parseFloat(`${s.height}`);if(s.width&&s.ratio)return Number.parseFloat(`${s.width}`)/s.ratio})}const Ws={class:"cropper__preview"},Hs=["src","width","height"],Ls={class:"cropper__control"},Ys={class:"cropper__control-bar"},C=hs({__name:"Cropper",props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},src:{type:[String,globalThis.File],default:void 0},ratio:{type:Number,default:void 0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},imgWidth:{type:[String,Number],default:512},imgHeight:{type:[String,Number],default:512},imgClass:{type:[String,Array,Object],default:void 0},rounded:{type:Boolean,default:!1},noCrop:{type:Boolean,default:!1},noAutocrop:{type:Boolean,default:!1}},emits:["update:modelValue","change","result","load"],setup(s,{expose:i,emit:p}){const e=s,c=p,y=fs(e),g=f(0),v=f(0),k=f(0),r=Es(1,.5,2),l=Us(e),E=js(e),q=Os(e),V=G(e,"rounded"),F=G(e,"src"),is=Cs(F),N=f(),w=f(),_=f(),es=T(()=>{const d=[];return e.noCrop&&d.push("cropper--no-crop"),e.rounded&&d.push("cropper--rounded"),d}),as=T(()=>({transform:`rotate(${k.value}deg) translate(${g.value}px, ${v.value}px) scale(${r.value})`})),ns=T(()=>({aspectRatio:`${l.value}`,width:E.value?`${E.value}px`:"66.666667%"}));function D(){if(w.value&&_.value){const d=k.value%180===0?_.value.width:_.value.height,a=k.value%180===0?_.value.height:_.value.width;r.value=Math.min(w.value.clientWidth/d,w.value.clientHeight/a)}g.value=0,v.value=0}function U(){r.value+=.1}function j(){r.value-=.1}function R(d){k.value=(Math.trunc(k.value/90)*90+d)%360,D()}function x(d,a){const h=Math.cos(k.value*Math.PI/180),A=Math.sin(k.value*Math.PI/180),W=d*h+a*A,H=a*h-d*A;g.value+=W,v.value+=H}function O(){k.value=0,D()}function $(){var d,a;if(w.value&&_.value&&N.value){const h=w.value.clientWidth*2/3,A=(d=E.value)!=null?d:h,W=(a=q.value)!=null?a:A/l.value,H=h>0&&A>h?A/h:1,L=zs({canvas:N.value,image:_.value,width:A,height:W,x:g.value,y:v.value,angle:k.value,scale:r.value*H,rounded:e.rounded}),Y=e.modelModifiers.base64?L:bs(L);return y.value=Y,c("change",Y),c("result",Y),L}}const Z=xs(d=>{_.value&&_.value.focus(),r.value+=d.deltaY*.01},1e3/30);function ls(){c("load"),D(),!e.noCrop&&!e.noAutocrop&&$()}return ws(_,{onpinch(d){r.value=d.scale,x(d.dx,d.dy)},onmove(d){x(d.dx,d.dy)}}),As([F,E,q,l,V,g,v,r,k],()=>{!e.noCrop&&!e.noAutocrop&&$()},{debounce:500}),i({zoomIn:U,zoomOut:j,rotate:R,crop:$,reset:O,move:x,fit:D,canvas:N,image:_,angle:k,scale:r}),(d,a)=>(S(),I("div",{"data-testid":"cropper",class:J(["cropper",n(es)])},[t("div",Ws,[t("canvas",{ref_key:"canvas",ref:N,"data-testid":"cropper-canvas",class:"cropper__canvas"},null,512),t("div",{ref_key:"parent",ref:w,"data-testid":"cropper-container",class:"cropper__image-container",onWheel:a[4]||(a[4]=P((...h)=>n(Z)&&n(Z)(...h),["prevent"]))},[t("img",{ref_key:"image",ref:_,"data-testid":"cropper-preview",alt:"cropper-preview",tabindex:"0",class:J(["cropper__image",s.imgClass]),src:n(is),style:Q(n(as)),width:s.imgWidth,height:s.imgHeight,onLoad:ls,onKeydown:[a[0]||(a[0]=M(P(h=>x(0,-1),["prevent"]),["up"])),a[1]||(a[1]=M(P(h=>x(0,1),["prevent"]),["down"])),a[2]||(a[2]=M(P(h=>x(-1,0),["prevent"]),["left"])),a[3]||(a[3]=M(P(h=>x(1,0),["prevent"]),["right"]))]},null,46,Hs)],544),s.noCrop?ks("",!0):cs((S(),I("div",{key:0,"data-testid":"cropper-mask",class:"cropper__mask",style:Q(n(ns))},null,4)),[[n(Fs),n(l),void 0,{fixed:!0}]])]),t("div",Ls,[t("div",Ys,[o(B,{"data-testid":"cropper-zoom-out",size:"xs",variant:"link",icon:"",pill:"",onClick:a[5]||(a[5]=h=>j())},{default:u(()=>[o(ys)]),_:1}),o(ms,{modelValue:n(r),"onUpdate:modelValue":a[6]||(a[6]=h=>z(r)?r.value=h:null),"data-testid":"cropper-zoom-slider",class:"cropper__slider",min:"0.5",max:"2",step:"0.1"},null,8,["modelValue"]),o(B,{"data-testid":"cropper-zoom-in",size:"xs",variant:"link",icon:"",pill:"",onClick:a[7]||(a[7]=h=>U())},{default:u(()=>[o(_s)]),_:1}),o(B,{"data-testid":"cropper-rotate-left",size:"xs",variant:"link",icon:"",pill:"",onClick:a[8]||(a[8]=h=>R(-90))},{default:u(()=>[o(Ss)]),_:1}),o(B,{"data-testid":"cropper-rotate-right",size:"xs",variant:"link",icon:"",pill:"",onClick:a[9]||(a[9]=h=>R(90))},{default:u(()=>[o(Ms)]),_:1})]),o(B,{"data-testid":"cropper-reset",class:"cropper__control__reset",size:"xs",variant:"link",onClick:a[10]||(a[10]=h=>O())},{default:u(()=>[m(" Reset ")]),_:1}),us(d.$slots,"control",{scale:n(r),angle:n(k),crop:$,zoomIn:U,zoomOut:j,fit:D,rotate:R,reset:O})])],2))}}),Ks=b("",4),Zs=b("",4),Gs=b("",2),Js=b("",3),Qs=b("",3),Xs=b("",3),st=b("",2),tt={class:"truncate"},it=t("h3",{id:"encode-to-base64",tabindex:"-1"},[m("Encode to base64 "),t("a",{class:"header-anchor",href:"#encode-to-base64","aria-label":'Permalink to "Encode to base64"'},"​")],-1),et=t("p",null,[m("You can add modifier "),t("code",null,"base64"),m(" to your "),t("code",null,"v-model"),m(", it's enforce result to "),t("a",{href:"https://en.wikipedia.org/wiki/Data_URI_scheme",target:"_blank",rel:"noreferrer"},"base64-dataURI"),m(".")],-1),at=b("",2),nt={class:"truncate"},lt=["src"],ot=t("h3",{id:"disabling-autocrop",tabindex:"-1"},[m("Disabling Autocrop "),t("a",{class:"header-anchor",href:"#disabling-autocrop","aria-label":'Permalink to "Disabling Autocrop"'},"​")],-1),rt=t("p",null,[m("By default, cropping process was ran every movement (drag, zoom, & rotate). It can be exhausting the resource on some device. You can disabled it using prop "),t("code",null,"no-autocrop"),m(". And to trigger the cropping, you can use "),t("code",null,"templateRef"),m(" on "),t("code",null,"<p-cropper>"),m(" component, and call "),t("code",null,".crop()"),m(" function.")],-1),dt={class:"mt-4"},pt=t("p",null,[t("strong",null,"result:")],-1),ht={class:"truncate"},ct=["src"],kt=b("",10),jt=JSON.parse('{"title":"Cropper · Components","description":"Preview and crop image","frontmatter":{"title":"Cropper · Components","description":"Preview and crop image"},"headers":[],"relativePath":"components/cropper/index.md","filePath":"components/cropper/index.md"}'),ut={name:"components/cropper/index.md"},Ot=Object.assign(ut,{setup(s){const i=X("/assets/images/img-sample-crop.jpg"),p=X("/assets/images/empty-img.png"),e=f(),c=f(),y=f(),g=f();function v(){g.value&&g.value.crop()}return(k,r)=>{const l=gs("preview");return S(),I("div",null,[Ks,o(l,{class:"flex-col"},{default:u(()=>[o(C,{src:n(i)},null,8,["src"])]),_:1}),Zs,o(l,null,{default:u(()=>[o(C,{src:n(i),width:"500",height:"200"},null,8,["src"])]),_:1}),Gs,o(l,null,{default:u(()=>[o(C,{src:n(i),ratio:16/9},null,8,["src"])]),_:1}),Js,o(l,null,{default:u(()=>[o(C,{src:n(i),rounded:""},null,8,["src"])]),_:1}),Qs,o(l,null,{default:u(()=>[o(C,{src:n(i),"no-crop":""},null,8,["src"])]),_:1}),Xs,o(l,null,{default:u(()=>[o(C,{src:n(i),modelValue:n(e),"onUpdate:modelValue":r[0]||(r[0]=E=>z(e)?e.value=E:null)},null,8,["src","modelValue"])]),_:1}),st,t("pre",tt,[t("code",null,K(n(e)),1)]),it,et,o(l,{class:"flex-col"},{default:u(()=>[o(C,{src:n(i),modelValue:n(c),"onUpdate:modelValue":r[1]||(r[1]=E=>z(c)?c.value=E:null),modelModifiers:{base64:!0}},null,8,["src","modelValue"])]),_:1}),at,t("pre",nt,[t("code",null,K(n(c)),1)]),t("img",{class:"mt-2 border",src:n(c)||n(p),alt:"Result Image"},null,8,lt),ot,rt,o(l,{class:"flex-col"},{default:u(()=>[o(C,{ref_key:"cropper",ref:g,src:n(i),modelValue:n(y),"onUpdate:modelValue":r[2]||(r[2]=E=>z(y)?y.value=E:null),modelModifiers:{base64:!0},"no-autocrop":""},null,8,["src","modelValue"]),t("div",dt,[o(B,{onClick:v},{default:u(()=>[m("Do Crop")]),_:1})])]),_:1}),pt,t("pre",ht,[t("code",null,K(n(y)),1)]),t("img",{class:"mt-2 border",src:n(y)||n(p),alt:"Result Image"},null,8,ct),kt])}}});export{jt as __pageData,Ot as default};
