var X=Object.defineProperty;var z=(e,t,a)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var g=(e,t,a)=>(z(e,typeof t!="symbol"?t+"":t,a),a);import{t as O,z as j,i as W}from"./chunks/theme.9e82a338.js";import{p as $}from"./chunks/Button.f200adbd.js";import{u as N}from"./chunks/index.80f03769.js";import{d as G,t as P,p as Q,a as J,r as H}from"./chunks/canvas.b003a521.js";import{s as K,o as R,a0 as Z,h as ee,m as k,r as b,w as L,_ as T,L as _,x as m,p as v,G as d,A as V,B as c,y as B,z as f,C as S,Q as n,c as C,a8 as te,a7 as ae,M as se,v as q,T as le,W as oe,R as ne,u as w,X as D,i as E}from"./chunks/framework.f0e3e228.js";import{t as re}from"./chunks/throttle.77eff498.js";import{p as pe}from"./chunks/Caption.7c7aac67.js";import{u as M}from"./chunks/index.517dde6f.js";import{f as x}from"./chunks/base64.041d95b4.js";import{l as ie}from"./chunks/load-image.265b152a.js";import{I as de}from"./chunks/20.033945a4.js";import{p as ce}from"./chunks/index.b006600f.js";import"./chunks/Button.vue_vue_type_style_index_0_lang.4ed993c7.js";import"./chunks/index.a3ecab28.js";import"./chunks/defu.573334b8.js";import"./chunks/debounce.425ad733.js";import"./chunks/toNumber.09abc7f0.js";import"./chunks/isSymbol.4326927f.js";import"./chunks/isObjectLike.53b0037d.js";import"./chunks/Caption.vue_vue_type_style_index_0_lang.4ed993c7.js";import"./chunks/create-image.44c757d8.js";import"./chunks/avatar.bd58a373.js";import"./chunks/color-hash.af77277d.js";function ue(e,t){const a=K();R(async()=>{if(e.value){const{default:s}=await Z(()=>import("./chunks/interact.min.3d1d0b73.js").then(r=>r.i),["assets/chunks/interact.min.3d1d0b73.js","assets/chunks/commonjsHelpers.de833af9.js"]),l=re(t.onmove,1e3/60);a.value=s(e.value).styleCursor(!1).draggable({origin:"self",inertia:{enabled:!0,resistance:10},onstart:t.onstart,onmove:l,onend:l})}}),ee(async()=>{var s;(s=a.value)==null||s.unset()})}class he{constructor(t){g(this,"lastX");g(this,"lastY");g(this,"movingX");g(this,"movingY");g(this,"smoother");this.lastX=0,this.lastY=0,this.movingX=0,this.movingY=0,this.smoother=t*.05+.7}start(t,a){this.lastX=t,this.lastY=a,this.movingX=0,this.movingY=0}move(t,a){const s=this.lastX,l=this.lastY,r=(this.movingX+(s-t)*.1)*this.smoother,o=(this.movingY+(l-a)*.1)*this.smoother,p=s-r,i=l-o;return this.movingX=r,this.movingY=o,this.lastX=p,this.lastY=i,[s,l,p,i]}}function me(e){return Array.from({length:e}).map((t,a)=>new he(a/(e*1.25)))}const ye=k({components:{Caption:pe,Button:$},props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=N(e),a=M(t,""),s=b(!0),l=O("canvas"),r=me(15);function o(){J(l.value),s.value=!0,t.value=""}function p(i){s.value||(H(l.value,i),t.value=P(l.value))}return L(()=>e.color,p),ue(l,{onstart(i){for(const y of r)y.start(i.pageX,i.pageY)},onmove(i){for(const u of r){const A=u.move(i.pageX,i.pageY),Y={color:e.color};G(l.value,A,Y)}const y=P(l.value),h=e.modelModifiers.base64?y:x(y);s.value=!1,t.value=h}}),R(()=>{t.value&&a.value&&(Q(l.value,a.value),s.value=!1)}),{model:t,reset:o,isBlank:s,setColor:p}}});const De={class:"signature-draw signature-draw--desktop","data-testid":"signature-draw-desktop"},ge=["width","height"],Fe={key:1,class:"signature-draw__control"};function _e(e,t,a,s,l,r){const o=_("Caption"),p=_("Button");return m(),v("div",De,[d("canvas",{ref:"canvas",class:"signature-draw__canvas","data-testid":"signature-draw-canvas",width:e.width,height:e.height},null,8,ge),e.isBlank?(m(),V(o,{key:0,class:"signature-draw__placeholder","data-testid":"signature-draw-placeholder"},{default:c(()=>[B(f(e.placeholder),1)]),_:1})):S("",!0),e.isBlank?S("",!0):(m(),v("div",Fe,[n(p,{"data-testid":"signature-draw-reset",variant:"link",size:"xs",class:"signature-draw__reset",pill:"",onClick:t[0]||(t[0]=i=>e.reset())},{default:c(()=>[d("span",null,f(e.resetLabel),1)]),_:1})]))])}const U=T(ye,[["render",_e]]);async function I(e,t){const a=document.createElement("canvas"),s=a.getContext("2d"),l=await ie(e);return a.width=t%180===0?l.width:l.height,a.height=t%180===0?l.height:l.width,s.translate(a.width/2,a.height/2),s.rotate(t*Math.PI/180),s.drawImage(l,l.width/-2,l.height/-2),a.toDataURL()}const ve=k({components:{Button:$,IconEdit:de,SignatureDrawDesktop:U},directives:{pAspectRatio:ce},props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"},openDrawLabel:{type:String,default:"Click to Draw"},closeDrawLabel:{type:String,default:"Save"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=N(e),a=M(t,""),s=b(""),l=b(!1),r=j(),o=C(()=>r.width.value<e.width+32?"rotate":"normal"),p=C(()=>{const u=[];return o.value&&u.push(`signature-draw--${o.value}`),u}),i=C(()=>({width:`${e.width}px`,aspectRatio:`${e.width/e.height}`}));async function y(){const u=a.value&&o.value==="rotate"?await I(a.value,90):a.value;s.value=u,l.value=!0}async function h(){const u=s.value&&o.value==="rotate"?await I(s.value,-90):s.value,A=e.modelModifiers.base64?u:x(u);t.value=A,l.value=!1}return L(l,u=>{u?document.body.style.setProperty("overflow-y","hidden"):document.body.style.removeProperty("overflow-y")}),{classNames:p,style:i,rawModel:s,preview:a,model:t,isOpen:l,mode:o,open:y,close:h}}});const fe={class:"signature-draw__preview"},we=["src"],be={key:0,class:"signature-draw__modal","data-testid":"signature-draw-modal"};function Ce(e,t,a,s,l,r){const o=_("IconEdit"),p=_("Button"),i=_("SignatureDrawDesktop"),y=te("p-aspect-ratio");return ae((m(),v("div",{class:q(["signature-draw signature-draw--mobile",e.classNames]),"data-testid":"signature-draw-mobile",style:oe(e.style)},[d("div",fe,[e.model?(m(),v(se,{key:0},[d("img",{src:e.preview,alt:"signature-draw-preview","data-testid":"signature-draw-preview",onClick:t[0]||(t[0]=h=>e.open())},null,8,we),n(p,{variant:"link",size:"xs",class:"signature-draw__reset","data-testid":"signature-draw-edit",icon:"",onClick:t[1]||(t[1]=h=>e.open())},{default:c(()=>[n(o)]),_:1})],64)):(m(),V(p,{key:1,"data-testid":"signature-draw-open",onClick:t[2]||(t[2]=h=>e.open())},{default:c(()=>[B(f(e.openDrawLabel),1)]),_:1}))]),n(le,{name:"zoom-in"},{default:c(()=>[e.isOpen?(m(),v("div",be,[n(i,{modelValue:e.rawModel,"onUpdate:modelValue":t[3]||(t[3]=h=>e.rawModel=h),modelModifiers:{base64:!0},class:q(e.classNames),placeholder:e.placeholder,color:e.color,width:e.mode==="rotate"?e.height:e.width,height:e.mode==="rotate"?e.width:e.height,"reset-label":e.resetLabel},null,8,["modelValue","class","placeholder","color","width","height","reset-label"]),n(p,{class:"signature-draw__close",nganu:"1311","data-testid":"signature-draw-close",onClick:t[4]||(t[4]=h=>e.close())},{default:c(()=>[d("span",null,f(e.closeDrawLabel),1)]),_:1})])):S("",!0)]),_:1})],6)),[[y,e.width/e.height]])}const Ae=T(ve,[["render",Ce]]),Se=k({props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"},openDrawLabel:{type:String,default:"Click to Draw"},closeDrawLabel:{type:String,default:"Save"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(){const e=W("(min-width: 768px)");return{view:C(()=>e.value?U:Ae)}}});function ke(e,t,a,s,l,r){return m(),V(ne(e.view),{"model-value":e.modelValue,"model-modifiers":e.modelModifiers,width:e.width,height:e.height,color:e.color,placeholder:e.placeholder,"reset-label":e.resetLabel,"open-draw-label":e.openDrawLabel,"close-draw-label":e.closeDrawLabel,"onUpdate:modelValue":t[0]||(t[0]=o=>e.$emit("update:modelValue",o))},null,8,["model-value","model-modifiers","width","height","color","placeholder","reset-label","open-draw-label","close-draw-label"])}const F=T(Se,[["render",ke]]),Te=D("",4),Ve=D("",2),Pe=D("",2),qe=D("",3),Ee=D("",3),Ie=d("p",null,[d("strong",null,"result")],-1),$e={class:"truncate"},Ne=D("",3),Re=d("p",null,[d("strong",null,"result")],-1),Le={class:"truncate"},Be=["src"],Me=D("",8),ct=JSON.parse('{"title":"Signature Draw · Components","description":"Draw signature like using real pen","frontmatter":{"title":"Signature Draw · Components","description":"Draw signature like using real pen"},"headers":[],"relativePath":"components/signature-draw/index.md","filePath":"components/signature-draw/index.md"}'),xe={name:"components/signature-draw/index.md"},ut=Object.assign(xe,{setup(e){const t="/assets/images/empty-img.png",a=b(),s=b();return(l,r)=>{const o=_("preview");return m(),v("div",null,[Te,n(o,null,{default:c(()=>[n(F)]),_:1}),Ve,n(o,{class:"flex-col"},{default:c(()=>[n(F,{width:230})]),_:1}),Pe,n(o,{class:"flex-col"},{default:c(()=>[n(F,{placeholder:"Draw signature here"})]),_:1}),qe,n(o,{class:"flex-col space-y-2"},{default:c(()=>[n(F,{color:"#73185E"})]),_:1}),Ee,n(o,{class:"flex-col space-y-2"},{default:c(()=>[n(F,{modelValue:w(a),"onUpdate:modelValue":r[0]||(r[0]=p=>E(a)?a.value=p:null)},null,8,["modelValue"])]),_:1}),Ie,d("pre",$e,[d("code",null,f(w(a)),1)]),Ne,n(o,{class:"flex-col space-y-2"},{default:c(()=>[n(F,{modelValue:w(s),"onUpdate:modelValue":r[1]||(r[1]=p=>E(s)?s.value=p:null),modelModifiers:{base64:!0}},null,8,["modelValue"])]),_:1}),Re,d("pre",Le,[d("code",null,f(w(s)),1)]),d("img",{class:"mt-2 border",src:w(s)||t,width:"430",height:"230",alt:"Result Image"},null,8,Be),Me])}}});export{ct as __pageData,ut as default};
